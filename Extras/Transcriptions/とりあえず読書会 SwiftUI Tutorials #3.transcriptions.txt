Transcription & Summarize : とりあえず読書会 SwiftUI Tutorials #3

はい、ではとりあえず読書会、 Swift UI テュートリアルを読んでいきましょう。 3回目になりますけどね、また一章目の、 またってことではないか、一章目の2つ目ですね、 ステッチアップを見ているところですが、せっかくなのでね、コード、 せっかくいろいろコードが出てきて、 API デザイン的にどうなんだろうみたいなところが、 いろいろ人それぞれ考えるところがあると思うんで、 せっかくなら読むだけだと面白くないんでね、 そういったコードの書き換えも伴いつつ、 いい感じのコードにするにはどうしたらいいかな、 みたいなのを考えながらやっていこうかなと、 展開からずっとやってますが、今日見ていくのは、 ここからですね、おさらいもしたほうがいいのかな、 どうね、どうしますか、これですね、2章からは、 あ、2章からじゃない、1章の1節からは、 リストにトランドマークを表示していって、 それをクリックするとアップすると、 その詳細が見れるようなものを作っていこうというね、 その中身の中で、まず、リストにたくさんデータが載るので、 今まではアードコーディング、要はコードの中に 直接情報を入れられてね、 ランドマークデータを定義して、それを読み込むための モデルデータを作って、ロード関数を搭載しようということですね。 これを見て、自分はあまり馴染みのない方だったので、 呼び方も含めてですね、 モデルデータって、そういう名前でどういう感じの意味合いなんだろう、 みたいなのをふと思ったのと、 ここは型を定義していなくて、ロードっていうね、関数をフリーな形、 まあ一般的にはグローバル関数って呼ぶと思うんですけど、 それを使ってね、定義するようという形に流していって、 ジェネリックで定義しているので、今後きっと使います予定なんでしょうね。 他のJSONファイルを読む時にも使うのかなという雰囲気を感じるけど、 このチュートリアルでそこまで行くかはわからないですけど、 まあトーキーはそんな感じで、ジェネリック使うと思うんでね。 まあそういった形で見ていくときに、 モデルデータっていうのが不思議な存在感に思えて、 前回はね、これをバンドルにエクステンションする形で搭載する。 バンドルからね、URLを読むのと同じ感じでデータを読んでるんでね。 まあそういった感じで作ったよというところですかね。 これでステップ中に入っていくという感じですが、 ランドマークデータが複数のランドマークが保存されているので、 ランドマークと呼ばばね、それをハイレッドで取り出そうという構造を書こうと。 それでモデルデータに直接持たせるのがグローバル変数か。 Swift Concurrencyが登場する前はこれでよかったんですけど、 Swift Concurrencyが登場すると、あまりグローバル変数って言わない方がいいかな。 えーと、まあいいか。グローバル変数でいいか。 そこに対して、こうやってね、コラメントを持たすのはあまり賢い持たせ方じゃないのと、 バーで定義されているのがちょっと気になりますね。 これをどこに持たせましょうかね。いきなりですが。 ここに持たせるのは微妙な気がするけど、ちょっと読んでからにしましょうか。 ステップ10、えーと、グループ、えーと、移動する前に、移動、移動ってなんだ? えーと、ノーカルバッテル、バッテル全部出てるかな。ロードランドマークス、大丈夫ですね。 はい、えーと、移動する前に、えーと、 関連するファイル、えーと、えーと、グループ、 関連するファイルをグループ化する、えーと、簡単にマネージするためにですね。 で、えーと、あ、それは次にやるってことか。 だからこれいいんだ。 だからランドマークスを、えーと、ランドマークデータチェーソンに持たせる。 ランドマークスはどこにあるんだろう。 ちょっと、まあ見てみますか。 今まで作っていることでモデルデータを読み込むという形で、 さっきのロード関数をね、バンドルに組み込むことによって、 これでいい感じにね、データをバンドルから読み込めるようにした。 で、Tutorialによるとここでバーですよね。 バーでランドマークスとして、えーと、ランドマークの配列。 これはロードする形で、ロードメソッド、 あ、ロード関数をさっきは読んでましたけど、今回の場合は、 バンドルメインからモデルデータ、えーと、 モデルデータをですね、フォーリソースで、えーと、 なんでしたっけ、チェーソン、ランドマークデータですね。 なので、ランドマークデータ、で、ここでセッションはチェーソン。 で、Az、ランドマーク、セルフ。 こっちがセルフ、こっちが配列のセルフですね。 こういうような形で書ける。 で、えーと、Tutorialのほうのランドマーク、あ、違う。 Tutorialのほうのロード関数は、えーと、 モドリッジの方によるオーバーロードをね、実装していたので、 こうやってあの、ランドマークスをね、 明記しないといけない方をね、そういった形になってましたけど、 TwiftのAPIデザイン外クライアント的に、 モドリッジの方でオーバーロードするのは、 また推論が曖昧になりがちだから、やめた方がいいですよ、 っていう指針が示されているので、 それに基づいて、今回は、Azっていうね、 パラメータを勝手にですね、追加しました。 TutorialがAzや感じでね、追加した。 それによって、このバンドルメインから持てるデータを、 このリソースから読み込むよ、この形という形で、 必須で指定できるようになったので、 これによって推論できますよね。 まあ別にどうでもいいんですけど、 このくらいの規模感だとね、まあでも、 推論、活用するとね、ロードが、なんか、 まあこういう推論するのも、まあ、 苦手意識を持たないくらいのつもりでね、 書いてあげたらいいのかな、という気がする。 こういう風に書くと、出来上がって、 で、ここで、えーと、普通だったら、 これからのSwift6だと、 これはあまりよろしくない書き方になってくるんですかね。 なので、えーと、俺は、今何も選べてないですけど、 よくよく考えると、これからはSwift6の時代じゃないですか。 せっかくだからね、Swift6にしましょう、これも。 えーと、ターゲットにして、全体的にですよね。 今回はね、これのビルドセッティングの中の、 えーと、そうだな、Swiftランゲージバージョンですかね。 Swiftランゲージバージョンが今、 アンスペシパルになってるんで、Swift6にしましょう。 これで、Swift6対応をね、一緒にやっていきましょうね。 これはすると、ビルドコンテナじゃないとダメか。 まあ、ビルドするとこのビルドコンテナも エラー出るはずだと思うんですが、出なかったかな。 えーと、エラー他のとこ出てましたね。 クラウドマークスは? ん?デベロップメントって言うのか? って言うよ。 あ、そうなんだっけ? とか、えーと、じゃあ、マネージサイニングだからかな。 まあ、いいか。 これでアカウント登録してないか。 えーと、アカウント、アカウントは、 何か用意してたかな?ちょっと、設定しよう。 あの、最近はというか、まあ、だいぶ前からですけどね。 デベロッパープログラムに入ってなくても、 まあ、ある程度まではね、あの、開発ができるようになってますよね。 昔からだった。 えーと、とりあえず、うーんと、アカウントあったかな。 確かあるんで、ずっと見ておきますね。 うーんと、開発した。 そうだね、見てますけど、えーと、SwiftAppleIDが、 えーと、用意したのがあったと思うんですね。 これか、えーと、ライト。 えーと、マイニングで、アカウント持ってますか? で、e-mail、えーと、 いいかな、これで、パスワード、これ捨てられてるね。 大丈夫だね。 パスワードを捨てられてるとは…いいね。 あー大丈夫か、これでいいのか。 こんな感じで入れて、 これで入れるかな。 あ、正しくない。 えーと、 待ってると思ったけどな、 こっちも違うじゃないか。 アカウントが、あれ、付いたっけの、 あ、付いた。 そうかな。 できた、できた。 ね、後は違う、パスワード忘れましたか。 えーと、忘れてないはずなんだけどな。 もう一回やりますか。 なんかしょうがないとこで引っかかっちゃうけど、 まああるあるですよね。 えーと、 これで終わってるでしょうね。 これで終わってるはずなんですが、 あとあれか、パスフレーズを作らないとダメなことありますよね。 そっちかな。 そうすると、えーと、どこまでいけるかな。 せっかくなら映せた方がいいじゃないですか。 えーと、サファリ、あれ、サファリが最近見つからないですよね。 まあ、他にもいるからいいんですけど。 これで、えーと、Apple ID、余計な情報出てくるかな。 まあ、このデモ用に売ってるんで大丈夫だと思うんですけど、 えーと、デベロッパーかな。 デベロッパーApple.comが検索ボタンに出ちゃった。 これでね、これでログイン、ログインこっちかな。 アプリイベント、アプリイベントもうすぐですね。 まあ、いいアカウントでこれで、あ、そうか。 パスワード、パスワード大丈夫かな。 まあ、やってみよう。 ダメだったらどうしますかね。 えーと、これで、例えば、ログインしちゃったけど、 これは、えーと、なんか無造作にやっちゃった。 無造作にログイン、あ、そうですね。 さっきのパスで、パスでというか、さっきので入ってましたよね。 これで、えーと、アカウントプロファイル予約のかな。 えーと、Apple ID デベロッパープログラムに登録はしなくてもいいと思うんですけど、 これで、えーと、体験、アスタマイズしようじゃなくて、えーと、ログインの、どうするんでしたっけね。 忘れちゃった。 うーんと、 えーと、念のためというか、これは裏で見ますが、 パスワード、いいのであってるかなというのを見とこうかな。 確かなんか、パスワード発行しますよね。 このアプリ用にね。記憶が正しければ。 そういったので、一回しかやんないから忘れちゃいますね。 よくあるお話。昔はコードサイニングみたいなのもね、リリースの時に、一回ぐらいしかやんない都合で、 毎回のように忘れてますが、まあパスワード違うわ。 えーと、では、Xコードでいきなりいけるかもしれないですね。 もう一回やってみよう。パスワード違うとか、まああるあるですけど、パスワード違うって厄介ですよね。 よくね、なんかパソコンの面倒とか見るときにね、他の人のね、パスワードわかんなくなったみたいな話になると、手に負えないところがあって、 OS、赤い、えっと、イテノスとかね、復旧なんか頑張ればできることもありますけど、そんなことするわけにもいかないしね、データ全部消えるとかあるしね。 パスワードは重要だけど、これ、まあだんだん変わってきてますけどね、厄介ですよね、パスワードっていうものはね。 パスワードなくなればいいのに、みたいなことは多くの人が思ってて、それでいろいろとね、手が入れられていってると思うんですけど、まあとにかく、まあ予感はこれぐらいにして、パスワード違ったってなんでだろうな。 メモしてたのと違ったんですよね。パスワードのメモにもいろいろ入れ方ありますよね。最近はパスワードマネージャーとかで主流になってて、そっちの方が安心かなと思うんですけど、うん。紙に書くとかね、パソコンに貼るとか、いろいろといったのはね、よくないですけどね。 番号化されてっていい感じに保存しておけば、そっちの方が安全だよ、みたいなのはね、よくありますね。さて、ビルドが通るでしょう、というか、通らないか、エラーが別のエラーになるでしょう。で、あ、でもサイニングか、サイニングってことは最後のエラーですか、これ。 バトツルッと届きたいと違いますね。なんでエラーが出ないんだ。いや、そんなことはないだろうと思って結果を待ちますが、あの平行安全系のエラーが出ると思うんですよね。パスワード、えーと、聞いちゃえね。えーと、これは、これこっちかな。 あれ、成功しましたね。失敗する予定だったんですが、ここ、ランドマークスを取って、これがパワーになってるでしょ。 で、リモートじゃないや、グローバル、グローバルで定義されているんで、ここで平行安全のエラー出ませんでしたっけ。なんで出ないんだろう。 これ、上書きしてるかな、ターゲットの方の設定で。これで、ソイフト言語バージョン。えーと、ソイフト言語バージョン、あー、上書きしてますね。 この上書きをちゃんと知りたいときは、こっちのレベルでやるとね、えーと、内緒的に今、ソイフトボーンになってますよっていうのがわかるんで、これを見とけばね、今みたいな、ミスがなかったですが、あれ、あの、全体ログにしようってしたけどね、ランドマークスアプリの方がボーンになってた。なんでボーンになってんだろうね。 まあ、デフォルトでそうなってんのか。まあ、今は、ほら、ソイフトログを想定した方がいいんで、せっかくね、Twitterをやるよりも、ソイフトログを想定した方がいいじゃないですか。 なので、ソイフトログモードでいきますけど、これでビルドかけると、このことエラーでしょ、ね。で、この時に、まあ、レッドにしようっていうのかな、2つのアイデアがあるか、メインアクター、3つのアイデアがあるか、メインアクターで保護するか、えーと、まあ、あの、統計的メカニズムを自分でやるか、えーと、イミュータブルなセンダブルにするかっていうね、そういった形をやったりと言ってますね。 まず、モデルデータはランドマークの配列を返すという状況になっていて、で、JSONからデータを読み込みますようになってますよね。JSONから読み込んだデータってことは、ここに追加していって、JSONを書き換えるとかする想定の時には、バーの方がいいと思うんですけど、まあ、今回の場合は、そこまでしなそうですよね。 与えられたランドマーク情報を元にレッドにする、レッドに元にランドマークをね、取っていく。なので、ここレッドでいいでしょう。で、思い出せずに、これでエラーが取れてしまったんですが、これでいいのか、他のエラーいろいろありますね。 でも、まずここを見ておきましょう。ランドマークをレッドにした時に、ストリートコンパレンシーのルールとして、平行安全である方についてはグローバル変数でレッドで扱う分には、ディクタリーズが起こる可能性がなくなるから問題ないという形でストリートコンパレンシーが評価をしてくるわけですけど、 つまり、ランドマーク1000Wでしたっけ?まだしてない気がするんだけど、配列は1000Wだと思うんですけど、もうダブル800Wまでですよね。ここがいいんじゃないかと思いますね。 まずは、他のエラーから直していきます。一般的には、ここをコンパイル通ってやったら、普通はどのまま行くじゃないですか。でも、エラーが出なかったので、大丈夫なのか、自分の理解と違う。 ドリフト6モードとかの言語モードのアポート、ストリートコンパレンシーって影響しないのかなと個人的には理解してたんですが、ストリートコンパレンシー、これ、コンプリートになってますね。 ドリフト5モードでストリートコンパレンシーがコンプリートになってたら、さっきのところ、結構出るはずなんですけど、出てないのはなんでだろう。今、ストリートコンパレンシーを6にしたので、エラーになって退場しましたけどね。 クリーンしてみようか。クリーンして、ビルドし直して、これでエラーが出るかどうか。出ないと思うんですけどね。出ないね。なんでだろうね。わからないね。 あれ、私のメインアクターになってないはずだけどな。 あれ、今メインアクターになった? いや、でも、モジュール作ってないですよね。アプリ作っててしかもまだ、今後のバトンの話だから。 大丈夫なはずですね。大丈夫というか、エラーが勝ち残ってるはずですね。本来ね。 うーん、これで突破していったらいいのか、どうなのか。 まあ、まずやってみようか。 おかしいな。NWじゃないんでエラーになると思うんですけど。 これは、例えば、ハイレスじゃなかったらそうなの? そんなはずないですよね。 うん、大丈夫ですよね。これも、コンパイルは通りますよね。ランタンもエラーになりますけどね。 データの、JSONが持ってきてるの、どっちなんでね。 まあ、いいか。できたからいい。いや、よくないよね。どっちがいいですか。 どっちですか。まあ、このまま行きます? うーん、エラーが出ないの気になるから、まあ、とりあえず、このまま行きますか。 まあ、とりあえず、これでランドマックスのデータが読み込めましたようになるんですけど、 このランドマックスの、ランドマックス情報の位置がね、グローバルに置かれるのがちょっと気になるかな。 グローバルに置くにしても、こんなモデルデータのところではなくて、 とりあえず、アプリケーションのところに置きたいなと個人的には思うんですよね。 アプリ全体に関係するところなんでね。 だから、アプリ全体にランドマックスアップスか。 これのね、ランドマックスアップスに持たせるって言ってもありますよね。 えー、それがいいのかな。ランドマックスでコンテンツを持つ。 これがいい気もしますか。 あれ、コピー。あ、出てきた。出てきた。 もうね、こんな感じ。 ランドマックスアップについてみれば、あの、グローバルじゃないですか。 ランドマックス情報を使って、ランドマックスに表示していくアプリということを考えれば、 ここは妥当な気がしますね。 で、それで、えーと、インスタンス変数として持たせたり、スタティックとして持たせたり。 今までグローバル変数だったのは、要はスタティック変数。 なので、ここで、スタティック、レッド。 まあ、こういう風なね、持たせ方をしたのと同じ。 意外は、名前空間があったかどうか。 今までのチュートリアルの方だと、ランドマックス。 まあ、続きますけどね、これでもね。 ランドマックスって言ったら、まあ、分かりますよね。 だけど、これが、ランドマックスアップのランドマックスって言ったらね、 このアプリで使うランドマックスみたいな感じで、分かってきますよね。 ただし、まあ、ここで思うところとして、えーと、ランドマックスが見つかってない? ランドマックスアップ、見つかりそうですけどね。 なかなか遠いんですけどね。まあ、いいか。 まあ、でも、このインスタンス変数に持たせると、 そのランドマックスアップ、埋め込み置きのランドマックスみたいな意味になって、 ちょっとまあ、広すぎる感じありますよね。 アプリのインスタンスに紐付けたほうが分かりやすいですかね。 なので、これで、レッド、ランドマックスみたいな感じにするといいと思うんですけど、 そうしたときに、まだ習ってない話になりますね。 これ、将来、何か書き換えてくれるのかな? まあ、いいか。 コンテンツビューで、ランドマックスを渡していくとなると、 えーと、どうして持たせる?間違いですかね。 だから、えーと、アット、アットステートというのかな? アットステート、バー、ランドマックス。 で、えーと、この辺か?まあ、いいか。 えーと、そして、これ、さっきみたいなぐらいの、 そういう人以外のレベルかなんですけど、自分は。 これで持たせて、コンテンツビューに、えーと、 アット、バインディング、バーかな? で、えーと、ランドマックス、そして、ランドマックス。 これは、かしこいのがちょっと分かんないんですけど、 まあまあ、ダメだったら、今後、リファクターしていくんで。 まあ、それでいいですよ。 それが、本来のコートの立ち方ですよね。 知ってることはできるけど、知らないことはできない。 まあ、ありまですけど。 なので、これでランドマークを、えーと、ランドマークを、 えーと、タラワーでランドマークスか、ランドマークス持たせてもいいですよね。 うん。えーと、さっきはね、エンバイルメントでね、持たせるみたいな、 引き継いでいくみたいなの、面白いようになってきてるようですけど、 まあ、その辺の加減が、ちょっとまだ自分には分かりきってない感じがあって、 ランドマークはまあ、えーと、えーと、ランドマークスが変わったらね、いろいろ変化する。 これ環境なのかな、どっちと取られますかね、一般的に。 まあ、とりあえず自分の知識量とランドマークは、えーと、いいかなという気持ちでやっていっちゃいますが、 やはりデータはプライベートですかね。 プライベートで持たせて、で、ランドマークでバインディングもプライベートでいいのかな。 うーんと、そこはちょっと把握ができていない。 まあ、いいや。プライベートにやってみて、ダメだったらまた考えましょうね。 うん。これでいいかな。 コンテントビュー。 あ、だ、ここね、コンテントビューで、ここもサンプル、えーと、レッド、ランドマークス、 ランドマークスイコール、えーと、バンドル。バンドルで言うのかな、そういえば。 バンドルメイン。 えーと、なんだっけ、持てるデータ。 プレビューのバンドルってなんでしょうね、そういえばね。 これ絶対読めない気がするな。 えーと、ランドマークデータ、JSONでタイプが持てる。 えーと、なんだっけ、ランドマーク。ランドマークのセルフ。 で、こういったふうに持たせて、で、コンテントビューに対して、えーと、ランドマークスはランドマークスですよ、 っていうふうに持たせて、あれだめか。 うんと、プライベート。あ、プライベートがダメなんだ。 コンテントビューはプライベート。あ、そっか、イニシャライザー使わないとダメなの。 まあ、そっか、じゃあ、パイントは普通のパーティーね。 これでコンパイルはあれだめかとか、で、どうやって持たせないといけない。 これどうするんでしたっけ、えーと、プレビューで、えーと、持たせるにはどうするんだったかな。 うんと、まあいいよ、なんかありましたよね。 まあ、バインティングに対してドットデータ、で、コンスタントティーかな、で、ランドマークス、で、ここバージョンのクリアレット。 うん、これでいいですね。なんか習ってないのいっぱい使ってますけど。 これプレビューを表示しようとした時に多分落ちると思うんですよね。ランドマークデータがあるはずがない気がして。 この辺どうなるかな。えーと、まあまあちょっとやってみますが、どうなるかな。 まあ、落ちると仮定したら、まあ、モデルデータの読み方をフォーリソース。これメインバンドルからじゃなくて、バンドルを指定して、威力、そういったのをね、バンドル指定すればいいじゃんね。 ファイルがないと出てると思われるんですよ。えーと、モデルデータと言うとで、ランドマーク、パースできなかったと言われてますね。 パースできなかった、どういうパースができなかったかは、ちょっとデバッグしないとわからないじゃない。デバッグって言うのかな。もっとちゃんとわかりそうな気がするけど、ここが呼ばれるはずですよね。 プレビューでもどうなのかな。いや、デバッグプリントいきましょう。えーと、URL。とにかくパースできなかったと言うことはデータの読み方ですよね。だからここまで来ている。 で、この時点でプリント、デバッグプリントが、デバッグプリントするのが普通だと思うんですけど、今回ちょっと普通だと思うので、自分は無作為にデータプリントをやっちゃいますけど、 せっかく勉強会ですが、読書会なのでプリントプリントを使いましたせっかくなのでね、これでデバッグ有効でコンディション条件は特に無くて、アクションとしてこれでプリントログメッセージですね。 この中でアットマークで来ると変数の内容が取れるというのがあるんで、データができた。 対応的にオプション検討ができたと。で、データと後はURLがURLと。これで表示できるようにして、僕だから止まるからやってみますか。 このオプションで自動的に継続するというのをチェックすると、デバッグのプリントが出てて、それでそのまま距離が進んでくれる。 これで何が嬉しいかというと、プロダクトをランするときにオプションシフトのパフォーマンスアクションでコントロールを押しながらコメントをあるか。 これを押すとビルドを省略できるので、ビルドが長いときあるじゃないですか。 そういったときにいいですよって話しようとしたんだけど、今回プレビューだったらあまりどうでもいい話になってしまった。 コンテンツビューでこれでやってみて、ログ出てるかな。 これは無視でいいか。これでログ出てるかな。出てない。出てないか。プレビューのログ。 もう一回動かしてみますね。これで出てないかな。出てないね。 ダメだったね。プリントしなきゃダメか。また無駄な仕様を含んでしまった。 プリントにしようがない。デバッグはよくここのルールに入る前にプリント。 データがデータ。データちょっと情報が足りない気がしますけどね。 URLがURL。こんな感じでね、プレビューをやってみましょう。 このコンテンツビュー。これのプレビューがエラリーですけど、プリント出ないね。 無視して、モデルデータ、33行目。 パース、ランドマークで固まってるかな。 モデルデータ、33行目。 そうだよね。ここでエラリーになってますよね。 これはいいですね。だからプリントが出てないですね。 ビルドをかけてみますか。分かってると思うんですけどね。 コンテンツビューで、落ちるからその前で、 出てないのかな。プリントが。 これが問題。じゃあ落とさないように。 ちょっとしょうがないからやってみますかね。 落とさないようにするには簡単で。 リターン、パラファイレス。 あれ?パラファイレスダメ? エニーになっちゃうの? あ、そっか。モデルデータだからかな。 どうなのかな。モデルデータのパラファイレス。 初期化的なリターンエクスプレッションで、 モデルデータとリターンタイプモデルデータ。 あれ、あれなんか間違ってますね。 モデルデータで、モデルデータを取って、 リソースを読んでいって、これパラファイレスか。 ちょっとなんかこれは、ゲームも 間違いしてる気がするんで確認しますが。 ランドマークロード関数は? Tとコータブルで、大丈夫ですね。 自分が勘違いですね。 これはTを返したいのか。 Tがイニシャライザー持ってないじゃんね。 えーやっぱりですね。 これイニシャライザーできないでしょ。 パースしないと返せないのか。 これやっぱりだな。 あ、どうしようこれ。 データがちゃんと読めてるかを知りたいんだよね。 ただそれだけなんですよ。 こうしちゃえばいいのか。 えっと、プレビュー。プレビューどうしよう。 なんでプリント出ないんだろうこれ。 こんなもんか。executeとプレビューと 分かれててプレビューですよね。 で、ここまで来てて、 フェイタルエラーで落ちたからいけないのかな。 で、ここで要請終了。 ちょっと強引ですけど、これをオプショナルにして、 これをオプショナルで書いてみますね。 いやでも、こんなことしたっけな。 っていうすごい違和感を覚えるんですが。 こうすると、モデルデータを取得して、 プレビュー。 ここでエラーになってますよね。 これオプションだからこれはバランスにするか。 ここでエラーできますよね。 ランダムエラー極端のことには ならないのかなと思ったけど。 ビルドエラーね。ビルドエラーでここランドマークス。 あ、そっか。ここね。 これはマークでいいや。 そしてプレビューが動くのかな。 これで動かなかった。 ニル。ニルで動きませんでしたね。 強制アンラップランドマークアップスイスト。 さっきのとこだ。 それが動こうとした。ランドマークアップが動こうとするんですか。 強制アンラップもまだ早かったですね。 これを言わない。 こういうことね。結構よくコードレビューしてると見るんですけど、 これは絶対ダメです。絶対言い過ぎた。 まあダメですよね。これはね。とりあえずね。 労働的な方からパラになるってね。 友達の極まりない感じするんで、 こういったのはちょっとよく考えた方がいいですね。 とにかくプレビューできた。表示すごい変だけどできた。 で、プリントも出ましたね。 ランドマークデータジェイソン。これも取れていて。 データもなんか出てますね。 あれ、なんでだろう。なんでパワー数失敗したってなったんだ。 データ。ちょっとデータちゃんとテキストで見ましょうか。 不思議ですね。モデルデータのところでデータを表示するところ。 これでデータを。 リンクか。 リンク、データ、データ、エンコーディング、UTF-8ね。 データをプレビューできるでしょう。 オプショナルになっちゃった。 今回はこれでコンテンツビューを見る。 この時のコンテンツビューのデータはどういう表示になっているか。 どういうデータになっているかというのは、この情報を見ると。 できているのかな。 データは取れていますね。 データは当たり前か。 これをパースできなかったという点だ。 だからデータはちゃんとメインボンドルから読んでんだ。 プレビュー。面白いね。 どうだったんだ。そうしないとどういうわけか。 悪いのかな。 悪いかわかんないよ。 とにかくメインボンドルからちゃんと読めてるよ。 というのが個人的に衝撃的だったんですけど、まあありがたい。 じゃあメインボンドルからデータを読めています。 となると完全にパースがおかしいですね。 これはもういいや。 このブレークポイントもいらないや。 それでモードリッジがオプショナルじゃなくてトライリですね。 その上でモードリッジの方がオプショナルじゃなくていいですね。 そうするとコンテンツビューがちゃんと自然に書けるようになりますよね。 これはプレビューをオプショナルでとても大事なんでね。 というわけでアプリケーションの方がオプショナルでとっても大事なんでね。 そしてあとはモデルデータというかコンテンツビューがモデルデータでいいや。 これで何でパースに失敗するのかですね。 要はリソースをパースでエラーで、このエラーはパースエラー。 もうちょっとやりますか。例えばキャッチレッドエラー、まずデコーティングエラー。 デコーティングエラーにするともうちょっと細かい情報が来るんじゃないかなということでやってみます。 こうしたときにエラーは何が取れるんでしょうね。 ローカリズム、ディスクリプション、エラーディスクリプションとかいろいろあってこの辺は標準的なエラーで。 例えばデコーティングエラーはコンテキストともってそこに見えますよね。 これ一本フォルディングアウトしたほうがいいかな。 この前設定で見たやつですけどテキストエディティングのフォルディングリボンをオンに手を置くとこれでこれね、閉じられるわけですよね。 そうすると当たりやすいですよね。コメントまで閉じられちゃいますからね。 タイプ見せましちゃった。ケースか。 これでケースによってどういう状況かわかりますよね。これでいい感じに予定ができるはずなんで。 ケース、エラーイコール、デコーティングエラーにして、ツイッティ、エラー、ケース、 えーと、テキストだとか。テキストはそのままプリント、まあいいか。 データコラップティップで、えーと、何だっけ。コンテキストか。コンテキスト、そして、 でもなんかデコーティングエラーもうちょっと細かく勝手に出た気がしますけどね。なんでだろうな。 えーと、うん。パースに失敗して、もう一回ちょっとやってみますか。先にね。 やってみるって言ってもプレビューで落とすだけなんですけど。 それで、えーと、こっちかな、こっちかな、エラーで、まあ本当にパースできなかったんだと思うんですけど、えーと、 あ、だって、えーと、パースデータズ、あ、リズム出てないですよね、やっぱエラーになったね。 これはローカライズとディスクリプションだとどうなるんでしょうね。えーと、 これで、あ、できた。これちゃんとテキスト書いたほうがいいってことですかね。 まあいいか。えーと、あ、リズム出ないな。リズム出ないのかもしれないですけどね。 とりあえずね、ローカライズと両方に一応書いてみますか。 えーと、これでどっちが大まかにエラーが出るかどうか。 これとても出ないね。グッていうのがあったのか。 あとすごい半信半疑で、どうだったっけなーっていうね。 ローカライズとディスクリプション。 まあこの辺はちょっと、言っちゃったらいいんですけど、 cannot forfeit、パースって、あとは、えーと、cannot forfeit、赤だと分かんないように、 これなんかあんまり何の話ってなっちゃったらダサいんですけど、 もうちょっとね、これでやってみて、おかしいな。 えーと、エラーで、1のことですよね。えーと、こっちのデータ、エラー、こっちで出てくれてますよね。 あっちが1だからこっちね。 オッケー、そっかこっちが出てきたのでちょっと書いていきますが、これで、レッド、ディスク、リズムでいいか。 リズムイコールで、ちょっと振り分けていきますが、これで、もうここで読めることがあったから読まないのやめて、リズムでこうして、 とても余計なことやめて、これでリズムをちょっと出していきますが、おかしいな、そんなに難しいことだったあの子。 で、リズムとして、タップ、ラップ、ティップ、えーと、それで、で、コンテキスト一応出しといてみますか。 今回は特にいらないと思うんですけど、で、他にケースとして、タイプミスマッチ。 で、エラー、えーと、この方はタイプミスマッチのspectiveタイプかな。それで、レッド、コンテキスト、で、タイプミスマッチ、えーと、in、コンテキスト、で、spective、で、spectiveタイプ。 まあでも、これだと思うんですよね、今回登録すると、おそらくね。で、あと、value not found、それは、れっと、えっと、value not foundのタイプってなんだろうね。 ちょっとよくわからない、えーと期待するか、なんなん、だろうかな。で、レッド、コンテキストとして、で、それで、value not found、in、コンテキスト、で、えーと、タイプ。 タイプって意味わかんないですが、まあまあこれにして、あともう1個あるから、えーと、value not found、これね、in not found、で、レッド、in、で、レッド、コンテキスト、で、これは、えーと、in、で、ここに出しちゃいますかね、えーと、key、not found、in、コンテキスト、こんな感じですかね、うん、これでいいですね。 えーと、ここへん玉、そうするとここ玉。で、こうしてあげて、これでフェンサルエラーをdeleteで落とすわけですが、この時に詳細なのが出てくると思ったら何も出てきてないのはどういうことだ。えーと、あれ、情報ってのが無くなっちゃった。 どういうことだろう、えーと、これでフェンサルエラー、スキーマーク、あ、これビルドエラーか、ビルドエラーですね。ビルドエラーが何で起こっているのかは、まだ全然ダメらしい。 unknown defaultか、はいはい、unknown defaultね。このとこのunknown defaultが何かというと、他のモジュールで提供されている劣化型は、候補がいくつか決まってますけど、将来それが増える可能性がある。 将来そのライブラリーの方でね、候補が増えると、これの今作っているアプリはビルドし直して何もかかわらず、候補が増えちゃうと、処理するケースが無くなっちゃうんですよね。それを嫌ってと言うんですかね。 もうらはしてるんだけども、仕様が固まっていない劣化型なので、ここで、あの、将来、あの、分からない劣化型、それが来た時のエラーハンドリングも想定しておかないといけない。 エラーハンドリングじゃない、ハンドリングをね、想定しておかないといけない。それでこういったものが用意されていく。で、unknown defaultで、unexpected error。 エラーもこんな感じでね、書いておく。あれでいいですね。で、ビルドがちゃんと通りになって、プレビューも動くようになって、ってことで何が出るかですね。まあ、タイプミスマッチだと思うんですけど。 えーと、あれでの、あれ、アルフレッド、あの、ロパーズ、アリムが待って書いた、リーズンは、リーズンが無いですね。えーと、リーズン、あれここは、えーと、リーズンでしょ。リーズンは何らかの文字になってますよね。 一応本当にここ来てるのかなということで、ビッグマーク入れてみますが。 無視して、もしかしてこれ複数行無視してるだけかな。あ、そうかもしれないですね。これ、コンソールに出てたりして、えーと、出てない、出てないですね。 念のため、もう一回やってみますけど。あ、これ複数行か、単純に。あー、やっぱいいですね。よく書いてる画面だですね。 おー、プラッシュログ、プラッシュログが出てたのかな。うーんと。 プラッシュログを表示しますね。 プラッシュログを見ると、えーと、こんな感じで書くことができないなら、えーと、僕が出てくるかな、メッセージ。 えーと、プラッシュログでブレイクポイントがあるけど、 うーん、あ、この辺でいいか、メインで、あ、違うか、メッセージ出てくるかな。 この辺に、なんかそういうの出てこないかな。 検索はできるかな。できないかな。 うん。プラッシュログあんまり見慣れてないね。 えーと、自分がね、えーと、まあまあ、ここか。 私はそうしたら、あ、まだ検索がね、出てないですね。 いいか。2行だとダメってことがわかったので、これ1行にすればいいというそれだけなので、今回はそうしましょう。 こだわる、ね、そんな細かくこだわるほどでもないんでね。 わかんないかなって言われて、ね、うん。 タブを動かすとき、実際にね、動かして落ちるときは、ちゃんと複数行ってると思うんで、 今回はこれだけでいいか。 おー、できた。えーと、キー、あ、キーが違う。 えーと、イメージ、あーとかイメージが見つからなかったようだ。 あー、ミスですね、これ、勝手なことをやったためのミスですね。 なので、そうすると、直していかないといけない。 だから、えーと、ここのランドマップのコードですね。 これで、えーと、JSONはイメージネームなんですけど、イメージ型にしちゃったんで、 ココですね、これでイメージネームを読もうとしないで、 イメージを読もうとしたので、このキーがないから偉大ですよっていうことになったので、 これをやるには、えーと、コーディングキー、ストラクト、コーディングキー、コーディングキー、いいかな? で、コーディングキー、このプロトコル名とか多分すごいヤバいなと感じるんですけど、ね、コーディングキープロトコルで、コーディングキー、まあ、こういう、コーディングコーダブルの勘違いになるからしょうがない。 ストラクトじゃないや、しかも今回、インナムですね。 インナムで、これでケースとして、IDと、えーと、8×8、ダブルコードだからね。 IDと、えーと、ネームと、パーク、うん、パークと、ステートと、あと、ディスクリプションと、ディスクリプションと、イメージ。 で、このイメージが、イメージネーム、原作ではね、デザインはね、という感じでね、これとケースで、えーと、コーディン、えーと、コーディネート、コーディネートですか。 で、これで、ストリングのローバルが出ちゃったけど、これは、ローバルとかストリングのコーディングキー、これですね。 で、コーディングキーは、どこから入れる必要が全くないので、プライベートでですね、これ出てきた。 で、ほら、プレビューもちゃんと動くようになって、これでロードされてると思うんですよ、しっかり。 ちょっと大きめの画面で見ておきますかね。 えーと、ローバルは、えーと、ローバルができない。 えーと、じゃあ、ちょっとこっちのコードを消して、出ていいかな。 うん、そうね、タートルロックで、えーと、あ、そっか、まだ、アドコーディングだからね、JSONから取ってるわけじゃないんで、あれですが、ま、とにかく、読めた。 で、ですね、あれでね、うん、大体、いい感じにできましたという、ステップ10ですね。 うん、はい、じゃあこれで、ロードがいい感じにできたのと、データを置く場所をアプリケーションにね、持たせることができたという感じで、今のところはまあまあ、いい感じかなという気が個人的にはするんで、次行きましょう。 えーと、ランドマックスをデータとして持たせることができました。 で、次へ行く前にね、グループ化しましょうというお話ですね。 えーと、既存のアイテム、これらをね、さって、グループ化していく。 セレクトして、ビューズファイルからニューグループフロムセレクション、上のを選ぶ。 何を選ぶんだこれ、えーと、あれ、えーと、ステップ11、コンテントビュー、サークルイメージ、アンドマップビューをビューズグループに入れようと。 コンテントビューとサークルイメージね、アンドマップビューね。 で、ランドマックスデータをリソースグループに入れて、あとはランドマックスとモデルデータをモデルに入れようと。 うん、まあそんな感じのやってみましょうか。 えーと、サークルイメージとコンテントビューと、えーと、アンドマップビューか。 これらを、まあ右クリックでいいかな。 で、これで、ニューグループあるかな。ニューファイルじゃないな。 えーと、ニューフォルダだ今ね。ニューフォルダフロムセレクション。 これを選んで、ビューズ。で、次に、えーと、ランドマックスとモデルデータかな。 えーと、ニューフォルダフロムセレクションで、モデル。 モデルだったっけ?2つだったっけ? えーと、まあどちらもいいですけどね。 エンディングを分けるだけなんでね。 どっちでもいいかどうでもないか。 インテルモデルグループですね。 あとはリソースに、えーと、JSON。 ランドマックデータJSON。 それを、えーと、セレクションから、リソース、これね。 ここまで来たときにコーディネートとイメージ。 この2つ、自分で作ったやつですけど、これらはモデルなのかな。 自信がなかったりするけど、モデルに入れときましょうか。 今回の画像どうなってる? えーと、作ってないのか。 あーそうか、モデルデータの中に入れてるのね。 ランドマックの中にね。 じゃあこれでいいでしょ。大丈夫な気がする。 はい、グループを分けられました。 じゃあそうしたら、あとは、セクション2に入っていきますかね。 ロビューを作っていこうか。 作っていくけど、これ次回でいいですかね。 今日はこれくらいで終わっておきますか。 ざっとなんかおかしいとこないかなっていうのも、見ておこうかなと思ったんですが、 それともこれ自体をどうとしておけますか。 ここまでね、あのエラーは出なかったんですけど、なんでだろうねっていうのがすごく気になるのですが、 えーと、まずランドマックっていうデータね。 これはIDとか、あ、こっちかな。IDとかネームとか、ちょっと分かりにくいね。 このコーディングキー、これちょっと外に出しておきますか。 まあ別にいいんですけど、出さなくて。 プライベートエクステンションでランドマック。 これに対してレッド型をこうやって持たせて、これでいいのかな。 もうすぐちょっとレビュー動くかちょっとしておきましょうか。 大丈夫だと思うんですけど。 大丈夫ね。これでよくて、これでいいようなんですが、要は、ランドマックデータは基本的に、 これを丸と一個のデータとして扱って、細かいことを起こんないんで、 基本的にこれ全然ダブルですよねって思いました。 どうかどうかなんでうまくいくのかなと思ったら、これがインターナルだから、 これパブリックにするとコンパイルエラーになるわけですよ。 期待するところで、期待するところが今しなくなっちゃった。 アプリケーションにラティックじゃなくて持ってっちゃったんでね。 エラー出なくなった。例えばこれがグローバルに対してレッドでランドマークズとやって、 これがランドマークズで今回ちょっと空っぽにしますが、これエラーになるわけですよ。 あれランドマーク、ランドマークか。 これはランドマークが平行安全じゃないよっていうエラーが出てくる。 これを見せたかったんですけど、これが出るためには、 このランドマーク型が平行安全ではないという状況にならないといけなくて、 その時にはこのランドマークがセンダブルだとさっきのが上手くいくようになるんですけど、 センダブルにするためには、ここでセンダブルに準拠させないといけないんですけど、 パブリックじゃないときは構造体は必然的にセンダブルになるよという、 そういった決まりがあるから大丈夫だったんですね。 今回の場合はパブリックを付けてみたことによって、そうするとランドマークがセンダブルか否かというのを明記しないといけないという健康指標があって、 この内容ですね。なのでこのパブリックを付けなければ、 このさっきの従業名が問題なく通るんですけど、 これとしておいて、とにかくランドマークと考えてもセンダブルで作ろうかなという気分なんで、 センダブル、こんな感じで平行安全にしておくというのも悪くないですよね。 そうした時に、この方もそうですよね、センダブル。 あと自分で作ったイメージ、なぜか色が変わってないですけど、 このイメージも自分で作ったもので、これも中では名前しか持ってないのでセンダブルで良さそうですね。 こんな感じでセンダブル。これで平行安全対応が、今のところ思い浮かぶ範囲ではできたという、 そういった感じになるかな。 あと今まで書いててうちも違ってて良かったところですけど、このランドマークがあるじゃないですか。 これランドマークという形で使うことが多いですよね、今回のアプリはね。 これを踏まえると、タイプエイリアスでランドマークとして、ランドマークの配列として定義しておく。 そうすると色々勝手が良いはず。 例えば、ランドマークの配列、今まで書いたところいくつもあると思うんですけど、 今書いたものの他に、ここですね、ランドマーク。 この時にランドマークとして書けるようになって、 これでもうランドマークの配列、少なくともコレクションだって想像を作ったじゃないですか。 こっちの方がスマートですね、ここもそう。 ランドマークのセルフという感じでね。 ここもそう。 これでなんかスッキリしますね。 ビルド打ちをかけてみますが、ビルドもちゃんと通るし、OKですね。 こんな感じで、ひととり気持ちの良いコードが書けた気がするので、 次ね、エクション2のクリエイターサロービュー、これをやっていこうかなと思います。 はい、じゃあ今日はこれで終わりにしますね。 ありがとうございました。
