Transcription & Summarize : とりあえず読書会 SwiftUI Tutorials #22

はい、ではとりあえず読書会を始めていきましょう。 えーと今日は引き続きね、見ていくんですけれども、 前回なぜかね、あのちょっとリアル通りとはもはやいかなくなってますけど、 いろいろリファクトアイングしながら、自分にはいちおそってね、やっていってる中で、 まあそれが、なんか、うまくいかない、しかもバインドがうまく反映されないみたいなね、 なんかそんな状況になっていて、その原因は特定していかないといけないところではあるんですけど、 まあ何にしてもね、途中経過で、まだ反映が大きくつかな状況なのか、 それとも自分の行動のミスでね、ダメなのかっていうのがちょっと半端な段階だと、 まあやっぱり自分のことが悪いんじゃないかなとは思うんですけど、 まあそういったのがわからないところは確かになるんでね、 まずはね、一通り落ち着くところまで、もういくつかのステップを進めてから、 いろいろとね、見ていこうかなと、原因がどこにあるのかっていうところをね、 まあそんな感じで進めていこうと思いますが、 まあだからね、どっちかっていうと、この今やってる本を読みながら、 いきなりリファクトアイングしながらやっていくっていうのはね、 遠回りと言えば遠回りですよね、うん。 どっちかっていうとあんまり良くない、 また問題が起こったときにどこに原因があるのかわからないっていうね、 まあよくありがたいなわけですよ。 行動、あのこういった練習のときじゃなくても、 ソフトを開発してるときに、あるところを直さなきゃいけない問題があったときに、 他の面に留まったところも一緒に直してやると、 どっちか原因でね、その後上手くいかなかったときに、 その、言い分けるのとかがね、すごく難しくなるんでね、 あんまりよくなっちゃいけない、余計なことしないっていうのが本来で悪いんですが、 まあこうやってね、壁にぶつかりながら色々やってるのも学習としては、 悪くないんじゃないかな、遠回りだとしてもね、 まあそんな感じの気持ちで、自分はやっていきますが、 まあまあ、これを見てね、賢いと思うか否か、 まあ賢くはないかな、まあでもそれをね、 良しとするか否かは各自、考えてもらえれば十分なのかなという気がする。 さて、じゃあ見ていきましょう。 とにかくステップ3まで行って、 で、ページのね、ポップルボタンを配置はしたんですけど、 それを押してもページを移動してくれないよっていう状況になっちゃってるっていうね、 そういった状況から、まあまずはUIキットがね、 そういったUIのステータスの連携っていうか、 ネットの連携をね、やってるところでその連携がうまくいってないけど、 まずはちょっとステップ進めていきましょう。 次のステップ、テキストビューをカレントページプロパティと一緒に追加して、 追加してか、これをやってないのかまだ、 とかなんか自分のコードがまずい、ページビュー、 まずやってるのがページビューコントローラーにバインディングですよね。 で、それで次のステップとして、ページビューにカレントページですよね。 で、その次ですよ、この次、ああいいですね。 ステップ4は、テキストビューにカレントページプロパティを追加して、 このプロパティの値がどうなるかを見ていけるっていうことらしい。 これは助かりますね、ちょっとね。 で、オブザーブ、スワイプしたときに、ページをスワイプしたときに、 この値は変化しないって書いてありますね。 ちょっと見てみますか。 つまり、ページビューを置いた後に、 VSTAPでページビューコントローラーと一緒にページビューのカレントページ置いてますね。 まずそこでやっていきましょう。 ページビューの中に対して、ボタンを配置したコントローラーですね。 今はね。 それで、ページを配置した後に、 何スタッフでしたっけ、VSTAPかな? もう書いたことではないですが、VSTAPですね。 ボタンはとりあえず置いておくとして、勝手に作ったやつね。 これは置いておくとして、ここにVSTAP。 で、VSTAPの中にラベルを作るかな? また忘れちゃった。 ラベルカードはどっちでもいいですが、 ページビューコントローラーとテキストで、 カレントページ、ページ、そしてリンガのカレントページで、 ページナンバーにしましたね、これね。 で、それで、こうやってVSTAPのスペックトレートでカレントページ出ましたね。 この状況で、これを見ていくと、 もうちょっと広げたいとはな? どうだろう? まあいいか。 えーと、どこ? はいはい。 うん、いいですね。 これでも変わらないと書いてありましたよね。 うん。 変わらないですよね。 これボタン押しても変わらない。 あれ? 今1個エクロールしましたね。 で、ページが動いていきますね。 なんだろう。 1個戻って押すと、 あ、動いた。 これを? あ、違う。 あ、そういうことですね。 はいはい。 うん、なるほど。 とりあえず、分かった。 えーと、今のところね、 ページがスワイプしても動かないよってことで、 連携がまだうまくいってないよってことを言ったそうですね。 結局、なんだこれ。 えーと、 Append InterpolationがDisplicated。 えーと、Localized String InterpolationはUnlocalized。 えーと、 Debug Description of This Type of Value。 えーと、 あと、 Localized String KeyのString Interpolationを使うか、 または、 Localized String Resource。 えーと、 Localized String Resource Compatible。 そんなのかな? 知らなかった。 それを選挙させるの? あ、その代わりに入れてたのかな? えーと、Rootのナンバー以外だったのかな? カレンドナンバー? ページナンバー、自分で作ったのかな? 選挙してるんですかね。 これの、Debug Stringがどこ行ってますかね。 これをちょっと無くしてみますか。 これを無くしたところで、別になんもならないですよね。 うん。 とにかく、Append InterpolationがDisplicatedだって。 Localized String Interpolationは生成するUnlocalized Debug Description。 Localized String Key String Interpolationをサポートするか、 イニシャライズ、Localized String Resource。 Localized String Resourceですかね。 ちょっとやってみますか。 インポート、SwiftUI。 その中で、エクステンションのページナンバーで、 Localized String Resource。 この敵を見てみますかね。 ファンデーションの中にありますね。 ファンデーションの中にあって、iOS16とか。 あれ、あれですか。どっか。16? 16って言ってた。 1個前くらいかな。 ローカライズストリングリソースは、コータブルで。 コータブルで、コータブルで、 Custom Localized String Resource Convertibleで、 Expressible By String Interpolation。 それに準拠しているものを結構要求してきますね。 これで、キーとデフォルトバリューと、テーブルと、ロケルと、ファンドル。 この辺が必要になってきて、 ファンドルディスクリプションというのは、Main.Core.Class.Cut.URL。 で、イニシャライザーがいろいろあって、 その中で、String.Literalでのイニシャライザーもありますね。 これをStringのLiteral Convertibleのことか。 既定の実装はどこにないのか。 これを本当に実装するのかな。 違和感というか、知らないだけですけど。 Localized String Resource Convertibleは、 Localized String Resourceというのが、 Localized String Resourceというのは構造体で、 あ、それを返すのか。なるほど。 Localizedが、昔確かに弱かったですよね。 裏側で勝手にやらないといけなくて。 それが、これによって統一的なインターフェースで、 情報を渡せるようになったということですかね。 Localized String Resourceで、 これでString.Literalからも返せるって言ってたけど、 これはとても良いか、今回はね。 イニシャライザーの中でインターフェースのLiteral、 この辺はアメリカン系なんですね。 あと、キーとデフォルトバリュー、この辺ですね。 イニシャライザーはそれぐらいか。 キーとデフォルトバリュー、この辺でいいですね。 キーとして、ディスクリプションですかね。 ディスクリプションを渡して、 スタティックストリングと言ってるな。 スタティックストリングをドローとしている。 キーだからですかね。なるほど。 キーは確かにLiteralじゃないとダメですね。 なので、これで、ページナンバーとして、 キーだからこうしておけますか。 デフォルトバリュー、ローカライゼーションバリュー、 ストリングのローカライゼーションバリュー。 なんか知らない方がいっぱい出てきますね。 ストリングのローカライゼーションバリューってなんだ。 一方 この辺はバリューでストリング。でも普通ストリングですよね。 これでディスクリプションを転がしてあげるという形を取れば、 これで結構手のくなったのかな。 そんなことないか。 カレントページナンバー、これはどういうことだ。 この警告が今ので良かったんじゃないのかな。 これはテキストの方のストリングインターポレーションになるから、 これの定義をたどって、この定義のローカライゼーションとストリングキーですよね。 これでストリングインターポレーション描画が可能になっていて、 この中でローカライゼーションとストリングキーでいろいろとやっていくのか。 それでちょっと思い出した気がする。 カレントバリューですけど、これがローとかにもローにもならないか。 ローはないか。 そうすると、ストリングとかもないよね。 きっとないと思われる。 そうすると、テキストの方にバーバーティムって書いて、 これでストリングを取ればOKですよね。 OKですけど、これじゃなかったときに、 例えばイント型レッドバリューイコール10とかやっといて、 こういったようなのをここに入れたとき、 それは警告に乗らないのかな。 そっちは乗らないんだ。そうなんだ。 そのときこれが何に呼ばれているのか知りたいけど、分かんないね。 いいか。どうか。この辺気になるな。 もう一回例えますけど、これのテキストの、 イニシャライザーの方でローカライズとストリングキーのインターポレーションでしょ。 なので、これのインターポレーションが関係してくるのは、 これじゃないね。 ストリングインターポレーションは、 ストリングインターポレーション、あ、これか。 これの方ですね。ローカライズストリングキーの ストリングインターポレーションの定義を見ると、 AppendLiteralでストリングを入れられる。 AppendInterpolationでインターポレーションストリングを入れられる。 Substringも入れられる。あとはSubjectがあって、 Subjectがフォーマッターで表現できるときですかね。 Subjectがあって、それに対してフォーマッターを 指定するというやり方といったのと、 あとはインターポレーションのサブジェクトが フォーマッターがニルのときで、サブジェクトがNSオブジェクトのとき。 あれとインターポレーションでインプットが フォーマットインプットでフォーマットFを取るときと、 あとはインプットフォーマットと、 バリューがフォーマットスペシフィアブル。 アンダースパイなので、あまり気にしなくていいかなと思うんですが、 それとあとバリューで、Tとあとスペシファイアーでストリング。 フォーマットスペシファイアーというのが、 これはアンダースパイだ。 あとはAppendインターポレーションでテキストも入れられるし、 あとはAppendインターポレーションで アトリビューティブストリングを入れることもできると。 あとこれはアトリビューティブサブストリングなんだ。 それとインターポレーションでTで任意のもの、 オブジェクトT。 これはディプリケートですね。 この辺はこれだ。なるほど、ここで引っかかったんですね。 任意のものは入れるわけにはいかないよということになっていて、 それによって、もうちょっと細かいプロトコルで説明されたもの、 フォーマットをちゃんと指定するかとか、 あとはフォーマットが基本的には、 サブストリング、Appendインターポレーション。 ストリングがあって、ストリングを渡せば問題なかったんだ。 なるほどね、それでいいんだ。 そしたらそれでいいですかね。 なるほど、そうするとここで、 要はディスクリプション渡せばよかったということになるわけですけど、 ちょっとでも味付けしたいですね、これね。 そうすると、パレントページナンバーを渡したい気がするので、 素直にね。結構これでも悪くないですね。 ちゃんと対応させる必要が出てきてね。 これで、TriffとUIはいるんだったかいらなかったんだ。 わからない、今解き消してみよう。 それで、ああいるか。これはかまわない。 今回は使わない。 Extensionで、Localizedストリングキーの 中のインターポレーションが無いから、やっぱりUIいるのかな。 ImportTriffとUIね。 そして開けて、その上でストリングキーのストリングインターポレーション。 これに対して、Init、ストリングインターポレーションは Appendインターポレーションだったかな。 Appendだったかな。 Appendインターポレーションだったと思うんですが、 Appendインターポレーションですね。 ミューティングファンクか、ミューティングファンク、 Appendインターポレーションで、ここに対して、Pageナンバー。 そして、ページナンバーを渡すという風にして、 Pageナンバーという風に渡してあげると、 ここで結果が出なくなりますね。 こうした上で、ページが表示されるようになって、 でもまだこのページは送られないよっていうことを言ってましたね。 やっときた。これで再びエトリアルに戻って、 ここまでができた。 で、オブザーブ、スワイプ、ページをスワイプしても、 バリューは変化しないよってことを観察した。 ここまでですね。次に、PageViewControllerで、 コーディネータをUIPageViewController.jgetに消去させて、 それで、PageViewControllerのDefinitionAnimating、 PreviousViewControllerTransformationCompletion、 TransitionがTransitionCompletedというメソッドを実装してあげる。 UiとUiはこのメソッドを、ページをスワイプの アニメーションが終わった時点で呼び出すので、 インデックス、CurrentIndexViewController、 CurrentViewControllerのインデックスを見つけて、 アップデート、バインディングにアップデートできるって言ってますね。 バインディングにアップデートが今できるのか、 ちょっと分からないがやってみましょう。 とりあえず下のほうですね。 これでコーディネータの中で、 UIPageViewController.jgetを実装して、 ここですね、これとコピーしておこうかな。 コピーして行動を読んでいくって形を取りましょう。 なので、まずはPageViewControllerですね。 PageViewControllerの中で、この中のコーディネータ。 コーディネータに対して、デリゲートを載せていくけど、 コーディネート分離したっけ? えっと、ここにいないように見える。 あ、いたいた、いましたね。 それで、ここにデリゲートを搭載していくと。 あ、間違えた。 UIPageViewController.jgetね。 これも搭載していき、メソッドとして、こうかな。 これをコピーして、ここで合ってるよね。 アクションとして、合ってますね。 そしたらこれで、PageViewController.jgetで デリゲートアニメーションがフィニッシュできて、 それで、UIPageViewControllerが分かってきて、 それでトランジションをコンプリートかグラフで帰ってきて、 で、コンプリートがあったときに いろいろやっていくよっていうお話ですね。 コンプリート以外は特に今回何もしないのを踏まえるのと、 あとコンプリートするまでの間は、なんかね、 この子なんかするつもりもなさそうな気がするんで、 これカードでいいんじゃないかな。 カードコンプリート、エルス、リカウンでいい気がする。 ドッキリクジット。で、なんかここが足りない。 えーと、これが、この辺ちゃんと提携するとここか。 えーと、ここが、この辺の配慮がよろしくないのかな。 ちょっと一回、省略というか、 回答無くしてみますね。 別にこんなことにしなくていいんですけど。 ちょっとね、インデントが狂ってると、 なんか大丈夫なのかなっていうね。 そんな感じ、心配になってくるんで、 これで一回インデント合わせてあげて、 あ、大丈夫。これでいいですね。 で、それで、このデリゲートメソッド。 この中に対してコンプリートで、 ドッキリクジットしてしまった方がいいでしょ。 ここはね、きっとね。で、それで、こうやって、 えーと、あれ、なんか足んないな。 うーんと、ドッキリクジット、ドッキリクジットですよね。 メソッドの何かここが足りないですよね。 これが一個いらない感じかな。 で、これで、ここが、インデントが狂うのは、 あ、これイフ文か。あ、なるほど。 コンプリートで全部やってたんだ。 あ、なるほど。コンプリートだった時に、 とりあえずドッキリクジットにしちゃったから、 これであとは、イフ文で、visibleControllerが、 pageViewControllerのViewControllersのファーストが取れて、 かつそのインデックスが取れた場合って言ってるのか。 えーと、インデックスを、visibleController、 Controllersの中に、 visibleController、ViewControllersの中に、 visibleControllerが、とかないとも言えないのか。 あ、ないとも言えないけど、これはとりあえず、 順番にガードしていきましょう。とりあえず。 あとで、visibleController、visibleViewControllerが、 pageViewControllerの、 pageViewControllersのファーストですよね。 これがなかった場合には、 何も表示していないだろうということで、 このときどうしちゃいましたっけね。 何もなかったときにエラーにしてんのかったかな。 えーと、想定外。えーと。 これが、 pageViewControllersのナンバーに、 なかった場合はニルが、ニルが入ることにしてるから、 そういう場合は大にあり得るので、これもリターンで、 何もなかった場合には、何もしなくていいかな、 ということでいい気がしますね、おそらくね。 で、それ以外だったときには、またね、インデックスを、 コントローラーの中から取っていくことになりますが、 これ何か作るのかだっけ。 えーと、コントローラー、コントローラー、えーと、 何作るのかだっけ、えっとね、 pageNumberとかインデックスとかで、 コントローラーforPageNumberが、あれしか作ってないかな。 で、コントローラーの中から、もうね、 コントローラーインデックスでいろいろやってる程度で、 作ってないか、これは自分でやんないといけないのかな。 えーと、表示中のコントローラーが今何ページ目にいるかって、 結構なんか、ローレベルのこと調べてますね、これね。 なんか、違和感覚える。 コントローラーズの中の、ファースト、コントローラーズ、 あとコントローラーズってやってるけど、名前変えたんじゃなかったかな、 ページコントローラーズに変えてますよね、うん。 で、pageControllersで、まあ、一応変えておきますか、pageControllers。 で、それのファーストインデックスを、visibleViewController、 そうね、visibleControllerのインデックスを取って、 インデックスが手に入らないとなったら、 パレントのページナンバー、これに対してインデックスというか、 えーと、なんだっけ、ページ、ページナンバーロム、 インデックスですね、インデックス、でインデックス。 こういう風にね、してあげると、いうことでよくて、 ただしこれが正しいものでもないか、カードレットにして、 で、見つからなかった場合ですね、 見つからなかった場合は、この場合はちょっと地味的なエラー、 このエラーの言い方、間違えましたけど、 プログラム上のミスは、ユニバーサルエラーだったかな、 で、それでフェータルエラー、 復旧しようがないエラーの時にはユニバーサルエラーと言って、 フェータルエラーで表現して、そもそもプログラミングの ミスというようなエラーを示す時には、 プレコンディションフェーラーを使って、 ロジックエラーという証拠をするんですね。 で、これで、今回の場合は、パラタイム上のエラーで、 地味的なものに入ってくるんで、 パスインデックスが、VisibleController、 ページビューコントローラーの中に、 そもそもなぜか表示するはずのないViewControllerがね、 渡ってきて、見つからなかったような時には、 フェータルエラーですね、これね。 で、そうすると、予期しないViewController、 ページビューコントローラーかな、 ページビューコントローラーが、見つかりました。 えーと、そうね、表示されていますかな、 表示されていました。 なんか変なエラーメッセージに見えるけどね、 で、これでVisibleViewController、 こんな風に、Visible、Visible、 VisibleViewControllerね、 こういう風にして、エラーを返し、そうでなければ、 パレントページナンバーをね、更新するよって、 こういったコードにすればいいと、ということですね。 で、ここまでで言うこととしては、 ページをいくらスクロールしたところで、 それは反映されないということですね、まずね。 なので、ページビューコントローラーの中で、 普通にUIページビューコントローラーとして、 配置しているけれど、何もしていないね、確かにね。 うん、そうね、だから、バインディングが変わらなくて当然か。 そうだね、うん、だからこの前の動きがおかしかったのは、 合ってたのかもしれない。 まあ、まだわからないけど。で、まあ、こんな感じでね、 いい感じに作れてきたかなと思うんですけど、 ひとつ気になるところとして、なんか、ちょっと、 ローレベルのところをいじりすぎてるかな、コーディネーターが。 って感じがして、えっと、事情細かくね、 いじりすぎてるっていうんですかね。 これぐらい知ってても、おかしくない気もしない気もないですけど、 要は、どうだ、えっと。 これどこだっけ、あ、これね、ここだ。 ページビューコントローラーの中から、マスターインデックスを取得して、 その後、ページに変換しているということをいろいろやっていて、 コーディネーターならできるか、これぐらいね。 ただ、あの、ページビューコントローラーのページ番号を調べるっていう方が、概念的には一般的な気がするんですよ。 なので、そういったのをちょっと作っておきましょうね。 なので、コントローラー for page number というのの逆パターンですよね。 なので、ファンクション、ページナンバー for view controller 、 ページビューコントローラー for page view controller っていう風にして、 コントローラーという風にして、他の方迷いますね。 どうしようかな。 本来、ページビューコントローラーということは、ページビューコントローラー当たりませんけど、こういう方になりますよね。 それで、ページナンバーが見つからないこともあるので、オプションなんですよね。 こういう風にした時に、やり方としては、ガードレット、ページビューコントローラーインデックスですね。 ページビューコントローラーが見つかった場合には、リターンとして、 ページナンバー、フロムインデックスでインデックスと。 これでいいですね。 これ別に一行でできたら、マップを使ってね。 ファーストインデックス、ちょっと今回それにしてみますか。 インデックスを取っているのかというと、二両返すとかじゃなくて、 インデックスを取って、ファーストインデックスがあった場合には、これをマップするわけですよね。 それで、ページナンバー、フロムインデックスね。 それで終わり。これでいいですね。 こうすると、あった場合には、ページナンバーに返ってくれるし、 なければ二両返すし、ということで、ページナンバー4、ページコントローラーできましたね。 これがちゃんと使えるかどうかが疑問なところで、ここでね、 ページコントローラーズという方がUIビューコントローラーじゃないですか。 なので、これが取れないですよね。ファーストインデックスですが、 ここで、ガードレット、ページナンバーですね。 ページナンバーイコール、ファーストインデックスとか、 ちょっと機械的なことはしないで、ページナンバー4、ページコントローラーね。 この時にビジブルのコントローラー、ビジブルビューコントローラー、 これを渡したいわけですけど、 この時に方がビジブルコントローラーは、 UIコントローラーになっているという、そういった都合があって、 これがビューコントローラーをホスティング、 ビューコントローラーのページ、あれにはできなかったんですよね。 なんでだっけ。忘れた。 UIホスティング、ここがUIページビューコントローラーか。 Hmm?関係無いですか。 Yuiコントローラーで管理されているか。 これがページビューコントローラーになっているのは、 俺は何だったっけ。 ページビューコントローラーで、ここでページ出来なかったんだっけ。 セキュリティペアレントが、「ページビューコントローラーじゃなくて、 UIホスティングコントローラーですね。 これでページビューコントローラーがビューコントローラーだ。 ここが結局ダメだな。 ここでは適切な dough変換、共変生が切られないから、 するとUIビューコントローラーを受け取らないといけない。 そういった状況になって、ここでカタキャストをしないといけないというのが、 何かと不便だよということですね。 ページビューコントローラー1とインデックス2を、 こういうことになりますかね。 ただ、この辺何とかしたくなってきちゃいましたね。 ここまで言わなくていいと思うんですけど、実際使っているパターンは、別にこれ、 UIホスティングビューコントローラー以外が入ってこないわけですよ。 コントローラー、ここの中に、ページコントローラーの中に。 なので、これが気になっているんですよね。 だから、タイプエリアスにして、タイプエリアス、ページコントローラー。 ページコントローラーは、UIホスティングコントローラーのページ、というふうに変えておいて、 それで、ここでページコントローラーを使いたいという状況ですね。 ページビューコントローラーとページコントローラー、ページのコントローラー、いいんですかね。 こういったふうにして、ここでページコントローラーとするわけにはいかないわけですよ。 そうすると、これの順序がダメになっちゃうんで、 UIコントローラーにするしかなくて、 UIビューコントローラーにするしかなくて、 ページコントローラーの中からファストインデックスを取るときに、 一つの方法としては、アクセサリーマークで確定させちゃう方法もあるんですけど、これだと乱暴ですよね。 絶対使ってると思うんですけど、そうじゃなかったときに取ったとしね。 厄介なのと、そうじゃなかったときに別に見つからなかったとすればいいだけなんでね。 これで取るとやりすぎな気がする。 なので、ここでサイトを一歩しておきますかね。 ページコントローラー、ページコントローラーはホスティングコントローラーを 今、自分で消しただけだから、ここに作ればいいんだ。 エクステンションとして、ページコントローラーの配列ですね。 だから、配列はシーケンスですね。 この中で、シーケンスはページコントローラーかな? 押したときに、これはダメだ。ページコントローラーはあそこにない。 そうですね。誰が持ってたんだ?ページコントローラーだな。 ページビューコントローラーのページコントローラー。 違うな、誰が持っていたっけかな? タイプエリアスでページコントローラー。 あとはコーディネーターが持っていれば、コーディネーターでもいいけど、 ページコントローラーが持ってれば十分でしょう。 なのでこれで、これでページの ページビューコントローラーのページ、ガソリン、 あそこカ。ジェネリックかな? ページコントローラーのページ。 ページコントローラーのページ。 エネリックかな?ページビューだった気がする。 ガソリンか。あとここはなんだっけ。 ページコントローラーのページしか言ってないのか。 ページコントローラーのページでサえたのが何だかのビュー。 だからエクステンション、シーケンス、エレメントがページビューコントローラーの。 エネリックはページビューコントローラーの、 ページビューコントローラーはドロップだけかな。 ページビューコントローラーはイニシャライズのところで。 イニシャライズこれで悪加工でどこか出てくるかな。ページ図。 ページ図そして受け取ってるけど、 イニシャライズっていうパッケージ図ですね。 ページは何かっていうと、ページ型か。 ページがったのはページビューのページか。 ページビューはどこで使ってんだ? ページビュー、これか。ページビューのページ図だ。 フェーチャーカード。 分かってきたけど、それだと長いな。 シーケンスで、ページビューコントローラーで。 そこまでやらなくてよかったのかな。 ページビューコントローラーで、 ページビューコントローラー。 やってみますか。 一個の方法として書いてみます。 これがフェーチャーカード。 要は、ファンクション、インデックス、オブ、ビューコントローラー。 そしてUIビューコントローラーね。 そして、これで元1として、ヒントオプショナル。 それで、シーケンスでこれだから。 これですね。 手付けで、インデックスオブを使おうとすると、これはダメなんですよね。 そうですよね。ビューコントローラーね。 コントローラー、これは、順番の的になって、この形に合わせればいいのか。 そうですね。 カード、レッド、エレメントイコール、イレメント、ビューコントローラーですね。 ビューコントローラーイコールビューコントローラー、コントローラー、×エレメント。 else、return nil。 これがね、型変換できなかったということは、 すなわち別のビューだったというね。 不正解のビューだったということなんで、これで成り立ちましたね。 なのでこれで良くて、ほとんど具体的すぎちゃうのがね、すごく気になるところで、 なのでこれを何とかするとなると、 リクエンスでエレメントが、これがUIビューコントローラーを継承しているときってできていいんですかね。 これでもうまくいく感じね。 大丈夫ですよね、これね。 そしてあげると、さっきの、ここの、字のどこだっけな。 エラーが出てたところは、 えっと、どこだ。 エラーが出てたところは、ビューコントローラーでインデックスを取るところですね。 なので、first index of、おめでとうございます、first indexね。 だから76行目ですね、とにかくね。 これで間違ってるわけですね、これね。 first index、こっちもfirst index。 でもこれ循環してますね、ダメですね、これだとね。 だからこれだとダメか、自分を読んじゃうことになって、 first index of、エレメントがね、自分自身で、 自分自身の読んじゃうものね、キャストしようと思うね。 だからこれを具体的に習ったら売れないのか。 そうするとあまり良いコードじゃないですね、これね。 そうするとね、このfirst index、あれ循環するか。 エレメントにキャストしてるから、キャストして、first indexがここに来るか。 アップタイプとか、first index進検数。 間違えた、これコレクションだ。 コレクションじゃないとダメですね、 インデックスの話をする以上はね。 これで、first index。 これが循環か、これも。 コレクションのエレメントがあって、 first index of、エレメントですね、これがね。 これがエレメントに対して、 エレメントと言われているコントローラーなんですけど、 これをね、エレメントにキャストしている ビューコントローラーでfirst indexやってるんで、 確かにこれを満たすんで、これが言われるのかなとか。 えっと、first index of、ちょっと打ってみますか。 first index ofが、UIPコントローラーの1個だけですね。 これがなかったとして、これでアンクションとして、 何かを定義するときにアンクエスト。 で、これでfirst index ofでイコータブル。 イコータブルか。 あ、イコータブルね。イコータブルでやるのか。 イコータブル。 うん。 まあ、そうか。なるほど。どうしようかな、これ。 分解していろいろ作ろうかなと思ったんですけど、 意外と汎用的なインターフェースを用意しにくいですね。 ちょっと無理しないほうがいい気がしてきた。 なので、これはやめて、ここでページビューコントローラーで first indexとかやるけど、この中でついでにね、 やればいいのかな。ビューコントローラーは、UIビューコントローラーで 受け取らざるを得ないから、受け取るわけですけど、 この時にguard readで、 read ビューコントローラーね。 ビューコントローラーイコール、ビューコントローラーの 明日、ページコントローラーですね。 そのインデックスをちゃんと取れることを判定する。 これいいですね。 うん。なんか余込みすぎかも。 まあまあ、いいかな。 それが見つかなくなっていると、逃げてしようってことでOKですよね。 こっちもまた同様ですね。delicateでビューコントローラーが いられてくるのでguard read ビューコントローラー、コントローラーイコール ビューコントローラー明日、ページコントローラーですね。 ページコントローラーですね。これでOKですね。 もう1個次は、ここでページナンバー4でビジュアル コントローラーが、ビジュアルコントローラーも同様に見つかるかどうか。 共通で使っているから、やっぱり何かしたいですね。 ページビューコントローラーのビューコントローラーの対象を求めていて、 それがさらにページコントローラーであるが、 それが大事ですもんね。それでここでもguard read ビューコントローラーでイコール、 またちょっとなんか長々しいな。またチェックまでしっぱりとして、で、ページナンバーをとっているでしょ。 これguardを分けるっていうのが1個の手ですけど、同じメッセージを出すことになっちゃうんですよね。 だからこれをページナンバー4ビジュアルコントローラーみたいな感じで、そのままやりたいんですよね。 ここがそうか、ここでこれでページコントローラー取ってますけど、これねページコントローラー、ページコントローラー、ページ、ビューコントローラーのページコントローラーね。 これをページナンバーで指定してますけど、この時にもう1個オーバーロードすれば、ページナンバー、まあオーバーロードじゃなくていいんですけど、ページコントローラーとして、UIPコントローラーだったときに、この1個だけで全然大丈夫なんですけど、あえてね、あえて分けるより一緒の方がいいのかな。 これでとにかくguardでguardレッド、ページコントローラーが、8、8がイコール、ページコントローラー、2、U、開いたページが、8、ページコントローラーの ページコントローラー、ページビューコントローラーか、ページビューコントローラーのページコントローラー、ややこしながら、開いた、これでリターン、リターン、ニル、やってそうじゃなかったらリターンとしてページナンバー4でページコントローラーですね、そうするとこれは下の方見ますよね、こんな風にしてオーバーロードするのも大袈裟ですけど、まあね、ページナンバー4、ページコントローラー2つ用意すれば、これならね、さっきの辺り、全体的に、全体的には無理なのかな、おかしい、言ってみますが、8、guardの中でここですね、ファーストインデックスか、これで Xとインデックスで、こんな感じかな、いろいろと用意しちゃったからね、ここコーディネートでページコントローラーで、beforeですよね、この時に、ページコントローラーのインデックスを取って、インデックスをループさせて、で、最後、最後というか、このページコントローラーの、目的のページコントローラーを返すってことをやっているから、ここもページナンバーで済みそうですね、なので、だからguard、guardRed、ページナンバー、ナンバーイコール、ページナンバー4で、before、ビューコントローラーですね、こういう風にするとページ番号が取れる、guardのRedのelseか、これでページ番号が取 れるで、これでまずいいですね、ページ番号が取れたら、move back toで、この辺はノックバックメッセージですね、またとりあえずいいかな、で、ifでページコントローラーの、guardインデックス、ページコントローラーこれか、はいはい、これね、guardインデックスで、これだったらguardインデックス、比較していろいろやっている感じで、guardインデックスか、なるほど、だからページコントローラーで、ページが見れればいいってことですね、つまりね、だからこの辺のページナンバーレンジは、ページナンバーレンジでスタートとエンドがありますね、すでにね、コーディネーターが持ってる、だからページナンバーの ページコントローラーのラストを返している?それでもいいのか、だから、ページナンバーレンジのスタートインデックスでした解こうね、 スタートインデックスの代わりにスタート、レンジだから、lowerガバンド、そうかそうか、じゃあちょっと別のもの取っておきますか、いやいいんですけど、スタートページ、 スタートページナンバーとして、ページナンバーね、こういう風なの作って、それはページナンバーfromインデックスで、ページコントローラーのスタートインデックスですね、 endページナンバーというのはページナンバーで、このページナンバーFromインデックスのページコントローラーのエンドインデックス、 するとここ共通化できますね、ページナンバーのスタートとエンドってありますけど、じゃあ縄に始まっていくと結構スッキリしてきますよね、 意味がいい感じにまとまっていきますね。これでページナンバーを使うようになったんで、そしたらここで、Row Abundとか壊れることはしてないで、スタートページナンバーね。ここはページナンバー。 ページナンバーに対してスタートページナンバー。ページナンバーはこれですよね。違う、スタートページナンバーはない。ページナンバーにてか、レンジじゃないですね。 デフォルトがあった場合には、ページコレクションのインデックスになってくるのが、この辺は、ページコントローラー。 ページコントローラーは、このページナンバーとしては、インドックスを使う前からページナンバーのレビューですね。 こういう風にしてあげればいいけど、ここがちょっと微妙かな。ラストコントローラー、ページナンバー、ここは良いんですけど、コントローラー4をページナンバー。 ラストを用意してないから、ページコントローラーのラストっていいのかな。ページナンバーの屋内側で作れって言ってもありますよね。 だから、エンドページナンバー、あまり意味ないですよね。ラストページナンバーってね。ラストページコントローラーでいいのかな。まっいっか。ページナンバー。 そしてラストは、エンドの一個手前ですよね。エンドの一個手前に出明ければ充分かな。 なんとなくちょっと違和感を覚えるんですけど、これのプレビュアですね。これいいですよね。ラスト。 そうすると、コントローラー4、ラスト、ページナンバー。これで後ろに入る感じしますよね。 このコントローラーってメソッドが違和感を覚え始めて、ページコントローラーの中から返してるんで、これをページコントローラー4ですね。名前変えておきましょう。 ページコントローラー4ね。 ついでに、ここのコントローラーもちょっと名前変えておきますかね。 ページコントローラー。 こんな感じにして、いいですね。 こうすると、ここまででやったこととしては、まだとても良いですよね。 ページナンバー、これで制御できるようになったから、 ここのページコントローラーをわざわざキャストしたりとかもいらなくなって、 インデックスを取るというのもいらなくなるから、まずこうですね。 ページナンバーに対してやっていって、 このデバッグメッセージは、デバッグメッセージっぽく顔を入れときますかね。 いいですね。同様にこっちもやっていく感じですね。 ムーブ、ネクスト、アフター、アフターの方ね。 これもカードレットに対して、ページナンバーイコール、 これでこの辺までかな。 ページナンバー4というコントローラー。 これでページが取れますよね。 それで、ここまでデバッグのメッセージなので、 分かりやすいように例え持ち入れといて、 それで、これでインデックスも取る必要なくなって、 ネクストページに対していろいろやっていくということになったけれど、 どうしようかな。ネクストインデックス。 ネクストインデックスに対していろいろやってますね。 こうやってネクストバイト。 ページナンバーのネクスト。 これに対してスイッチを発動をさせて、それで、 これがページコントローラーのエンドページネンバーですね。 何だったの?平行変化? いいか。 これで、ページコントローラーのファーストを取ってますけど、 どっちか PrintPageController4ですね。 ページコントローラー4のスタートページ。 なんか、これで先頭から取る。 というふうになってエンドまで行く、 equationsからスタートからで、 これでこれ以外だったらネクストページ、 これを取っていく。 どうしようかな。これでいいかな。 ページコントローラー4、まあ literally drawing. ちょっと見るべきところが映らないで、 完全にページとそれに対するページコントローラーという行動に変わったので、 その前の準備がちょっとややこしかったですけど、 でもそれを踏まえても最終的にはいいんじゃないかなという気がする。 この辺がね、なにるチェックとかいらなくなってますからね。 それで、あとはこの辺の ビジブルコントローラー、これは気になるけど、 ページコントローラー、これはディスフィニッシュアニメーティング、 今作ったやつか。 今作ったやつは、ビジブルコントローラーが ファーストを取っていて、これがあるかどうか。 あった場合にはそれをページナンバーとってますね。 だからここがレッドページナンバーでできるように 今作った感じですかね。 余計な変換がいらなくなった。 とにかくページビューコントローラーの表示中のビューを取ってきて、 このページ番号はいくつですかっていう感じで問い合わせることができて、 そのページ番号が取れたんだったら、 これをカレントページに入れていく。 カレントページはバインディングされたページナンバーですよね。 いいですね。やってきた気がする。 できたけど、異国が増えてまして、 この辺については動画も見ておこうか。 ページナンバーで今作ったやつだし、 ページコントローラーでページナンバーを渡していて、 ページコントローラーのインディシーズの中に含まれるかというのを判定して、 含まれるようならば、ページコントローラーの中にインディシーズを参照して、 キャストもかかりやすいですね。 GPUコントローラーのページコントローラー、キャストができなかったとしたらと思ったけど、 できなくないんだ。これをページコントローラーにしたかったからやったっていうね。 そういった状況でキャストが全然いらなくなったっていうことですね。 普通に取れたのならば良い。 普通に取れたのなら良いだったら、もうインデックスチェックだけでいいですもんね。 なのでこれで痛んでいいんだ。もう想定外となったってことですね。つまりね。 あとは適切にやっていけばこういう風に想定外って減っていくんでね。 想定外減らせばエラチェックがなくなってくるし、 これでいいですよね。 これによって純粋に絶対に横からのページコントローラーが混ざってないことが保証できるんで、 この辺は無視して純粋にインデックスがアイ内にあるというところだけに着目すれば良くなったというね。 そういったことですね。これでいい感じじゃないですか。 ページビューコントローラーの中のページビューコントローラーがそのまま使ってもいいんじゃないかなっていう気がするんで。 ページビューコントローラーをここでやっているのと同じように、 ここにも置いてあげれば同じところでどれぞれやるよりはどこかを元にした方がいいと思うので、 ページビューコントローラーの中のページビューコントローラーをここでも使いますよというそういった表現ですね。 こうしてあげると色々とこの辺で、 名前の部分に指定しないといけなかったのが、指定しなくても良くなったし、 コーディネーターで扱うページビューで扱うページコントローラーと同じというのは相当に安いですよね。 なのでこの方が表現としては適切でしょうね。 これでよくてここに戻ってきて、これでいっぱい戻ってみますか。 ここでコンプリートだったら、ページを見つかったらパレントページを置き戻してあげるよという風にして、 コーディネーターを、デリゲートパターンの設定はデリゲートインストを設定し忘れることかなと思っているんですけど、 そんなことかもしれないか、自分だけかもしれない。 コーディネーターをデリゲートとしてUIページビューコントローラーにセットしてあげると、 ビザバインディングが双方向で連結したよって言ってますね。 エキストビューの更新とページナンバー、スワイプのページナンバーの更新。 確かにそうですね、スワイプの時のバインドのことすっかり忘れてましたね。 これで動かないだけだったなら嬉しいな、前回動かなかったわけで確かめたいわけです。 メイクUIビューコントローラーはどこだっけ? コマンドシフトを押してメイクUIビューコントローラーってやると出てきますからね。 この中でそれっぽい方、ページビューコントローラーの方に定義されているこれでしょうね。 この中でページビューコントローラーの定義系とこれに対して、 このエキストのコーディネーターね。 これで完成かな?スワイプした時にページが映るかどうか。 これを動かせると、 1のままですね。 1のまま動いてるよね。 動かないね。 ここにポーズされている。 よかったね。 ここで動き変だな。 こっちは3の時変な動きしたね。 1、2、3、なんだこれ。 変な動き出てるか? 間違えたかな? どこだっけ? デリゲート。 デリゲートの中のこの辺ですね。 これのディフィニッシュアニメーティングで コンプリートだった場合ですね。 そうじゃなければいいターンで、 エビシブルコントローラーが得られた場合は、 カレントページを更新する。 いいですよね。 これで2、3の後の動きちゃうんだ。 1、2、これエンドとその辺の制御間違ってる感じかな。 とりあえずネクストページを押してみよう。 これはページ番号だけ動いてスクロールしないや。 これはやばいね。 2でしょ。 3の時、これが2か。 3の時に1に戻ってますね。 3の時に1に戻って、1、2。 めちゃくちゃな動きしてる。 これは作りを間違えたかな。 さすがにね。 次はカスタムページコントローラーを作る話になって、 それで終わりなのか。 カスタムページコントローラーっていうのは、 ページのコットンみたいなやつでしたっけ? それを作っていくのは、外部とはまた別ですよね。 ここまででバグがあるということですかね。 これでバグだろうと思われるところって言ったら ページのコントローラーだと思うんですけど、 この中でページがあって、デリゲートがあって、 ページのコントローラーのインデックスを取って、 インデックスが0だったらラスト。 この辺が気になるな。 ページのラストここから大丈夫ですよね。 0だったら、それでそうじゃなかったら1個前ですね。 こっちは1を足してあげて、 それがカウント、つまりエンドインデックスだった場合には エンドに戻し、そうじゃなければ次のページを移動する。 この辺が間違ってるんじゃないかなと思ってるんですけど、 そうだろうね。 フィニッシュアニメーティングもちょっと気になるんですが、 この辺については普通にVisibleViewControllerを取って、 それがあった場合にはそれのページナンバーを取って、 ページナンバーをアップデートするよっていう話なんで、 このスクロールが、例えばもう一回ね、 ページの最初から戻しますけど、戻んないかな。 レビューを戻すにはどうしたらいいんだ。 これ一回別のモードにして帰ってくれば、 リセットされると思うんですけど、 これで1というのがあって、これがスワイプすると2になって、 遠慮を受けた。 こうなって、2から2になって、3。 この辺のバグでバックペーストしてみると、 もうちょっとわかってくるのかなという気がしますが、 とりあえずこれで01、01でアップデートで、 バリューページ1、03、3、次動かすと、 また01ですね。ページが2ですね。 やっぱり相変わらずダウンなのかな。でも大丈夫な2の3で、 ムーブバック2に、ムーブフォワード2に。 これでまた、まあいいか。届けへんだな。どうしようかな。 これでページナンバーで予期しないページが得られましたでしょ。 で、スタートページナンバーはスタートインデックスからページを出しているし、 エンドインデックスからエンドページを出しているし、 で、ラストはエンドの1個前。1個前にちゃんとなってるよね。 マイナス1ですね。で、プラス1。 で、ラストの場合はプラスオフセット。 こっちじゃないか。 定義はプラスここだ。で、バリュー同士の足し算、引き算。いいですね。 で、これでファインもあるけど、インデックスフロムページナンバー。 で、ページナンバーからインデックスはページコントローラーのスタートからのページナンバーのオフセットで、 オフセットというのは、ページ番号0から始まる。 だからそこから1引いてるだけね。OKですね。 で、それで、うん。この辺は良くて。 そうすると、デリゲートメソッドをやっぱりちょっと見ておきたいのかなっていう感じで、ここですね。 で、フィニッシュアニメーティングじゃなくて、データソースか。データソースこの辺ですね。 この辺が、ビューコントローラーbefore、beforeだから戻る方ですよね。 戻る方というより進む方がまずおかしいから見ておきますか。 また。 で、これでmove forward toですよね。 move forward toだけど、歴代化して1個進めると2個いっちゃいましたよね。 これね、今ね。この時にmove forward to1、move back toが動いてますね。 move forward to2が動いてますね。 何かパックしてる?よく分かんないな。 うん。 で、これで、ページナンバーで、ページナンバー。 あ、ビューコントローラーからページナンバー探すけど、この探すの間違ってないよね。 ページコントローラーがページコントローラーでいられるかでいられなくなっているので、ページコントローラーがいられた場合だったら、それのページ番号。 で、それでページナンバー4でやる場合は、コントローラーからファーストインデックスを取り出して、 あった場合にはページナンバーにすると大丈夫ですね。 で、これで、move forward toでログが出て、 その後にページナンバーの次のページですね。 だから、move afterでしたよね。 ビューコントローラーafterですよね。 だから、見つけたページナンバーの次を取得して、 その次がエンドインデックスに差し張ってた場合には、ページコントローラーの後ページ。 だから一番最初のページが取得されるということですよね。 で、それで、ネクストページナンバーがエンドじゃなかった時には、 そのまま使ってページコントローラーを取得する。 合ってますね。合ってると思うんだけどな。 そうすると、このmoveした後に、いろいろコードが表示されている。 この辺の問題ですかね。 アップデートのセルフのバインディング。ここもちょっと気になりますね。 セルフのバインディングが何か提供しているのかな。 ここで普通出しているけど、出している中で、アップデートセルフで、 カレントページナンバーと、今回はバインディングがバインディングの値か。 この値がちゃんと同じになっているか。 あのコンテキストが出ているけど、ページナンバー2と上はバインディングページナンバー。 順番が違う気がするな。 2個出ていて、アップデートセルフとアップデートコンテキストで、 カレントページナンバーがセルフが2でコンテキストが1か。 ここがずれているよというお話を展開したわけですけど。 バインディングの値は1がとれていますね。 バインディングの中は1になっていて、ここも1か。 カペラレントのカレントページナンバーが1で、上のほうが2と2か。 カペラレントページナンバーを取ったときにずれているという話だ。 スワイプしたときに、アップデートUIPコントローラーに来たときに、 ページ番号が自分自身のカレントページナンバーが2になっているんだけど、 コンテキストは1のままだよというような状況になっているのはまだ解説されていないね。 どこかでおかしくしているね。 とりあえず、情報が多すぎるので、ここのコンテキストの中身はいいや。 カレントナンバーがここでアップデート。 ここでセルフとコンテキストをこんなふうにして。 コーディネーターだけともコンテキストだけか、 コーディネーターだけか、コーディナーだけか、コンテキストだけか。 こんなふうに、これが出るよというお話ですね。 それで、とにかくバインドの値が更新されて、 その2つが表示されるわけですけど、 結局のところ、このアップデートがちょっと邪魔になっているかな。 これも、コントローラーはもう早く取得できているから、 これは見てもわからないしね、ってところで、 コントローラー見てもわからないから、 これはもういいですね。 アップデートコントローラーが来ていることはわかっていて、 コントローラーを見つからなければ、 フェーサルエラーが落ちるので、ここに来ることはわかるからいいでしょう。 それで、ロゴをちょっと捨てて、 もう一回ね、これで一回スワイプすると、 1から2に行った、Move forward to 1。 ここなんか間違ってますね、Move forward to 1。 これが違うね。それで、2から3に行って、Move forward to 1に行ってる。 でも、次の値は2になっている。 一回スワイプしたことによって、Move forward to、 これが、Move forward toが出ましたか。 これは、HPコントローラーのHPコントローラーアフターが呼ばれたときですね。 それで、バレントページナンバー、 これが反映されてないという状況でしたね。 ページナンバー自体は、今のVueコントローラーから出しているので、 この1っていうまま、これの状態ですが、 これでページコントローラーを出して、 これがコンプリートするまであれば、アップデートしないんですね、バインディングがね。 だから、それはここは見ても意味ないのかもしれない。 とにかく、ここの中でページがどこへ移ったかどうか、 それを知れば、何かいいのかな。 なので、これを知るためには、Switch7とか、 そういうSwitch7って、中に何か入れたくなったときに、 崩さないといけないのか、すごい違和感。 これでプリントを、例えば、これにしようかな、 これで、エンド、スタートページナンバーか。 エンド、スタート、やって、 そしてこっちのプリントで、アイを入れて、 Move、Move、いるのかな、Moveネックとか、 これで、どっちに移ったかわかる。 わかるけど、ページナンバーを出しておきたいな。 ここで、○をページナンバー、参考情報として出しておきたい気がする。 こんな感じのノリで、もう1個こっちのプレビアスも ご世話になることがありそうなんで、 Move、スタート、2、ラスト、 ラストか、ラストか、これが1分にしないといけないっていうやつね。 Returnで、それでもう1個。 ここはエンドじゃないですね。秘密的にラストですね。 それで、こっちもMove、プレビアス。 こんな風にすれば、だいぶ見やすくなってくるのかな。 こんな感じ。これで、スワイプをかけると、 生に消すと、これをログを消して、 スワイプをかけると、いよいよ起こりましたね。 Moveネックストップ1からですね、1から2に行って、 スタート、2、ラスト、スタートからラストに行ったら、 スタート、2、ラストに行ったら、スタートからラスト、 1から2でしょ、Moveで。Moveネックストップで。 1から2に行った。 スタート、2、ラストだから、やっぱこっちですよね。 プレビアス、Move、あれ、Before呼ばれるの、これ。呼ばれるのか。 なんか間違ってんのかな。 とにかく戻ってましたよね。 Moveネックストップで、1から2で、 スタート、2、ラストでラスト行っちゃいましたよね。 で、ラスト行っちゃって、それで、これが2と3。 Moveバック2が出てきましたね。 Moveバック2も何だっけ、バーって残ってますね。 ここだ。これもまあ、いらないかな。 なので、これは無視してよくて、それで1回しかスワイプしてないのに、 またMoveネックストップで、2から3に行ってますよね。 1から2に行って、2からラストに行って、2から3に行って、 アップデートがかかって、コンテキストがずれている状態で、0と1。 今、ここで色々変えたからか。 ここで色々変えたからかもしれない。 これで、1回もう1回やってみますかね。 これで動かすと、動きをちゃんと見なかったな。 多分動かしたと思うんですけど、Nextこの人やろうか。 もう1回これで、これでダメか。 どうしようかな。もう1回いらないログとかあったかな。 この辺で、この辺のログは、ページコントローラーの、 ページコントローラーが、コントローラーのインデックスとページナンバーか。 ページコントローラーを取得するものだから、 ページコントローラーを、コントローラー、インデックス、インデックスとページナンバーね。 こんな感じで、ここがいいですかね。 あとは、プリント分が何か残ってるかな。 プリント、アップデート、これはいいとして、 スタート、ラスト、他のもかとね。 それで、ページコントローラー、アップデート1で、 今1ページ目がいろいろいじられていく中で、1ページ目が出ているので、 インデックスが0で、ページナンバーが1で、 そのコントローラーが得られているよと。 こんな状況で、やっぱりスワイプですね。 抵抗すると、やっぱり変な動きしますよね。 その時に、次へ移動して、ページナンバー2の コントローラーが得られて、それを表示したいんですけど、 この後、スタート、2、ラストで、 戻っちゃってるんですよね。 スタート、2、ラストなんで、ここですよね、スタート、2、ラスト。 なんでこれ、コントローラー、ビフォア。 ビフォアで呼ばれちゃって、1から2に行ったやつが、 スタートからラスト、1からラストに行っちゃいますね。 ラストへ行って、ページナンバーが3のものを 表示対象として、スタートにまたMove Nextしますよね。 Move Nextを押して、つまりもう1回、こっちの、 こっちじゃない、こっちの、アフター。 これのほうが呼ばれて、Move Nextなので、 2から3へ行くっていうね。 そういったもので、またページ3のものが表示されて、 今、アップデートでインデックスは2なんですよね。 インデックスというか、ページか。 で、コンテキストのページ1が落とされて、 ページ1が表示されているという状況になっていると、 ダメだ、制御ができていない。どうか。 そうすると、あと考えられるのは、この辺の、 バインディング周り、更新したことがどういう影響を出しているんでしょうね。 ページナンバーを代入している、カレンダーページナンバー。 例えば、これを代入しなかったとすると、 つまりアニメーションが終わったときに何かをするってのをしなかったとすると、 このときにはページ番号が変わらないって話でしたけど、 このスクロールだと1から2に行って、 またやっぱりスタートからラストに行ってますね。 それで、Next。 で、ああ、そうか。この辺の動きはそんなに変わらないか。 この代入があることによって、スクロールしたときに、 また1に戻ってくるという、 そういった話になってきているのか。 ここで、ここもプリントしてみたらいいんですかね。 プリント、えっと、4文字で。 えっと、ページナンバー。 そして、ページナンバーね。 こんな風にして、これが最終的に何番が設定されるのかっていうのを、 スワイプで見てあげると。 そうすると、ここが2になってますね。 あ、実は2か。いいですね。 2になって、で、Move Nextで2からなぜか3に行こうとしちゃってるんですよね。 それで最終的になぜかページコントローラーのインデックス1番が欲しがって、 その1番が表示されているという状況になっているから、 完全に制御ができていないという、そういった状況になっていると。 うん、これはどうしますかね。 チュートリアルのコードと手待ち合わせながら、 ちょっと間違いがどこにあるかを見ないと、なんかわかんない気がしますね。 おそらく、ここまでちゃんとできてるわけでしょ。 きっとね、チュートリアル次は、セクション4に行って、 ページコントロールを追加するって言ってるくらいですからね。 ページコントロールをこの後、ちゃんと動いている状況にね、 追加していくんだと思うんですよね。 これですよね、ページコントロールってね。 だから、これがうまくいってないってことは、自分のコードのどこか、 あの、ステートのリンクの仕方、多分間違っていると思うんですよ。 で、実際この改編を行っている前まではね、 ちゃんと、あの、ページの管理はできていなかったにしても、 スクロールはできていたんでね。 なので、なんかページの変換、インデックスとページを、 なんか入れ込んじゃったところあたりから、 なんか制御を間違っているのかもしれないですね。 計算、何かね。そう間違っていなさそうなんですけどね。 まあまあ、でも動いていないってことはね、どっかがおかしいんでしょうから。 その辺りをまた、次回、見ていきますか。 一旦ちょっと置いておいて、なんか、頭の中を整理しつつ、 まあ事前にね、また、この配信をする前に、考えるかどうかはちょっと別として、 頭をとりあえず休めるだけ休めて、また次回ね、 コードがどう間違っているのかっていうのを、 ペパリと見ていく感じでやっていきますか。 うん、そうね、なので次回はデパックみたいな感じになりそうですね。 はい、じゃあ今日はこれで終わりにしましょう。お疲れ様でした。
