Transcription & Summarize : とりあえず読書会 SwiftUI Tutorials #7

はい、では今日もとりあえず読書会を始めます。 読み進めがだいぶ進んできて、それによって音がいろいろ書かれるようになっていくと、 自分が勝手に今やっているスイフトログ対応とぶつかるところがいろいろ出てくるような感じになってきて、 それはそれで面白いなという感じで、そういったのが有意義だなと思いつつやっておりますけど、 そんなところもまた楽しみなところで、どうやってスイフトログ対応しながら スイフトUIアプリが組み立てていくかみたいな感じで遊んでいってみましょう。 今日はお気に入り機能ですね。これをいよいよアクセルからかかわれば、 そこに作っていくという感じになってきて、まずはお気に入りボタンを それぞれのランドマークに対してつないでいく。 まずランドマークアプリはセットフィルターでお気に入り。 今のところはJSONで出されてくる、お気に入りかどうかの情報を基にしてフィルタイングをかけるというね。 そういったところはリストの中でできるようになっているけれども、 お気に入りのランドマークのリストはまだハードコードされている。 ハードコードって言うんですかこれ。JSONにハードコードされているという言い方をするのかな。 実際に具体的にJSONコードにIsFavoriteが書かれているわけではないけど、 とにかくアプリ上から変更ができないよということになっている。 それを言ったのかな。とりあえずそれでユーザーが お気に入りを追加したり、アクティブしたり、そういったことをできるように フェイバリッドボタンをランドマークディテールビューに追加していきましょうと。 リユーザブルフェイバリッドボタン、再利用可能なフェイバリッドボタンを作っていこうと。 この再利用というパッチパンは大事ですよね。 これでもできそうでいて、意外と再利用すべきところでできていないみたいなことが見かけたりするので、 頭の中でこの再利用というものが何なのかというところがまず先ですかね。 再利用を考えても、その辺が及ばないと思ったように再利用という発想ができない気がするので、 再利用とは何だろうかというのをイメージしつつ、 何度もそれを意識しながらコードを書いていって慣れるしかないのかなという気がするけど、 とりあえずそんな感じで今回、フェイバリッドボタンを再利用を目的に作っていくと。 まずはフェイバリッドボタンを作って、その後にIsSetをバインディングで作っていくみたいに。 それで、それは現在の状態を表現するインディケート。 そんな感じですね。 示していくものになっていって、それでPropertyのプレビューではコンスタントを提供していくと。 とりあえずそういったふうに作るよという意味であって、コンスタントである必要はないですね。 まずはそんな感じでやっていって、 バインディングプロパティというのはプロパティバッパーですよね。 それは読み書きを可能にする。 安定するデータのプロパティの読み書きと、 表示したり変更したりするディスプレイ、表示したり変更したりするビュー。 この辺との連携ですか。 これを行えるようにすると。 そういったふうに伝えていくことができるよと。 そんな感じで、まずはフェイバリッドボタンをIsDeadというプロパティをもとに作っていく。 ここまでやっていきますか。 ここまでだと、新たにビューズの中ですかね。 この中でTweetUIビューを作って、 そして出来上がったTweetUIビューのボタンの中で、 まずプロパティとして、あとバインディングはIsDead。 これがブールですよと。 この赤いがこのフェイバリッドボタンとその外回答を繋いでいくという仕組みになるって感じですよね。 フェイバリッドボタンのレビューのところで、 そのバインディングを渡さないといけないという状況に今なったので、 とりあえずIsDeadに対して定数で渡しています。 渡しているよと。 そういうふうな感じになっていると。 まずはこれくらいにしておきましょう。 Zリアルに戻って、ボタンを作る。 アクション。ボタンをアクションに持たせて作って、 それで、ブルーするIsDeadをブルーするボタンを作って、 その変更をこのステップに持てて変えていくみたいな。 変更を反映させていくみたいな感じにするみたいね。 タイトルストリング。ボタンのラベルで提供したタイトルの文字列は、 そういうTweetUIには表示されない。 表示されないラベル。そうなのか。 アイコンオンリーラベル。だけど、ボイスオーバーが使うんだ。 ボイスオーバーというのは、耳開きで操作できる。 使ったことないのでよくわかんないですけど、 今どのボタンが選択されているかを音声で伝えてくれるときに使われるテキスト。 重要だよってことを言ったんでしょうね。 とりあえずね。 今回はボタンをIsDeadでブルーする形をとって、 ブルーするコードは、 ブルーフェイバレットラベルでシステムイメージとして、 Zだったらスターフィル。 そうじゃなければスターフェイバレットをとって、 ラベルスタイルはアイコンだけにしていて、 そのトーカーグラウンドスタイルは、 ああここで色変えるのか。 この前、前回ちょっと外側で色付けとったのがダメでしたね。 まあダメなら直せばいいだけなんで大したことじゃないですけど、 とりあえずこの辺を作っていきましょう。 ボタンを用意するところから、ボディに対してボタンをね、 打っていって、それでボタン。 で、このボタンの中で、最初は何かラベルか。 このスイッチとUIでちょっと迷うのが、 この最初のブロックがいわゆるラベルなのか、 それともアクションなのか、ただによって違う気がしますが、 この辺がなんか難しいというか、 まあそういう一元の話ではないんですけど、 わずらわしいなというのを感じることがある気がする。 バカな気のせいかもしれないですが、 まあとにかくExceptを特ルするよっていう風にして、 で、それでラベルとして、このラベルはエキストでしたっけ? というのか、ラベルはラベルで、 このラベルのタイトルが特ル、えーと、フェイバリット? その後、システムイメージとして、 Exceptの状況によってExceptが特ルだった場合には、 えーと、フィル。 そうじゃなければ、ターという風にね、すると。 これだけだと、右のプロビジョン、右のプレビューのとこにね、 既に出てますけど、こういった形でラベルも出てるんで、 スタイル、ラベルスタイルが、ラベルスタイルとして、 タイトルオンリー、じゃなくて、外コンオンリーという風にして、 これで星だけが出たと。で、ここで色をつけるわけですよ。 で、うーん、どうしようかな。 さっきの、さっきのじゃなくて、いや、前回ですね。 これを、えーっと、起こったのか。あー、なるほど。そうか。 えーと、前回作ったのはこれ、スターでしたね。 えーとね、同じように再利用をイメージして、スターイメージというのを作ったんですよ。 スターイメージというのを作って、ここでね、黄色を設定したんですが、 そうか、全然再利用できる感じになってないですね、これだとね。 システムネームがスターフィルでしょ? で、スターイメージで、えーと、スターイメージをね、できてないね。どうしようか、これ。 まずは、タイトル作が見えないうちは、しょうがない。 無理矢理まとめていいとは限りないんで、とりあえず、このままやっていきますか。 押したときには、ラベルでブルーフェイバリットを買って、で、システムイメージがイズセットでしょ? で、イズセットのときに、推しのイメージが変わる。で、ここでラベル使ってますもんね。 スターフィルとスターか。うーん、どうしますかね、これね。 まあ、これいいか。エラベルがアイコンオンリーで。 で、また同様に色が、えーと、状況によって変わるんでしょうね。グレーかどうかっていうのがね。 うん。 まあ、しょうがないのか。まあ、それを書いておきますか、とりあえず。 で、えーと、だから、フォアグラウンドスタイルとして、イズセットだったらば、イエロー。 で、そうじゃなければ、グレーと。なんでね。これでできたということでしょう? うん。イズセット。イズセットで、フェイバリット、で、フォアグラウンドカラー、フェイバリットボタン、エラベルがいるんですよね。 で、えーと、そんな感じが、ラベルとしてラベルを使っているけれど、このときに、例えばスターイメージ。 スターイメージがありますよね、これね。で、スターイメージを作るときに、イメージって、ラベルみたいなのを付けられないのかな? えーと、なんていうんでしたっけ、さっきの。音声とやるやつだから、ボイスオーバー。 ボイスオーバー、ボイスオーバーのなんか、アクセシビリティかな、ラベルか、アクセシビリティラベルってありますね。 これ付けてあげれば、結構いけるんじゃないかな。 ボイスオーバー、もう1回ちょっとデトリアル見ますけど、この中のラベルっていうのはボイスオーバーで使うんですよね。 で、そのときに、それを参考にしてくれるラベルだということなんで、 えーと、ボイスオーバー、これで調べてみると、ボイスオーバー対応の話出てきてくれましたね。 で、これで、ボイスオーバーの仕様として、フォアグラウンドってイメージがあって、 それでテキストがあって、みたいな感じで、で、一応タップするとイメージの名前が呼ばれるよとか言われてるけど、 これだけじゃ、ちょっと自分の期待するのとちょっと違うかな。 えーと、対応すると無言になってしまうので、えーとってことが書いてあって、 ここで、ラベルにイメージを含む場合のボイスオーバー、ボタンのラベルにはあれではないな。 やっぱりボイスオーバーのAPIをちょっと知りたいんですが、これはどれだろうか。 えーと、API。 ボイスオーバーの基本。これ見ればいけるかな。 また何かアクセシビリティのお話ですね。 アクセシビリティかな。ボイスオーバーの対応でイメージ、 システムネーム、アクセシビリティラベル。 そうしないと画像のリソース名が呼ばれてしまう。 これですね、一つ目。 さっきボタンの中でラベルを使っていたっていうね、 こういった感じでやってましたけど、 ここではイメージで、ほんまにこれですね。 なのでアクセシビリティラベルで良さそうですね。 あとはボタンの種類とかがあるのか、 アクセシビリティアドトレーツとか言っていつボタンとか、 細かいところはとりあえず今回はやっていなくてもいいかな。 アドトレーツでいつボタン。これでやればいいのかな。 アクセシビリティアドトレーツいつボタン。どうかな。 まあまあやってみますか。ラベルでいいのか。 とりあえずだいたいイメージがついたので、 ちゃんとできてるかちょっとわかんないですけど、 スターイメージをせっかく前回作ったやつ。せっかくっていう理由で 再利用するのがわなにハマりそうな気がするんですけど、 星を表示する、こういったパターンであることに変わらないので、 これをボタンで使ってあげればラベルとしてね、 どうすればいいんじゃないかなという気がするので、 これを対応していって使いたいなと思うんですよ。 スターフィルはisなので、isfavoriteのときに、 issetのときはオンになってたというところを考えると、 とにかくオンかオフかでイメージの名前が変わるのと、 あとは色ですね。この2つが変わるというのが1つわかっている。 で、今回はどこまで汎用化するかというのにもよるんですけど、 スターイメージとして、 もしまさにオンとオフだけで有効化状態をセットすれば十分ですかね。 色を自由につけられるというよりはブーチで制御したほうが、 ユーズが効かないけど、 代わりにこのアプリケーションとして使いやすくなるのかなという気がするので、 スターイメージとして、例えば、アットレッドでいいのかな。 プライベートバーディーのかな。 レッドじゃなくていいのかな。この辺分かんないな。 バインディングは双方向だよね。 まだちょっとこの辺分かんないかもしれない。 じゃ、まず動かなくてもいいやっていう気分で、 まずは普通のプロパティにしてみますか。 これでいつかアクティブにしますかね、今回ね。 ブーチを持たせて、このブーチに応じて星とか色とかを変えていくというスタイルを取ることにしましょう。 そうすると、まずイメージのシステムネームなんですけど、 このボディ内でいく分でいろいろやってもいいですが、 計算型プロパティがすごく良さそうね。 アトラクションにしとこうかな。 中で作ってもっても問題ないんですけど、 この内部でしか使わないので、プライベートエクステンション。 それに対して、イメージで、 この中でバーとして、まずはシステム、イメージネーム、 フォレストリングですよね。 これの値はというと、いつアクティブかどうかで、 フィルト、など、こんな感じですかね。 あともう一個、カラーとね、フォアグラウンドスタイル。 カラーとして、プールがカラー、カラー型にして、 そしてこのカラーとしてはいつアクティブかどうかで、 イエローがグレーね。 こんな感じで、規定の色というのを用意した上で、 これでいつアクティブの状態によってですが、 よっていくと、ここにね、システムイメージネームと、 フォアグラウンドスタイルとして、カラー。 アクセシビリティラベルとして、 どうしないと、このスターイメージが何のための イメージなのかというのがわからない。 わからないけど、いいのか。 ここではアクセシビリティを考慮しないで、 その外側でやればいいのかもしれない。 とりあえずこうして、きましい形にして、 それでスターイメージとして、いつアクティブを、 いつアクティブをトゥルーにすると、 黄色の星が出ているはず。 両方見た方がいいですね。 グループにして、スターイメージをブックしちゃって、 それでダメージフォルスを並べて用事しちゃえば、 いい感じに両方比べられるかなと思ったけど、 スキムはランドマークがエラーになった。 他の場面でもエラーになってるから、 まずはそっちなんですが、 いつアクティブ、どこだ、ランドマークどうか。 この中でスターイメージがアクティブかどうか。 いつフェイバリットだったら分かっている条件なので、 いつアクティブはトゥルーで。 フォルスだったときにグレーの星を出すべきかどうか、 ちょっとまだわかってないですが、 とりあえず、わかってないのは仕様じゃん。 わかってないですが、とりあえずこれで出ましたね。 フォルスだったらグレーの白抜きの星ね。 これでいい感じじゃないですか。 スターイメージのね。 ここまでできたら、さっきのところに戻る前にか、 いつセットかどうかで、 トゥルーフォルスで指定するのもいいんですけど、 2パターンじゃないですか、このスターイメージ。 なのでこのスターイメージの言い分けを、 もうちょっと簡単にしましょうか。 エクステンションで、エクステンションじゃなくていいんですけど、 これでスタティックレッド、アクティブと、 インターネットアクティブで、 そしてスターイメージのいつアクティブかどうか。 これと、連携できるのかな。 とにかくスタティックレッドのインアクティブ、 インアクティブ、スターイメージとして、 いつアクティブかどうか。 フォルスのものね。 やらかじめ作っておくと、 このスターイメージで簡単にイニシャライズできる。 今回みたいな2パターンで、 それぞれに意味があるみたいなところを考えると、 これでいいのかなぁということにして、 それで、いつセットの状況によって、 切り替えようと思ったけど、 これブルガタですね。 あんなの作るのって良かったね。 そのまま出せばいいじゃないっていうのに今気づいた。 なので、ここでラベルとして、 何だっけ? スターイメージ。 作らなくて良すぎる。 いつアクティブかいつセットでこれでいいですよ。 本当に。 ラベルがいらなくて、 それでバランスしてもいらなくて、 ここで何だっけ? ボイスオーバーの対応がね、 っていうようになってくるっていう形ですが、 ここでボタンがあるから、 このボタンにつければいいんですよね。 きっとね。 アクセシビリティ、 何だっけ? ラベルとして、 これで、パーティットトブルフェイバリット。 多分これでね、 中途にあると、 とにかく、 アクセシビリティのためのラベルがトブルフェイバリットで、 で、ラベルとして、 黄色で塗った星か、 えーと、 グレーで白抜きした星か、 それをインストセットによって切り替えると、 できてる気がしますね。 はい。 じゃあ、これでだけ行ってみましょう。 で、えーと、 プロジェクトを進めていくために、 進めていく、 えーと、 時にかな? なんとかよくわからなかったけど、 ま、いいか。 えーと、 エラルキーを作る方法がある。 えーと、配送ね。 配送を作る方法がある。 あー、フルダウン配送のことか。 はいはい。 えーと、 タトルイメージとマップビューとエラルキーとボタンファイルを、 ヘルパーグループに入れてあげる。 っていうことだらしい。 えーと、 ヘルパーグループとランドマークビューを、 ランドマークスグループに入れてあげる。 いまどんなんだっけ? えーと、 ランドマークスグループにランドマーク、 あ、ビュードの中にランドマークスとヘルパーを作ってあげるのか。 あ、ヘルパーっていう名前ね。 なるほど。 とりあえず、 えーと、ビューズの中にグループを作る。 えーと、ニューフォルダ。 今はフォルダって言いますね。 グループじゃなくてね。 これでランドマークスと、 あ、そっか。 こう作っちゃったけど、選択して増やしていけばいいな。 あと、チャットからランドマーク系を移しますかね。 ランドマーク系と、 チャットはタトルイメージとコンテンツビューと、 あ、コンテンツは違うね。 タトルイメージとフェイバリットボタン、マップビュー。 スタイル名でもそうですかね。 これらをフォルダに入れる形を取り、 で、これはヘルパー? ヘルパーって名 なんて言うんでしょうね。 ヘルパーって言わない気がするんですけど、 あと、ライブラリで選びますよね、よくね。 これね、えーと、コントロールです。 コントロールか。 それでいいんじゃないかな。 コントロールにしてみますね。 コントロールです。 うん、まぁこんな感じで。 グループワークは別にソフトワークに影響しないんで、これで良いでしょう。 はい、じゃあグループワークはとりあえずしたと。 で、いきましょう。 で、次にフェイバリットボタン、それを、えーと、加える。 ディテールに加える。 で、isSetProperty、isFavoritePropertyを、えーと、バインディングしていくと。 で、そのためにランドマークディテール インデックスか、ランドマークディテールインデックス。 まぁいい名前、悪くはない名前ですかね。 で、えーと、それで、FirstIndexWareで取って。 よし、なかなか大変なことしてくれていいですね。 いいんだけど、えーと、ランドマークがいいんですがですね、これね、ランドマークのデータがモデルデータの中にあるとは、少なくともこのコードだけでは保証できてないですね。 これ大事な気がするな。 なので、それは考慮しておかないといけない段階な気がする。 これはロジックエラーでもいいんですけど、だからちょっと私ね、まだ早いかな。 外に任せたほうがいいかなという気がするんで、とにかくランドマークディテールのところで エンバイロメントのモデルデータを持てるデータがいいですね。 これでランドマークのインデックスを取得するというね、そういったプロパティを作っておくよという話だったわけですけど、 この時にさっきはワクワクしてたんですけど、ちょっと早いですよね、まだね。 なので、ランドマークインデックス、ランドマークインデックス、この名前もちょっと気になるんですけど、 まぁ間違ってないからいいですかね。 これはオプショナルにしておいたほうがいいんじゃないかな、この段階では。 モデルデータの中に、えーと、モデルデータの中のランドマークの中に、ランドマークデータが入っているとは限らない。 逆に必ず入っているんだったとしたら、ここでランドマークインデックスを最初からもらっちゃえばいいわけですよね。 エンバイロメントがあるわけで、どっちのほうがいいですね、後で書き換えますね。とりあえず、今はいいや。 それで、ランドマークのインデックスを取るにしても、モデルデータの中にランドマークデータ、ランドマークスがあるんで、それを取れるようにしておきますか。 ランドマークスは、えーと、ランドマークスですね。 で、それで、この中で、何を使っているかというと、モデルデータの中のランドマークスですね。 これを使い続けることによって、ここでいけないね、ランドマークスっていう話から始められて、その中のファーストインデックス、で、ウェアか、ファーストインデックスのランドマークイン、で、ここで、えーと、ウェビモデルか、ウェビ消しとか、えーと、ランドマークの、あのまま被っちゃったこれ、えーと、どうしよう、被ってもまあいいか、えーと、なのでID、ランドマークのIDと、セルフのランドマークのID、いや、何も間違ってないんですけど、なんか微妙に混ぜた、これは引数略しちゃったほうがいいのかな Twist公式のドキュメントのどっかに、Twistではセルフを書くことは、まあ、そうそうないが、みたいなことが書いてあるんですよ。 なのでね、基本的にはTwistではセルフを省略する方が、なんか、理想的みたい。実際、コードを書いてもそう思いますね、セルフ、セルフって、あの、うるさく書かなくてもいい言語なんでね、うん、略していくのが、うまかったなって気がする。 とりあえず、こうすることによって、えーと、ランドマークの中にランドマークが存在するんだったらば、そのインデックスが手に入り、そうではなければ、ニルが帰るっていうね、そういった状況を作り出すことができると、こっちのほうが、あの、ちょっとより良いはず、強制アンラップよりね、強制アンラップ自体が悪いわけじゃないんですけど、さっきも言った通り、別にモデルデータの中に入っているランドマークリストの中に、ここでね、あの、渡されてきているランドマークが入っているとは限らないというところを尊重すると、強制アンラップするにはまだ早いっていうね、そういった状況ですかね。 ランドマークがちゃんとね、用意されているんで、ここで、えーと、モデルデータの中のランドマークを渡しかつ、エンバイロメントとしてモデルデータを渡すと、まあまあ、ここのコードだけ見ればね、絶対にそのモデルデータを本家としてね、使っているんで、悪くはないんですけども、ちょっと私ね、これだけよろしくないよということになる、あー、よろしくないけど、まあ今のところはオプショナルをね、使っているんで、大丈夫ですかね。はい、じゃあ、とりあえず次、読んでいきましょう。えーと、次のステップとして、えーと、Gopiプロパティの中で、えーと、モデルデータを使うと、バインダブルラッパを使 まずはお話になっている、とにかくこれをやっていくとすると、まずは、Rね、Hスタック、これで、ランドマークネームと、あと、Favoriteがこれを入れていくと、どこまでやりますか。えーと、そうすると、ランドマークっていうことですね。 これでランドマークネーム、これをまずはHスタックにインベットする、インベットはどれだっけ、えーと、インベットは、あと、うん、そう、Refactorかな、Refactorの大げさですよね、えーと、フォルトでもないし、ここじゃなかったっけ、こっちでしたっけ、エディット、インベット、あれ、Uかな、Uで、これ忘れちゃった、忘れたときはここのヘルトですよね、インベット、あれ、インベット、インベット、あれ、なくなっちゃった、というのを、あ、丸カッコ選んでるからかな、これ、えーと、丸カッコじゃないところを選んで、Refactorではないですね、で、Navigatorでもないですよね、あれ、どこだっけって感じだった 自分のお得にも見つけられないだけですからね、あ、いかん、しょうがない、しょうがないというか、とりあえず、エディットやってみましょう、Hスタック、で、それで、Hスタックにインベットして、さらにボタン、ペパリット、ボタン、ペパリット、ボタン、そして、エディットセットに対して、えーと、 BindingするのはEnvironment、ランドマーク、ランドマークか、ランドマークのTweets Favorite、これをDaraでね、やっていくという話ですが、 モデルデータ、モデルデータの中のランドマークインデックスでやっていかないといけないのか、ランドマークだけじゃ、ずっとダメですね、なので、結局、ランドマーク、これでやればよかったんですけどね、ランドマーク、 だからBindingしたものを返すことにすればいいのかな、これ、ランドマークじゃなくて、返すものにも、これね、こっちだ、だからこれで、戻り値としてBindingのランドマークを返せばいいのかな、 そうすると、これが、モデルデータのランドマークのBindingがこんなにできている、すぐにこれの、えーと、この辺、適当にアナリがてますが、Bindingでランドマークインデックスができないのかどうか、 えーと、そうすると、Bindingでしょ、Bindingに対して渡していくっていうスタイルを取っているコードですよね、IsFavorite、で、あ、そっか、モデルデータ、ランドマーク、IsFavoriteとか、 えーと、モデルデータ、あれ、ダメなのか、こういったのとか、えーと、タラーがインスコープにないということで、そうすると、Bindingのセットと、なんかややこしいことやりすぎかな、これだと、えーと、ランドマーク、ちょっと実験しますね、Is、ランドマーク、例えば、ゼロのIsFavoriteとこういったやつがともにタラつけるところなのか、モデルデータタラがないっていう話ね、 だから、まあ、その辺をBindingに対するとすると、どうしようかな、イニシアライザーで返してみるか、まあ、いろいろやってみますか、とりあえずね、なので、えーと、トップユニットでいいかな、トップユニットゲットセットからね、これでゲットアウトして、あー、そっか、こういう略し方しちゃうのね、なるほど、うん、とにかくランドマークを返す、だから、ここでモデルデータのランドマークを返すってセットとして、こういう風にするのか、セットとして、ここでモデルデータ、ランドマーク、イコールか、イコール、ニューバリュー、でもこれじゃダメですよね、アサインできない、えーと、インア マークを受け取ってポイントを返すですね、だから、ランドマークを受け取ってポイントを返す、だから、やっぱりモデルデータでいいですね、モデルデータのランドマーク、イコールだら0でよくて、あとアクセス、えー、アクセス、なんだっけ、アクセスコントローラですね、確か、あの、モデルデータのランドマークって、今、あの、プライベートセットにこのまま閉めましたよね、この絵とですね、どこかBindingになると外側から返ってないといけないと、まあ、そういった都合があるからバーにするっていう形が、まあ、一般的なんですかね、この辺はちょっと、あの、Swift、えーと、SwiftUIはね、特定 ランドマークが特定に入るので、それによって、ここのFavoriteボタンっていきなり、ランドマーク数の、えーと、いつ、あれ、ランドマーク数の、あ、インデックスか、ランドマークインデックスの、いつ、Favorite、あ、これが、ランドマークインデックスがオプショナルでしたね、今ね、だから、これを結局、結局、標準アナログにはしちゃいますけど、まあ、こういった形で、あとでね、対応取るでね、Favoriteボタンは、ランドマーク数の中のランドマークインデックスでいるFavoriteボタンをBindingしたと、うん、これで、ようですね、ビルド取るかな、これで ロールと思われる、うん、で、これで試すかと思った分、もしよね、きっとね、プレビュー出してやってみますね、で、えーと、これで動かして、で、今ランドマークで言っているんですが、これで、星が、あー、あった星ね、で、口を押すと、色が変わってくれて、で、また押すと、うん、色が、ね、出たり付いたり、出てくれれば、うん、いいですね、ちゃんと動いている予感がする、本当かなという感じですけど、まあ、とりあえずね、ダメだったら、その時動かなくなるんで、まあまあ、そのままやっていけばいいでしょうという感じですね、で、とりあえず、こうやってBindingをやって、で、ここで、ランドマークインデックスをモデルデータオ 、あ、すごい雰囲気で訳しすぎたんだけど、訳のツールで訳しますが、うん、そうね、モデルデータオブジェクトとともにランドマークインデックスを使ってください、更新するように、あ、これはね、出てみちゃった、とにかくモデルデータをね、使って更新するようにっていう風にね、そんな風になったと、で、えーと、ステップ7行っておきました、それで、えーと、ランドマークリストに戻って、で、それで、えーと、ランドマークリストのお気に入りオン、オフ、それをライブプレビューで見ていくと、で、えーと、ナビゲート、えーと、リスト、ディテールビューに行って、で、そのお気に入りかな ランドマークディテールに戻るもそうなんですけど、ランドマークリスト、ランドマークリストが、ここのお価値持ってきてたかなというのが急に不安になってきたので、確認しておくと、えーと、このプレビューはエンバイルメントでモデルデータを渡している、で、モデルデータはその先でパインディングしてますね、大丈夫そうね、なので、これで、例えば、このプレビューから、今のところいろいろある中で、一旦、フェイパリ通りにしましょうか、この中で、えーと、なんだろう、これ、えーと、リリーコストトリング、えーと、そうね、ここのお気に入りを、ちょっとオフにしてみますかね、オフ、で、これで まあ、えーと、パインディングのルールは何か、えーと、バリュータイトル、変更する、うん、パインディング、まあそうですとかね、えーと、リンクペア、オブビュー、突き当た、一応、レシーブと同じデータ、レシーブ、同じデータをレシーブというより読み書きだった気がするんで、うん、まあ、ちょっと違う、あの、スタッフ担当はわかんないですが、えーと、あとは、リード、バリュー、テンポラリティー、えーと、そんなことはないですね、アップデート禁止するもんじゃなくて、ウェブカードのどっちかですよね、うん、えーと、値であり、変更、値は変更する、これスペ で、あとは、その変更方法と言える気がするし、レシーブっていうのが気になって、レシーブだけだったらエンヴァイロメントでいいんじゃないかなっていう気がしてしまって、一応ね、やっと自信がないか、あってた、大丈夫でね、パインディングコントロールは、値のストレージで、えーと、データを異なるビューに、えーと、リードライト、そこがね、動くだけだったんですけど、まあ、リードライトできる値はね、ビューで共有すると、そういったやつ、異なるビューですよね、ビューと、まあ、なんだろう、比較問題とか気にしてすぎなのかな、ね、まあ、いいか、まあでも、スタッフ担当だからいいんだ、まあとりあえず やり取りしないからですね、プロパティラッパーは、データバリューをね、ステートとして扱うもので、プロパティはプライベートで、えーと、ディフォルトバリューもある、ここも重要か、とね、こんな感じでやっていくよと、で、これで、えーと、全部できましたよ、ということで、次の章へ行く、という形になりますが、まあこれはね、また次回ですね、章じゃないか、次のセクションへ行く、ということになりますが、まあこれはこれとして、ちょっとやり残したことがあるんで、それをやっていきましょう、というのもですね、さっき言った通り、今のところのDTLViewの設計では、えーと、だから、DTLViewの設計では、エンヴァイロメントによって渡 されたときの、いろんなね、プログラム的な行為というものが非常に複雑になってくる、そういった心配が出てくる、実際そうですね、ランドマークインデックスは、ランドマークの中から、ランドマークが現れる場所を探すんですが、 もののなくない可能性があるので、まあ要するにアンラップといってもあるんですけど、まあそうするわけにはいかないのでオプショナルにした、というね、そんな背景が今日ありますよね、で、ランドマークディテールの中ではそれでいいんですけど、結局、ランドマークリストを使ったときに、今、自分はですね、先送りしたわけですよ、問題を、どう先送りしたかというと、 えっと、どこだっけ、ランドマークのリスト、、あれ、ランドマークリストじゃなかったっけ、ランドマークディテールのここで、 どこだっけ、ランドマークのローだけ、どこだっけ、 忘れてしまった、ランドマークロー、ランドマークローの中だったか? あれどこだっけ、りょう、これがオプショナルでしょ、 だから、ところがランドマークディテールの中の、これですね、 ランドマークインデックス帳が得られないことがあるにも関わらず、ここでどうしようかって話になってしまうわけですよ、 ランドマークがなかったときに、お気に入りボタンを出さないだけでいいのかどうかというのを、僕は判断しないといけないですよね。 ただ、なんかそれも変ですよね、どこまでランドマークディテールが汎用性を狙った方なのかどうか、うん。 ま、そう考えていくと、ランドマークスの中にランドマークがあるというのを絶対的なパペアとして持っておくというのが、 まず一つね、今回のアプリにとっては大事になってくるところのはずなんですよ。 そうしたときに、じゃあどうする手があるかというと、 ま、一つはあの、えっと、なんだっけ、えっと、 さっきのドキュメント、チュートリアル、チュートリアルにあった通り、ここで強制アンラップしてしまう方法、ある意味、ちょっとですね、これね、 これによって、もう大前提ですよ、あのランドマークスには絶対ランドマークがあるんだからインデックスが取れる、 先送りする必要がないというね、だけど、そうするとインデックスが絶対にオプショナルとなりますよね。 ただし、これでも落ちるわけですよ、間違ったものをね、渡したときに。 じゃあどうしようかってなったときに、えっと、一つの方法としてはエンバイロメントが、 エンバイロメントはいつ渡ってくるのかな、そうね、結構難しいと思うんですよ、ここでね、 ボディの中で、この間違ったランドマークが渡ってきたっていうメッセージをね、出すっていう、 その方法が一つ考えられますけど、それをやるためには、このフェイバリットボタンを出すかどうか問題もありますが、 まあそれ以上の問題もありますよね、えっと、結局フェイバリットボタンを出すかどうかを判断するとなると、 この含まれていないことも許容したビューになることになるんで、まあね、最初の問題、 ここのね、ビクリマークをどう解いていくかっていう問題と変わらなくなってくる。 そうすると、含まれなかったときには、ランドマークがありませんっていうことにして、 デッキ入れが表示できなくする、これも一つの手ですよね。だから、行動とすると、 例えばこのスクロールビューより前ですね、この前で、えっと、 ランドマークインデックスがちゃんと取れるんだったら、スクロールビューとかをちゃんと出して、 そうじゃなかったときには、例えば、トラベルとしてね、トラベルじゃないテキストとしてね、 えっと、定義されたランドマークが見つかりませんみたいなね、こういったテキストをね、出して、 それだけで終わるとかね、そういったスタイル出しちゃいますね。 ただね、そこまでじゃなくても、これ今回、爆薬できる。 あくまでも、今書いた方法と、ランタイムの段階で判断するんで、 ユーザーがもしその状況になっちゃったときには、 何もなかったよって指を見なきゃいけないという 状況になるわけで、それはそれでいいかもしれないけど、 生かしぼくないかなという気がするんで、 そうすると考えられるのは、ランドマークが渡されて、 モデルデータもあるというね、そういった状況の中で、 このランドマークがモデルデータの中にあるんだったら、 インデックスを受け取れば十分じゃないですか。 なので、書き換えてみましょう。ランドマークインデックスを イントパターで取る。 で、ディテールは必ず何かしらのランドマークを 表示するっていうのを大前提とするのだとしたら、 こういう風にするとランドマークインデックスを 計算するっていう必要がなくなって、逆にここがランドマークですね。 ランドマークって、まあこれは、 実際のものの感じもちょっとしてきたりましたけどね。 でもまあ大丈夫でしょう。ランドマークは ランドマークカッターで得られる。 で、このとき、バインディングですね。 今回バインディングしたいんでね。 バインディング、でランドマーク、そして、 それで、この中でランドマークの中の、 ランドマークの中のランドマークインデックス。 で、それでこれは絶対にあると言うね。 そういった前提で、という形を取ろうと思ったけど、 一旦したければ、まあメッセージがちょっと 雑なメッセージになっちゃったのでわかりにくいですけど、 まあ、ここでちゃんとメッセージを出してあげれば、 落ちたときに、とても大事になりますよね。 で、これでランドマークが取れるようになったので、 これでこのコードとしては、 ランドマークのコーディネート、コーディネートか、 バインディングか、コーディネートが、 バインディングから、バインディングから 値を取るので、コーディネートがありますよね。 あ、バインディングになっちゃうのか。 これが。 だからこれで、値を取るのはラプトバリューか。 なんか少し、微妙な感じがしてきましたが、 ラプトバリューか。 まあ、しょうがないのかな、これ。 なんかちょっと微妙な気がしてきましたね。 ランドマークをこうすると、バインディングが 取れるようになったって、 バインディングの状態だと、このような有様になるから、 なんかもうちょっと工夫が要りますね。 なんだろう、この工夫は。 まあ、やり方はあるんですけど、ランドマークインデックスを 取るでしょうって、ランドマークがあるでしょうって、 ランドマークがあるでしょう。 で、バインディングが必要なのは、 えっと、値を取りたいのためだけなわけですよね。 だから、その時に、バインディングを変えないのか。 だから、これがランドマーク自体をバインディングする必要も 特にきっとなくて、やってみますよ。 ランドマークは普通にモデルデータのランドマークを 返せばよく、 モデルデータのランドマークを返せばよく、 で、それでランドマーク自体もバインディングを 特にする必要がなく、 で、これでランドマークのインデックスのを返せばよく、 で、それでこの辺は色々よくて、 で、実はこのバインディングするようなところで、 これで、isSetとして、このisSetの相手として、 ユニットバインディングを、これでgetだった時には、 ランドマークのisFavoriteを渡してあげ、 かつ、setだった時にはランドマークのisFavoriteに対して値を設定する、 っていうバインディングをここで作ればいいのかなと思ったんですが、 ユニットパーソナルアップグレードじゃないね。 クロージャーというか、パラメーターで。 パラメーターでどうか。 パラメーター、そうですね。 パラメーター、こっち。 isFavorite、これが丸カッコ。 これは、これはワクワクできないですね。 フォグされてる。 isFavoriteがランドマーク構造体で、 ランドマークは、ゲッターしか入れてないですね。 ああ、そうか。 ゲッターとセッター、両方がいるのか。 なんか、スマートにいくかなと思ったけど、 結構、入れじゃないですね。 ここは必ず大丈夫と踏んで、とりあえず、 エラーハンドリングでもなくすのは、なんか、 微妙ですね。 エラーハンドリングって言われたら、エラーシェリーね。 まあ、こんなんで、とりあえずgetでしょ。 で、setもね、同様なんですよね。 で、これで、newランドマーク。 newランドマークを取って、 うん。 バードは欲しいですよね。 ということで、こう書いて、 これで、リターンじゃなくて、ここはセットですね。 で、セットに対して、newランドマーク。 うん。 で、これもまた、ランドマークがね、これ、 えーと、なんか、読み取り専用になってるんで、 getとset、で、newランドマークにして、 これで、モデルデータのランドマークに、 newランドマーク、これで、 一通りできたつもりでいたんですが、 getset、getset、うん。 で、えーと、getset、willset、 getsetキーワード、 えーと、アクセスディフィニッション、 セッターとランドマークで、まるがっこう、 ゲッターとセッター、 はい、こうですね。 これで、一通りできたのかなと思ったら、 意外とエラーがある。 セッターがまだ、エラー。 セルフが、イミュータブル。 セルフがイミュータブルか。 セルフがイミュータブル。 これじゃダメじゃん。 ね、なんか、うまいこと、 インデックスで捉えてうまくいくかなと思ったけど、 バインディングにちょっと邪魔されてますね。 これは、そうすると、 バインディングをどこまで作ったらいいんだろう。 えーと、あー、getsetで代入していく。 この辺はいいと知って、 これで、isfavorite、 ちょっとちょっと読みますか。 あと、丸カッコがどう言ってますね。 あー、isfavorite、ここが、 えーと、これが、えーと、これでいいのかな。 こうして、バインディングですが、 丸カッコがない。 丸カッコがないですよね、確かにね。 もう一個、欲しいですね。 これ、開業すると、これのバランス悪いのは、 どういうことだろう。 まあ、でも、こうですね。 こうすると、アサインの問題が残って、 で、アサインのためには、 ロバティスセルフが、 ismutableだから、 isfavoriteに代入ができますよ、 って言われてるので、 やっぱり、やることができましたね。 えーと、セットするのが、最終的に、 これ、環境変数なわけですよね。 環境変数って言われるのかな、 現場読めるのなわけですよね。 で、その時にセットするのって、 別にmutableでやる必要ないですよね。 なので、えーと、 なんだ、えっと、ここで、 non-mutating set、 こんなの書いてる人も、 見たことないんだけど、いいのかな。 まあ、これで、押し上げると、 ランドマークも同様に、 ランドマークに書き込むときに、 non-mutatingで良くなりますよね。 non-mutating set、 で、こうすると、 レバー取れますよね、 で、それとモデルデータのランドマーク数を、 1番目を渡すってことをしていたのが、 ここで、インデックスを渡せば良くなるんで、 1で良くなるわけですよね。 そうすると、 良くなるよね、ランドマークインデックス。 ね、こうする。 こうすると、ほら、全部うまくいって、 で、それで、えーと、 どうだ、出てる。 これをね、見るとちょっと動くはずなんですよ。 多分ね、色々変えたから、 微妙だけど、 あ、エラーか、他の場所でエラーかの、 えーと、このエラーは、 ランドマーク数のところね。 エラーになっているので、 ランドマークディテールを出すときに ランドマークのインデックスを出さないといけない、 というね、 そういったルールになっているので、 フィルターランドマーク数の中で ランドマークを出すのではなく、 えーと、例えば、 ここで、 フィルターランドマーク数のインディシーズですね、 インディシーズを取って、 それで、 えーと、 침入しているのかな、 まずは、 ランドマークインデックスを取って、 これでランドマークインデックスね、 これ渡してあげる、 で、ラベルのほうは、 ランドマークインデックスは、 ここが、 えーと、 エラーになっている中で、 ランドマークインデックスをね、 渡してあげて、 それと、 どこまで戻るのかの、 結局、 インディシーズ、 これがIDがないっていった、 ノンコンスタントレンジ、 インテジュアレンジ、 インテジュアレンジではないといっている、 若干、 よく分からないな、 否定数のレンジ、 インテジュアレンジではない、 インディシーズとインディシーズの、 レンジではない、 よく分からない、 で、これで大事になってくるところとしては、 今のところ、 ランドマークと、 ランドマークが、 一致しないという状況が、 もう何もなくなっているってね、 そういった状況になっているので、 想定外の状況が、 とりあえず起こっていない、 それにしては、 コードの書き換えが、 複雑になっちゃっているのが、 気になるので、 これはちょっと整理したいな、 という気はしないようになるんですけど、 とにかくね、 ランタイムで落ちるのがいいか、 落ちないんですけど、 落ちるのがいいか、 それとも、 これは失敗ですね、 これを押してもダメでしょ、 つまり、 戻っても、 戻ってもマークが付いているからいいのか、 あれ、 インデックスを間違えた、 例えば、 セント・マリー・レイク、 これを押すと、 セント・マリー・レイクが来ましたね、 これを押して、 お気に入りを解除すると、 どうなりますか、 これで、 いなくなりますね、 アートロック、 アートロック、 いいですね、 お気に入り状態でオープンにする、 これで戻ると、 いなくなる、 あれ、 押せてないか、 セント・マリー・レイクというのを選んで、 押すとして、 これで戻るとして、 セント・マリー・レイクいますね、 この状態で、 例えば、 押して、 フィルターをかけて、 押せない、 ここの上で押せないか、 これくらいで押してあげて、 これで、 フィルクートとか、 押したところ、 ここ違いますね、 ここで違うものが出てきてますね、 そのせいか、 これが問題だということが分かった、 フィルターをかけた時に、 分かったかも、 分かったかもかな、 フィルターとランドマークスでしょ、 マリー・レイクは、 ランドマークスを使っているじゃないですか、 ランドマークスを使っているけど、 このランドマークスは、 モデルデータのランドマークスであって、 フィルターとランドマークスじゃないから いけないんだ、 フィルターとランドマークス。 フィルターとランドマークスは、 ランドマークリストにいますね、 なので、 これを考慮しないといけないことが 出てきてしまいましたね、 意外と難しい、 影響が難しいですね、 favorite onlyは、 確かにランドマークスの中で指定するものだから、 そうすると、 ランドマークディテールに対して、 ランドマークインデックスだけで 渡しちゃっているんですよね、 だからやっぱりこの辺を考えると ランドマークの方がいいですね、 ランドマーク。 もうすると、 ランドマークディテールがやりたいことも そのランドマークに対して ランドマークディテールに対して ランドマークディテールの機能率に対する 陰々揺れを変えると フェイナリストのスポーツ性に 対処するので、 フェイナリストを検討してきたら 恐るっと 検討するので、 やると フェイナリストが ランドマークディテールは エンバイロメント ちょっと大げさですよね、 エンバイロメントね、 インデックスを取ろうという発想だったら ランドマークの エンバイロメント取ればいいんですけど、 というよりはこれ 全体なんていらないわけですよ、 別に連携したいといっても。 なのでここで ランドマークとして バインディングとして ランドマークを ランドマーク型で取ってあげれば これで済む話じゃない? そしたらランドマークなんてものは いらないし、 ランドマークプロパティも別に インデックスとか考慮したりとか ランドマークつまり、 ディテールもディテールとして エンバイロメントを 渡す必要のない ランドマークとして 渡すものとしたら ここでモデルデータの バインディングされてないんで どうしようかなって話になりますが バインディングはどうすんだろ モデルデータがあって ステートで大丈夫かな ファーストとかだと ファーストとか モデルデータの ファーストがどうなるか モデルデータに 損なわない ランドマークの 0番目 これをこうやって バインドで渡してあげる あとステートは プレビュアブル プレビュアブルステート これで渡してあげると これでOKですよね こうするとめちゃくちゃ コードがシンプルになって ビルドエラーはどこもないの あんまりランドマーク ディテールを ちゃんと呼べてないかもしれないですね ここでインデックスになっているのを ランドマークにして ここでランドマークを渡すわけですけど この時にランドマークを これを インディシブとかも インディシブ関係なくなったんで ここがちょっと工夫が要りますね フィルタードランドマークに対して どうしますかね これフィルタードランドマークと バインディングにした方がいいのか ランドマーク インデックス やっぱインデックスか インデックスかもしれない フィルタードランドマーク フィルタードランドマーク フィルターを必要なときに 角度にしただけ そういうことになっているので ネタ5は インデックスでやりたいか インデックスでランドマークを回して それで インデックス ここで意外と まだ引っかかる バインディングをかけていくには フィルタードしてなかったときの ランドマークのバインディング先を やらないといけない インデックスを振り替えないといけない そういった問題が出てきてしまうので そうすると 厄介なときでできなくはないでしょうけど だから ちょっとやってみますか ランドマーク フィルタードランドマークでいいわけですね それで ランドマークは ランドマークでよくて ここがシンプルになるんですけど バインディングのところですね ここだけちょっと工夫しないといけなくなってきて 工夫の仕方としては ランドマークインデックスイコール ランドマークとして 0のITとランドマークのIT 一致するランドマークインデックスを取る フィルターされているとどうしようと フィルターされていないところから ITインデックスを取って それでこのインデックスを使って ここで 誰が言っているのかな エンバイロメント エンバイロメントだけど バインディングとして ここ モデルデータの ランドマークの ランドマーク インデックス こういったふうにして これで エラーはどうなった 上の方エラーが出ているかな ここ実際は大丈夫かどうか ここまでいくとどうなるか とりあえずビルド中ですが なんかスマートじゃないのは こういうもんですかね なんかもうちょっと手を やりたい気がしなくもない ビルドにめちゃくちゃ 手がかかってるの パソコンが重くなってますが ランドマークが エラーとか フィルターとランドマークじゃなくて モデルデータのランドマーク なので モデルデータのランドマークの ファーストで これでインデックスを取り あとはエラーは まだ残ってるかな なんか動きがおかしくなってきた 派手なことしすぎてるのかな これでビルドをかけて なるほど 意外といろいろ面倒か でもバインディング自体は 悪くない気がするんですよね なんかね そうした時に なんか面白い方がありましたね インデックスを これ渡せたんで大丈夫か あとはタイプチェック タイプチェックがダメだった タイプチェックが リゾナブルタイムで できなくなったということなので まずは一つ考えられるのが フェイバリッドオンリー この辺を細かく分けていく 手も一つありますね でもそういう問題じゃない気がしますね これね あと分けてみますか まずはトブルで フェイバリッドオンリーだから まあでもいいか スプリットビューがあって トブルでピストで フェイバリッドオンリーで 作ってやるから フィルターバーと そんな風なのを作るとして どうしてもプロパティでいいけど 型にしてみる手もあるかな ということで このカッティングモデット ここでね 例えば フィルターバーみたいなね こういった型を作るとして この辺で トラックとフィルターバーとして ビューを準拠させて それでこのボディの中で さっきの トブルのボタンを作ってあげると で 小フェイバリッドオンリーと というふうにして これで小フェイバリッドオンリー とバインディングして そうすると このバインディングのところ 小フェイバリッドオンリーは ここの小フェイバリッドオンリー って言い方でマットステイだと ここで使うんだな 8本の小フェイバリッド オンリーはここですかねますね なので で これは小フェイバリッドオンリー ってこれをバインディングに ワードズからダラにして こうして 水温ができないと思うんですよね これぐらいだと この law loopの中の ナビゲーションリンクの中で だいぶここが根本的に間違う っているんじゃないかなという 気がするんですが その中でランドマーク ディテールが だからディテール インデックスを取ってディテール を取って この中でディテールピュー とかとか なので この中でストラック ここに置きましたけど 名前とかに 割りたいですね エクステンション ランドマークリスト ランドマーク リストにとってのフィルターバー になるんで これは重要ですかね 意味的に コード上は何の問題にしても それでこのランドマークリンク この辺をいじるのかで 結局あれ が外でやったら いろいろと面倒になって きますね だから中で頑張るのが 一番いいですかね インデックス を取って 多分ここの辺の渡し方 が間違ってるんじゃないかなと 思うんですよ これコメントアウト させてみるとどうなるかなという というと 多分 折っちゃいました ね だからここが問題で バインディング が 多分ランドマークをバインディング 求めてる中で これを呼び出すときに 問題で 結局今のままだとおばかし やかいなんですかね ランドマーク データのランドマークの ランドマーク インデックスのアクセスをして それで どうするかという感じになって くるね ここはどうするんだろう バインディング を変えていくというか イニシャライザーを上げてやるん ですかね やってみますか イニット で バインディング バインディング 取りますよね 取ってゲートが取れ ますけど ランドマークでバインディング 取りましたね ランドマークはね それでランドマーク さっきのとこ 見ておくと これはステップでモデル データで モデルデータはランドマーク 捨てる バラーですよね こののびで できるかなと思ったんですけど バラー モデルデータランドマーク これでできなかったということは 自分が分かってないだけですけど ね これでビルドかけるでしょ そうするとフェールになってモデル データが来たとダメということ になるんで バラーがダメですよね モデルデータがエンバイオメント であって さっきステップでした もんね モデルデータでしょ それで この辺を何とかするにはやっぱり ここでバインディングとしてイニット で ここでゼットとしてクロージャー を渡しゲットとしてクロージャー を渡しイニシャライズ終わりっていう ふうな形を取った上で ここに書いて いけばいいんですかね モデルデータ のランドマークのインデックスね これでここがまず余るとこも一 回読みますね これでこうしてゲット ゲット アセットと逆じゃないね これでゲットはこの中に対して ゼロゼロ渡せばいいのかな それでゲットはこの辺りを返して あげると そうするとこれでビルド はオールかなっておりますよね きっとね 悪いことをしてないはず 多分 で ビルドがどんなか困ってる 感じですかね 困った でゲットと赤間がないね これでどうだろう うん ってビルドを置いてここが白で 選ばれてるかどうか ビルドを選べる タイプチェックか また他のタイプチェックか なので これは困りましたね このタイプチェック ができないっていうときは面倒 ですよね このランドマークディテール の問題であることは間違いない はずで それでここをどうするか 外に一回出してみますか ランドマーク のナビゲーションリンクで欲しい 情報 とりあえずこれ丸っと取って 丸っと取り 取りすぎた ラベルの前までですね なのでこれでここまで 取って これの名前としてはランドマーク ディテールビュー ちょっとすごい 語弊を感じる名前になりますね ディテールビューにしようかね ディテール ビューとして でもいろいろあった けど それは後にして ここのトラクト トラクト ディテールビュー デビュー にして それでボディの中とすると さっき書いたやつ これをやるためには モデルデータがエンバイロメント として欲しいなということがきり と見えてくるんで エンバイロメント として モデルデータのセルフに してば モデルデータでいいんですか ね そうしてあげるとモデルデータ があって IDEで比較してるけど これ でディテールビューのランドマーク インデックスがこれを受け取る 形にするのかな これ検索してます ね だからランドマークがこの辺 で言ったらランドマーク これ最初 書き換えをしていく中で これは 良くないよねと言った状態に戻って きちゃいましたね これは困りました ね あれもいいのか この中にインデックス があったとして そのインデックス を探して 見つからなかったとしたら やっぱりどうするのか問題出て きますね エンバイロメントでランド マークで探して それでディテール を表示して 一発フェイバリット をバインディングしていく フェイバリット をバインディングするには エンバイロメント というのがちょっと微妙なのかな ディテールビューでランドマーク を取れさえすれば大丈夫なんです けど それだとさっきと話が同じ になってきますね ランドマーク ディテールがランドマークをすでに 取ろうとしてますもんね そうか こうするとこれは何か問題になって るでしょうね 多数論の問題じゃない ですよね これなので戻しますが ここまで これでとにかくバインディング をここに渡したいわけですよね これで例えばゲットもセットも 何もしないといったようなもの を渡してあげるとすると これは 多分うまくいくと思うんですよね これコンパイルトールじゃない 多分 その中身が多分コードが間違って いるからいけないみたいなそう いったものだと思うんですよ おそらく ビルドを今かけてみて これでビルド が多分通るんですよね 失敗した あれ 勝つようができないかとか バインディングでそうか バインディング でも失敗 ここでランドマークの中で ランドマークのバインディング ですよね これが欲しかったのは バインディングでランドマーク でバインディングしないことには ペーパリと連携できなくなっちゃ うんで それが欲しいでしょ これを渡したいわけなんですけど これランドマークディテールがない だけでビルドがすんなり通るでしょ ここがあるとダメっていうふうな 状況になっていると なので この 状態でランドマーク そしてこれが バインディングでランドマーク があってあるよというふうにした 上で 例えばこれを無理やりですけど 要請アンラップのオプショナルに して 例えばオーバーデータだけで これ2両単位にしてあげて これで バインディングがもうランド マークでできてるはずなんで これで ビルドかけたときにランダイム までいかなければ ふっきり成功しますよね やっぱりね だからここの過多 推論が問題になっていて 過多推論が問題になっている ということは もうそんなん間違ってるん でしょね コードがねこの程度で 推論が間違って あのうまくいかない となるとね それでモデルデータ の中の モデルデータの中のランド マーク ランドマークスとかも出ないな でも大丈夫かな ここまでビルド かけると違いが出てくるよね まずね 理論できないとか言われて るのかな これをえー アプリケーションを 作るときに アプリケーション を作るときに こういうふうにね アプリケーションを作っていく と アプリケーションを作っていく ことができると 今まではできない んだよね しかも こうか こうか dong になっているじゃない だかんお もうすごいね こうなってる な こなってるね やばいなー合理に もらってる そんな普通 になってる とき も  stalking �若者を障害者的に 懐かしい 恐怖恐怖をたくさん 食いたい 死ぬように怖い なってて そう この世界が 朝食を食い 果たしの行方に近いのね こういう ことは共通 いければいかない としていますね やるってあるな って思うんですけど ときに ヘルトトランプマークス もそうだけど どうしようかな プロパティーを 何か適したい気がするんですが ヘルトトランプマークス バインディング を取りたい バインディングを取り たいときに エンバイロメント エンバイロメントから バインディング を取る これは調べたほうがいい のかな 面白いです モデルデーとか トランプマークスがあって ちょっと 調べました 自分の知識不足の問題 ですね なので SwiftUIでエンバイロメント バインド バインディング どういう のかな バインディングができない バインディングが必要 エンバイロメント を取りたい これは全然気合いの 話になってないですね エンバイロメント をちょっと切りたい バインディング 出てくるかな 今まで自分もやって ると思うんですけど 普通にバインディング を用いてアクセスする バインディング で これは関係ないですね バインディング コンスタント これも関係ないですね バインディング エンバイロメント を書き換える エンバイロメント で プレゼンテーション プレゼンテーション は プレゼンテーション ラップド バリュー エンバイロメント ラップド バリュー ディスミス これをバインディング に渡したいんですよね とりあえず これで 15以降の場合は これはまた 別の話ね これはちょっとChatGPT のお助けを入りますか ChatGPTは ここだ バインディングで バインディング コンスタント これも関係ないですね バインディング エンバイロメント を書き換える エンバイロメント で プレゼンテーション プレゼンテーション は プレゼンテーション ラップド バリュー エンバイロメント ラップド バリュー ディスミス これをバインディング と ChatGPT を書き換えたりか これを 書いてみますが 例えば こう 落ちますかね 例えば エンバイロメント で付け取ったオブジェクトの中に あるプロパティを 別のバインディング を取る理由に渡したいのですが まずここでいいか 教えてください いいかな なんか常識だと思うん ですけどね なんかできなくて とりあえず ポイントはオブジェクト オブジェクトであることが多く この辺りもちょっと気になっている ところで まあいいか とにかく今 そうだから 元からというか 今は そうだからなのかな ステートの中で ユーザーネームが エンバイロメント オブジェクト こうしないとダメ なのかな バインディングっても しかして バインディングのユーザーネーム に対してパラセイトユーザーネーム これ配列でしょか だから 渡したい オブジェクトが エンバイロメント のオブジェクトの中に配列として 用意されているオブジェクトリスト の2番目の要素が持つプロパティ だった場合 いや プロパティじゃなくて 2番目の要素だった場合はどうなん でしょうかね これを知りたい こうしたときに 何だろうね 何か エンプレだと思うんですけどね 果た せるのがうまくいかないと言われて しまうと難しいですね 手がかり を探すのがね ただ 手がかりが見つかんない ときに このチャットGPPみたいな 存在はとても助かりますよね ネット で調べていろいろと情報を突き 剥ぎしながら想像するというのが 生成AIが出るまでは当たり前の 手法でしたけど それをつないでくれる としてくれるのありがたいですよ ね こうするのはバインディング のゲットセットを使うのが常識 か なるほど エンバイロメント オブジェクトにアイテムを持つ 場合で アイテムがあったときに これをアイテムとしてバインディング で これをメイキするとどちらかな バインディングとしてゲットセット という形で渡すのが常識です やり ましょうか それ ここでタイプチェック ができなくなっちゃったよっていう お話のわけですけど ここまで はもうダメじゃないですか だから ここでクイックオールバインディング という理論が怖いからとりあえず もうしばらくメイキしていきます か バインディング さすがにここの カステロンぐらいはいいかな ゲットとしてモデルデータのモデルデータ のランドマークスのこれのアイデス ですがランドマークインデックス ですよね これをゲットしてそう じゃないバイセットでこのセット はモデルデータのランドマークス のランドマークインデックス これに対して値を入れたものと複数 行にしちゃったけど一行では合わせる ほどのものでもないですけど 一応 こうしてあげて それでこれでバインディング のイニシャライズが終わりました で これを渡してあげます じゃあ ビルドするとどうなるでしょう ね こうするとビルドフェイルが いきなりサクッとフェイルしました ね コーブンエラーが8って言っている この全然別のところ 別のところ がここですね セットが終わりバインディング が終わり これのバックジャマですね ここですね ビルドをかけるとビルド フェイル まだコーブンエラーかな コーブンエラーで そうね 大丈夫 と言っても確かになんか変ですね 何かここがいらないですね これね これでビルドをかけて どうなる かビルドが成功するかいいのか これが駄目だったらプロパティ に切り出すという感じで切り出します ね とにかくまたタイプチェック とタイプチェックがためになっちゃった という感じなんで 仕方ないな どうするとここで必要なのがランドマーク インデックスですよね ランドマーク インデックスでランドマークを取ろう としているという状況になって て こうどうどうと対処しますか ランドマークインデックスでランドマーク を取ろうとしているここですね これを取って それで使いたいところ としてはフィルタードランドマーク もそうですけど これと併せて例えば ターゲットランドマークオブ オブじゃないな ハードかな インデックス としてイントが通って これでバインディング のランドマークを返すというプロパティ にして ここにさっきのボードを 貼るときに もう言ったんですよね これでね だからここまで行かない 感じかな これでこんな感じでバインディング を返してあげるよというスタイル を取ってあげて これでどこまで できているのかな こんな感じで 悪くなったんですね そうすると バインディングがちゃんと得られる 形で ターゲットランドマークね これが呼べるでしょ そうしたときに ここでインデックスを取ってます よね インデックスを取っていて このランドマークインデックス はここがインデックスがあるクローズ プロジャパンインデックスがある ところを取っているのね なので こうするとランドマーク ここ ターゲットランドマーク ターゲット ランドマークにすると かなりの数量 がいろんなとなりますよね これで ビルドフィールド これはミシング パターン ターゲットランドマーク これファンクションじゃんね ファンクション で これでビルドをかけると かなりの 部分で数量がいろんなとなって いるはずで ビルドが通るかなと思 うんですけど 相変わらず重いですね ここがランドマークインデックス 間違えた インデックスね あと これだな 変じゃない ターゲット ランドマーク あとインデックス これがSuite APIデータに書いてある ようなところね これであとインデックス でいいですね これでこういうふう にしてあげて ビルドをかける とこれでどこまで行けましたと思 ったらAPIの名前を開発項でランドマーク この辺の数字が違うね ターゲット ランドマーク あとインデックス としてランドマーク インデックス こうですね こうするとそろそろ もう家のソーナーぐらいに上げて きてる気がするんだけど ビルド の数量の上ではね でもまだダメですね ビルドのエラーが出てきますね タイプチェックでリゾナブルタイム でできませんでした 本当かなこれ でも本当かも何もね ランドマーク ディペールでターゲットランド マーク あとインデックスでやってる よね そうするとあとはこのインデックス ぐらい このインデックスも若干 気になっていて ランドマーク数の中で 最初のインデックスを取っている あれはインデックスじゃないじゃん ね ワーストインデックスになって ないね このせいか 売れ方は 売れ 方はもう何もないよね ランドマーク 型が売れてるよね インデックスを 取りたかったつもりなのに インデックス を取ってない気がする これも 待ってるからちょっと モデルのランドマーク 数の中でインデックスを取るときに IDを指定してるじゃないですか これを ちょっと調整したくて 次には ランドマーク型ですが ランドマーク 型の中で要はランドマーク数を 定義してますよね どうだっけ アホだね ランドマーク数を定義 してますよね この中でIDを使って インデックスを取りたいみたいな ときに 例えばエクステンション ランドマーク数 それで 配列 別に 配列じゃなくてもいいから エクステンション シーケンス ウェア エレメント ランドマークとして これでこの中で アクション ファースト インデックス by IDみたいな感じで IDを 引っ渡して イントに返す この中で ファースト インデックス アルバイトしかない インデックスは ファースト シーケンスか 間違えた シーケンスじゃない インデックス アクセスできるのかできないんで コレクションですね コレクション コレクションの中で ファースト インデックスでウェアで 0のIDイコールAT こういうふうに やって これオフィシャルだったら 見つかんなかったらっていう想定があるんで インデックスだから インデックスから インデックスにして ここも IDはインデックス インデックスを返す っていうふうにしてあげると クロージャーじゃなくていいわけですよね なのでランドマーク インデックスっていうのは モデル データのランドマークスの インデックス ファーストね ファースト インデックス インデックス ファースト インデックス なんか 名前変ですね さっきのね ランドマークスは ここがby IDで 普通 IDって被らないですよね どこまででもね 被る可能性っていうのは 固定すればできるんですけど 普通の解説なんでね でもね これはIDだから インデックス by IDで普通いいですよね ということで インデックス by IDに変えて ランドマークス インデックス by IDとして これでランドマークスID こういうふうに あげると ここ クロージャーじゃなくてよくなる クロージャーじゃないほうが 何か書きやすいのと あとはカードセットでね ガード分で 使うようなときに便利だったりするので これでインデックス取って インデックスを渡して リテールに表示する これが見つかんないことがあるっていうね そういった可能性を 起こしてですね ただしエルパートランドマークスは 必ずランドマークスから 情報を取っていて そのランドマークの 情報からインデックスをね 取ろうとしているっていうところを 踏まえると 問題ないですかね by ID微妙かな インデックス by IDでもいいんですけど これもう1個考えられるところがあって funcの ファーストインデックスofランドマーク ってランドマークを取るっていう ふうにして インデックスをオプショナル で返すっていうふうにして それで インデックスofIDでランドマークのIDですか これはインデックスbyIDね byIDっていうふうに書いてあげると これで IDをわざと取らないでもいいし かつ Swift標準のファーストインデックスと 同じ使い心地でofランドマーク これでいいですね これで必ずあるんで ここは標準アプリでしょね これで ビルドポールでしょ きっと さすがに 取りましたね だから今まで間違ったのは 純粋にランドマークインデックスをインデックス で取るはずがランドマークで取っちゃって ダーってですね 取るわけじゃなかったです かね これでtargetランドマーク targetランドマークofインデックス もうちょっといっぱい出したような気がしますね targetランドマーク ターゲットランドマーク まあ ターゲットって名前がよくないのか バインドされてるランドマークが欲しい わけなんですけど もうちょっとviewの中であたりがバチバチしてるじゃないですか なのでランドマークからバインドされてる ランドマークを作りたい気がしますね そうしたらバインディングされたものが取れるっていうのもあるかと 難しいな あとなんかそういえば ルイフと言われてバインダブルっていうの なんかなかったでしたっけ ふと今思い出したんですけど あるかなと バインダブル これは何だったかなというのも含めて バインダブルとは バインディングとバインダブル これらのプロパティラッパーについて見ていくと バインディングバインダブルプロパティーは 開発者向けドキュメントでは プロパティラッパー型でバインディングをクリエイトする ミュートブルプロパティー ミュートブルプロパティーにする サポート クリエイティング バインディング バインディングを生成する オブザーバブルオブジェクトの ミュートブルプロパティーのバインド 良さそうだよねこれ バインディング だからここに入ればいいんだ バインディングバインディングバインダブルは バインディング内のね 受け取るようでしょ バインダブルの使い所は単純なケースとして オブザーバブルな型があって それでバインダブルバーブックという風にして それでブックはどっから取ってんだ バインダブルブックエンヴァイロメント バインダブルブックのタイトル これはいいんですけど バインダブルブックエディットビュー エンヴァイロメント まだ全部出てないのかな 他の記事にしますか バインディングとバインダブル絶対違うと思うので 何が違うって話は良いとして バインダブルプロパティーにフォーカスしてる方が わかりやすい気がする 同じ記事見てる 親ビューから渡される 親ビューが渡してるとこ見たけど 同じ記事だなこれ アップルドキュメント見ときますか バインダブルこれは バインダブルバーとしてブックに ブック渡してるので バインダブルバー すごい魅力的なコードに見えるんですけど バインダブルブック エンヴァイロメントでブック渡して バインダブルブックでブックのタイトル バインダブルしてますね 法一 ナビゲーションからまでいっちゃって いいのかな これで例えば .bindable バーランドマークイコール ランドマークにもかな ランドマーク今使おうとしてますよね なので ランドマークというか ランドマークスかな ランドマークスで ランドマークスで 例えばモデルデータの ランドマークスだってる ここまで書いたとして これダメだったら ラップルバリューが アピーラブル オブジェクト オブザーバブルに 連携してなきゃダメですよか ということか モデルデータだったら オブザーバブルですね モデルデータを .bindableにしてみれば いいのかな モデルデータイコールモデルデータ ここまではOKですね ここまではOKで 例えばこれでランドマークに ターゲットランドマークスを 今まで渡してましたけど これで例えばモデルデータの ランドマークスの ここでランドマークインデックスかな そうするとどうなる ビルドッドかけてみますか どうなるかな すごいアクセスボードやってるけど まぁダメか これでいったらは えーと 取ったね これでいいんだ そうすると バインダブルでモデルデータを作って インデックスは計算する必要があるけれども インデックスを取ったらランドマークの ターゲットのね 後は要らないってことは わざわざね バインディングを頑張ってるほどでもないけど 取ったやつは要らなくなって これでOKか そうするとランドマークに行っている ランドマークのモデルデータを いろいろやって渡せていて インデックスが取れていて あとはモデルデータランドマークス ファストインデックスオブランドマークか えーと ファストインデックス ここがなんか長いなと今感じてしまったんですけど 自分でやったやつですね これね モデルデータのランドマークスの ファストインデックスオブランドマーク まあでも これはしょうがないかな うん はいはい なるほど そうするとこれでできたかな で これで今ランドマークリストですね ランドマークリストだけど これを例えば エータアプリケーションのほう ランドマークアップ これのウェビー出して いろいろやってみれば動くかどうか分かりますね なんか ちゃんと快適にアプリじゃないか えーと 今はコンテンツというか これね なんかスマートになったのかどうなのか ちょっと分かんないですね まあまあやってみましょう とりあえず で こうして動けば とりあえず良くて どうだろう ビルドはどうでしょう いろいろ細かいこと言わなくても良かった気がする で えーと この2番目ですね 今まで間違ってたの これ ビルドをかけて2番目のものを選ぶと この ビルドがかかってない時の2番目をね 取ってしまうという問題が起こってたんですが 今回は 89と どれいるかな ちゃんと出てきましたね これで イニキューを発してあげると 発してあげると あれ セットアップ あれ ビルドの問題か これは誰の問題だ えーと これはリンクができていないという そういった問題になっている気がする ちゃんと押してるよね 自分でね 押してると思うんですよね ちょっとアプリを移動してみますか ちゃんと シミュレーターで シミュレーターが今入ってるか 入ってるね バインド失敗してる気がしてならないですね ちょっとね うん 実行して それで シミュレーターはどこ行こうかな えーと シミュレーターは 何だった うん えーと あれね テクノロジーって言ってはいや うん えーと それで 今動くの待ってますが バインド失敗してるのは やっぱりですね まあ さすがに これでダメだったら また次回で直しますかね いろいろ改造しながらやっていって 上手くいくつもりだったんですけどね まあ 上手くいかない まあ そんなもんですか うん えーと これでとりあえず動かして 動いてくれるかな アプリ あ スワード効かれてる えーと もし えーと あれ 動いた いや スワード効かれてたのは 全然別の話だ はい えーと なので シミュレーターが 今動くとこですよね きっとね 多分 本当だと思ってれば ちゃんと動くんじゃないかなと 思ってるんですけど えーと あー 動いた 動きましたね これで お気に入りをプチ押すと動いて 手2番目を押すと落ちて えーと パインドされてないですね あ これは何回押したかな これ 戻ると いなくはなっている いなくはなっている 例えば これね これを1回プチッと押すと あれ これ落ちてますね で 戻ると あ 居ますね もう1回行きますか で これでプチッと押すと あれ 消えますね えーと これもう1回入れる あ 大丈夫ですね これフィルターかけると問題なのかな フィルターをかけて ここ来て プチッと 落ちてない この問題は この問題って つまり バインドはできてるけど やってきてないのかな なんか すごい謎問題が出てますね これを1回選んで 例えばこれで 1回押すと まだ椅子が居ますよね これを1回押すと 居なくなりますね なので バインディングができてるってことは 更新ができてないってことですね なるほど そうすると なんか ちょっと色々と あの 適当にやってきたところが 肌になってる感じがしますね はい じゃあ まあ この辺については また実際にしますかね なんとなく当たりもついてるような気もしないでもないんですが いや ちょっと一応 際悪いんで ちょっと見ときますか なんか ステップをね えーと ちゃんとやってないところがあるわけですよ お気に入りをクリックするっていうことは ディテールビューですね まずね そこは注目してみておきますが ディテールビュー ここですよね ディテールビューの中で 星を浮かせるビューはフェイバリットボタンですよね これがランドマークの イグフェイバリットとバインドしてますね なので ここではランドマーク ディテールのランドマークがバインディングされていて イグフェイバリットをやってるんで オッケーですかね とりあえずね なので ここは良い ボタンのほうはとても良い バインディングしてるんで この中身がね ここは良いですね そうすると さっき適当に作った バインディングの問題ですかね ディテールに渡すとか リストのとかですか ランドマークリスト その中で バインドがある この辺ですかね ランドマークで モデルデータからランドマーク数で指定したインデックスを渡している これバインドされてますよね バインドされているっていうことは バインドの影響がちゃんとあって それで何かこれならリストですよね これリスト だからリストの中でランドマークディテールに対してはバインドされているものがあって そのバインドのものが変わる やっと考えられるな その点だった なんか気になってたのが モデルデータがオブザーバブルオブジェクトじゃないですか これがオブザーバブルオブジェクトって言ったら パブリックとかなってませんでしたっけ 普通 オブザーバブルオブジェクト このドキュメント見ててさっきも思ったんですけど このドキュメントそのままの例でいろんなブログが書いてたじゃないですか なんか それで言ったらその呼び出し元が書いてないっていうね すごく不思議な解き方をしてるのがすごい気になった なんか自分で何かの技術を理解するブログを書くようなときには 自分でちゃんとコードを書いたほうがいいですよ 多分 覚えこっちでとかしてないで Appleのドキュメントって時々あるんですけど 例を作るために無理やりなコード書くことがあるんですよね その無理やりなコードで学んだとしても 結構理解の妨げになるようなことがあるわけですよ いろいろ細かいこと 状況を作るときに 楽にやるためにレジバーみたいなのを使うコードが確か そういったプログラミングランキングの中で出てくるんですけど 普通そんなところでレジバー使わないだろうみたいな そういったコードだったりとかして レジバーってすごい難しいキーワードなんですよ このキーワードを使っていろいろ例を組みまわしたところで なかなか理解できないんじゃないかなという感じがあって 理解できるのはいいんですけどね その人はいいんですけど そういうのがあったりするんで このオブジェクトとかコードがそのまま まるっとそのままだったように見えるんですよね 比べてないですけど はっきりとは こういったのはあんまりお勧めしないですかね まあいいか とりあえずオブザバブルオブジェクトというかプラス これはいいのか 別にバーでできてますね バインダブルでバーブック ってこれバインダブルか やっぱバインダブルとバインディングは自分がよくわかってないですね バインダブルバーでブックで ブックは普通にバインディングして渡してますよねっていう感じか バインダブルバー バインダブルバー 渡すときもバインダブルバーでブックに渡して それを別にテキストフィールドにバインディングをしていると 大丈夫そうな気がして 迷い込んでいるような気がしないような ここはいいですね つまりね オブザバブルオブジェクトでOKで それでエンバイロメントでOKで それでなんでリンクしないんだろう ここでディテールに渡していて その星が動かないわけですね ディテールの星がね これにつきますよね だからそうすると このエンバイロメントがずれているのではないかぐらいの いったような雰囲気になってくるわけですけど エンバイロメントがずれるようなことって エンバイロメントですよね 雪の中につけていなければ問題ないはずで これプレビューだからいいでしょ これもプレビューだからいいですね アプリのルートについてる 問題なさそうに見えるんですよね リストのホテルデータがステートにあって コンテンツビューの中では本当にエンバイロメントには言及していない リストの中ではエンバイロメントに言及を始めた この中でステートが1個ある このフィルターバーと先 後数の都合で分けましたけど 分けるとちょっと複雑になるんで これはもう1回持っていきましょう ドーデミッドでちゃんと動くんでね なのでこれでフィルターバーは500個目にして それでこのフィルターバーのところに 素直にコードを入れていって これでこれは良いとして リストちょっと概要を受けるかな リストとしてfor1でノビゲーションリンクで バインダブル ここのバインダブル間違ってるのかなみたいなところ 今適当に作ったんで そのせいかなみたいな気がしないでもないんですけど バインダブルがないと下のバインドがダメになっちゃって こくじのバインディングにしないといけないよっていう こういったことになって それでまずいくと調べたほうがいいのかもしれないですね なので例えばバインダブルをやめて ここをちょっと後で使いたい気がするんで 一度コピーだけしてちょっと取っておいて こっちのディテールビューの中で このバインドができないのだから ここでバインディング そしてゲット そしてクロージャーはこれですね これをここまでいいのかな これはランドマークに対して最後に入れてあげると これでビルドをかける 丸箱が1個足りない ここですかね ビルドをかける ビルドをかけてエミュレーターできますかね シミュレーターで実行をかけて エミュレーターは きたきた これで動いていて バリッドどっちでもいいけど これで選んで 動いた いい感じですね これでオフにして戻るとオフですね こうしてもう一回オンにすると いいですね 動くよねさすがに 動きますね そういえばさっき サーバー入ってる ときだけ動かないみたいな謎 起動してましたね そこも気になりますね でも動きますよね いいですよね これでいい これをやるのにさっきの バインダブルで使えるんじゃない のかなみたいな そういったのが 気になってるところなんですけど 関係ないのかな エンバイラメント でしょ もう一回やってみますね バインディングをもう一回やる にはこの2つか だからこんな遠くに 置いとかないで これを置いてあげて これでここら辺かな ここに置いて あげて 下の行はいらないと ここまで とここまでですね いらないと というふうにしてあげて これでも パスはするんですけど そのときに うまく動かないのかというのを もう一回再現してみますか これで ダメだったら自分の単純なバインダブル の使い方が理解できていないと いったお話になりますね 入れた までオッケーでここ切ってこれ ですよね 今一回押したんですけど 動かない 一回押したからこのまま 戻るといなくなりますよねっていう 状況になった これでゲインがとりあえず OKというかバインダブルの使い方 が間違ってるだろうといったお話 になったけど どうなんですかね バインダブルの使い方をGPTに 来てみますか 自分の中で全然理解 してないので使ってる時点で問題 ですよね ここからリフトに突っ込 くと バインダブルの使い方を教えて ください 使い方だけじゃないの 特徴だな 特徴と使い方を教えて くださいって感じでやってみます が iOSでの内法の特性の一つで フリーズと言われるとSwiftデータの バインディングをシンプルにする ために用意されている そんな限定 的に見えなかったけども モデル 型に渡すと そうね Swiftデータの話 ですかね モデル バインダブル さっきと話が違うので 違う話を してますね これね ウェブで調べ ますか バインダブルはプロパティ ラッパーでビンディング 見えた ぶるプロパティ オブザーバブル オブジェクトの見えたぶるプロパティ のバインディングを生成するのを サポートする これだけ見るといい と思うんですけどね 定義はダイナミック メンバールクラフトでプロパティ ラッパーでバインダブルになっている と このプロパティラッパーは バインディング見えたぶるプロパティ データモデルオブジェクト データ モデルオブジェクトって言葉が出て きましたね これのオブザーバブル オブザーバブルプロトコル オブザーバブルプロトコル 全然違いますね つまり オブザーバブル 今モデルデータ あるじゃないですか モデルデータ は 何かすごい勘違いをしていた のかもしれない いいのか オブザーバブル 大丈夫ですね オブザーバブル 29したもの 例えば次のコードは ブック バインダブルプロパティ でインプットしたブックをラップ するコード コードがラップする テキストフィールドがタイトル プロパティ ブックのタイトルプロパティ を変更する タイトルをテキスト プロパティに変更してもらうために 使う感じで リストブル リストアベラブル をロベルする このときにユージング タラシンタクスを使って バインディング に対してそれらのプロパティを 渡すことができるよ ここまでは ちゃんとできたような雰囲気が 感じるんですけどね これでブック があって タイトルがあって リスト アベラブルがあるのかで バインダブル バーでブックで これは外から渡される そのブックのプロパティに対して プロパティを渡していく これが バインディングと何が違うのか 分かんないなというところで さっきのブログが逆になってくる のか まあいいや バインダブル プロパティラップは使える プロパティ と変数 オブザバブルオブジェクト で使える ブロガルバリューブル もブロガル変数も含まれると そういったUI型の外側でもいい と ローカル変数でもよい 例えば バインダブルバリューをビュー のポティで使うこともできるよ リストがブック数でブック数は 普通にステートになってきて そのブック数1個1個を取ってきた ときに そのブック数が可変だから これ なかなか大胆なことをします よね ブックはオブザバブルオブジェクト だからいいのか オブザバブル はプラスなんで 参照型だからこれで バインダブルに丸め込むことで 書き込めるようになっても確か ないんだとか なので そうすると バインダブルになってファインド できて このブックはこのリスト のそのもののブックの参照になっている から ちゃんとブック数も変わって いくよっていうね そういった感じ で そうですね バインダブルバリューブル ブックは提供するバインディング エキストフィールドへのタイトル プロパティを提供して 変更を直接 モデルデータに対して働きかける ようにできると 同じアプローチで オブザバブルオブジェクトっていう のをエンバイルメントに対しても 使えると 例えば次のコードはエンバイルメント プロパティが関連するインスタンス オブザバブルオブジェクト オブザバブル オブジェクトに回収する オブザバブル タイプブック オブザバブルなブック インスタンスの回収 これよくわからないけど プロパティラッパー そういうのになっていって それから コードはバインダブルバリューブル なブックを作って それでバインディング をタイトルをテキストフィールド に渡して エンバイルメントで オブザバブルなプラス それでブック これはエンバイルメントプライベート でやるこっちのほうが正しいですね 今までのチュートリアルに出て なかったですけど まずはこれで ブックをエンバイルメントから拾 ってきて それでバインダブルバリューブル これをボディの中でやってますよね タイトル渡してますよね 同じ方法 なはずなんですけどね イグフェイバリット 何でだろうなって思ったとして ラップバリューはオブジェクト そのもの プロジェクティブバリュー はバインダブルバリュー 良さそう じゃないですか アイデンティフィアル なんか関係あるのかな 何だろう これ モデルデータでしょ ランドマーク で これはこれ以上の何もなって もないからOKですよね それでランドマーク リストがエンバイルメントを取って きて 一応プライベートにしよう かなという話だから これで出し使い 何もないでしょ それでこうした 上でモデルデータ フィルタードランドマーク 数 この辺問題なのかなと思って ちょっと気になったけど これは でも別にランドマーク自体がイグ フェイバリットかどうかでフィルター をかけるだけだから 何も問題ない ですよね その上でナビゲーション スクリプトキュートしてフェイバリット オンリーでトグルをする これは これでトグルなだけだからいい ですよね それで4-1のフィルタード ランドマーク これはランドマーク リストの中の話だから 問題がない と捉えていいんじゃないかなと思 うんですよね ランドマークが取れて そのランドマークをいろいろやる けど これバインダブルはここじゃなくて いいですね とりあえずバインダブル はもっと外でいいですね 一番外 にしちゃいますか こんなのいい のかな これぐらいでもいいと思 うんですが バインダブルが存在 する中でランドマークを取ったとき モデルデータのランドマーク数 でバースインデックスのランドマーク を取って そのインデックスをモデル データバインダブルのモデルデータ のランドマーク数の中から拾って あげてオッケーな気がしますよね それでランドマークの中 一体用 ランドマークの中を見ときますか ランドマークの中はモデルデータ の中でランドマーク数の中でランド マークでで イズフェイバリドフト のプール型ですよね これは問題なし でしょ 他にバインダブルイニット ってセットしたことがあった気が するんですけど この辺も見ておき たい これは関係なかった イメージ セット これも問題ない 大丈夫ですね いつの間にか無くなってますね セット バインダブルイズセット イズセットイズセット これコメント アウト 使ってないですね 大丈夫 ですね 説明を読むときに大成功 じゃないですか シミュレーター もう一回上げてみましょう なんでだろうな バインディング が切れてるとかじゃないとダメ だけど でも 切れてるだけじゃない ですよね ちゃんと反映するんで ね これであとって 俺の星をチッと 押したんですけどね でも 描画 は変わらないですね 戻って どうでした ね トグルされたかっていう のが見れたほうがいいのかな だから トグルされたかどうか ここは いいですよね ランドマークディテール のこのバインディングのランドマーク で それでトグルは マップビュー サークルで フェイバリドがこれか メモリットボタンでイズセット でボタンを押したときに これで トグルされたか ランドマークの イズフェイバリド この辺を 例えば どこがいいかな スクロールビュー スクロールビュー全体でもいい ですかね スクロールビューに 例えば .onchangeでランドマーク のイズフェイバリドで 変化があった ときにはプリントでイズフェイバリド がオールドバリューからニューバリド っていうふうに変化したよっていう 状況 これ見ればいいのかなっていう 感じですよね そして これを試す にはプログラム シミュレーター でもいいですけど もはやこっち のマイクはミュレーターにします か これを一応実行して それでここ に来て 一応フィルターをかけて 星のついたほうに行って ここで 押すんですけど これ押す前にちょっと 並べられるかな 画面ちっちゃい かな これを横に置けると一番分かり やすくていいんですけど 消えた あ 消えましたね これでログメッセージ は今のところから最大にして それ でデフォルトCSVとは何を探している だろ まあいいか もう何だ まあいい か 変更して これでちょっとシェービング を押すね どうなるかな 反応する あれじゃないか 二回目 三回目 四回目 四回押した 五回押した これで モトリトリになっている いいですね いいですけど 知らなかった 間違えたかな オンチェンジ is favorite オンチェンジがまた出てきた フォルスからトゥルーになった けど もう一回押しますと これで トゥルーからフォルスになったね なりますね 大丈夫ですね 動いて ますね ここはいいということですね お気に入りに最初から入っている やつを選ぶときに これは 押してみますか あれ 消えた オンにすると 動けますね ってことは フィルターの もしかして セントマリー レイクを押す前に こうして 一回これで セントマリーレイク行って これで 押すと フォルスになった 消えた オンになった いいですね これで セントマリーレイクをフィルター 入れた状態で セントマリーレイク へ行って これを押すと 反応しない ということらしい なるほどなのかな これは 押して 大丈夫で デフォルト 関係なくて 今押しまくってますが 動かないね 動いたときがある でも ダメですね っていうのかな なるほどなのかな とにかく分かったことは いつフェイバリットの変更が フェイバリット オンにとか フィルターですね フィルターで 限定したときには オンチェンジの状態が 回ってこないっていうことは バインディングがうまくいってないって いうことですか その可能性が出てきますね ランドマークが ここは何だっけ 出てるのか 出てるの中で フェイバリット ボタンのいつフェイバリット これが バインディングしてあるけど この バインディングが ちゃんと動いて こないと ここでランドマーク これ これバインダブルかな なんかバインダブル 出てますよね バインダブル すごい当てたっぽいので さすがに そうだよね バインダブル ダメですよね 全然使い道違うと思うんで オブジェクト オブザバブルじゃなきゃダメですよ って話か これはいいんだ バインディングでね バインダインだ だからここでランドマークは バインディングで ちゃんとランドマークが 来てるはずなんですけど そのときだとなぜか そのバインダブルのオブジェクトが フェイバリットボタンに バインディングされたときに この変更が届いてこないっていうことが 分かった 分かったけどなんでこれっていうね 書いた状況ですね でランドマーク数は そうそう とにかくフィルターとランドマーク数は 消費倍率オンリーの状態に応じて フィルターの方向を変えるだけなので 最終的にはフィルターしたランドマークが 書いてますよね なので これ実体が影響を及ぼすっていうことは ちょっと考えにくいのかなっていう気は まずする とにかくランドマークが 返ってくる場合ですね で それでランドマークに対して 今回インデックスを取っていく で 取るところはモデルデータ このモデルデータは これですね バインダブルとかどうでもいいと思うんですけど その中のランドマーク数の中の ファーストインデックスオブランドマークですよね まあ 現在アンラップしてますけど これはどんな条件でも一緒なんで これでやってることとしては モデルデータの中のインデックス ファーストインデックス これが普通にね IDを用いてインデックスを取っている で IDを用いて普通のね ファーストインデックスを使って 取っているっていう状況なんで 普通にインデックスが取れているという状況ですね で インデックス番号が取れたら あとは普通にモデルデータの ランドマーク数に対して そのインデックスをね プラケットに渡して だからモデルデータっていうのは 普通にこのバインダブルのものなんで ここのランドマーク数っていうのは 純粋な保存型プロパティで で その中のインデックス指定しているのに なぜかフィルターでリポってあげると これが反映されない ただバインドはされていて 状態は変わっているってことは 伝播されないってことか 伝播されないにしても オンチェンジも反応していないってことが 気になりますね やっぱりね トグルをしてトグルをした後で ここが問題なのかな トグルでトグル ちょっと見ときますかね トグルでしょ ランドマークのディテールの中で この中でfavoriteボタン これでバインドしているisfavoriteを favoriteボタンの中でバインドしたissetがあって issetがトグルされていて それでトグルしたとこでプリント1を でおきますか プリントトグルで 現在の値がissetっていう風になってあげて これデスタイメージ このデスタイメージがisset これバインディングされてますね isset デスタイメージ自体は ここでアクティブがプールのままですね バインディング このissetは何だっけ issetあれか バインディング バインディング これアップステートかな 例えばアップステートプライベートバー リアルタイラーが出てくる ここか アイメージで これでプロテクションレベル プライベートになっちゃったかな プライベートになった これはプライベート取ってあげると これで大丈夫か あれそうだっけ プライベート まあいいか とりあえずこれでやってみますか ビルドかけてシミュレーターを動かして ここちょっと気になってたんですよね 状態が変わったときに 欲しいの 絵が変わるのかな みたいなのが気になっていたとこなんで 忘れてたんですけど プライベートでトグルでフォルスになって いる可能性ってありますね 描画がね たとえだけ手がつくじゃないですか トグルはできたからいいですね トグルするときに 例えば ボタンで アニメーション トグルしてこれで引っ越してあげると アニメーションってどうなるんでしたっけね どうなるんでしたっけってことは知らないんですけど これで例えばこう移動してプチっと アニメーションみたいな 色も何にもつかないわ これは自分の理解不足ですね だからここで描画はされていないということで 良い気がするとすると ここで描画されないバインディングで いうことが起こるのかな そこが不思議ですね バインダブルを自分で描くと大丈夫なわけでしょ そこわかんないな Swift UI 要請材料 知らない方法 ラグと静止的書き込み ボルス あれ これはおまかしぼくないにしても やばいのかな もういいか これはいいやって 要請材料が ビューにIDをつけて それを更新させればよいらしい ビューにIDをつけて更新 IDか はいはいはい で ビューにIDステップをつけて このステップのIDを書き込めてあげるか それはそうかもねって感じですが これは使いそうですね 今はね ここで例えば アドステート プライベートバー プライベートバー ID ITって言うんですかね これね もういいか これでボルス そして これでIDか いいか 配信しますか IDってこれで ボルスすれば これいけるでしょ どうなんだろう これで用語がどうなるかですが これで まずは普通に生きるやついきましょうかね で スターが そして色が変わんなかったか あれ 変わんなくなった感じか あれ これでうまくいくと思ったんだけれど うまくいかないですね これは自分の問題ですね きっとね IDがあって まあいいか なんかしたっていうかな という不安が あとあれか ステップにしましたね ステップイメージ 出したいイメージのね アクティブをね 実はアクティブ自体は ディテールが変わればいいから これは別にいい気がしますね これでね そういうもの いいか どういうものなんですか 今の やめたことによって ちゃんと色が変わるようになりましたよ っていうのは合ってるんですかね まあいいか いいっすね これでお気に入りの状態にして フィルターをかけた状態で押すと 変わんないですね ここが隠れますね IDはいいや これ何の役にも かからなかったということが分かったんで これを消して それで 分かんないな これ 解決策としては このバインダブル バインダブルもこんなとこじゃなくていいや どうすると とにかく すぐ接近した場所に置いといて これでもダメだったわけなんで とにかくランドマークディテール これをコメントアウト バインダブルを使うのをやめて バインドちゃんと自分で イニシャライザーで使ってあげると これだとうまくいくわけですよ この辺はそういうもんですかね 自分には分からない これでフィルターをかけて 選んで ブチッと押すと ちゃんと 変わりますよね っていう感じ なんか 気に落ちないな こういうものなのか これが最適化が より働いてるっていう意味 なんですかね フィルター 多分これが 特留されるんだと思うんですよね おそらく このリストからいなくなるっていうのが 何か関係するのかなとかね と思ったりはするんですけど それは纏えてない可能性があるんで できるならいいんですが なぜバインダブルできないだろうな さっきのドキュメント読むときに 何の問題もなさそうなんですけどね こういうの気になってしょうがないんですけど コメントだけ残しときますか とりあえずね これは複数行にしようかな これで まあいいか ドキュメントコメントにして フィックス読みでもないな トゥートゥーでもないな いや なんかないけど こんなメモとか残しといて あとバインダブルを使うと フェーバー率オンリースイッチ オンにした状態で 書いておいて きますか フェーバー率オンリースイッチ オンにした状態で 見ているっていう から フェーバー率を押したとしても モデルデータが変化するものの 評価が更新されないと あ まだちょっと 弱いな これだよな このため バインディング型を直接初期化 して 渡していると こうすれば評価 も適切に更新されるというふう に書いておいて それでこのコードを 使うにしておけば ちょっと安心 安心だよという感じで 更新して みましょう とりあえずね 何でだろう な どういうふうに落ちないな これで まずOKということにして ちょっと気になっていた ダット エンバイロメント この辺 あれ ダット エンバイロメント エンベイロメント ここか あれ ここしかなかった だっけ エンバイロメント あれ ここしかないのか そうなんだ プライベート にしたかっただけなんですけど できましたね これでいいや なんか ふに落ちないままですが 目的は 達成したので いよいよということにして これで次はまた違うにしますけど クロイングパスパンとエプス こんな感じでパスを使って評判を するっていうのをやっていく感じ になるみたいね 今日はこれで終わり にしましょう お疲れ様でした
