Transcription & Summarize : とりあえず読書会 SwiftUI Tutorials #31

はい、ではとりあえず読書会を始めていきましょう。Swift UI チュートリアル図を読んでいて、最後のセクションですかね。前回から数回前まではウォッチOSアプリ対応をやっていましたけど、そのあたりも一通り納得できたというんですか、まあ一定の成果が得られたというか、そんな感じなのでね。まあその辺をもっとこだわっていってもいいのかもしれないところで、微妙な動きも残ってはいますけど、まあ一応ね、最終セクション、macOSアプリの方にそろそろ移っていこうかなと思います。で、チュートリアルはこちらですね。こちらじゃない、これはウォッチOSアプリですね。これが終わったので、次はmacOSアプリ。えーと、これ もうちょっと大きなものに挑戦していくところがいいという感じですかね。ラウンドマップアップをmacOS用に対応していくよと。これをするために、えーと、えーと、もう学んだって言ったのかな、えーと、ビルドアップオンエブリシング、えーと、ラウンドオファー、えーと、ラウンドアウト、わからない単語がいっぱい出てくると、なかなか焦るから訳せなくなりますね。えーと、ラウンドアウトってなんだろうね、ラウンドって聞くとツイッツイ、小数点図を丸め込むとか思い込んでおけば、うんと、Swift UI アプリをiOS、ウォッチOS、macOSにビルドする経験を、まあもうすでに体 構築の経験を完成させるために、その後の役割はなんだ、えーと、あれ、これしかない、えーと、ウィンドウが小さいだけかな、これは、もう一回飛ばし、えーと、どれだ、もう一回役立たせてみますか、これで役立てて、おお、出てきた、うん、ウォッチOS、iOS、macOSのキャプテンをSwift UI構築の経験をさらに深めていきますと、全然役立ちがった、まあとりあえず、そんな感じで完成させていくということですね、プログラミングの体験を。で、それで、まずはmacOSとAppleのプロジェクトに追加して、それからビュートデータ、それをね、共有、再利用して、これで簡単に作って テイラーのビューズ、なんだろうこれ、リトーンみたいな感じかな、えーと、仕立て方、扱い方、macOSに仕立てるビュー、新しいビューを作っていく感じですね、で、それで他の、えーと、プラットフォーム、えーと、プラットフォームをこうやってですね、えーと、よりね、よく動くように優先していくと、で、このステップ、続くステップをやるためのプロジェクトをいつもに習ってですね、ダウンロードしておいて、で、それで、まあさっき説明できましたよ、はい、セクション1、macOSターゲットをプロジェクトに追加する、えーと、まずはmacOSターゲットをプロジェクトに追加することから始める感じで、 プレビューとアプリの、えーと、なんだ、プレビュー可能にして、まあ、実行もそうか、プレイをするために、えーと、macOSを、えーと、そのまま、またはプレイ上にする、えーと、 どうなのか、ちょっとワクワクしてみましょう、えーと、実行するには、お使いのもとはそのまま移行であることを確認してくださいか、なるほど、今使っているXコードはXコード26なので、そのまま移行というか、もはや他方以上用意してくれという状況に取り上げられますね、 そんな感じでチュートリアルを今やっている感じです、で、macOSアプリを作っていって、こんな感じでね、広い画面で動くよというのを言っていくと、で、そのためにまずは新しいターゲットを、タイムメニューから選んで、で、それで、テンプレートシートが表示されたら、macOSアプリの、macOSのね、タブを選んで、で、そこからアプリテンプレートを作成していくと、ね、えーと、テンプレート、このテンプレートを新しいmacOSアプリのターゲットをプロジェクトに追加してプレビューと、で、ステップ2として、このシートの中で、えーと、macOSランドマックスという名前でプロジェクトを作っていく、えー なので、まずは手順通りmacOSランドマックスという名前でやっていけばいいですかね、で、そういうと言われるとSwiftを選んで、フィニッシュを選んで、で、それで、macOSランドマックスというターゲットを選んで、で、それで、えーと、どうするとプレビューやビルドを実行、そういったものがmacOSアプリとしてできるようになると、で、えーと、このチュートリアルをどうしたのかな、えーと、他のスキーム、えーと、えーと、なんだこれ、合わせていった、えーと、チュートリアルをどうしたのかな、やっぱり、えーと、で、他のスキーム、えーと、この辺はなんだろう、他のターゲット、えーと、シェアと共有しているファイルの、共 進めていくと、他のターゲットの共有ファイルの変更にどう反応するかを監視するために、他のスキームを使用することになる、全然役立ちのね、えーと、そうか、まず、うん、進めていくとになるのか、これで、うん、で、えーと、他のスキームを使って、いろいろ、リプしていく、みたいな感じになるらしい、とにかくmacOSランドマックスを作って、で、それで、この辺の共有の設定は多分いろいろ面倒なこと多いと思うんで、まずはターゲットを作っちゃいますか、えーと、macOSランドマックスでいいかな、今までの名前、まず作ってみますか、ここでターゲットを追加、ファイルメニューからって言ってますけどね って言ったやつ的には、これの、えーと、スキームをmacOSランドマックスに書いてあげると、で、ここで、せっかくだからもう合わせちゃいましょう、名前にビルドをかけてから、このビルドをかけて、成功した状態でやらないと、名前を変えたことによってビルドに失敗したのか、そもそも最初からね、ビルドに失敗していたのか、そういったのが分からなくなるんでね、何事も、あの、問題ないところ、そこでね、えーと、やっていくというのを心がけないと、なんか二度手間になったりしますからね、まあ昔よくそういったのを経験したおかげで、まあ今もね、時々忘れますけどね、ちゃんと動くかを確認してから これだけだとね、昔はね、ビルド失敗したと思うんですけど、今はビルドだったんですよね、本当に不安になるんで一応クリーンしてみて、これでビルドかけてみても、ちゃんとできるってすごいですよね、昔はなんか、えーと、info.pdiskのパスを変更したりとかね、なんか結構いじった気がするんですけどね、とりあえずこんな風に名前を変えられたので、次に、えーと、あ、あとスキームだ、スキームも今、名前が古くなってると思ったっていうと、あ、こっちか、ここ古いでしょね、えーと、スキームだと名前は変えられないか、マネージスキームで、えーと、これで、このmacOSランドマックスの名前を、えーと、今失敗 えーと、ランドマックスグループで、えーと、コンテンツビュー、これを選んでキャンバスにプレビューを表示する、そうしたUI、プロファイル、そうしたUIは、えーと、デフォルトのメインビューとこのプレビューを、あーメインビューがそのプレビューを指定で提供してくれる、えーと、iOSみたいにね、で、プレビュー、メインウィンドウのプレビューをすることができると、これをじゃあちょっと一応見ておきますか、プレビュー、macOSアプリのフォルダの中のコンテンツビューですね、うん、で、これでコンテンツビューのプレビューを表示させてみると、でも確 らくね、あ、ダメか、えーと、これは一回ちょっとビルドかけてみますかね、ビルドをクリーンしてみますかね、で、それでビルドをかけて、で、それでツッコマとプレビューをね、有効化してみますけど、うーんと、ビルドは終わってる、まだかな、えーと、終わってるかがよくわからない、ここで えーと、ランニングランドマークス、iOS系のほうが動いてるって言ってる、ま、この辺をちょっと戻しておきますか、JOSとか全部ね、で、それでビルドをもう一回かけて、で、プレビューを走らせてみる、まあ閉めれた場合だったら別に大丈夫だと思うんですけど、まあまあ一応ね、やっといって、で、それでプレビューがちゃんと表示されてくれれば完璧なんですけど、表示されないですね、えーと、プレビューアップデートエラー、えーと、グループレコーディングエラー、何のエラーかちょっとあまり役に立たないかな、macランドマークスの実行に失敗したって言ってますね、で、実行エラー、えーと、あ、ミ ですね、プレビューなんか失敗しちゃうという状況になってますけど、なんででしょうね、うん、なんか権限みたいな話が出てるんで、本当に何権限がないのか、それとまた、なんかおかしいのか、またはゲームの設定がおかしくなっているか、えーと、この辺大丈夫そうですよね、で、あとはLANとかも大丈夫そうですよね、で、プロセスが自分、ま、ルートじゃなくていいでしょって感じで、大丈夫そうな気がしますね、一応Xコードなんか動きそうな雰囲気を感じる、ここ、どうだろう、これで動いてくれれば、まずね、次ヘッドを持って動くかな、はい、Xコードをちょっと一回落としてみて、あ、これで回ればばんばんだいという感じで、はい、Xコード を引いちゃいましょう、次へ、このうち動くようになるかもしれないし、動かないなら動かないでしょうがないし、という感じでね、あ、やっぱダメですね、はい、じゃあ次行こう、はい、次は、えーと、プロジェクトナビゲーターで、ま、ランドマックスアップファイルを、ランドマックスグループから削除する、ということをやるらしい、ね、えーと、ウォッチオーエスアプリと同じように、えーと、必要ないらしい、デフォルトの、このファイルをね、で、えーと、それで、because、えーと、既にあるやつを使っていくらしい、なので、それを消したら、次に、えーと、ビューとモデルとリソースファイルを するんですけど、まあまあやってみましょう、そのためにファイルナビゲーターを開いて、で、ファイルナビゲーターの中で、まずは、えーと、アプリがいらないって言ってましたよね、ってなかったら面倒だからちょっと見ておきますけど、えーと、この1個目でしたよね、えーと、ランドマックスグループのランドマックスアップ、うん、これですね、から、さっきの、あれ、ランドマックスアップ、これがいらないということで、削除して、で、その上で、ランドマックスアップの、えーと、モデルが、うーんと、モデルデータだったかな、そう、あとは、ノーティフィケーションっていうのか、リソース、リソースは、これ全部じゃなかったっけな、えーと、 ランドマックスリストローイメージ、まだそのところ出てなかったですね、じゃあまあいいか、えーと、モデルデータは、アプリリストローイメージ、などなど、このデビューあたりですかね、まあアプリがありましたね、で、それと、ビューの中の、えーと、ランドマックスのリストドローと、で、あとはコントロールの、えーと、エイバリットボタンは、あった、これと、アプリメディ、ボタンはどうでしたっけ、えーと、マップペアか、エイバリットボタンか、エイバリットボタン、あーいいね、で、えーと、マップ、あれか、これらをmacOSで使っていくよ、って言ってましたね、残りが今ね、必要になると思 うさくは、共有のアプリ定義、で、この、えーと、これ以外は、macOSでも動くっていうとか、ということらしいですね、ファイルね、いっぱい、あの、作りながら増やしてあるんで、これらがまだ、選ばれていないはず、なのでコマンドは、あ、ビルドはね、まだ通らないと思うんですね、で、他にも、えーと、モデルとリソースフォルダーのすべて、アセットも含めて、飛び込んであげる、あ、アセットね、アセットもちょっとね、変えてあるんでね、まあその辺も、蓄積しつつですね、で、これらのアイテムは、アプリのデータモデルとリソースを適しているよと、 まずこれをmacOSに入れてあげてとですね、で、あとはリソース、この2つ、これをmacOSに追加してあげる、で、あとはアセットですね、このアセットはどれか、えーと、リソーシブ、あ、ですね、これが余裕で使うやつですね、はい、だからこんな感じで、ここまでOKですかね、で、そしたら、ファイルインスペクターで、あ、そっか、今やっちゃったやつか、全部選択したら、ファイルインスペクターで、ま、ブランドマークスにね、それらを、あの、メンバーシップとして登録してあげるよ、ということですね、で、それで、macOSアプリアイコンを、えーと、追加する、えーと、他のターゲットに、えーと、 追加せよ、ということかな、とりあえず、それは、えーと、ここですね、macOS用のアセットの中に、このアップアイコンというのがあるんで、これで、えー、アイコンいっぱい必要そうですね、ちょっと私、えーと、面倒そうですが、iOS用のアセットを見れば、これっぽいサイズがありますかね、これ、えーと、これのほうが、例えば広くなりますね、で、これで、アイコン、アップアイコンとして、別に大したサイズ用意されてないですね、これはサイズいくつか、えーと、えーと、この辺かな、この辺、うん、1024くらいかな、貼ってみた、うん、このようですかね、で、あとは、アップアイコン、用意したものとしたら、ウォッチOSアプ とりあえずこれで、良いですかね、で、アイコンファイル、えーと、用意したら、えーと、アセット、エレクトロアセットファイル、マックランドマックスグループで、アセットを選択して、エンプティアップアイコンを削除、あれなんか英語のやつ間違ってるっぽいな、やり方が違う気がする、で、えーと、これらは、えーと、次のステップでね、差し替えていくよって言ってるんで、まずこれを消せって話になってますね、で、それでアップアイコンを、えーと、さっきのダウンロードしたリソースフォルダーにあるやつを入れていこうと、こんな話になってるから、やっぱ消そう、えーと、macOS用の フォルダーからこれを、んーと、どうすると、並べれば上手くいくんでしたっけ、なんか思っていかなかった気がするけど、ちょっと並べてみますかね、はい、並べた、あ、で、ちっちゃくしたらなんか画面おかしくなりましたね、まあいいか、はい、ダウンコレークコードも大丈夫かし、大丈夫かじゃないか、だいたい顔やめて、で、このリソースの中にアップアイコン、これか、これを投げてあげれば良いという話っぽいですね、これをアセットにこう、うんうん、できましたね、はい、で、これで準備ができた、お、サイトいっぱいあるからこうしないと面倒ですよね、いい感じに全部登録された感じがするんで、これで、OK、じゃあ次は、ダウンロード、えーと、 OSアプリ用はまだね、定義していないと、なので、えーと、注意して、えーと、注意してなのかな、これに注意して次のセクションへ進んでいくと、で、ま、このランドマークリストコンテントビューにね、追加していく、やってみましょう、お気にするだけにしちゃいますが、ここですね、コンテントビュー、この中で、えーと、ボディの中で、ランドマークリスト、こんな感じですね、で、こうしましたが、このまま、えーと、コンテントビュー、これま、OS用アプリなんですけど、で、実はね、このOSごとの違いは入る目で特別することに今回はしたので、ま、OS用のコンテントビューとした上で、共通のね、場所に移動しておく が、揃わず動かないという状況になっているので、ここ重要ですね、で、それで、次、えーと、どっちに行くのか、どっちに行くのか、あれ、どっちに行くのか、リロードしかないですかね、はい、で、次は、どこだ、アイコン登録して、ランドマークする、えーと、ここはまだですね、ランドマークディテールの前ですね、まだね、ここだ、追加した、で、次セクションにですね、ディテールビューを作っていこうと、えーと、ディテールビューは、セレクトしたランドマークについての情報を表示するビューであると、で、えーと、iOSアプリと同じように作っていくが、異なるプラットフォーム、異なるアプロー� プラットフォームをこうやってね、個人の調整で、個人の調整や条件をね、えーと、添えることで、これをね、実現、再利用をね、実現することができるが、えーと、 macOSは、えーと、ディサイ、ディ、ディ、ディ、ディ、ディディ、なんか別々分離みたいな感じかな、ね、芯のアプリフォーム、専門専用、この辺か、ね、それ用のビューを作るのが良い、ね、えーと、コピー、iOSのディテールビューを、あの、使い支店としてコピーして、これは修正していく形で、macOS用の大きいディスプレイに対応させていこうと、そういったことをやるらしい、このために、えーと、新しいカスタマビューを、まぁ、ランドマークスグループに、えーと、追加する、で、ランドマークディテールという名前にする、ね、えーと、3 プラットフォームに、えーと、対応、対応とか、出ていく、下出ていくとか、テイラー、テイラーとか、なるほど、これを下出ていくっていうのね、うん、はい、じゃあ、ランドマークディテールを作っていきましょう、で、コピーする、えーと、iOSのディテールビューのコンテンツを利用していくんだとしたら、それを覆してもいいと思いますけどね、まぁ、作っていきますか、えーと、ランドマークディテールね、なので、どこに作りますかね、ここに持ち込んで作っちゃいますか、えーと、新規で、そういったUIビューで、で、ランドマークディテールで、えーと、macOS用、これをね、作っていくと、で、それで、おー、名前 ですよ、ここに出せばいいか、macOS用ね、で、これが、あれ、どこ行ったか、あ、いいな、これね、こっちが、で、えーと、そっか、こっちのプレビューを消すには、いっぱいちょっとだけ出力しないといけないと、これで、えーと、あれね、プレビュー消せたので、ボディーも、というか、中身をですね、まずはこうして、iOSのを持ってきて、プレビューも、まぁ、持っていけばいいでしょう、きっと こうやって、うん、オッケーですね、で、あのスタート地点がね、チェットリアルのiOSのを持っていくとか言ってるけども、こことも解像してあるんで、この辺を柔軟に理解しながら、入っていかないといけない、まぁ、何にしてもこれで、macOS用というか、えーと、あれ、えーと、3種類になってますか、iOSはiOS専用でしょ、で、WatchOSはWatchOS専用、だからこれは、えーと、macOS専用ですね、はい、これで、いいですね、で、この上で、いろいろいじっていきましょう、で、えーと、ディテール系のコンテンツをmacOSにコピーして、で、えーと、プレビューは、また、ナビゲーションバータイトルディスプ えーと、コンテンツをね、見てるようにプレビューに指定するよっていう話になっている、これですよね、これで、えーと、フレームを追加する、うん、追加はいいんだけど、仮削除は見えないんだね、ここではね、なので、これで、よい、まずここまでやりましょう、えーと、プレビューが、ここのエンバイロメントの下だけをフレームをセットして、で、ナビゲーションこれをね、削除してあげる、で、一応これでね、プレビューが動くようになりそうな気配を、あのー、醸していたときめくになってましたけど、ま、さっきね、いろいろ、いや、動くはずなのにプレビューが動いてないところを見ると、出るか出ないか リーディングアライメントと、えーと、あー、そして、データを削除する、VStackね、まあ説明的にはこれだけですね、一応確認しておきますけど、ですね、VStackにしてアライメントをリーディングにする、えーと、VStack、えー、データがいくつかある中で、えーと、ディテールのVStackアライメントでできると、入りボタン、アークトステート、ここでしたっけ、アークトステートそうですね、アークトステートのところをVStackにして、で、それで、えーと、アライメント、これをリーディング、あー、ここをね、リーディングにして、で、コンテンツを覚えたらですね、まあ、こういったところでプレビューできた VStackにあるマップビュー、マップビュー以下のすべてをVStackで囲んか、あ、エンクローズってそういう意味か、で、マップビューに続くものすべてVStackで囲んね、それで、サークルイメージと、えーと、残りのヘッダーをHStackでくくる、VStackで、えーと、マップビューの下、VStackですべてくくった上で、HStack Spacing24で、えーと、サークルイメージとか全部ですか、これをくくっていくみたいね、なので、これのマップビュー、この下をVStack、これでくくってあげて、で、それで、ここですかね、VStack、で、その後、これをまたHStackでくくるのかな、HStack という感じで、あてるのかな。 VStack、HStack、いかがか、VStack勝ちですね、VStackマップ、で、VStack、HStackで、Spacing24、VStackもいろいろオプションありましたね、これをコピーしておきますか、で、それで全部をくくっている、ポッキングの前ですね、えーと、だから、HStackの前、どこまでか、HStackの前、だから、これがいらなくて、これもいらなくて、ここか、それでこんな感じ、で、これをインデント揃えて、 スペーサー消すって言ってませんでしたっけね、でもスペーサーなんて言ったのかな、まあいいか、スペーサーを削除するですね、はい、じゃあこれでOKで、それで、VStackにもオプションが設定されていましたね、ということで、こんな感じですかね、はい、ここまでできて、で、それで、このコードはOKで、次、で、プログラムして、えーと、オフセットをサークルから削除する、そして、えーと、代わりにモーラーオフセット、えーと、VStack、これにつけてあげるよと、つまり、オフセットY-50、これを消すだけか、ここでは、えーと、パッティングのパッティングをつけるのか、消す、あーなるほど、えーと、VStackにつけてあ 消してあげて、で、それでVStackの、えーと、モデファイヤーとしてね、オフセットを消してあげる、うん、良さそうですね、多分ね、で、これでここまではOKかな、うん、サークルから消してですもんね、はい、じゃあ次、リサイザブルモデファイヤーをイメージに追加して、で、サークルイメージ、えーと、もし、モーラー、小さくする、小さく制限する、これですね、えーと、イメージのリサイズは既にライブでやってた気がするんで、サークルイメージに対してフレームをね、設定していくか、サークルイメージこれですね、で、ここに対してフレームを設定していくって言うのかな、えーと、そうね、イメ ビリティ、えーと、ユーザーが、えーと、ウィンドウを広くしたときに、リーダビリティを良くするために、フレームを100に制限する、オフセットYのところですね、だからここですか、ここね、はい、じゃあこれで、次、次だけど、他の行動回転の位置を確認しておかないと、なんか今までね、忘れていたように見ることあったんで、OKですね、はい、じゃあこれで、次、えーと、どこだ、あー戻った、さっきまで戻っちゃうんですよね、これはなんだろうね、まあ何回クリックしたとかそういうことなのかなと思うんですが、えーと、お気に入りボタン、お気に入りボタンをレインボタンスタイルに変えてあげる、えーと、レインスタ 、iOS、Duo、iOS、それと同じような見た目になると、 より大きなディスプレイにより追加機能ボタンのスペースが広くなる。 ステップ10として、オープンインマップボタンをZスタッフに追加して、 それをマップの上の右側のコーナー、ここに置いてあげる、で、マップキットをインクルードするためにかな、 えーと、MKマップアイテムをマップに送るためのMKマップアイテム、これを持ってあげるという感じですね、 なのでランドマップディテールに対してマップキットを導入して、それでこのZスタッフに対していろいろと追加して、 で、その上でボタンを書いてあげるよ、ということになるらしい。 なので、まずはこれか、Zスタッフコピーして、マップビューに対してこれをまずは、 マップビューを開始してあげて、マップビューをその中に入れる形を取り、 で、Zスタッフでアライメント、アライメントの水平がこれ、垂直がこれみたいな、 垂直定義ができるのが、で、その下の上でボタンを追加して、Zスタッフを閉じてあげるよということをする。 音だけ見ててもあまり何かイメージはわからないですけど、まあまあ大丈夫でしょう。 で、マップキットを入れないといけないですね。 えーと、インポートマップキット、マップキットですね。 はい、で、これでいろいろやってるけど、ランドマーク、コーディネートランドマークのそこの辺ね、 開用しちゃったんでね、回していかないといけないですね。 で、まあひとまずこれで音ができて、で、そうしてあげたら、で、でもオッケーですね。 はい、そうすると、ここまでで、セクション3へね、移るという形になるといけます。 ここまでちゃんとビルドできるようにしておきますかね。 えーと、このためにはXコードで、まずは、ビルドいくとしますか。 絶対にエラーになると思うんですが、 スターイメージがないよっていう、これが対応しやすそうなので、まずこれやっちゃいましょう。 スターイメージがないよっていうのは、えーと、これですよね、スターイメージ。 このスターイメージが、macOS用に追加されていないので、これをまずね、macOSでも使えるようにする。 で、他のビルド、ビルド早いから、まずビルドしちゃいましょう。 で、それからラジシーケンス。 これが、えーと、マグニチュード。 えーと、ラジシーケンスがマグニチュードを持っていないという感じですかね。 えーと、それが、うーんと、ラジシーケンスエレメントのね、マグニチュードを持っていない。 これは、自分でできたやつですよね、しかね。 なので、出てくるかな、出てくるかな。 マグニチュード系は、マグニチュード、ダブル、レンジ、レンジ系は、ここだ。 ここにね、マグニチュードを追加してある、これですね。 なので、これもmacOSで使いたいので、macOSを追加する。 はい、で、あとは、ビルドをかけると、次は、サブスクリプト。 サブスクリプトにすると、バインディング、えーと、ランドマーク上からいきますか。 そうすると、ちょっとプレビューをまず抜きにして、ここですね。 えーと、ロケーションが必要な、これじゃない。 サブスクリプト、これはサブスクリプト。 えーと、サブスクリプト、ダイナミックメンバー、バインディング、ランドマーク。 これは、ちょっとバインディングの機能の都合で、中身を内覧になってますね。 この辺全部そうか。はい、なるほど。 では、この辺を直していくと、ランドマークがバインディングで得られていて、 mkplace、プレイスマークでコーディネートを渡していく。 このコーディネート型が、えーと、コーディネートは、CLロケーションコーディネート2Dですよね。 このCLロケーションコーディネート2Dは、ランドマークのコーディネートから変換できるように、確か作ったはず。 なので、ここで、このコーディネート、これがランドマークのコーディネート型なんですが、 これを、CLロケーションコーディネート2Dへ変換してあげるとね。 これで、えーと、これで、mkmapアイテム、この辺の変更感なんだろう。 OS26で、あの、推奨しない。 だって、えーと、だから、そうすると、プレイスマークじゃなくて、ロケーションとアドレスを使えたって。 んー、えーと、ロケーションとアドレス? どういうことだろう。mkmapアイテム、で、ロケーションと、えーと、ロケーションにもありましたよね。 アイテム、で、これですね。ロケーションとアドレス。で、CLロケーションとアドレスは、mkアドレスを渡す。 で、mkplacementっていうのは、えーと、mkplacementは、イニシャライザーとして、えーと、コーディネート2D。 これを取って、で、あとは、なんか、アドレスも一応取ってますね。 で、ロケーション2Dは、これは、ディクリーズ角度か、あー、ラティチュードとね、ロンギティとね。 ということらしい。ってことは、この、mkアドレスってなんだ? えーと、CLロケーション。これは、CLロケーションは、えーと、イニシャライザーラティチュード、ロンギティと取れますね。 そうすると、えーと、CLロケーションコーディネート2D。これが、ラティチュード、ロンギティと取れますね。 これ、同じの中のアドレス、アドレスというか、ロケーション。 で、その後のアドレスというのは、えーと、今回は、プレイスマーク。プレイスマークは? プレイスマーク型は? えーと、コーディネートだけか。うん、なるほど。 これは、いくつか構造だと、アドレスとロケーション。 mkアドレスが今見たんでしたっけ? mkアドレスは、ユニット、フルアドレスとショートアドレス。 でしょか? あ、で、オクショナルになってますね。 じゃあ、ロケーション作れば良さそうな気がする。 CLロケーションね、CLロケーションをランドマークのコーディネート。 ここから変換できるイニシャライザー作ってみました。 なので、えーと、CLロケーションは、んーと、どこだ? ロケーション系は、Lの中ですかね? ロケーション、モデルデータ、ロケーションコーディネート、ここですね。 CLロケーションコーディネート2Dね。 これを、えーと、エクステンションで良いかな? エクステンションで良さそうね。 で、CLロケーション。これにね、イニシャライザーするものを作る。 まあ、出るかどうかわかんないですけど。 で、ユニットをラベル省略で、ロケーション、で、ランドマークコーディネートね。 で、こうやって、イニシャライザーするフィニット、ラティテュード。 ラティテュードは、CLロケーションディグリーズか。 CLロケーションディグリーズにするには、 ランドマークコーディネートは、ラティテュード、ロケーション、ダブルバー。 なので、ちょっと計算しないといけないですね。 えーと、ここで、CLロケーションディグリーズというのは、 何か、イニシャライザー。 イニシャライザー的には、規定値と、 あとは、ストリングプロトコルで、テキスト。 それを取るのと、あとは、バリューとして、 なんか、フォーマット? とか、なんか、モデルですね。とか、えーと、なんだろう。 これは、わからないな。 そうすると、もう、根本的なところをね、 最初に調べようという感じですが、 えーと、これの、MKマップアイテムのプレイスマーク。 これが、えーと、とか、MKプレイスマーク。 この辺がね、リプリケートなので、 これをなぞる方法をね、知らないといけない。 なので、えーと、どうしようかな。 うーん、どう? だから、マップアイテム、マップOS。 マップアイテムと、えーと、マックOSで調べてみると、 誰かが既に調べてくれてるかもしれない。 マックOS。ね、こんな感じで。 うーんと、デプリケートが出たわけか。デプリケート。 えーと、ここに書いてないか。こっち見てみますか。 なのに、一般的にね、デプリケートって言ったら、 こう書き換えの際で、ビックスイッチでね、 教えてくれてる気がするんですけど、 今回教えてくれるのがですね、これですね。 えーと、マップアイテムオブジェクトを、プレイスマークを使って生成する。 そのプレイスマークもね、デプリケートでしたよね。 プレイスマーク、あった、あったね。 ロケーションアドレスを使うとは言ってましたね、確かにね。 で、それで、えーと、だから、プレイスマーク、 その方、あ、ここ、今の方がいいな。これをプリクセスすればね。 これもデプリケートですよね。マップキットのプレイスマーク。 で、マップキットのロケーションアドレスとアドレス、 リプレゼンテーションズプロパティを代わりに使う、 mkMapItemsのものを使え、 で、ロケーションアドレスのアドレスリプレゼンテーション、 で、mkAddressRepresentationを持っていたアドレス、 マップキットが提供するマップ、 mkMapItemsのアドレスの持ち列、 ということになっているが、どうかな、まだね。 えーと、どうしようかな。これを、 やることとしては、ディスティネーションでしょ。 ディスティネーションをオープンマップ、これをやるということなので、 ディスティネーションを作っていくことが目的で、 mkMapItemsを使って、そのために、 ロケーションとアドレスを使えるということになったよね。 で、それで、プレイスマーク、 これがデプリケーティブになっているよということで、 一旦ちょっと切り出してみますかね。 これをね、プレイスマークね。なのでカットして、 で、プレイスマーク。で、これを、えっと、 プレイスマーク。で、ディスティティブ。うん。 で、こっちも、えっと、ディプリケーティブで、 ここがまともなんだ。えっと、プレイスマークは、 丸くここがここか。はいはい。なるほどね。 なので、ここでコーディネート2D、ここも重要ですよね。 コーディネート。これを、レッドコーディネート。 で、ここですね。コーディネート。うん。 で、この2つが、えっと、一緒一緒。 で、代わりにこれを使えと言った気がするけど、 これを使ってないというだけですね。 なので、これで、レッドアイテムイコールという形にして、 アイテムいいのかな、ディスティネーションか。 ディスティネーションという形にして、 このディスティネーションはいらないと。 なので、こうしてあげて、チールロケーションと、 まあ、MKアドレスイズ。 このMKアドレスイズが、おそらくニルでいいんじゃないかなと 踏んでるんですけど、それはわからない。 とりあえず、セルバーからニル打っておきますか。 そして、えっと、DLロケーション。 これをね、していけばOKなのか。それともプレイスマークのところが アドレスに相当しているのかね。 この辺りは、ちょっとよく見ていかないといけない。 本来は、もうちょっとちゃんとね、調べてから、 コードを書いていかないといけない気がしますけど。 まあまあ、とりあえず、引き当たりばっかりやっていきましょう。 で、どうしたときに、えっと、今はもはや、DLコーディネート2D。 ここで使えてるのかな。あ、使えてるか。 コーディネート2Dで、MKプレイスメント。 真向きプレイスメントもすでに、ビューブリケートですよね。 で、えっと、MKアイテムのロケーションとアドレスを、 アドレスリプレゼンテーションズプロパティを、 代わりに使ってくれと言っていることなんで、 他はもはやね、合わないということで、 そうすると残すところ、CLロケーションなわけですけど、 CLロケーションってよく聞くけど、 これで、コーディネートとして、CLロケーション、 コーディネート2D使えてますね。 えっと、だから、ラティテュード・ロンギチュード。 これは、CLロケーションディグリーズ。 あ、さっき言ったやつですね。 これでいいのかな。ラティテュード・ロンギチュード。 で、あ、そっか。コーディネート2D自体は、 そういう情報を持っているのかな。 コーディネート2Dが、ラティテュード・ロンギチュード。 これ持ってますね。 そうすると、コーディネート2Dのイニシャライズは、 どこでやった? これは、この下。あ、違う。あの下じゃない。 それは、コーディネートの中で。 ラティテュード・ロンギチュードを、 コーディネート2Dでイニシャライズするときに、 やっていて、取ってきたとれなかったですが、 ラティテュードはダブルだったですよね。 だから、これでいいんだ。 なので、CLロケーションのコーディネートだから、 ここでイニシャライザーで、セルフのユニットで、 この中でコーディネートを取ってあげて、 その後は、ディスタンスとか、いろいろ渡しているのがありますね。 ラティテュード・ロンギチュードは、 バリューズはあまり使わないですね。 この他は、いろいろ指定しないといけないのが厄介そうだから、 そうすると、地域で作っていくようになるのか。 もっとかな。ラティテュード・ロンギチュード。 この辺に、ダブル。 そうだな。CLロケーションディクリート。 これで楽になれば、仲良いかなと思ったんですが、 さっきは、文字列っぽかったですよね。 これね。テキストール。 で、ディフォルトル。ワードフロム。 と、ファイナルインテージャー。 ファイナルインテージャー。ダブルはどうだろう。 ランケティングで、ナンバー。 で、フローティングリテラルではないですね。 で、あとは、この辺は、バリュー・ストラテジー。 この辺は、動作数点数ですけど、地域で作ってますね。 この辺ね。で、あとは、バリューフォーマットとか、 全部ストリング系で、これで終わっちゃうので、 なんか作りにくそうですね。 どういうことになるのね。これはね。 エグザクトリーのファイナルインテージャーってのが、 ちょっと難しそうだな。 ランケティングで、NSナンバーとね。 こう考えると、やるべきことは、 レッド・ロケーション。 イコール、CLロケーションコーディネート2Dで、 これで、ロケーション。 やってあげた上で、イニシャライザーで、 ラティテュード。イニット、ラティテュード。 イニットのラティテュードとかは、どこいった? CLロケーションセルフイニットで、 アルカッコ。 あれ、どこいっちゃいましたね。ラティテュードの キッチュードがあったような気がするんですけど、 ここがアルカッコが多いのか。こうしてあげて、 で、それでラティテュードがありますね。 で、この中で、CLロケーションコーディネート2Dが、 ここに渡してあげるのが、ロケーションのラティテュード。 そうすると、ちゃんと渡せますよね。 ラティテュードと、あとは、こっち。 でも、なんか少し雑なコードになってますね。 本当にいいのかな、こんな長むがっけのあるコードで。 これで、Replace Longitudeを間違えた。 あー、Generateを押した。Applyで十分。 これはCancel。 で、これでイニシャライザーを呼びはしましたが、 まだ何かやられてますね。 イニシャライザー失敗。あのイニシャライザーかな? CLロケーション。どちら?こっちかな? いいか。これはいいのか。 これは成功するイニシャライザーで。 こっち。こっちのイニシャライザーも成功するイニシャライザー。 だったら良さそうって感じですけど。 CLロケーションでここが言われてるのは、 Generateのイニシャライザーは、 エクステンションで作れないからですか? ってことですか? Generateのイニシャライザー。 コンビニエンス。あー、そういうことか。分かった。 コンビニエンスイニシャライザーを自分で作っておいて、 書かないとダメですね。 コンビニエンスイニシャライザー。 そうですね。CLロケーションをクリックするんですか。なるほど。 とりあえずこれで変換ができるという状況になったはずで、 そうすると、ここでコーディネートするCLロケーションに、 いきなり変換することが可能になっている。 ちょっと解説を忘れましたが、変換可能イニシャライザーは、 そういったAPIデザインガイドラインで規定されていて、 最初のラベルを省略する形で、 基数を取ることによってイニシャライザーで、 この渡された値、これと意味的に同等のものを別の型で表現する イニシャライザーであるという実際ができてるんですか。 ガイドラインに沿うと、こういうイニシャライザーは、 そういうAPIを変換するためのイニシャライザーであると、 伝えることができる標準認識として、 こういったふうに打っていくイニシャライザー。 変換された型に対して変換元を取るイニシャライザーを作ることによって、 イントからダブルへ変換するみたいなこういう構文が可能になっている。 同じやり方ですね。ラベルを省略して、イント型の値を渡して、 それと同等の不動所数点数、ダブル型のインスタンス化するというイニシャライザーと同じことをガイドラインに沿って、 JLロケーションとランドマークコーディネーツとの間でやっていると。 そんな感じで、これによって、ランドマークのコーディネーツを、 ランドマークのコーディネーツを、JLロケーションに型変換していることがわかりにくいですね。 これならイメージしやすいですね。こんな感じ。 イントからダブルへの書き方と同じ書き方で変換できるようになっているというのが、 このことを見るとわかると思うし、 それはどうしてできているかというと、APIデザインガイドラインのバリュープリザーフィングタイプコンバーションということですね。 それを意識してイニシャライザーを作っているからできたといったことですね。 これで私の方、ちょっと自信がないけど、ちょっと苦労したじゃないですか、変換のときに。 コーディネーツの場合はロケーションでいいですね。 JLロケーション、全幅変換、バリュープリザーフィング。 その考え方でない場合はラベルメールで説明しないといけない。 ナロータイプコンバーションといったルールに基づかないといけないので、コーディネーツ。 これがロケーション。ロケーションって言いそうですね。 これでアドレス省略できるんですかね。できない。ニルを渡しておく感じにして。 ニルを渡していいのかちょっとわからないですけど、MKアドレス。 これが何に使われるかですね。 ブログアドレスとショートアドレスが絡まっている情報のテキストじゃないかなと思うんですけど、そういった情報は今回は無くはないか。 ランドマークがあるんだったら無くはないですね。ちょっと後でよく考えますか。 ピンが落ちるかどうか見てからですがね。これでピンまではOKで、ニルとおかけてまだ足りないですよね。 ショーイングプロファイルパラメーターがないよと言われている。これはエンバイロメントの都合ですね。 なのでここで、ModelDataのモデルデータですね。 こうしてあげて、これでプロファイル。ショーイングプロファイルか。 ショーイングプロファイルからプロファイルを表示するかどうかのブルー型のバインディングですね。 これはここに持っていたリファクタリングの中で、複数画面からプロファイルの表示に対応させたためのものですね。 なのでこれはここですね、とりあえずね。 ですけど、まだ実際にプロファイル表示機能をMKOSで付けるかどうかまだ分からないので、コンスタントでフォルスにしておきますかね。 これでまずは、後でゆっくり。後でゆっくりだから。 画面の構成に応じて、ブラグをファインディングし、適切な取りを実装していく、と書いておいて。 ビルド通りましたね。良いのかな。良いんだろうけど、予想よりも早かった。 というのも、この辺はMKOSで共有させてやるか、その辺は全部やったんだ。 NotificationはウォッチOSだけだからこれも良くて、基礎作業を共有しましたね。 それでCategoriesとかこの辺がiOS専用でしょ。 このiOS専用はまだMKOSで使わなかったねというのと、 コントロールってこれ、パッチとかプロフィールに関係するとかですね。 これMKOSでまだやってないんですよね。 名前つけるのが面倒ですね。この丸パッドでやったやつね。 MKOSだけではあっていないみたいな、そういうやつ。 こういった細かいこと抜きにして、これでレビューが動くかな。どうだろう。 MKOSのコンテンツビューのレビュー。 これを表示していって、レビューが動けば開発がだいぶ楽なんですけどね。 さっきからちょっと動いてないですよね。 レビューが表示できない。 拡大は拡大できる設定になってないか。 これはMacOSのシステム設定で、 設定はこれのアクセシビリティとかじゃないか。 アクセシビリティの図向きのこれですね。 これでキーボードショートカットでなって、 スクロールディスプレイアウト就職キーでコントロールをしながら、 これで拡大できるようになるので、 これで大した話じゃないですけど、こういうやつね。 起動できなかった、マックランドマークス、これを起動できなかったよということで、 このエラーを見ても大した情報を得られないわけですけれど、 起動できなかった、MacOS、エジプトエラー、 ジャストインタイムエラーですよね。 バカなエジプトって普通そうですよね。 それで特定のコードファイルディレクトリを作りなかった。 パーミッションがなかった。 なんか重要な経緯がされてますが、 XORジップエラー、この辺検索すればいい感じの情報出てきますかね。 とりあえず他にはそれにつけると思うんですけど、 エラー、ラウンチエラーですよね。 エジプトエラー、これで検索。 ここで検索かけると出てくるのかなってきますね。 解決していない。 ワークアウトを見つけた。 エディターのキャンバスのEnable Legacy Preview Executionというのがあるらしい。 これやってみますか。 キャンバスのエディターかエディターキャンバス。 ない気がする。 キャンバスこれですよね。 Enableなんてメニューなのかな。 Legacyですよね。 キャンバスメニューというのか。 キャンバスメニューの中のLegacyキャンバスExecution。 エディターのキャンバスのエラーの中ですね。 これでプレビューが出てくるらしい。 もう出てきた。 コードがまだ追いついていなかったみたいな感じですかね。 これは大きくできた。 動いてる。凄いな。 ディテールが表示されて、これでお気に入りを押すと、動いてる。 もう完成。完成ってことはないか。 凄いね。何か綺麗に表示されてて。 完璧ですね。 次というか、おまでぐらいですかね。 時間的にね。そうしますか。 そうするとこの画面のプロファイル、この辺の周り今はどうなってるんだろう。 プロファイル周りはOSによって条件分岐したから、何にも出てない感じですかね。 MacOSだと多分メニューからやっていくのが自然だと思うんで、 この画面のプロフィールのボタンは別に用意しなくていいんじゃないかなと思うところがあるんで、 出てないことは嬉しいんですけど、ただしここでジョイントプロファイル渡す必要がないというのが凄く気になっていて、 ランダムアクリスタ共有しちゃってるんですよね。 MacOSと一緒に。他のOSとで。 なので、Your Favorite Onlyのインターフェイスをどうするかというわけですよね。 ここでも指定しちゃえばいいのか。 If Not OSでMacOS。これ以外だったときにはファインディングするよっていう風にすれば、 これでイニシャライザーが変化して、これで渡す必要がなくなる。これでいいですね。 そうするとOK。できた。いい感じの気がしますね。 これで用意実装あたりはOKなのかな。ちょっとファイルの整理だけを考えていきたいんですが、 パッチとかどうしますかね。これMacOSで使ってないけど、WatchOSとiOSで使ってるやつね。 まだ当たった可能性がもしかするとあるのを考えると、気にしなくていいのかもしれないですが、忘れないうちにやっといたほうがいいかもしれないですね。 WatchOSとiOS。この2つだけで使ってますよというファイル名。 これでファイル名での管理あんまり良くないですかね。そう考えるとね。 これが煩わしいですよね。フォルダ分けちゃうと探す場所が面倒だなと思ったんですけど、 ただその辺はコマンドシフトOという便利なキーワードがありますからね。 コマンドシフトOで例えば、バイクパッチとかやるとこれで見つかるし、ランドマークDTいるのほうがいいか。ランドマークDTいるとかやるとこれでね。 パスがここにちゃんと下に書いてあるんで、MacOS用かiOS用かとかね、ちゃんと見てみても分かるし、3つあるんだなってのが分かるから。 これらのほうが合意かもしれないですね。ファイル名がこんなに切れちゃって分かりにくいですね。 確かにね、共通とすると取り以外とする。 取り以外かなこれ。ただし共通にするとこのスターイメージとか、仮にねOSごとに違うのがあったときにここからは分からないというのがね、欠点なんですよね。ちょっとばっかしね。 なので並べてみたんですけど、並べたら並べたでね、これはちょっと探しにくいですよね。長い名前ね。うん、悩ましいですねこの辺ね。 どうしたものか完全に分かりにくくなってる。なので、まあこれはフォルダ分けがいいんですかね。 それからここ、リッチにあるナビゲーター広げてあげれば見れるんで、まあこれでもいいか。 まずはこれでやってみますかね。このハイクバッジは今のところiOSとウォッチOSでしょ。このハイクディテールもハイクグラフもそう。 で、この辺はいいのか。で、マップビューこれは共通。で、プラットフォームこれはプロファイルか。で、この辺は今のところiOSとiOS。これファイル名間違えてるしね。 で、アニメーションが今のところこの2つか。そのうち全部使うと思うんですけど。で、シェイプスタイルもそんな感じですね。 で、ビュービルダーこれはデバッグ用に作ったやつで、これをMacOSにも入れといていいや。これを作っておくとTwistUIのビュービルダーの中でね、プリント分割が使えるよっていうそういったエクステンションですね。 これは一応つけておいてデバッグしやすいように。で、ランドマークアップは全部共通。で、レンディングも全部共通となっておけですね。はい。じゃあこんな感じでとりあえずランドマークリストというものがMacOSへ移行完了した。一応ちゃんと動かしておいてみますか。 どんどんやらになった。ランドマークリストアプリでね、プレビューもステップがいらなくなったMacOSはね。なのでこれでちょっとまた。えーと、これが ランドマークリスト共通のものですね。これはMacOS用のプレビューと分けないとダメですね。 なのでやることは、ifOSがMacOSだったとき用のプレビューと、そうじゃなかったときの用のプレビュー。 プレビューの中で条件分岐して全然問題ないと思いますけどね。今回は外側にやってみて、ステップがいらなくなって、引数もいらなくなって、これでプレビューがちゃんと動くようなこういった状況ですね。 クロスプラットフォームほど難しい。面倒ですね。こういうあたりね。実行して、こうしてアプリがどこで動くかな。 このメニュー、ここで残さないといけないあたりがすごい気になるけど、ちょっとリアルに進めるうちに直すことになるかもしれないので放置しておいて、最終的に直すことになったらまた考えましょう。 こんな感じで動きましたね。ここでMacOSが出てくるのがちょっと気になるんですけど、いいのかな。いいですね。 はい、じゃあこれでOKで、次回はまたこのリアルの続きですね。セクション3ですね。ここからやっていく感じにしましょう。はい、以上。これで終わりにしますね。お疲れ様でした。
