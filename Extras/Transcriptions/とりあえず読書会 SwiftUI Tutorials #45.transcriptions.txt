Transcription & Summarize : とりあえず読書会 SwiftUI Tutorials #45

はいでは、という続きを始めていきましょう。 えっと今日は、マクロバツリーの回、完成していても、マクロバツリー自体ね、こんなチュートリアルにはないわけですけど、 まあそれが、リファクタリングの一環としてね、完成しまして、 で、これを、まあ、やって、こうね、使ってみた感想としては、 まあリファクタリングとしてやるにはちょっと大げさだとなるみたいなね、 そういった状況になりましたけれども、 まあまあ練習としてね、こういう場面で遊んでおくのは大事かなという感じで、 そのまま、やって続けていくという感じでね、やっていきますが、 そうすると今度は、この前書いたコードをね、ちょっと雑な感じのところがあると思われるので、 まあ最終的なリファクタリングみたいなところをね、またやっていこうかと思うんですが、 そういえばリファクタリングってどういうタイミングでみんなやるんでしょうね、 このコード、えっと、チュートリアルのやってるみたいに、 主にね、リファクタリングするみたいなことも、あるといえば、あるというか、まあ普通にあるわけですけど、 それと別にね、リファクタリングという風に意気込んでやってるとかね、 まあいろいろある中で、どんなレベルまでやるかっていうのもね、まあ手がついてるし、 うん。録音してからやるのか、それともいきなり始めるのかね、そういったところもあるでしょうし、 まあ慣れていない人はもしかするとポンとしてからやるですかね、 なんか直せなくなるみたいな不安とかって、多分慣れていない人とはあるんじゃないかなと思うのは、 自分はあの、なんか、絵みたいなのね、図の絵とか、なんかとにかく絵を描いたときに、 なんかその絵をね、描き直したいときに、まあ、コードに戻せないっていうね、 そういった不安があって、悩んだりするんですけど、 プログラムはそういうことほとんどないですけどね、 まあ、ときにこの状態でやりやりながらでも、こうコメントアウトしておこうかみたいな、 要はコメントアウトで残しておこうかみたいなことをね、ちょくちょくやってると思うんですけど、 ああ、そういったときもあれば、アサートね、書き換えるときもあれば、 まあ、コミュニティとしてからやることもありますよね、 それもまあ、やっぱり希望なんですね、うん、まあいいや、とりあえずそんな感じで、 リファクタリングというかね、いろんな、なんかレベル感があるのかなっていう気がするんですけど、 まあまあ、そんなことは置いといて、リファクタリングやっていきましょう。 まず、マクロが気になりますね、とにかく今現状ビルドがちゃんと通るよっていう状況、 まあ、これに合わせるっていうのもなんか変ですけどね、まあ、今回はきっとこんな程度で大丈夫なのかな、 で、マクロ関係の行動をまず見ると、このマクロの宣言はいいですね、こんな感じですよね、 で、メインはどうでもいいですね、で、マクロの中で、ユーザーインフォーアクセサー、 まあ、これはOKですね、ユーザーインフォーアクセサー、 この名前どうなんだろうみたいなところあるけど、まあいいや、大丈夫な気がする、 で、ここでユーザーインフォーアクセサーですけど、 添付ってなんだっけ、添付は何もしてないのか、ここから分離しようとしてたのかな、どうかもしれない、 とにかくユーザーインフォーアクセサーというマクロがあって、 エクスパンションでいろいろ処理をして、 FixMe、これ直しましたね、前回ね、ユーザーインフォーのケースが反映されないよっていうのが直ったので、これでOK、 で、これはSwift Syntax Visitor、シンタックスビジター、それの機能の都合なんでしょうがないですけど、 インスタンス作ってウォークを呼んでから、それが持ってるプロパティを返すっていう形を取っていて、 まあこれはこれでしょうがないんですかね、なんかもったいない、なんか処理がそんな気がするんだけど、 これね、今時の考え方だったらウォークに戻りても出せるんじゃないのかな、エネリックパラメーターとか思うけど、まあまあしょうがないか、 Syntax Visitorのパブリック、これ定義に来たのはなんだ、Swift Syntaxとか、オープンソースだからか、で、ウォークでディスプレイしていると、 で、それでいろいろね、加えたものを対しているよ、これはしょうがないですかね、 で、あとはここのエクスパーションの時のメンバーデクラレーションメンバーブロックで、 これがメンバーでくるアズ、インアムでくるSyntax、ここはしょうがないというか、これでいい気がしますね。 あと考えられるところとしては、大丈夫かな、これはそんなに無駄なというかそんなにね、 えーと、わかりにくいことにはなっていない気がするので、いいんですけど、 ループが回らなかったとき、ループが、だからこれはどうしますかね、 ユーザーインフォーでしょ、ユーザーインフォーがあって、 最初のSyntax Visitorでインアム、あれこれユーザーインフォーじゃなかったとき どうするのかというのが抜けている気がする、いつの間にか忘れされたかな、ユーザーインフォーがあった、ユーザーインフォー、 なんか、でしたが気が変わりますね、なんかね、あーどうね、 そうね、これダメですね、これはダメだ、なのでどうしようかな、 要は確かめてみますか、これが例えば、どこにしますかね、 えーと、実際のビルドで使われているところ、 ダットマーク、ユーザーインフォーアクセスター、この辺で、ここだ、この中で、 例えばユーザーインフォーじゃなかったとき、 このときにもビルド通るんじゃない、これで、多分、ちょっとランダムだろうかな、 ユーザーインフォーだったときには、みたいなコードが入ったときが、 でも大丈夫だ、どっちかでしょ、これはやばいですね、 これ多分ユーザーインフォーの違うやつとのみたいにこうやってね、 えーと、ダブルで用意したとき、というか、ユーザーインフォーが2個あったとき、 名前なんでもいいや、2個あったとき、このとき、多分エラーになると思うんですよ、 あれ、なんないか、なんない、このときの展開できるかな、今日は、 エクスパンドマクロ、今日も展開しないか、1回エクスコードどうすればいいのかな、 展開してほしいですよね、マクロ開発中ね、こんなふうになってたかな、 昔やってたときは、こんなに不調は見せなかった気がするんですよね、 展開の部分ね、それからエクスコードのバージョンも変わってるんで、 当然、バグったりとかはあるんでしょうけどね、 とりあえずこれでエクスコード立ち上げ直して、フィルドをかけて、 これでマクロの展開、これをやったときに出てきてくれた、 えーと、いろいろあるのかね、1回のループでリターンするからだ、 だから問題なかったんだ、問題ないのです、だって感じですよね、 これが、あ、そうか、あーなるほど、ユーザーインフォーだけど、 汎用性の面で考えると、最初に出てきた列挙型を、 これのブロパティと見立てるってこともありますね、 それやってみようかな、これ、要は一番上、このユーザーインフォーってあるじゃないですか、 なので、そういうことをやろうとすると、 とりあえず、ラッドマークマクロのクライアントに移動して、 これで、えーと、ここだ、ユーザーインフォーアクセサーですね、 ユーザーインフォーアクセサーで、これで、 この中で今は、ネームスペースが0だから文字があった場合には、 ネームスペースをユーザーインフォーにするっていうね、 そういったコードになってるんで、このネームスペースを渡すときに、 えーと、だからアプリはenumですよね、 それで、enumが見つかったときに、 ビジターで、ここのビジットモードの前に、ネームスペースですね、 ネームスペースとして、えーと、ここで、ネームスペースイコール、 enumデクラレーションの、 ネームのテキストの頭を小文字にしたいから、ローアー決めるケース、 自分で作ったやつですね、 こうして、ネームスペースを渡してあげるという書き方をすると、 ビルドは通らなくなると思うんですが、 えーと、ビルドは通らなくなると思うんですが、 えーと、ここでマクロを展開してみると、 これで、ユーザーインフォ、ここが丸くなっちゃったのか、 えーと、これでとりあえずユーザーインフォAPS、 いろいろダメですね、失敗、いろいろ失敗してますね、 ネームスペースで、えっと、 ここですね、ユーザーインフォ、ネームスペースが渡っていったので、 ユーザーインフォ、ネームスペースが付いたのだとか、 えーと、だから簡単には行かなかったですね、 ユーザーインフォAPS、あー、なるほど、 あ、やっぱりもうちょっと工夫できそうですね、 えーとどうしようかな 列挙型、列挙型じゃなくていいのか、 えーと連結させて、要は今文字列を連結する形をとって、 あの、作ったってわけですよね、全体的な、いいとかをね、 なのでこれ形で整えちゃえばいいんだ、 なので例えば、要はパスってことですよね、 なので、えーと、NotificationContentのパス、みたいなのを作って、 NotificationContentをユーザーインフォアクセッサーか、 ユーザーインフォアクセッサーにパスを搭載すればいいのかな、 なので、新たなファイルを一個作って、 ユーザーインフォアクセッサー、トラップとパスみたいなね、 そんな感じの形にして、それでエクステンションでユーザーインフォアクセッサーに、 トラップとパスをやってあげて、それでどうしようかな、 ここの中でパスというのは中にデータを持たせる、 ENUMで、ENUMで連結していくとどうなるだろう、 ENUMで連結していくという、でもありますね、じゃあやってみますか、遊びな感じで、 この中でね、ハイデッドを持たせるというのも 全然アリだと思うんですけど、ENUM、まあと言うわけで、えーと、なんだっけ、 インダイレクト、ENUM、 インダイレクトは特性じゃなくてキーワードなのかもしれないね、まあいいか、 これでパスとして、パスのアイテムかな、ケースアイテム、 パスのアイテムって名前だな、パスのエレメント、ケースエレメント、 そしてストリングとネクストでパス、みたいな風にして、 それで、これでオプションなのか、パスで、これでいいのか、 別のケース、終わりを示す、別のケース、そういったのも用意したらいいのかなと思ったんですが、 これでいいのか、こうすることによってパスを追加していきますよね、 エレメント、エレメントに対して、さらに追加したいよってなった時には、 そのネクストに代入する、代入するのか、そうするとなんか、コピーしないといけなくなったりそうに見えるのか、 あんまりインダイレクト、ENUMって使ったことなくてわからないよ、 例えば、なんかでパスでしょ、それでエレメントとして、ユーザーインフォーアクセサーのパスとして、 エレメントで、Aとかやって、この人がニルにしたうとして、 これに追加したいようなとき、このときにYは、Xはないですね、だからこれに連結っていうのが難しいのか、 連結をするんだったとすると構造体にして、構造体で文字列と、 次だけど、次だと配列か、配列を持たせた方、結局も配列か、とか、 インダイレクト、ENUMでその後にさらに連結するには、元の値に次を足さないといけないから、 インダイレクト、ENUMでしょ、インダイレクト、ENUMでどんどん続いていくのが、メモリが参照型になって、 パスとか次のパス、だから、今いるパス、次のパス、次のパス、頭につけていくのが大上層ですね、 頭に連結するのはパノーとすると、頭がパノーで後ろから辿っていくってのは結構苦手なんですよね、そうですよね、 ということは、バイディレクショナルコレクションであった方が良くて、 バイディレクショナルにするためには2つのポイントを持っていないといけなくて、 いわゆる、何だっけ、ENというか、何だっけ、連結して表現するパターン、 忘れた、リストではなくて、リンクドリスト、リンクドリストで作ることになるのがパスとなるとね、 そうするとユーズが利きそうだから、ちょっとやってみたい気がするな、 リンクドリスト、なのでパスとして、リンクドリスト、リンクドリストで前と後ろ、後ろに足していければいいんですね、 だからそうすると、配列でやっぱりいいのかな、 配列の他でできそうなものは、ちょっといろいろやってみますかね、 パス、リンクドリストって言ったらいいのかな、リンクドリスト、パス、忘れた、パスとして、 それでパスの構造としては、まずはEナムじゃなくて、だからインダイレクトじゃなくて、ストラクトでいいですよね、 ストラクトで、えーと、 このね、パスのルートとね、ルートが入ることで、 だから、パールート、これがただ別のパターンですね、なのでストラクト、アイテム見たいなのを用意して、ルートはアイテムですよね、 それでパー、ネクストとしてアイテムでオプションナルものもあれますね、 アイテムとしては、パーとしてネームですかね、それでドリング こんな感じで、 でこれで、ルート、アイテム、あれこれストリングでいいのか?あ、 ドリング、これ違うね、これね、痩せましょう、パスにしようとすると エラーになっちゃうんですよね、パスのサイズが決まってないからですね、 なのでこれを参照にしないといけないみたいなね、こういった風になってきて、 そうするとクラス、クラスはちょっとね、パスのサイズを決める、パスのサイズ、 アイテムとパス、ネクストとパスで、リンクドリストだと、オブジェクトとか、オブジェクトにはあんまりしたくないな、 まあでもリンクドリストの時点でしょうがないんですかね、アイテムで、アイテムがパスを持ったらまた、 レインパス、パスのアイテムとね、違反してますもんね、 そうすると、シーケンス、シーケンスというか、あなたに配列を持たせるのが早いですかね、 配列を持たせる手メリットみたいなのもそんなにないですよね、 まあそれならいいか、パスとして、プライベートバーですよね、アイテム図って、 これでストリングの配列、こういう風にした上で、パスのイニシャライザーで、 イテムとして、ストリング、ストリングでいいかな、ストリングとして持って、 アイテム図は、アイテム図ですね、こうした感じでパスが増えて、 これだけではないですね、だからこれもういきなり、アイテム図にして、変調にしちゃえばいいのか、 アイテム図を普通に入れてあげれば、これで、イニシャライザー、 でも問題はないですね、ルート作って終わりますね、基本的にね、いらないからまだいいや こうしておきましょう、そして上で、アイテムに対して、 テイティングファンク、アッペンド、で、ネーム、アイテム、アイテム、ネームといい気がするな、 パス、ネーム、ネームって変な気もしないでもないですけどね、 ネーム、エンドネーム、トリング、アッペンドの時にはネームズに対して、 アッペンド、ネームですよね、これでOK、で、パスは、とりあえず、これで、 あ、そうだ、これのテキスト表現、これを用意しておきたい気がするので、 エクステンションですかね、エクステンションで、ユーザーインフォアアクセスターのパス、これをカスタム、 まずは、普通のエクステンションにして、 結局、このユーザーインフォアアクセスターのパスとして、 カスタムストリングコンパティブルですよね、それでディスクリプションを搭載してあげて、 この中で、一列を塗っていくわけですけど、最初だけローアキャメルケースにして、 残りをローアキャメルケースにしちゃったら良いのかな、 そうすると、それをするには、要素が1個しかない場合に塗るので、塗る場合には、 空持ちですよね、 なので、どうするのか、まずは、ざっと中からいってみますか、 ファーストマップ、それでファーストイン、 ファーストインに対して、ディスクリプションのパスとして、 あ、これはファーストなので持ってないからですね、 とりあえず、ネームズ、ここに対してやったら良いのかな、 それで、ファーストインに対して、 ローアキャメルケースですね、 パーシャルリザルトと、 パーシャルリザルト、これはどういうのかってなってみました、 これが、トレーニングプログラムで見た方が分かりやすいですね、 パーシャルリザルトと、あとは、今のネームか、 それで、パーシャルリザルトプラスイコール、 ネームの、ローアキャメル、アッパー、ここまで書いていくと思ったけれども、 塗りたくしたら、なんとやらないでも良いですね、 あまりやるんですけど、最終的にはね、ドロップファーストでレイジーにして、 レイジーだったら、レイジーした上で、マップで、 アッパーキャメルケースですね、 レデュースを使いますね、この後ね、 レデュース、レデュースを使うという事は、 こんな所で出すんじゃなくて、これ初期値にすれば良いですね、 なので、レデュースの初期値に対して、 で、ここで、レデュースイント、あ、レデュースインツって、 プラスイコール、これで良いですね、これで完成した、 リターンにして、これで良いですよね、 そうすると、名前の最小の文字を、レイジーマップにしてるのはね、 後で、何回もマップを作るんじゃなくて、 順次ね、やっていくように、レイジーにしてるけど、 これが、レデュースをする時に、 アレージマップシーケンスのレデュースを読むから大丈夫そうですね、 レイジーして、マップをかけて、 レデュースで足し合わせていく、これで出来ましたね、 そうすると、頭だけの文字で、アッパーキャメル、 全体的に見て、アッパーキャメルケースの名前が取れるようになったというね、 機械的に、なので、これを使ってあげれば、中で、 中でというか、今まで一緒に組み立てながら、 ネームスペースとして渡していったものを、 パスとして渡す事が出来るようになったという感じなので、 で、ここでネームス使ったんですけど、 このネームスをパスとシーケンスにするってありそうですね、 エクステンション、で、ユーザーインフォアアクセサーの パスとして、シーケンス、これにしてあげると、 メイクインテレーターですね、シーケンスを 動作させるにはね、 寒いインテレータープロトコルのままで大丈夫ですね、 ネームスのメイクインテレーター、 こうやってあげると、中身が、アイデスがどうかなのか、 見つかされる事なく、インテレーターを返せるというね、 こうしてあげると、ネームスに対してファーストが得られるんじゃなくて、 自分自身にファーストって出来るようになると思ったんだけど、 えーと、これはオプショナルタイプ?センダブル? えーと、あ、こうか、レイジー、あー、なるほど、 これは自分自身がセンダブルじゃないからですね、 これ型を見る限りセンダブル、あれでセンダブルは 書かなくてもいいはずだから、違うな、多分、そうではないね、 えーと、イニシャライザー、コンディショナルバインディングは オプショナルタイプでなければならない、このファーストの事ですよね、 このファーストは、あ、そっか、コレクションか、 エーケンスだと、えーと、シーケンス、あ、そっか、 ファーストって言い訳に行かないのか、エーケンスだと、 エーケンスだと先頭が取れて残りに対してみたいな事をやるのか、 そうすると若干面倒ですね、一定の値を使って どんどん足してあげるみたいな事をすればいいだけではあるんですけど、 うん、そっか、そういう風に対してとか出来ないのか、 あんま出来ないのか、ファーストだけなんだよね、問題はね、 なので、ファーストに対してディスクリプションでファースト、 エーケンス、エーケンスの場合は、えっと、フォールループで回すか、 または、エーケンス、シーケンスのプロトコルは、 インテレーターですね、インテレーターだから、 なんか、思ったより面倒ですね、エーケンスの方が ちょっとカッコイイかなと思ったけど、 まあでもいいか、ファースト側な、なんかね、シーケンス、 ファースト側、ファースト側として1個取られれば、 確かにシーケンスおかしい気がするから、 いいや、これにしよう、取られ方の問題か、あ、ダメですけど、 これで、パスを渡した人は、 このネームスペースのとこですね、 これで、えっと、要はここでパスを渡す、 パス、で、これで、パスがあったですね、ここがね、通過った、 で、初期値はいらなくなって、 初期値いらなくなるの結構重要なんですよね、 で、パスにして、パス、 初期値何いらなくなると、あの、誤解が少なくなる、 あの、何にも断りがなければこれだよね、みたいな 暗黙ルールになっちゃうんでね、ディフォルト値っていうのはね、 なので、それは暗黙ルールってことは、 そのルールをしていないと、そのAPIを使えなくなってしまうというね、 そういった問題に繋がってくるんで、 ディフォルト値っていうのは結構アイオニーに使ってる人もいますけど、 ディフォルト値を本当によく考えて買わないと、 あとでちょっとディフォルト値を変えたいな、 なんて思うと大変な目になりますからね、 なので、あんまりやらない方がいい、 あと、ディフォルト値をつけてしまうとね、 支援しなくてよくなっちゃうから、 私を忘れることもね、できたりとかして、 何か断説が書いてくるんでね、 ディフォルト値はない、何もしたことはないと 個人的には思って、 とにかくパスが渡せるようになった。 パスがエンプティーだったら、そういう考え方が もはや要らなくなって、 ネームスペースプラスEナムとかやってるのか、 だからこれをどうしようかな、アペンド的なやつですよね、 パラポだったらば、Eナムネームのロアキャメルでしょ、 それでネームスペースが空じゃなかったら、 それプラスアップキャメルですよね、 つまりパスのわけですよ、 パスに対してメソッド追加すればですね、 パスに対して情報を見れるようにしてやっていきますか、 こんな、大丈夫かな、アクセスが、大丈夫ね、 そしたらここで、 パスに対してアペンドというメッキングファンクションを作りましたけど、 同様に普通のファンクションとして、 アペンディング、アペンディング、ネーム、ストリング、 でも取り打ちとして、パス、自分自身ですね、 ユーザーインフォアクセサーパス、 これセルフって書いたほうがわかりやすいんですかね、 どうなんでしょうね、セルフにしますか、 アペンディングする際にこれストリングよりなんか、 アムストリングプロトコルのほうがいい気がするな、 アムストリングプロトコルね、 ディスクリプションストリングに変換して保存する、 っていうね、そういった感じですよね、 アペンディングも同様なんですが、 イニシャライズしちゃったらいいのかな、 そうしておきますかね、 そうするか、セルフに対して、 ネームイコスは渡さない、 イニシャライザーにしちゃったんですよね、 いらないだろうとか言って、 バー、リザルトイコール、セルフってやって、 そしてリザルトに対してアペンドで、 データアンリザルト、これでいいですよね、 アペンディングができれば、 ここネームスペース、 アペンディングインナムネーム、 こうやってできちゃったとすると、 ここネームスペース、 ネームスペース、アペンドエクスポンション、 ネームスペースはラベル省略できちゃってるからな、 ネームネーム、 ここでユーザーインポがくっついてきちゃったんだ、 ここは何とかするわ、解決ですね、 やっぱりシーケンスにしたい気がするけど、 ドロップファースト、 ここに付けますかね、 ドロップファーストね、 名前の付け方を変えてみますかね、 パスパラストリング、パスパラプロパティネーム、 パティネームなんて名前はちょっと毎日惜しすぎてるな、 そうするとパスに対して先頭だけを、 パスってなんていうんですかね、先頭だけを抜いたパス、 こんなものは一般的な名前はない気がしますね、 そうするとドロップファーストか、 解決的にはドロップファーストで先頭を抜いたやつになりますもんね、 だからファンクション、ドロップファースト、パスと、 それで、例で元1として、 セルフ、自分自身の型を解説にして、 そうしたときに、ちょっとイニシャライズが欲しいですね、 ネームズをチェックで指定するやつ、 そうすると、ここに付けておくの、 イニット、ネームズ、ストリング、だけど、 これはサムシーケンスストリングですね、 こうしてあげて、サムシーケンスストリングとしては、 ネームズイコールアレイに変換する、あれ変換できないか、 セルフか、これですね、これでいいですね、 こうしてあげると、さっきいろいろドロップファーストでやったときのアペンド、 これもできるけど、これはこれでいいですね、 これはこれでいいけど、 セルフをイニシャライズしてアペンドして、 それが足合わせるか、まあいいか、これでいい、 ちゃんとここからバレているようにして、 それでドロップファーストは、さらに簡単で、 セルフに対して名前を渡すときに、ネームズのドロップファーストですよね、 ドロップファーストが返せる、 ドロップファーストが返せることによって、できることになったのが、 ここのネームスペース、アペンドのネーム、 これが、パスからドロップファーストをした上で、 ディスクリプションか、ディスクリプションをそのまま使うなっていうルールがありましたね、 パス、ストリング変換か、ストリング変換、 これはストリングとサブストリングにしか搭載してはダメだよってルールがあるから、 両方やるとすると、アペンドでパスで、パスの、 アペンドパス、パスを渡すわけにはいかないんでね、 これはストリング変換か、ディスクリプションはやっぱりルール上用意したくないですね、 そうすると、ストリングディスクライフィングにするか、 それともドロップファーストに対して何かプロパティを持たせるかですね、 パスのドロップファーストのテキスト表現ですよね、 ストリングディスクライフィングがダメな気がしますね、ちょっと書きにくいですけど、 まあこんな感じ、それでネームスペースじゃなくて、 オケとかなんだ、インスタンス、ソフトが、デザインフォーパス、 ストリングプロトコル、パス、なんだ? ここはネームスペースですよね、ここじゃなくて、 ネームと、パス、ネームスペース、ネームスペースか、 名前ものが微妙になってきましたかね、 パスタイプ、4e,2, fictionary、という風にして、 フィクショナリーとして、で、これで、 そのストリングプロトコル、で、ネームスペースここが、 ネームスペースじゃなくて、まだネームスペースか、 これのストリングか、だからカスタムストリングコンバーティブ、 だから、これがどうでもいいですね、 ストリングディスクライピング、 ディスクライピング、こうね、 ディスクライピングのネームスペース。 ネームスペースじゃなくて、 今はフはするんですが、 カスタムストリングディスクライピングが 微妙なんですよね、パスをして、 パス、パスのストリングか、これは しょうがない気がするな。 同様のインターフェースでパスを渡せるように しちゃったんでしょうね。 appendパスパスをして、 2、パスフ、パス、で、 2、パスフ、パス、フィクショナリ、どうなんだろう。 ストリングディスクライピングを 毎回やるというのが特技になっていて、 これを解消するには、 まあ、まだあるんですけどね、 解消方法としては。 ただ、それがどうかどうかというのが 気になるところで、 まあ、1個ちょっと動作しておきますか。 これで、パスを渡せばいいわけですよ、 要は。 ここで、ネームに対して、 なんだっけ、ユーザーインフォーアクセサーパス。 これ、ネームがパスなのかどうか、 パス表記でネームっていうこともあり得なくはないか。 2、ディクショナリも同様にパスで、 ディクショナリのパスっていう感じで表記してあげて、 こうしてあげたときに、 append、要はストリング、ディスクライピング、 ネーム、で、この後、4、いいとして、いいですね。 それで、パス、タイプですね。 それで、2、ストリング、ディスクライピング、 ディクショナリ、で、これで、プロテクションはプロテクションですね。 こんな風にして、ここをごちゃごちゃすると、 開業しておきますかね。 これと、ここと、ここと、あと最後、ここですね。 こんな風にしてあげて、 そうすると、ここで、毎回ストリング、 ディスクライピングとかやらなくても、 名前はパスから先頭取ったものですよ。 で、保存先はパスそのままですよっていうね、 こういった書き方が、 パス、パスは、パス、アッペンディング、 アザカフネームスペース、 だから、パスのアッペンディングでインナムネーム、 これをパスとして動きして、 それで、パスの先頭取ったものと、パスね、 こういった風にして、 ドロップファースト、関数がこれですね。 こんな風にしてあげて、 インナムネームは、ここでも使ってるのが、4キーですね。 だから、インナムネームとパス、これで良いですかね。 で、ビジット、ここでパスが、 ブロックビジットがあるパス。 そうしてあげるとね、パスはそのまま、 普通に引き継いでいけるっていうね、メリットがありますよね。 ほらこれ、パスノード、ノードのネームを アッペンドしているから、ユーザーインフォーの時には、 あとか、ユーザーインフォーの時には、 何も渡さなくていいのか。 つまり、またイニシャライザーが足りてないことが、 伺えてきた気がして、 つまり、定義はここか。 パス型の定義。 パス型の定義でイニシャライザーも1個必要ですね。 イニシャライザーは、ネーム数がカラフルですよ。 こういう感じね。 これで良いですね。 それで、ここ出てきたら、あとはここか。 最初のビジットは、これがパス。 このパスは、特に何にもないので、 こうですね、パスのカラフル。 ディフォルトイニシャライザー。 ディフォルトイニシャライザーだから、 基地指定しても悪くないのかなって気もする。 気もするけど、さっきも言った通り、 アンモグルールになっちゃうんでね。 ここは、ちょっと考える必要はあるといえばある。 今回はアンモグルールにしましょうか。 これで生きて、次のネームスペースインフォー。 これがパスが渡ってきている状況の中で、 これはケースかな。 enumケースで来るシンタクスですね。 なので、これがカラフルだった時には、enumケースネーム。 もうじゃなければ、enumケースネームアップゲーム。 ケースネームでパスを作り直せばいいですよね。 レッドパスインフォール。 レッドパスインフォール。 パスインフォールというのかな。 enumケースネーム。 全部いいだった場合には、ネームスペースは有罪とか。 じゃなければ、ここですね。 ここでも使っているのか。 ネームスペース。 リファクタリングアートで考えれば、 パスとして、パスアペンディング、enumケースネームですよね。 これでOKで、そうすると、基本的にはここがペンドパスですよね。 それで、パスでネームスペースが、 パスのドロップパスですね。 それでネームスペースというのがここで、 パスですね。漢字にして、そうするとパスを使っていて、 4Kがenumケースだから、このネームスペースの条件とかがいらなくなって、 それでケースが1個抜けて、こうした時に見るやつは、 enumケースネームが1箇所2箇所で使われていますね。 それで、パスでタイプ、タイプが欲しいですね。 それで、ロジェクション。いいですね。これでいい。 あとは、さっきの方、気になったような、ここが、ペンドパスドロップファースト。 大丈夫か。大丈夫ですね。ここのenumネームを ネームにしようかな。これでいい気がする。 これで、あとは、もう1箇所。もう1箇所じゃない。 これはいらない。 ビルドかけると、まだ大丈夫かな。前回これがダメだったって。 ここで名前が消えているとか、名前が消えているとか、名前が消えているってことは、 最初、列挙型が見つかったときか、 ここをうっかりしているのかな。 アクセサ。ここの中でディフォルトをしたけれども、 これが良くないってことか、イジッター。 列挙型が見つかって、それのネームスペースを出るから、 最初はやっぱり、低イニシャライザーじゃなくて、 そうそう、低イニシャライザー。 それではないってことですね。 なので、ここで表示を渡せるようにするっていうのはやめて、 そうすると、コンパイルエラーの箇所1箇所ありますね。 ここで、パス。そして、パスを渡すわけですけど、 その時のパスの渡し方が、パスに対して、 値として、インナムデクラレーションの ネームのテキストって感じですね。 そうすると、このネームスペースは使ってないですよね。 使ってないですね。なので、これが要らないと。 こうしてあげると、フィルトがだいぶ良くなるかと思ったけど、 良くなってないですね。 ところが、APS、アラート、APSアド、 ユーザーインフォーでAPS。 ネームスペースの頭に、肌身は入ってないですね。 はい、ここ。 イジッターとしてパスとして、 インナムデクラレーションですよね。 まず、イジッター、ネーム。 ちょっとふと思ったんですが、このイニシャライザーも、 パス、もうちょっと典型的に使えるように。 これは要らないかな。メタに使わないと思うんですけど。 ネームとして、サムストリングプロトコルとして、 ビューモードとして、インタックスビューモード。 これはビジネスイニシャライザーですね。 ビジネスイニシャライザーにして、 それで、セルフイニット、パス。 そして、パスのネームとして、ネームか。 ドットはビューモード。 このパスのイニシャライザーは、 ストリングに変換しないとダメかな。 これで、よいとして。 こうしてあげると、パスの代わりに、ネームを渡すことができるよ。 すごい些細な問題ですが、こうしてあげて。 これで、ビジッターを作って、回していく。 このエクスパンション、エクスパンションですね。 これはこれで良くて、こう回していった時に、 一番最初に見つかったパスがユーザーインフォーだったら、 パスがユーザーインフォーになるはずですよね。 ユーザーインフォーになって、ビジッターが動き出して、 それで、この辺のビジットで、ノード。 ノードだけど、さらに内包されているパスですね。 これで、ユーザーインフォーですが、APS、APS。 全然ダメですね。この辺の動きがね。 ユーザーインフォー、APS。 みたいな風になってなきゃいけないと思うんですけど。 APSアラートはちゃんとできてますね。 アラートタイトル、APSアラートタイトル。 無言。 アラートタイトル、APSアラート。 アラートタイトル、APSアラート。 無言。 無言。 無言。 無言。 無言。 無言。 無言。 無言。 無言。 無言。 無言。 無言。 無言。 無言。 無言。 無言。 無言。 無言。 無言。 無言。 無言。 無言。 無言。 もう一回、ビルドを念のため書き直して。 前回が、APSがユーザーインフォー、APSですよ。 で、APSアラートがユーザーインフォー、APS。 あ、そっか。 ユーザーインフォー、APSじゃないですね。 ユーザーインフォー、あ、そっか。 ユーザーインフォー、APS。 なんか無駄な確定をし始めましたね、これね。 だからユーザーインフォー、APSっていう名前で アクセスできないようであれば、要はチョコとするわけですよね。 なので、そうするとユーザーインフォー、APSみたいな風にするんだけれど、ユーザーインフォー、APS、API-alertがユーザーインフォー、APSそうね。 ユーザーインフォー、APSか。 ルートでユーザーインフォーコンテンツのAPSアラート。 そのアイディアは悪くないかと思ったんだけれど、ユーザーインフォーか。 ユーザーインフォーね。 どうしますかね。 ディクショナリーネーム、ユーザーインフォー、ドロップファースト。 反応性でなかったけど、やめよう。 そして、やめ方としては、ここら辺で、これサンプルか。 えーと、どこだ。ここじゃなくて、 そこ、今まだサンプル見てるとこね。 これでマプロのパス、この辺でパスはいいのか。 アクセスター、このアクセスターで、要はディクショナリーのところ、 パスですけど、結局ドロップファーストですね。 ドロップファースト、パスの、ドロップファースト。 コンテンツを無視するというね、そういった形にして、 ここもそうですね、ドロップファースト。 で、これでビルドかければ、これはこれでいいですね。 大丈夫だと。 まいっか。これにしましょう。 あ、これにするとなると、今のままだとダメなわけですよ。 リジットでインナムで来るシンタックスで、 インナムで来るシンタックスで、 ユザイフォー見つけるんですよね。 それでインナムケースで来るシンタックスか、 インナムで来るケースシンタックスだと、ループで回していって、 それをプロパティとして搭載していく。 で、その時に、ユーザーインフォー。 ユーザーインフォーではなかった時。 ユーザーインフォーだった時かな。 ユーザーインフォーだった時にはブロックですが、インナムか。 同じじゃない。どんなケースか、インナムに対しても、 今のところね、サクサクとケースを取り出していって、 その時のパスっていうのは、最初に渡したパスか、 それがユーザーインフォーになってきて、 それを無視しているのか、分からないんだ。 ここはこれで汎用性も考えた時に良くて、 アクセスパーの一番最初ですかね。 ここでガードが。これで、インナムデプリシンタクスであるかどうかを検出した後に、 ガードレッド、インナム、レッドじゃないや、ネームを取るから、 レッド、ネームイコール、インナムネームにしようか。 インナムネームイコール、インナムデプリシンタクス、 デクラレーションのネームのテキストですね。 ここまで取った上で、それでガードが。 ガード、インナム、ネームがユーザーインフォーであるか。 どうなっていればコンティニュー。っていう風にして、コンティニューですね。 ここでネームポイントからインナムネームにして、これでビルドが通るでしょ。 とりあえずビルドが通って、ユーザーインフォー以外は期待していないという状況ができているので、 これだとランドマントIDインスタンス持っているか、インナムユーザーインフォーだ。 これに名前変えると持ってないよって言われちゃうと、できてますね。大丈夫だ。 これでマクロが完成したということにして、 リハーサルしてというか、マクロが完成してますね。 やっとリファクタリングが、リファクタリングの中で、 このマクロ周りのリファクターの結果が出ますかね。 そうすると、この辺は良くて、このカードを1個に絞るということもできるのではないけど、 インナムネームは後で使うので、一旦2段階でやっていけば良くて、 ビジターはこうやってインスタンスを作ってウォークして、 エクスパンションを取る以外の方法がないと思われるので、 これが最適とは言わないけど、これがどうなんですかね。 エクスパンション、これを、例えば、 エクスパンションget、getmake、エクスパンションなどのエクスパンションが、 オブノードって感じの名前だから、この名前を何か拝借して、 もうちょっと簡素化する手はありますよね。 だから、ネームで、インナムネーム、ビューモードでビジターでこれでインナムデクラリエーションを渡しているわけですけど、 これをインナムデクラリエーションを渡せば、色々やってくれる形を取ったら良いかもしれないですね。 なので、ユーザーインフォーアクセサーか、 これを、プライベートエクステンション、ユーザーインフォーアクセサーにして、 この中で、エクスパンションとして、インナムデクルシンタックスを取る形を取って、 戻り値として、デクルシンタックス、デクルシンタックス、デクルシンタックス、 こんな風にしてあげて、この中にこの辺のカードを渡してあげる。 カードはどうしようかな。渡すといいのかな。 どうね。渡すといいのか。 ユーザーインフォーだった場合には、ビジターでネームを渡して、 いいんだけど、ビビアレスのインナムネームはユーザーインフォーを期待しているんでしょう。 インナムメンバーブロックビジターが関与的だからこれでいいのか。 ユーザーインフォーで、ユーザーインフォーでここだけをやりたかったわけですよね。 だからこれをマルトコピー、削除マルトとってここにやって、 インナムノードだけど、インナムノードネーム。 ここでテキストを取っていって、ここでネームで、 インナムノードに対してネームがまとえるけど、 ネームをここで渡して、インナムテクラレーション。 ここがインナムノードですね、要はね。 インナムノードのこのネーム、これを取って渡してあげる。 そうするとこのカードを出したネーム、この判定がもったいないですね。 この判定も一緒によるには必要に渡すことになるわけですけど、 それはそれでいいんですよね。 でももったいないよりは理屈としてどうかっていうね、 そういったところな気もするんで、 僕のインナムノードとして、ここでインナムエン数、 インナムノードのネームとして、インナムノードのネームのテキスト。 やってここでネームにして、これでOKですね。 ここに渡してあげたら、ここの中で普通にリパンとして、 Expansion for Inam Declaration。 あ、ダメだった。 UserInfoProcessorInstanceMemberExpansion InstanceMember。 まさか、static functionじゃない。static functionね、ここね。 static function。 これでOKですね。OKですが、どうしようかな。 これでいつか終わり、UserInfoである必要があるから。 またこうすると、このインナムネームを使いますと、 こういうのがなくなってしまいましたね。 そうすると、For Inam DeclarationMembersでメンバーが乗ってくる。 これか。だからこれで、こうでしょ。 こうで、こうでやって、例えば、コンパクトマップ。 なんか長くなっているのも微妙かな。 そう、もうね、メンバーブロック、メンバー図、カードで、 こうやって、インナムデクラレーションにしたいと、インナムノードにしましょうか。 インナムノードで、これで、初インナムノードのネーム、 テキストがUserInfoであることが条件でよかったといけますよね。 で、それ以外は、コンティニュー。で、回してあげて、 最後に何も書いてなかったら、リターンからっていうとね、 ここが取るときになっているわけですよ。 何の問題もないですよ。 これを対象する方法としてやり得るのは、 NumbersからFirstで、 えーと、他、Firstで取っちゃうといった手もありますね。 Firstで、UserInfoのインナムデクラレーション。 まあ、ただそれにするにもね、FirstWareを使おうとすると、 ちょっとばかしよろしくない状況になりますね。 そうすると、あと考えられるのは、 メンバーブロック、メンバー図のマップで、えーと、 Firstを取って、Firstが、Firstとかで、 ブレーティングプロジェクトになっちゃうのがちょっと厄介なんですよね。 見た目だけの問題なんですけどね。 そうすると、やっぱりこの辺ですがね、 えーと、見つかったら、UserInfoが見つかったら、 それをエクスパンションして、 持てなかったら、アシティにカラーを返す。 うん、こうね、先に見つける。 見つけるための機能を搭載するってのもね、 まあ、あるんですけどね。デクラレーションの メンバーブロックメンバーズというよりは、 まあ、いいか。でもこれでいいですね。 悪いことは何もしてないんでね。 なので、これでエクスパンションできて、 ビルドがまた取れるので大丈夫だよね。 ビルドが持たなくなってる。えーと、とか、えーと、 ノーメンバー、ノーティフィケーションコンテンツ、 あれ、ビルド持ってない。 UPS、あれ、持ってない。 UserInfoは持ってるけど、また何かおかしなのかな。 ランダマークのクライアント、クライアントの方は ビルドを持ってるんですけどね。 これなんか、前にも何かあった気がしますね。 クライアントの方は、これでメインのね、エクスパンションすると、 なんと、また出てこなくなってるね。 まずいにして、ビルドをかけ直してみて、これでビルド成功しましたね。 ビルド成功するんですが、ここの展開が上手く出てこなくなったという状況になって、 まあいいや、もう一回エクスポートしてみますが。 エクスポートを立て上げて、もう一回ビルドしてみますけど、 なんか、マクロを作りにくい状況になってますね。 品質、エクスポートの品質の問題だけだと思うんですけど、 ビルドをかけて、あ、デジタルになるように。 というか、これをチョイス。というか、iOSですね。 って、クライアントにしてビルドをかけて、こっちを押しちゃうんですね。 なんでだろうね。エクスパンとすると、APSアラート、 APSアラート、あれ、ユーザー、ここだ。 ここは全然間違ってますね。APSがユーザーインフォ、 APSだから、APSだから。 だから、ユーザーインフォの直下のAPSですね。 ドロップか、ドロップをして、APSで。 あ、なるほど。APSで、この先はユーザーインフォを 省略しないといけなかったという状況ですね。 確かにね。だから、どうすると。 最初、最初のユーザーインフォを省略して、残りが APSアラート、ユーザーインフォ。 最初だけユーザーインフォが欲しいという状況ですね。 なので、そうすると、最初か、 最初のパスだけが片名が欲しい。 全然汎用化されてないですね、これね。 汎用化させるためには、ルート、ユーザーインフォ。 汎用化も何もできてないですね。 マクロが微妙ですね、実はね。 とりあえず、使い方としてはパスが、 ルートだった場合はファーストのみで、 ルートでなければ残り、みたいな。 そんな表記もできるのかな。 ドロップ、ファースト、ドロップ。 そうね、できるけど、できるけど微妙ですね。 そうすると、何がいいんだろう。 パスがあって、テクストがありがって、ユーザーインフォを最初取って、 ユーザーインフォを最初取って、ユーザーインフォが、 あーだから1個のだけですよね。 2個のときはユーザーインフォを省略する。 ユーザーインフォ、ユーザーインフォAPS、 ユーザーインフォAPSコンテンツとか。 汎用性、ユーザーインフォ、最初だけユーザーインフォですよ。 ユーザーインフォ最初だけそうですよとして、 ディスクリプションでから持ち、ディスクリプションか。 ディスクリプションのところでからだった場合、 要素が1個だった場合はそれ、そうじゃなかったら2個目から。 このルールだと外側の都合すぎますよね。 パスが持つには都合良すぎですよね。 そうするとこれは良くないな。 良くないとすると、外側として脱去をいってみますか。 アクセサーでしょ。これで作っていくときに、 パスはもはやドロップをしない。 ドロップファースト2でユーザーインフォ。 ユーザーインフォがあってユーザーインフォドロップファースト。 ユーザーインフォドロップファースト。 そうね。ユーザーインフォじゃないにして、 こうしてやってあげると、 まずビルドエラーになるわけですけど、 ビルドエラーにはなるんですが、これでできたのかな。 なんか違う気がする。 APSでしょ。なので、一回ちょっと閉じてみますが、 Cannot find user info、 ユーザーインフォAPSアラートと呼んでるようね。 これただ毎日使おうかなみたいなことを考えたわけですよ。 APSとかこの辺のテクショナリー作るところが まだボードが古いってことですね。 これね。なので同様にアクセサー。 この中で同じようにドロップしてるところが ここかな。ここじゃないかな。ここだね。 ドロップしてる場所が。 上。この辺だ。ここだ。 あとここあるんで、これを削除してあげて、 とりあえずビルドかけると、非常に情緒なんですけど、 ユーザーインフォ、この辺ですよね。 要はテクショナリーがまだ名前が変わって感じの状況なわけですけど、 メンバー。ここがね。インスタンスの ユーザーインフォランドマークIDみたいなね。 こういった名前になるわけですけど、ビルド成功してましたね。 問題ないですね。問題ないのかな。 いや、問題ないはずなんですけど、 他の展開が適切じゃない気がするんですけど、 これはバグですかね。なんていうのね。 エクステンド。もう一回見ると、大丈夫ですね。 ユーザーインフォ、ユーザーインフォAPSとか。 ちょっと病状になっちゃいましたけど、 これで、もし汎用化をしたいようなとき、 そういったときにはちゃんと対応できるようになったんで、 テクの仕方が微妙ですけどね。こうしておきましょう。 で、Apple Watchのほうのビルドもかけてみましたが、 ここでコンテンツが、ユーザーインフォAPSアラートタイトル。 この辺が見つからない。 グリーンを引っ掛けてみますか。 これでビルドをかけてみて、 コンテンツ。ユーザーインフォしかないのかな。 ノティフィケーションコンテンツの定義域。 名前がめちゃくちゃにしてあったんだから、 あるはずないですね。 で、これでコンテンツをかけてみた。 ビルドをかけると、ランドマーク。 この辺がユーザーインフォ、ランドマーク。 ランドマークがいて、ここのタイトルは、 ここか。ここですね。ユーザーインフォAPSアラートタイトル。 ビルドが取れますよね。強くね。できた。できたけど、 名前を簡単に出るようにしようとした割にはダサいですね。 とりあえず、クレートセットのデバイス。 あ、これはしょうがないやつだ。 なぜかというと、山形ですね。 で、ここであとは、ユーザーインフォでループ回す。 ホワイトをね、しちゃったんですけどね。 または、ファーストで見つけちゃった一緒にね。 うん、まあでもいいや。これはいいわけで、 ここもエクスパンション。これもパッと見よいですね。 で、あとは、ファーストとエクスパンションで いい感じにまとめあげられていって、 ここの関数もはやコメントアートで 残したやつがいらなくなって、 で、ビジットもエクスパンションアートで、 ネームファースト、ネーム。この辺はいいですね。 で、ビジッターをまた再び立ち上げて、 エクスパンションにビジッターのエクスパンションを出している。 えーと、ここはエクスパンション4でよかったのかな?もしかして。 で、ノードでメンバーブロックに対して 効果をかけるんで、これはしょうがないのか。 だとすると、よくないですね。あまりね。 さっきのノードね、メンバーブロック、エクスパンション4、 ディーナムノード、で、ウォークでメンバー。 ここが全然、あの、汎用化されていないですね。 もうね、オート自体は悪くないんですけどね。 エクスパンションプラス、メンバーブロックに対して、 効果をやっているという感じか。 まあ、共通感にも何にもならないですが、 これをもうちょっと整理すると、 えーと、ザティックファンク、エクスパンション、 4、ディーナム、メンバーブロックかな? 4メンバーブロック、そしてメンバーブロック、 バッドなんてあるかな? えーと、メンバーブロックシンタックス、 そして、オートリッジがテイクルシンタックスですよね。 で、それでこの中で、こうやって、 メンバーブロック、これがまた、合ってるかな? ちょっと分かんなかった、まあでもいいや。 ウォークでメンバーブロック。 で、これでメンバーブロックに対して、ウォークして、 手元リッジをね、エクスパンションに対してあげる。 っていうね、こういった形で、まあまあ良いですが、 そうするとこの辺が今度は、 メンバーブロックに対してウォークをしているわけですけど、 ネームとして、ネームのパスですよね。 ネームのパスで、 ネームのパス。 ネーム、エクスパンションフォーメンバーブロック、 エクスパンションフォーメンバーブロックのネームで、 メンバーブロックを渡して、 あとは、ネームを渡す。 ネームのパス。 メンバーブロックとネーム。 名前の付け方が微妙ですけどね。 ネーム、そしてストリング、みたいな風にしてあげると、 そうすると、ネーム、ここでネームですが、 この時、ストリングプロトコルでですね、押してあげて、 これでウォークでビジターでブロックでエクスパンションするから、この時にネームを取っているけど、 これをつまり、エクスパンションを、ブロックだから、 DNAMノードのメンバーブロックですね。 それでネームとして、DNAMノードのネームテキストという風にしてあげると、 ここら辺が、エクスパンションのアピューラレイト、 ビューモードが、ビューモードが、 ネーム、ネーム、エクスパンションのビューモードが、 ビューモードとして、ビューモード、 ビューモードを押す、ビューモードを押す、 ビューライト、アピュレイト、やってあげて、これでいいですよね。 これでエクスパンションが呼べていると思うんだけど、 4ネーム、ビューモード、4ネーム、ビューモード、 エクスパンション、エクスパンションですね、 エクスパンションで、4ネーム、 一応、無理矢理変わりますけどね、 これで4つ化ができて、OKと。 こしたら、あとは、パスとして、 この辺は良さそうですね。 ビジットとして、ネームとネームパスで、 MROはここで2カ所で使っているから、 これはいいですね。 これで、ビジター、これもここをなおさえたら、 エクスパンションプラスイコール、ビジターエクスパンションではなくて、 エクスパンション、エルフのエクスパンション、 ビジターでビジター、ユーザーインフォーアクセサーか、 ユーザーインフォーアクセサー、ユーザーインフォーアクセサーじゃないな、 これは、エクスパンションはユーザーインフォーアクセサー、 そこじゃなくて、ビジターが持ってる方が良い気がしますね。 そうしてあげると、ビジター、 こっちがアプリのとこが、ゼルフで良くなりますよね。 ここら辺、ゼルフのエクスパンション4を、 ネームで、パスか、パスを渡さないといけないのか、 パスを渡すわけだから、エクスパンション4で、 ネームとして、ここネームじゃなくてパスですね。 パスにして、サムストリングじゃなくて、 パスにして、それでパスを渡すにして、 ここのネームを渡すところ、パスを渡すところで、 パスとして、ネームテキストを作ってあげると、 こんな感じで良いんですかね。 ノードネーム、ネームがパス、ノードネーム、パスをね。 ネーム、パスがネームがパス、 ネームがインナムで来るシンタックスのトークンシンタックス。 トークンシンタックスね、トークン。 パスでトークンを取れるようにする手もありますね。 もう1個ね、パス型の定義がどれか出てこない。 パスとして、パスのイニシャライザーでネームで、 ここでインポートで、Swiftシンタックスして、 イニシャライザーユニットをネームとして、 トークンシンタックスで、 セルフユニット、ネームテキスト、こんな感じですね。 押してあげると、ここでネームを渡すだけで、 パスが増えますよね、っていう感じ。 また一つのことじゃないですか。 これでOK、押してあげて、パス、この辺はOKで、 次はネームでサムストリングとか、 この辺はビジターのイニシャライズとして、 エクスパンションとパスでOKですね。 ビジットとして、ネームとネームパスで、 ネームとかテキストとか、アペンディングネームで、 それでここでエクスパンション4、メンバーブロックシンタックスは、 メンバーブロックノードのメンバーブロックですよね。 それに対してパスですよね、ここね。 パスとして、ネームパス。 ビューモードとかビューモードそのまま、 っていう風にしてあげれば、 ビジターを作るっていう表向きの表現が 要らなくなりますよね。 これで次、この辺はネームとネームパスと、 サイトプロテクション、これもいいですね。 次、エクステンションでストリングプロトコルで、 ローアキャメルケースとアッパーキャメルケースですよね。 シンタックスプロトコルで、 エンクロージングイナムっていらなくなった気がしますね。 これなくてもビルド通るでしょ。 どんなパスを出すことになるか。 これはユーザーインフォアアクセサですね。 ユーザーインフォアアクセサ。 これでビルドをかけると、 メンバーブロックビジターで、これが、 これが見つからない、インナムメンバーブロック ビジター、自分自身のことか、セルフですね、これね。 これでパス、ココンのパスも名前空間がいるけど、 この辺、名前空間がわずらしいですね。 そうするとインナムブロックのビジターパス、 インナムブロックビジターはここか。 パスとしてパスか、これをタイプエイリアス、 ユーザーインフォアアクセサのパスってやってあげれば、 さっきの部分は、この辺だ、この辺も大丈夫ですね。 それでここもパスで書くことができるようになって、 あとは、プロファイルメンバーブロックビジターの エクスパンションフォー、 エクスパンションフォーだけど、これが無いのか。 エクスパンションフォーはインナムメンバーブロックビジターが持ってる関数なので、 こうしてあげて、ビルドかけて、これでいいのか。 ビルドが通ったと、これで良いのだけど、 あとで取り留めていくと、さっきの部分は、 ここはオッケーですね、ここもオッケーで、 このエンクローティングインナムが 要らなくなりましたね。 あとはランダムアクセスコレクションで アペンドするというのも追加してあって、 それでアペンド、いいですね。 ただしファイルが分かれてないので、 まずはインナムメンバーブロックビジターですかね。 ユーザーインフォーアクセサーの中のね、 これをファイル分けた方がきっと良い。 ファイル選択したものを別のファイルって言ってきましたっけね。 リファクターでエクストラクトファイルがありますね。 これでユーザーインフォーアクセサーの インナムメンバーブロックビジター、 エクスペンション、そうか、エクスペンションが、 仮定盤が変わっただけだ、 だからこうなって、これを、 プライベートが、プライベートの インナムメンバーブロックビジターだから、 アクセス範囲がおかしくなっちゃう、 いいのか、ユーザーインフォー、 それでいいね、分けちゃおう。 これでリファクターで、エクストラクトセレクションファイル、 これでファイル名まで固めてくれたんだ。 今回自分はプレフィックス入れたいな みたいな気はするんですけど、 こんな感じになって、こんなに名前いらない気もないでもないけど、 これで分割できて、 こうするとビルド通らなくなってるんで、 要は、インフォードもないじゃん、 インフォードもそうか、 インフォード、ウィフトシンタックス、 ウィフトシンタックスだけだと大丈夫か、 で、ファイルプライベートになっちゃってるから、 これがモジュールエクステンション、 そんなのないのか、モジュールエクステンション、 インターナルでいいのか、 つまり、これでいいんだ。 そして、エクスパンションキャノン、 前のエクルシンタックス、 インナムブロックビジター、エクステンション、 ここの先もプライベートじゃないですね。 モジュールってなかったっけ、ないのか、 ウィフトとか出てみようか、 ないのね、とか、インターナル、 はい、これでビルド通りましたね、 いいですね。 で、あとは、ユーザーインフォーアクセサ、 この中の他のエクステンションですね、 レンジリプレイサブルコレクション、 これのアペンドなんかが搭載されてますけど、 このアペンドは、誰が使ってんだ、 さっきのビジターかな。 ビジターの気がしますね、 アペンドね、ストレートストリングブロックと、 これのローアーキャメルケース、 この辺がビジターが使ってますね。 これは考え方だと、いろいろあるわけですけど、 どうしますかね、ブロックの中に拡張して、 これをプライベートで拡張する。 要は、このレンジリプレイサブルコレクションに対して、 ユーザーインフォーアクセサパスパーを 渡してツイッターするなんていうのは、 ビジターしか安心を持たないところであるんでね。 なので、プライベートエクステンションにするっていう考え方も あるんですけど、ここはマックフローなのでね、 マックフローとして別に公開しても、 この外には影響ないのを考えると、これでいいのかもしれないですね。 そうすると、他に考えられる方法としては、 ここを切り出して、別のファイルに切り出すっていうのも 必要かもしれない、こんな感じでね。 あとはストリングもそうですかね。 これですよね、エンジン、ユーザーアクセサパー、 これのストリングのビジターですね。 ローアーキャメルケース、この辺は確かに 汎用的ではあるんですが、ここにある、もうちょっと幅広いところに 欲しい気がしますけどね、エレクトファイルでストリングかな。 こうしてあげると、ストリングのエクステンションができていると。 テンポラリーで作っているのは完全にいらなかったですね。 こんな感じ、できた。これでマックフロー周りができたかと思ったけど、そうか。 これで、エクルシンタックスだから、 インポート、エレクトフォート、ウィフトシンタックスですね。 これでビルドが通ったっていう感じで、できた。 これでマックフロー周りのリファクトリングが終わりましたよ、 っていう感じで、多分大丈夫ですかね。 ファイル名がやっぱりな気もしないでもないですが、 これは何かですよね、ユーザーアクセサパーでした。 これはダメですね。 これでマックフロー周りのリファクトリングは完了したということで、 あと残すところは、今まで書いたことの中で、 残りのリファクトリングなんかないかな、 みたいなことを探していくということをやれば大丈夫ですね。 はい、じゃあこんな感じで今日はこれぐらいにして、 また次回、リファクトリングを進めていくことにしましょう。 お疲れ様でした。
