Transcription & Summarize : とりあえず読書会 SwiftUI Tutorials #53

はい、それでは始めていきましょう。とりあえず、どっちこい。 V2UIチュートリアルをね、引き続き今読み終わって、で、リファクタリングをしているところですが、 まあ大詰めですがね、前回も含めて解説しつつ、直すところがあれば直していこうかなみたいなね、 そんな感じで進めていくっていうのが、今の感じですね。うん。 残すところもね、あと少しで、まああと1倍2回で、まあ逆転でね、見てるところが出てこなければ、 まあまあ、スムーズに終われればそれぐらいかなという感じですけど、 スムーズに終わらないことが自分の場合はね、多いので、まあまあもうちょっと長々と続いていくかもしれないですが、 まあ何にしてもね、とりあえずコードを見ていきましょう。 チュートリアルで完成したコード、まあこれは完成したアプリですよね。 コードがこちら、うん、ですね。 その中のアニメーション、ここからコードに変化とかないかなみたいなところを見ていく感じになります。 で、えーと、そうね、こちらはアニメーションをエクステンションして、 リプル、インデックス、このインデックスは何っていう感じがなんとなくするんですけど、 ね、なんだこれ、リプルってそもそも何ですかね、えーとリプルで、プーリング? 跳ねる感じですよね。で、ダンピングフラクションが0.5。 で、スピードが似てて、ディレイが0.03をかけるダブルのインデックス。 あ、そういうことか。インデックスによってずらすんだ。そうですね。 なので、これはなんて言うんですかね、インデックスでもいいんですけど、 いきなりインデックスって言われても分かんないですよね。 つまって言うとこのインデックスを何に使うのかっていうのを示してた方がいい気がするんで、 ディレイの係数って言ったらいいんですかね。 なんか係数って言うと勝手なエニュー感で小さい方になってる気がするけど、 これは完全な認識がおかしい感じですね。 係数かければいいわけで、ダブルのインデックスこっちが何か係数な気がしますね。 で、そうすると係数っていうのは何だっけ、コエフィシエントっていう単語だっけというのが分からないので、 ちょっと自分で聞いてみよう。えーと、英語で。 えーと、数学などでよく使われる係数、これはね、は英語で何と表現しているか。 これで名前つけちゃったんじゃないかなと思うんですよね。 コエフィシエント、エフィシエントか、コエフィシエント。 なので、これはリプルでディレイコエフィシエントって言うのかな。 ディレイコエフィシエントということにして、じゃあこれが適切な関数名かちょっと聞いてみましょう。 個的な理由コツはスウィフトに変えられないかな、変えられるかな、大丈夫だね。 このAPIデザインは適切ですかと聞いてみますかね。 こうした時に、表現がちゃんと大丈夫かどうか。 ちょっとね、あんまり聞き慣れない言葉なんでね。 係数っていう英語がよく考えている。 あれ、シンキングにしとけ。 数学よりに聞こえるため、一般的なインディメーションAPIでは不適切。 なので、どういう名前がいいか。 一番絶対的ではないですね。バイリストですよね。 ファクター、マルチプライヤー、ああなるほどね。 スウィフトでも出てきますね、マルチプライヤーみたいなね。 ファクターでもいいのか。 うーん、エーズ、エーズか、位相ズレか。 なるほど、位相ズレ、位相ズレっていうのが何を言うの。 こういう専門用語は、何とそれが誤解なく意味を伝えられるとき以外は 選ぶべきではないというAPIデザインガイドラインがあるので、 この位相ズレっていうのはね、本当に今回の表現として合っているのか。 この辺をちゃんと把握しないといけない。 そうすると、アモンの刻み、反角、インタール、なるほど。 この辺だとファクターでディレイファクターでいいかしますね。 難しい、ちょっとわからない。 位相なのかこれか。 ディレイファクター、これならね、Bじゃない? これで選べる名をファクターにしてあげて、 ラベルじゃない、内部編成名ね。 これをファクター。 こうやって引き取るんだったら、ディレイファクター。 これはオプション的な表現とすれば、Bとかそういったのはなくていいので、これでいいですね。 ここがイントですけど、これをダブルにした方がですね、 ここをファクターダブルで書けるってことになるんでね。 これでいいですね。 そうすると、他の場所でエラーが出てくることになりますが、 これは直せば良い。 ビルドを書いて、それで、こうですかね。 見にくいな、これでいいかな。 えーと、こうですかね。 それでもう一回。 アイズグラフのアニメーションでリップルで、 ここでディレイファクターとすれば、何を渡したいかわかるじゃないですか。 で、あとはここがイント型なんですけど、 ファクターはダブル型で渡すものということで、 ダブルに変換して、で、ディレイファクターとして インデックスを使うよっていうね。 呼び出し元の方でこういう表現になった方が 絶対にわかりやすい。 例えば、いや、言い過ぎくらいではないよね。 切ったね。 こんな感じで、よく出てきた気がしますね、これでね。 そう、ね、ディレイファクター。 オッケーですね。 じゃあこれで、ここはオッケーで、 次行ってみますか。 コンテンツをピューのiOS版ですね。 ここのセルとかあるかなというのを見ていきますが、 インポートスウィフトで出しておきますかね。 エンバイロメントがあって、スペートがこうやってあって、 ここの型推論、微妙に悩むんですけど、 例えば、下が推論されてるじゃないですか、 上も推論したいなとか思ったりすると、 こうですかね。アクティブとかタブのフィッチャーとか。 で、タブボディがあって、タブビューがセレクションで、 カテゴリーフォームがあって、ランドマークリストがあって、 っていう構成になっていく。 ここは細かく分けなくても、なんか見やすい気がしますね。 カテゴリーフォームとランドマークリストがあるよ、 っていうことで、タブアイテムがこうやってあって、 タブアイテムがラベルフェーチャーとシステムイメージが、 なんとなくちょっとローレベルな感じがするんですが、 スターラベルって作るのをあたりで作ってないか。 ラベルスターイメージを作ったんだ。 だからこのノリでスターラベル作っておけば、 なんかいいんじゃないかなってね、ふと思って。 フェーチャーと、でも下も一緒か、リストパレット。 この辺を作ったら、まぁちょっと手間ですかね。 モジュレーズリティラルでこの辺を表現しているのが、 なんとなく見にくいかな、怖いかな、みたいなことを感じたりするけど、 そういうことを対応していると、 キリがないのかもしれない感じがするんで、 これはいいですかね、これでね。 ラベルフェーチャーとシステムイメージをね。 あとは、この中で表現をローカル変数で、 ローカルじゃないや。 けさがローカルで作って送っていっても、ありますかね。 ラベルでタブアイテムで、フェーチャーとシステムイメージが、 タブだから下ですよね、下のタブなので。 ここね、あれですよね。 フェーチャード、タブアイテム、フェーチャード、ラベル、アイテム、ここはこれで良いですかね、おそらくね。 デコリフォーム、ランドモークリスト、 これがタブアイテム、タブアイテムを作れば良いのか。 そういう手はありますね、それちょっとやってみますか。 そこまで必要ないかもしれないですけどね。 エクステンションでコンテンツビューを拡張していって、タブは内部、プライベートバーですよね。 だからこれプライベートエクステンションで良いのでは、 ですね、良いですね。それであと同様に、バーとして、 タブアイテム、タブアイテム、 そしてサムのビューなのでビュービルダーか、ビュービルダー、イメージ、タブ、これをコテコリフォーム。 イメージ、違うか、コテコリフォームでコンテンツですね。 タブ、これは入れない方が良いですかね、なんか遠くなっちゃいますね、タブと。 タブのアイテムの中にコンテンツを入れちゃえば良いのか。 これはちょっと多分の気がするけど、やってみましょうね。 つまりここはビュービルダー、ここは違って良いのかな、 良いのかの間に、コンテコリフォームですよね。 タブアイテムがあって、ラベルとシステムイメージ、 ラベルと、ラベル、だからファンクションに変えて、ファンクション、タブアイテムという風にして、 それでラベルとして、タブアイテムのラベルは 省略でも良いかもしれないですね、大変詰めて。 ストリングとあとは、システムイメージ、イメージ、 ストリングと、ストリングではまだ私は無いんですけど、まあ良いか。 コンテンツとして、ビュービルダー、 ビュービルダーってどっちに行くんだっけ。 それで、MoveViewというのを返す、あわだす、あわだす、 戻す、関数を作って、これが何を言っている。 Non-Void Return Value、ここが関数かって、 あとReturn Typeを作るかと言われているけれども、 それは要らないですね。 ビュービルダーが変なのかな、ファンクションとして。 ビュービルダー、これ無いとすると、 これも一緒か、戻り中か、ビュービルダーだったら、 これはラブアイテムで、ここもラブビューですね。 それで、コンテンツとかビュービルダーを 取るようにして、こういうのが違うね、こっちですね。 ビュービルダーを取るようにして、こうしてあげた上で、 この辺を、これがコンテンツですよね。 なんか怖いな、ここを取りたかった、タブが、タブがあるんだ、タブが、タブ型ですね。 やり過ぎかな、やっぱり、まあまあ、でもまあ。 ラベル、システムイメージをタブとして、タブ型ですね。 それで、そうした上で、まずはコンテンツを出して、 それのモディファイヤーとして、こういう風にしてあげて、 フェッチャードのところ、ここがラベルですよね。 システムイメージだけど、これシステムイメージネームな気がする。 システムイメージネームで、ちょっと中でもまどろこしいですね。 システムイメージネーム、まあそんな気がしますね、でもね。 それでタブとタブとして、タブを設定する。 まずはこういう風に書いておいてあげれば、タブを来る時にタブアイテム、 そしてフェッチャード、でシステムイメージがスタート、 あとがフェッチャード、でコンテンツがこのカテゴリフォームですよってね。 こういった書き方ができるからどうなんでしょうね。 これはそういうUIらしくないと言ってしまえば、 これまでのような気もしないでもないですけど、 まあ一応ね、こういう風に書くことができる。 タブアイテム、今はブログで書いてましたけど、 もっと汎用性をね、応用する場合にはタブアイテム型を作って、 タブビューの中で使うみたいなね。 こういった風にすれば、まあまあ、なんとなく綺麗な感じに行くかなと思うんですけど、 そういう作りにしていないところなんか面白いですね、これね。 まあまあビュービルダー的なところでなんとかしてるんでしょうけどね。 タブビューはビュービルダーなのかな。 リスト、リストバレット、リスト、でコンテンツはランドマークリストですね。 これのほうがね、考えること少なくて、 わかりやすそうと言えばわかりやすそうですけどね。 なんと動いてるしね、こうやってね。 これはどうなんでしょうね。 自分だったらこうやりたくなっちゃうんですけど、 まあそういうUIの遊戯ではちょっとないでしょうかね。 あとシステムイメージネームが非常に気になる。 このリテラルでやらないといけないというのがね。 まあこれはまあしょうがない、いろんな画像があるんでね。 それが嫌だったらシステムイメージ型みたいなのを作ってね。 このテキストのリストをケースで作っていって、 それを選択するという手法もあるんで、ちょっとだけここでやってみますかね。 ここでやってもしょうがない気がするんで、 ちょっとシステムイメージ検索しましょうか。 システムイメージ、何に使っているかというと、 まあまあ使ってますね。 ちょっとシステムイメージ型を、 まあちょっと二度手間かなというところはあるんですけどね。 システムイメージ、システムイメージとして、 どこに型作りますかね。 ビュー周りがモジュール型だから、 ここのビューのコントロールではないですね。 いろいろあるけど、まあいいか。 この辺で適当に作りますか。 まとめる場所が見つかっていないというね。 そんな感じね。 ここでシステムイメージという型を作って、 で、これでPNUM、システムイメージ、ローバリュー、 ローバリューじゃない、ストリングね。 これでシステムイメージは何が使われていたかというと、 ラベルに対して、システムイメージはどこで使おうか。 システムイメージとしてこれがなので、ケースとして、 シェーフロン、ライト、バークル。 これ切れなくなるんでね、あんまりいい手ではない気がするけど、 でも時々これ取り入れしたやり方を普通に取ったりするんで、 まあ試しにやってみて感覚を抑えるなんてですね。 で、このままだとここでシステムイメージを渡すときに、 ここにシステムイメージのシェーフロン、ライト、バークルのローバリューみたいに渡さないといけない。 これは逆に嫌ですよね。 というのを思うと、このシステムイメージの中でインポートを SwiftUIしておいて、それでシステムイメージを想定したラベルを作ってあげると良いでしょう。 エクステンションでラベルで、それでラベルのこのイニシャライザーの設計を参考にすると、 ラベルでタイトル、タイトルがビュー、あ、タイトルがビューなんだ。 文字列でリテラルでビューなの?何だろうこれ。タイトルと、本当なのこれ。 ちょっと定義をちゃんと辿ってみますかね。 どこいった?ここだ。これで定義を辿ってイニシャライザー、これですよね。 あ、で、ローカライズストリングキーか。全然違う、なんかヘルプが出てきましたね。 とにかくラベルとしてイニシャライザーで今のを定義するんですが、 ここでシステムイメージのときにネームをこっちに付けないとストリングの表現が大きすぎるので、 なのでこうしてシステムイメージとして、システムイメージが取っておるという風にした上で、 セルフのイニシャライザーに対して、セルフティーンだよね。 エクステンションラベルユニットでセルフ.ユニットがありますね。 タイトルTと、あとはシステムイメージのローバリュー。 あーっと、なんかついてた。システムイメージのローバリューっていう風にね。 これ、だめなのか。えっとローバリューがオプショナル。 システムイメージ、システムイメージ。システムイメージ、これですよね。 これがローバリューか。システムイメージストリングから期待するという。 あー、なるほど。これは自分自身思うとし始めた感じですかね。 あ、そうなんだ、ローバル、つまり取っ てきたイニシャライザーは何でしたっけね。もう1回この取りましょうか。 で、これはシステムイメージネーム、 ローバリューストリブですよね。 ローバリューストリング、ストリングですよね。これなんでオーバーロード呼ばれないんだろう。 ラベルは構造体ですよね。構造体ですね。タイトルとアイコン。タイトルね。タイトル、アイコン、うん、うんと。あれこれなんで変わらないんですよね。 イニシャライザーでタイトルキーとセルフでイニシャライザーでタイトルキーとシステムバリューの、 システムイメージが、あとストリングなんて書く必要ないと思うんですけど。 ローバリュー、これなんかほっかん? またはディフォルト? あ、そういうことか。 イニシャライザーの定義の間違いでしたね。 失敗可能イニシャライザーに、あれなる?そうなってましたっけ? えーと、もう一回定義例を取ってみましょうかね。 ノンアイソレイティブイニット、で、また失敗可能ではないですよね。 もう一回このイニシャライザーじゃない中で、 誰に怒られてるんだこれは。 ラベル省略、もう一回ラベル省略ありますね。 リソースとシステムイメージ、うん、大丈夫ですね。 で、これはもう一回、えーと、このフィックスを勝手に、 えー、なんだろう。 まあ、こういったときは大体ね、 些細な間違い、自分のね、ということが多いによくあるんで、 まあまあ、ゆっくり見たほうがいいんでしょうけどね。 これは、えーと、ラベルがあって、で、これ例えば、 ここで、例えば、省略させないようにしたときも結構出ますね。 だから、オーバーロードのミスではないですね。 で、タイトルで、ローカライズストリングキーに対し、 イメージでインサートタイトルキー、 いや、でも、自動でこっちに打ってきますね。 だから、誤認してますね、完全にね。 その上で、セルフにイニットがあるかを見てみると、 あ、ないんだ。まあ、そう。ないのか。 えっと、ラベルですよね。エクステンションラベル。 ラベルですよね。ラベルのイニシャライザー。 ちょっと一回、イニシャライザーの定義消してみますか。 これを消して、その上で何があるかですね。 だから、ファンクション何かがあって、 この中でセルフのイニット。 セルフのイニットってどっちか。セルフのイニット。 そして、これ。タイトルキーイメージではなくて、 タイトルキーイメージ、システムイメージ、これですね。 ここで、ローカライズドストリングキーと、 システムイメージですよね。 こうしたときに、イニシャライザーですよね。 イニシャライザーで、ローカライズドストリングキーの タイトルキーをラベル抜きで取るでしょ。 それで、その後のシステムイメージというのを、 システムイメージ型で。 システムイメージ型は、オールノイキ型ですよね。 これでオーバーロードしたはずなんですね。 で、その上で何も初期化しないとダメなので、 セルフイニットを呼び出さないといけない。 なので、セルフイニットですよね。 この時に、イニットに候補にいないというのは、 どういうことだ。これは自分の勘違い。 えーっと、何でだろうこれ。セルフイニットでしょ。 スーパーなわけないですよね、ラベルは。 セルフの、あれでもイニットここまでだと言いますね。 あ、でも自分で定義したやつだ、これ。 えー、いない。あれ、ラベルってクラス? そんなわけないですよね。 ブラックとですよね。それでタイトルとアイコン。 で、ビュー、で、あ、そのとこか。 で、ビュービルダー、タイトルアイコン、ビュービルダーか。 ビュービルダーのタイトルとアイコン、そんなのもあるな。 便利そうに。 で、あとは。 えーっと、イニシャライザー、これですね。 あ、あったこれだ。 ラベルでタイトルがエキストで、アイコンがイメージのとき、このとき限定だ。 だからこれの条件が抜けたってことですね。 で、それでその条件はここだ。 だからタイトルとラベルであれなんだっけ? ラベルでエキストとイメージでしたっけ? こうしたときに、イニット、ここでできた。 これで今度は大丈夫ですね。 で、これで、オーバーロードになってるけど、これでいいはず。 タイトルキーとシステムイメージはMイメージのローバリ。 もうできましたね。 エネリックパラメータ、なかなか難しい作りになってるんですね、ラベルってね。 知らなかった。これでできた。 そうすると、ここでね、いちいちローバリを取らなくていいし、 システムイメージが当たらなくても、これでシステムイメージのね、タイトルしない形で、 クルッと取ることができるようになったと。 まあ、まあ出来上がれば良いですけどね。 ちょっと私なんかオーバーかなというような気は確かにある。 で、えーっと、アップデートスコードの動きが変わってるな。 変わってんのは自分の気のせいなんですかね。 でもなんかこの勉強会で何回か設定してる気がするんですけど、 アップデートスコードが変わるのかな。 えーっと、withオプションでクリックすると、 えーっと、withオプションですよね、ナビゲーションだ。 withオプションのときにNext Editorペイン、えーっと、Next Editorか、 デパレートエディター、ネクストエディター、なんかあってその気がするけど、 なんで言ったとこじゃないか。まあいいか。 えーっと、これで、うん、作りましたね。 ということで次、ここはシステムネーム、システムイメージネーム。 これはそのまんま待ってる感じなのと、システムイメージネームはどこから取ってきたんだこれ。 あ、これか。StarFillとStar、なるほど。 うん、これも一緒に考えることができそうですかね。 えーっと、だからこれでStarFillなので、 ケース、StarFillイコール、StarFillとケース、Starイコール、Star。 なんでこんな風に作ってあげて、 それで今回は、えーっと、システムイメージネーム、あれシステムイメージネーム、 イメージは、システムイメージ、大丈夫か、大丈夫ですかね。 なのでこれは、えーっと、システムイメージに変えて、 えーっと、それとシステムイメージネームではなくなりますよね。 それで解析団体もアクティブの状態に応じて、 えーっと、StarFillなのか、それともStarなのかっていうね。 まあ、全部実際できれば書き心地いいですよね。 で、そうした上で、ここでネイラーになると、やっぱりイメージで使ってますよね。 なので同様のことをエクステンションで行って、 イメージ、システム、ネームになってるけど、 システムイメージとしてね、えーっと、引数を取って、 システムイメージで、えーっと、セルフイニット。 これもダメか。 えーっと、定義をね、辿ってみますけど、あれ定義が出ない。 システムイメージ、あ、どうか。 今打ったとシステムイメージのローバリーの形になっちゃってて、 これはダサいですよね。 なので、これのイニシャライザーを見ると、 イメージにシステムネームでストリングですね。 それで、イメージ型はエクステンションじゃなくて、 型定義だと、どうなっているか。 イメージ、えーっと、どこだ。 これは、ここかな。 ここ、イメージ、イコータブルセンダブル。 これは、パラメータとかにないですね。 なので、そうすると、システム、こっちですね。 イメージ、あ、これ全然続いてる。 続いてるか、定義が全然違うか。 このエクステンションした上で、やっぱりイニットですね。 OKですね。そうすると、このイメージもシステムイメージとして、 このシステムイメージパラメータをそのまま渡せるよ、という状況が完成していると。 ここは、ここもまだ残ってたシステムイメージ。 残ってたというか、ここが書き換えましたね。 これで、こっちはシステムイメージで、 これは、パーソン、クロップ、サークル、これを定義する。 えーっと、この辺ですね。 ケース、パーソン、クロップ、サークル、イコール、こんな感じ。 これはラベルなので、システムイメージとして、普通にね。 ここで、パーソン、クロップ、サークル。 中盛り、隠してる感じしないけどね。 まあまあ、この調子でやっていきましょう。 これで、次は、こっちも大丈夫ですね。 それで、次こっちも大丈夫。 次、これが新しいやつ。 同じような調子ですね。 ライダーフォライゾンタル3、3ってなんだ? まあまあしょうがないか。 えーっと、ライダー、ケース、ライダーフォライゾンタル3。 仲間の抜けた感じだが、まあまあしょうがない。 それで、ここで、えーっと、ライダーフォライゾンタル3ですね。 選べるべきとこがいいですね。 それで、次は、コンテンツビュー。 ここは、この辺は良しのようにやってる。 これを持ったら、システムイメージネームか。 サブアイテム、これを改良しようと。 頑張ってた方だ。 だから、これを頂いて、システムイメージネームではなくて、システムイメージにして、システムイメージですね。 ここはさすがに、ここを目的に作っただけあって、 まあ、ここにはさすがに効果が得られるという、そういった感じですかね。 システムイメージが、これはダメか。ラベルで、システムイメージで、えーっと、システムイメージからストリング。 これラベル変えなかったっけ?ラベルで、あ、これストリングだ。 あー、なるほど。ラベルで、アブアイテム。 これラベルはローカライズ、なんだっけ、キー。 ストリングキーですよね。これなら取れますよね。 今書き換えのは不毛ですけど、最初からね、この辺を整えていれば悪くない、書き心地っていうんですかね。 ここで使っているイメージは、ここでリストアップされるのはあまり利点じゃないのかな。 いや、リスト、バレット、イコール、なんか並べられてて、一見落ち着くんですけど、 並べるとの必要性はないですよね。 リスト、バレット、まあ、とりあえずこれで良くて、次は、ここだ。 あ、こっち。まあ、システムイメージで、ラベルもシステムイメージで。 あ、できましたね。これで書き換えられた。 こういう風にすることによって、まあまあ、難しいんだろうな、みたいな風なコードが書けました。 まあ、タブを増やしたいとかいう時にはスラスラとかでいいですけど、 なぜこういうインターフェースをSwissUIは用意しなかったのかというところは、 ちょっと、根調しないといけないところな気がしますかね。 タブビュー、ちょっとここの定義を見てみたいんですけど、 これはビュービルダーでいいんですかね。 タブビューで、タブリップイニット、イニットでビュービルダーコンテンツですね、ビュービルダー。 だから、これが一個一個なんか、ちゃんとタブとして認識するっていうのは、 すごいと言えばすごいですね。 何やってんだろうね、ビュービルダーの中でそんなことできるのかな。 タブビューが一個得られるだけで終わりそうなのに、 ちゃんとタブとして認識してますよね。 この辺すごいね、どうやってんだろう。 まあ、何にしてもこれでいい感じに整ったので、これで良いでしょう。 シートも悪くないですね。 ちゃんと直入に表現できたと。 コンテンツビューとしてタブとしてフェチャードとリストというのが、 わかるよということで、 さらにタブアイテムはこういった関数を使って、メソッドを使って、 コンテンツにタブアイテムとタブをつけるのを、 勝手にやってくれるよということで、 まあ、便利にはなった。 こんな感じですかね。 はい、がっつり。コンテンツビューの魔法S版。 こちらはエンバイロメントステートですね。 デボディで、ちゃんとリストがあって、 リストの中でこちらといろいろやっている。 ここは何かいじれるのかな。 Vスタックだから垂直方向。 このVスタックは何の役に? ああ、Hスタックとプロファイルサマリー。 その中でHスタックは何をしているかというと、スペースが上がってボタン、 ああ、ボタンか。 ショーイングプロファイルなので、ボタンスタイル。 Hスタック、プロファイルサマリーとボタンね。 まあまあ、これは良いといえば良いですが、ボタンかボタンか。 エッパーに当たるんですかね、これね。エッパー部分。 そういうふうな捉え方をすると、 定義を分解して、アウトという点も出てくる。 Vスタックは良くて、ここでこうやって、 の間にちょっとプレビューがしますか。 プレビューがあったほうが間違いなくいいですね。 プレビューができない。あ、それはMacOSか。 MacOSのプレビューは厄介なので、コンテントビューのこれが、 他のプレビュープロファイルか、これですかね。 コンテントビューってことはこれですかね。 その中でランドマークリスト。ランドマークリストのコンテンツ。 ショーイングプロファイルで、その中でシートが。 シートの中でボタン。クローズボタンね。 イメージでXマーク。これもまたシステムでもだ。 システムイメージでXマークですね。 これはXマークはほぼ同じかな。 これをシステムイメージに変えて、Xマーク。 これがヘッダー部分に当たるので、コンテンツビューのボディ。 Hスタックヘッダー。 ヘッダービューとプロファイルサモリみたいな風にして、プライベートですね。 プライベートエクステンション。コンテンツビュー。 この中でビュービルダーでパーで、ヘッダービュー。 そしてサムビュー。で、コピーしたのを貼ってあげる。 これで一応動かしておきますかね。 こうやって細かくビューを分ける。今のところやってみてるってことは、分かりやすい。 テーマは分かるけど、分かりやすさの方が上回ってるかなって自分は感じる。 なんとなく。なので、正面はこの方向性で。 周りにも狂って分けらんないんだったらそのまま書きますけど、 そうでなければ名前を付けて、普通に一体分けていく。 単発単発でね。そうした風にした方がコードは追いやすいかなって気は。 デザインと関連して追いやすいなという気はするかな。 これでいいのかなという感じでいますかね。 これがちゃんとできたことになるのかな。 これが一応動いてそうなんですけど、本当にヒットしたのかな。 フォーカスが合わなかったですよね。 なのでこのアプリを2個買ってたね。 1個、というか予報として食べてもう1回実行してみて、 今のビデオがちゃんと表示できるなら、 出て完成、完成というか、リファクタリングは成功というね、 そういった感じになるのでしょう。 うん、大丈夫そうね。はい、オッケーでいいや。 はい、じゃあこういうことにして、シートの中では、 ヘッダービューとプロファイルサマリーが左手方向に詰まっていますよって当たられていて、 ヘッダービューはいきなりスペースが左手方向に入って右寄せですよね。 つまりボタンがXマークに表示されていますよ。 うん、いいですね。これで完成としていけばいいでしょう。 次、コンテンツビューの、こっちを見ていくと、エンパイロンメントプレビューですね。 ボディテリストでタスクがいきなり上がってきますね。 シートがあってプロファイルサマリーだけなので、 ここにいじることはないですね。 タスクがきたときになるけど、これもいじることはないといいますね。 タスクの中で、UN Notification Center Currentを取得している。 これは外でもいいかもしれないですね、カレントでしょ。 なので、プライベート、プライベート、プライベート、 プライベート、プライベート、センター、センター、何センターって話に行こうとなりますね。 なので、User Notification Center、 User Notification Center、 イコール、UN User Notification Centerのディフォルトのカレントというふうにして、 それで、タスク内ではそれを使う。 それが便利というか、妥当な感じを受けますね。 こうしたときに、アタイを捨てているのが すごい気になっているんですけど、何で捨てているんだこれは。 Request Authorization。 Request AuthorizationはBoolが返ってくるのか。 Boolが返ってきて、それを捨てるんですが、 もう一回言っていただきますね。 Request AuthorizationでエッジングするのでBoolを返す。 なかなか珍しい。 よく世の中的には、エラー送出とBoolを一緒に使うというのは 比較的悪手と捉えられますよね。 これはどうなっているんだろう。 ちょっとネットで調べますか。 NUser Notification CenterのRequest Authorization。 これの標準ドキュメントを見れば、ヒントがありそうですが、 これも書いてありますね。 Request Authorization Optionsで、 Request AuthorizationでImportant、 This method from synchronous codeに呼び出している コンプリッションハンドルを使って、 Request Authorization Optionsでエッジングする。 これはこれですね。 Important、このメソッドを、それを、 コンプリッションハンドルを使って呼び出せる。 または、これをAsyncメソッドで呼び出すことができる、 というふうに言っていて、 Boolは、このメソッドでいいということを分かった。 Boolは、ここがコンプリッションハンドルに 渡っていくものね。 Boolは、Granted、許可されたかどうか。 許可されたかどうかを返す。 なので、これでOptionsで捨てている。 捨てているか、捨てているのね。 それで、コンプリッションハンドラー版の場合は、 どういうパラメータを取ろうとしていたかというと、 コンプリッションハンドラーでクロージャーを 何らかに渡さないといけないか。 捨てるのがいいか、空のクロージャーを呼ぶのがいいか、 みたいな感じな、そんな気がするんですけど。 例えば、これ、エラーも捨ててるし、 戻り値も捨ててますよね。 ということは、こういうふうなメソッドになって、 これで、コールバック番数がパラメータを、 これとか、イニシャライダーというか、品変数ね。 これが2つオープンして、 これで、XAuthorizationがAsyncアルタネティブファンクション。 ああ、そっか。それでいいよって言ってるのか。 これがタスクじゃなくて、オンアピアだったら、 多分、もう逆がつくんですけど、 どっちが良いか。 自分があくまでも、この公文が好きではないよ、 っていう、ただそれだけ。 でね、これ書かないとね、戻り値使ってないよって 言われちゃうんで、それはよろしくないですね。 そうね、じゃあ、これでいいか。 次は、シートで、これはサマリーだからOKで、 大丈夫ですね、これでね、表現は一回できました。 そうすると、やっぱりこのタスクが 微妙に気になってるけど、このためにオンアピアスが行ったし、 RequestAuthorizationで、Authorization情報表を、 まあ一般的にはね、ここでAuthorization情報を加味して、 何かしますよね、普通はね、メッセージ出すなりね。 なので、そういったことも考えると、とりあえず捨てておいて、 将来的に何かしたら、どんなときに拾っていくっていうね、 そういったことをすればOKな気がするんで、やっぱりこれにしましょう。 はい、こんな感じで、良い感じに見てきた気がするのと、 良い感じのね、時間になってきた気がするんで、 このランドマップセッティングスを見ていくのは、 また次回にしましょうかね。 はい、じゃあ今日はこれで終わりにしましょう。 お疲れ様でした。
