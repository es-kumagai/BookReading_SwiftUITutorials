Transcription & Summarize : とりあえず読書会 SwiftUI Tutorials #12

はい、ではとりあえず読書会。今日も Swift UI チュートリアルを読んでいきますか。 今日はですね、前回アニメーションとトランジションのね、こういったあたりを見ていっていたわけですけど、 プロジェクトをまるっとね、コピーして使うソースコードが珍しく多かった感じがして、 みんなちょっとね、落ち着かないんですよ。なので今日はちょっとそのコードがリファクタリングする余地ないかなとかね、 そういったところを見ていきたいなと思うんですよね。で、まあリファクタリングという点もね、いろいろあるじゃないですか。 リファクタリングって結構難しい技術ですよね。なんか、まあ動作をそのまま維持したまま変更していくっていうのがまあ基本的なところですけど、 まあそういった話ではなくね、この方が効く方がいいだろうとそういったのっていうのは、なんか習慣的にね、 語ったり、自分自身でもね、時々、要はこれがいいと思ったけど、次の日はこっちの方がよかったとかね、まあそういったようなことにもなりかねないので、 まあそういったときに、なんかいろいろ根拠があって、でその根拠を元にこうするといいでしょっていう話になるっていうのはね、 いいんですけど、この根拠自体もね、誰だけが言っていたからみたいな、そういった話になりがちなような気がするんですよ。 例えばこの特集会でも、ウィートAPIデザインガイドラインではそうなってるとかね、そういったことを言いますけど、 だからまあその何に従うかっていうのも、結局のところ習慣でしかなくて、有名人が言ったからって言って正しいとはわけないですよね。 まあそういったのもね、考えたりすると、まあ当たらないところがないなーというところで、まあ台湾のことに言ってるんですかね、この勉強会、この特集会は好きなようにやってるんで、好きなようにリファクタリングすれば、 まあいいわけですけども、まあね、何かと難しいことだなーというのがね、時折感じるところですかね。 じゃあアニメーティングビューズ&トランジションズ、この中でね、実際にプロジェクト、ここでコピーしたやつは、ちょうどこの配布図の中に全部入ってますね。 なのでこの辺をじっくりと見ていくと、なんかいい感じにね、見ていけるよーっていうね、そういった感じになってくると思うんですけど、 今何気なくコーディングのインテリシスやったけど、まあこれはちょっとばかし、いくつかのね、ちょうど今日からですね、新しいのでなんで、AIが搭載されて、ちょっとスパッとしておこうかな。 えーとこれでアカウントでしょ、それでちょっと裏肩でやりますが、持ってるAPIキーをちょっとばかしね、設定をするわけですが、えーとサインが、なんか今サクサクっと動かしちゃったけど、 なんだか、なんか聞かれたみたいな、よく、よくないやつをやった、えーと、まあプライバシーとかね、そういった問題の話だと思うんですけどね、まあでもそこ重要ですよね、開発を一般にするときは。 このPCはね、こういった勉強会専用のPCなので、この辺はね、心配ないんですけど、プライバシーポリシー、えーと、うん、プライバシーポリシーとしては、まあまあ、えーと、データをどうマネージするかのオプションもちょっとあるみたいね、あれ、えーと、ウェブサイトに来た、まあいいか、この辺は後でやればいいかな、はい、えーと、じゃあ、そうね、まあまあやってみましょう、とにかくね、はい、えーと、とりあえずはいろいろと見ていくけど、今上からファイル順番に見落としちゃったけど、もうちょっと当たりつけたほうがいいですね、えーと、パイクデータ、パイクビュー、パイクビューが一番根本 それで、えーと、動画をおかけて一応レビュー出しておきますか。 で、フレームを直指定して、スタックで、名前とディスタンス、で、それでスペースを挟んでボタンがあって、で、この辺りは、うん、まあそうね、いろいろボタンがあるけど、結構インデントが深くて、ここを直したい気がしますね、とりあえずね、まあそれはそれとしていいのかな、バーでハイクを持っている、で、ハイクはそこから当たられるのかな、で、ビューメーカーがあるかな、レビューはハイク、そうですね、渡しますね、そういったところを踏まえると、ハイクはこの中でなんか書き換えるわけじゃないですよね、ハイクグラフも、そうですよね、だからそうしたときに、あれ、えーと、チュートリ っていうのはちょっと見えていないとかですね、まあまあとりあえずそんなところではありますが、先へ行って、で、ここでハイクグラフがあって、で、Vスタック、まずHスタックか、これからグラフってしてみると分かりますよね、と思ったらデザートが一方ですがダメか、そうですね、ハイクグラフはあのグラフマークみたいなね、で、それでこれで場所と距離っていうのがあるから、ランドマークサマリンみたいな感じですかね、ちょっとこれを分けますか、えーと、それでビューを独自に分けてもいいんですけど、まあプロパティはね、私のぐらいにしてないといけないから、これはやめてプロパティ計算型にしましょう、名前としては、えーと、ハイクビューのランド マークスペーションでいいですね、で、ハイクビューで、で、この中に、あー実装の前にインターフェイスですね、えーと、バーでなんだっけ、ランドマークサマリンとして、これでサムビューか、まあサムビューか、そうね、サムビューで、このVスタックを返しただけ、そうするといい感じに出て、で、これは、あ、こっちだ、こっちが出て、いい感じにね、ランドマークのサマリンですよということも名前で収集できると、まあこういった風になりましたね、ということで、えーと、まず戻って、ここですね、これ実際にちょっとコメントアウトすると、えーと、こんな名前がきますよね、いいですね、うん、で、こっちがハイクグラフ サマリンと同じような辺りに、あー、ハイクグラフとしてサムビューを返すよっていうのを実装してあげると、これで選ぶ、大丈夫ですよね、うん、これで、ハイクグラフが位置をコメントアウトすると、グラフが鳴ることが確認できる、いいですね、で、まあその後、スペーサーは問題ないですよね、で、次ボタン、ちょっとボタン見えてないですが、これね、ボタン、ボタンか、な、なんていうんだこれ、よ、出ているボタンか、よ、出ているボタン、そうね、ショー、ショーなのかな、トグルかな、トグル、ショーと難しいな、ショー、出ているボタン、まあショーは出ているでいいかな、どうですかね これに対して使っているコードをすごくよく見たことがあるんですけど、これはちょっとね、あの状態をセットできない部類に入ると思うんでね、あんまりやらないほうがいいなと思いながら見ていた、とりあえずこれでボタンが出されて、これによってね、こうやって、ハイクグラフ、要は、ハイクビューというのはハイクグラフとランドマックサマリンとベースを空けて、超ディテールボタンが水平に並んだアイテムですよと、で、さらに、超ディテールがスルーだった時にはハイクディテールビューを表示するよっていうね、こういった感じで、まあ読みやすくなりますよね、トランジションがここに入っているのはいいか、 いいですよね、これでね、ランドマックサマリンも水平の中で、リーディング揃えて、名前と距離のピクスコが表示されるよ、ということでいいですね、超ディテールボタンはボタンがあって、それはアニメーションが上がる形で押されて、超ディテールがログされると、で、ラベルですね、ラベルとしてグラフでシステムイメージ、この辺のシステムイメージがもうちょっとなんか、調整できそうな気もしなくもないですが、でもこれはラベルの引数だからまあいいですかね、あ、でもまあ超イメージは何を求めるかだな、えーと、超イメージが求める方は、えーと、ストリングか、システムイメージストリング、ストリングか ハイクビューはこれで良さそうですかね、じゃあ次この2番目に使ってるハイクグラフ、この辺をちょっと見ていきますが、この辺もまあレッドでいいんじゃないかなと思うのが2つありますね、でね、まあこの辺はさっきも言った通りどっちがいいかはわからない まあとにかくハイクとキーパスで、ハイクのオブザーベーション、これが、えーと、これと戻り値かな、レンジタブル、これを返す、といったキーパスを指定することになっていて、で、ハイクグラフでしょ、ハイクビュー、ハイクビューの中だけで使うかどうかってまだわかんないですね、これだけだとね、ではいいか、とりあえず独立してハイクグラフという形で存在させておけば良いでしょう、で、計算型プロパターというカラーがあって、これはパスによって、エレベーションだったらグレー、で、ハートレートだったら、えーバーカーかな、で、ペースだったらこのように紫かな これをデータとして持たせて、で、オーバーオールレンジとして、レンジ、レンジオブレンジってなんだ、そういう関数的に言っているのかな、みたいにね、えーと、それがデータのレイジーマップ、レイジーのマップでキーパスに対してかな、えーと、8×8、えーと、$0だから、$0っていうのはマップのデータ1個1個に対してですね、データ1個1個に対してキーパス、この型に設定されているキーパスを指定して、えーと、読み込んでいると、うん、で、マックスマグニチュード、最大設定値、それがマップでマグニチュードオブメソッドでキーパスを指定して、自分自身から マグニチュードオブオーバーオーバーオールレンジで割っていると、このマグニチュードってダブルじゃないのかな、どうなんだ、えーと、型、えーと、型は、そうですね、ダブルですよね、じゃあCDフロート変換する必要ないですね、あ、でも外側は、いや、えーと、マグニチュードオーブは、これもダブルですね、ちょい、いろんなのいいかな、優先度かな、これ、えーと、割り算、だから大丈夫ですね、これは要らないですね、うん、これでいって、ジオメトリリーガーを介して、プロキシとして、Hスタックの、ポトモの、スペーシングの、で、それで、えーと、for each array data, enumerated array data, array data, array data, 大丈夫じゃないのかな、あ、ダメなんだ、for eachは、えーと、あ、for eachは多分コレクションじゃないとダメってことですかね、 data id、data、init、data、で、dataは、dataは、element、なんか条件がまだ、見えてないですね、 dataがあって、dataは、dataはfor eachに対して、で、dataはどこだ、あれ、これdataって普通のdataか、えーと、できたとれないや、えーと、なんだこれは、data、ちょっと1回コード戻しましょうか、 arrayにしたときに、for eachはどこで辿り着くか、init、data、うん、で、このdataの条件がちょっと見つからない気がするんですが、 コンテンツは、いろいろありますけどね、コンテンツと一緒の感じに出てきてないですよね、そうすると普通のdata型ですかね、これね、 うーんと、入ってないな、えーと、dataがあって、dataのキー、dataのelementのキーパス、うん、入ってないね、ちょっと行き詰まった気がする、 for eachでは例にしていて、data型は、data型は、なんだっけ、data型は、配列ですね、だけれど、これのenumeratedを取った時点で配列ではなくなると、 で、 for eachって聞くとね、なんか、いい気がすると良さそうな印象を持ってしまうんですが、 そんなこともないみたいかな、enumerated使ってダブルの配列、 これで良さそうですけどね、for eachがちょっとまだ掴み切れてなくて、for eachとして、initializerですよね、 この中でdataを取るタイプですよね、data、 で、dataの中には、こんなにダフェスなんだ、えーと、あ、終わっちゃった、うんと、 ここでなぜarrayにしているのかわからなかった、定義をもう1回言ったのかと言いますが、ここにつきますね、 で、ここに来て、dataがあって、data、キーパス、キーパスを見れば良いのかな、 キーパスはここでは、hike observation、これですね、hike observationが、 あれ、data、hike observationが、ここに書いてないや、data、違うか、 えーと、わからなくなってきた、ちょっと見方間違ったかもしれないですね、 こことか上の方で照らし合わせる、こことは関係ない、 パスで、これがキーパスでhike observationですよね、hike observation、これがこのenumeratedというか、 arrayですね、array、それがenumeratedだと、 シーケンスですね、シーケンスだとIDで取れなかった、うん、なかなか難しいな、 えーと、dataがあって、dataがこの配列で、いろいろあって、 読め取りリターがあって、この中でfor eachではrayにして回しているが、 ここがちょっとなぜか読めない、 で、for eachは何を取るかというと、配列で、配列というかデータを取りますよね、 このデータがまたパラメーターなのではないのかと思うんですけど、出てこなかったような気がする、 で、キーパスはデータのエレメントですよね、 だから配列のエレメント、配列のエレメント、それが、あ、そっか、 それがオブサーベーションである必要があるって言っているのか、 えーと、いや、あるって言っているけど、データのenumerated、 ディナミレイティブが何だってそうだけどな、何か理解できないな、うーん、 あといったんよく言いますか、で、次はgraphカプセル、 これをindexとcolorとheightとrangeでこれで表現をしていると、 で、これがアニメーションでリプルで動くということになっていて、 オフセットでいろいろやっていると、うん、いいですね、 これについてはハイクグラフが、ここでね、いろいろやっているけれど、 結局このところジオメトリリーダーを使っているというところが気になるような、 まあ、このままでもいいような、こんな感じになっていますね。 で、えーと、確かさね、今までの構図の書き方とこれでハイクグラフに、 バウンズというね、グローバルを持たせていたので、 これに合わせてみたほうがいいですかね、 その次がね、いいかどうかはちょっとわからないですが、 とりあえずそんな感じで、ハイクとパスがあって、 バウンズか、バウンズが最初かな、ハイクが最初かな、 ハイクとパスと、バウンズと、バウンズとして、CGサイズ、 で、そうしてあげると、えーと、中でいろいろ出てくる、 ブロキシ、この辺のジオメトリリーダーからですね、 リターンで、あ、結局グループ返すことになっちゃうのかな、 いや大丈夫だ、Hスタップでいきますね、 リターンでジオメトリリーダーをちょっと省いて、それで、 ブロキシじゃなくて、ここでね、バウンズ、バウンズの幅、 で、ここもそうね、ブロキシサイズじゃなくて、大きく変えればいいか、 ブロキシサイズを全部ね、バウンズに大きく変えてあげる、 これで、全て変えてあげるとこれでいいですね、 ここが余計なので消してあげて、 これでインベントもちょっといったね、 解消できるし、まあまあ良いかなと、 ただしこれをするには、このね、グループ、 これはグループが関係ないことで、 ジオメトリリーダーで、ジオメトリリーダーにして、 これで、フレームとして渡している、フレームというか、 ジオメトリをグラフ、今作ってたのはグラフでいいのか、 これでいいんだ、で、ジオメトリじゃない、バウンズ、あれ? バウンズ出てこないっけ、ハイクグラフでしょ、ハイクグラフでバウンズありますよね、 ハイクとパスと、フレームにあるとしているからだ、 これは間違いで、こっちね、で、バウンズ、そして、バウンズね、 こんな風に渡してあげると、バウンズがそこか、バウンズじゃなくて、 ジオメトリのサイズですね、こんな風に渡してあげるのを、 残り2ヶ所でやってあげると、ここと、ここかな、 で、このコードはOKで、このコードがOKだけど、これをハイクビューで呼ぶところ、 ハイクグラフを呼ぶところ、ハイクビューかな、そこでね、問題になってきて、 ジオメトリリーダーを、この中で呼んでもいいけど、 ちょっとDTがするんですよね、なんとなくね、なのでファンクとして、 ハイク、グラフ、バウンズ、DTサイズ、 このラベルはちょっと悩ましいところですけど、 まあ、ソリストUIだとね、どういう名前の付け方をするのか、 まだちょっとよく分かってないところがあって、 まあ、とりあえずこの名前でいいのかな、オンバウンズとかね、 そういったのでもいいのかなと思うんですけど、 まあ、なんかソリストUIってそういう感じなのか、 ちょっと分かんないんで、まずあれでいいでしょう。 で、これでハイクグラフに対して、バウンズを渡してあげるには、 ちょっとやるか、ジオメトリリーダーか、 ジオメトリリーダーのジオメトリ、 ブロキシってするのなんだろうね、名前の付け方の感覚がちょっと分からないけど、 とにかくジオメトリリーダーにして、ハイクグラフのバウンズとして、 ジオメトリのサイズを渡す、これでプレビューがちゃんと動きますよね、きっとね。 で、あれ、動かないかな、まだエラーがある感じ? バウンズが渡されていない、ここか。 ここ、ハイクディテールが、ハイクディテールの中でも、 バウンズが渡されていない、これもどういうのかな? ハイクディテールがどこで使われるかにも、 ちょっと寄ってきますね、先に見ますか。 ハイクディテールがいて、ここでジオメトリが必要になってくる。 ジオメトリリーダーはHストックの中のこの部分か、 だから、ここの中ですね、ジオメトリリーダー、まあまあ、メトリインですね。 この中にハイクディテールを入れてあげて、ここでバウンズとして、 バウンズがここじゃないか、ハイクディテールもそうなんですが、 これが、この中で今日バウンズを使おうという話になっちゃってるってことですね。 これでいいのかな、まあいいのかな、バウンズ、CGサイズと一緒に持たせて、 するとこの中でハイクのどれだ、ここがハイクグラフをちゃんとバウンズを渡すことができると、 ここでバウンズを渡すことができるなら、さっきの超ディテールのところのバウンズ、 これも渡すことができるよと、ジオメトリのサイズ、これでプレビューが動きますよね。 まだ選ばれる、プレビューがさっきのハイクディテールの中で、 プレビューを作ってなかったので、ジオメトリリーダーでジオメトリインを書いて、 それでこの中でバウンズとして、ハイクディテールとしてバウンズとして、 ジオメトリのサイズ、これで今度こそ選択が解消されて、ハイクディテールがちゃんと表示されますよね。 全然されていないし、これはなんで壊れたかな。 バウンズで4Kになっていないってとこがありそうね。 ジオメトリリーダーでとって、 それでハイクディテールの中でハイクグラフでバウンズ、 ウィスタックの中でハイクグラフを使ってて、 この中で選んだらダメだったかな、ちょっとやってみますか。 ハイクグラフとしてジオメトリリーダーでプロキシ、 どっちがいいかジオメトリインにして、 それでこのグラフに対してジオメトリのサイズ、 これを渡すと、これもちょっとだけ変わったね。 ちょっとだけ変わったっていうことは誤算があるってことですかね。 ハイクディテール、ハイクグラフか、この中でいろいろ見ていくわけですけど、 この時にさっきまでやってたのは、ここでジオメトリリーダーをリターンしてましたね。 ジオメトリリーダーをリターンして、その中でHスタックに対して、 いろいろバウンズでサイズを決定させていたよっていうことをやっていたわけで、 これが狂ったか、プレビューの中でも、もうめちゃくちゃだもんね。 勝手に伸びすぎちゃってますね。 ハイクグラフから、ここはHスタックでグラフカプセルが、 グラフカプセルのプレビューがどうなっているかも気になりますね。 横長のバーになっているか。 グラフカプセルはそんなにいじっていないからOKですかね。 ただマグニチュードオブがCGフロートに変換されているってことは、 いらないと思ったけど、入らないね。 いらないのと、こっちもいらないですね。 これで許して、ファイトして、オフセットして、ここはOK。 これ丸くないのはいいのかなっていうのが、 なんとなく気になっているんですが、 これもいいのかな。他何もいじってなかったですしね。 ちょっと一応レッドにしておきますか。 で、ハイトレイトが、これダブルでいいでしょ、ここ。 そこ変換なんで、別にそんなにこだわる必要はないと思うんですけど、 CGフロートにこだわる必要もないのかなということで、これでいいや。 ただプレビューが、これで合っているのかが、いまいち自信がない。 パラメーターは何もいじっていないからいいのでしょう。 グラフデビューで、イコータブルなのが出ているのも気になりますけどね。 とりあえずグラフがさっきのでOK。 これで、ずっとかなり巨大になっていて、 これがジオメトリリーダーの中に入っているというようなのかな、やってみましょうか。 ジオメトリリーダーの中で、 ジオメトリ、インにして、 それでこの中で、バウンズイコールジオメトリのサイトしてあげて、 これでジオメトリリーダーをここで閉じてあげたときに、 この壊れたやつがどうなるかですね。 これで直るんだ、とか。 だから、Hスタックを返してあげてというか、 Hスタックを、あれ、ジオメトリリーダー。 間違えた、これは順番が違う。 Hスタックの後、いや、PTですね。 ジオメトリリーダーを返して、その後、Hスタックを読んでいるというので、 ずいぶん様子が変わってきているというのと、 でも何でこれぶつかっているんだろうね、というのが気になる。 ちょっと一回戻すしかないかな。 さっそくこのコードを戻していきますか。 どこまで戻るんだ? この辺で、この辺かな。 綺麗に並んでましたよね、確かね。 で、これもか。 ここは別にいい気がするんだけど、まあいいか。 とりあえず、こうして、ここまで戻った。 で、これはまだ描画はできないのは、 バウンドを渡す必要がなくなったからですね。 必要がなくなったというか、まあ無駄だしと言いますか。 バウンドをとりあえずパラメータで渡すのをやめてあげて、 これでまずは、描画を見届けてみましょう。 いや、プレビューって助かりましたね。 全然動かない感じになっちゃったからね。 で、これでビルドをかけていって、 プレビューがもうじき表示されるのでしょう、という感じですが、 プレビューはこれぐらいでいいのかな。 えーと、まあこれでまずは、言っているの方ですよね、これね。 言っていると、まあいいか、いろいろ見ていきますか。 アクセルの方は横長になっちゃったっていうのがありますけど、 まあまあそれはそれで大丈夫みたいね。 プレビューがちょっと時間かかってますが。 グラフックアクセルがなぜかこんな風に横長ですが、 これ何もソフトコードをいじってないのでこれでいいらしいんですよね。 レッドにましたか。やっぱCGフロートの変換を直したか。 大したことしてないのにこれでいいらしい。 なので、次は、パイプディテール。 そっちの方のプレビューは、この形だとちゃんと出てますね。 ハイクグラフだと3つ出るのかな。 全然出ないですもんね。完全に壊れましたね。 えーと、とにかく一番外側、グラフアクセルからやっていきますか。 これも直したからいいですね。 ダブルに変えていったのと、あと最大値もマグニチュードオブレンジとかね、 こういった関数を読んでいく予定とかですよね。 グラフの中にあるのかこれ。うん、なるほど。 そうするとこのグラフとグラフのアクセル、 この辺はまとめたい気がしてきますね。 なのでちょっとグラフアクセル持っていきましょう。 えーと、ここからコピー。プレビューも持っていきますかね。 ザクッと持ってきて、グラフアクセルはハイクグラフに持たせればいいかな。 で、ハイクグラフの中のアクセルにすれば大丈夫かなという気がするので、 エクステンションでハイクグラフの中に貼りますけども、 この時にグラフアクセルはきっと外で入れられないでしょうというのが考えられるので、 これについてはプライベートエクステンションにして、 グラフアクセルをプライベートに取りましょう。 で、ファイトレイトとかの辺は全然いいですよね。問題なし。 で、プレビューはこのとこにあるのがなんとなく気になるので、 このプレビューはガッツ。だからこっちが、あれ、コピーできてない。 あれ、何をコピーしてきた今。えーと、プレビューとか言っちゃった。 えーと、これですよね。パッとしましたよね。 で、パッとしてこのプレビューをこの一番下に持ってきて終われた。 で、これで、えーと、アクセルって感じでね、名前つけて。 こっちの一番上はなんだっけ。今見てるのはハイクグラフか。だからグラフでいいのかな。 で、こんな風にプレビューを分けて、で、これのグラフアクセルは、えーと、ハイクグラフ。 えーと、だからこうかな。ハイクグラフのカプセルだが、 カプセルは、えーと、カプセルがない。カプセルがない。 エクステンション、プライベートエクステンション、ハイクグラフ、 あー、名前書いてない。これをね、カプセルにして。 で、これで、この辺は、おっとーり良いのかな。これをなんだ。 これはレンジとオーバーオール。これを貰おうとしている。 グラフじゃないや、カプセル乗っていくわ。 ま、この辺が全体的にね、直さないとダメですね。カプセルにして。 全体的に何も一箇所かな。えーと、一箇所でいいのかな。 この赤いのかな。あー、ここか。 カプセルがミシングアーギュメントというのは、 ハイクグラフのカプセルの中で使っているからかな。 これはレンジ。えーと、これなんだっけ。これ間違えたかな。 カプセルの中でカプセル使っている。えーと、L指定。 カプセル。戻していくと。 あー、ここ戻らなくていいや。 こっちは良くて、こっちのグラフカプセル一回戻せばね、 ずっと出てくるんで。これで、モディの中でカプセル使ってます。 カプセルって名前あるのか。どういうことですか。 SwiftUIにカプセルってあるのね。どうなのか。 なるほど。ということは私の問題ではないですが。 えーと、だから、グラフカプセルとにかく、 このグラフカプセルファイルの方はもうザクッと、 えーと、ザクッと消した状態で良くて、 ハイクグラフの方のカプセル、これがSwiftUIのカプセルですね。 これで、あれ、パラメータまだ聞かれるか。 えーと、1、2、3、4個がパスされたってスタイル。 これをね、渡す必要があるよって話になってますけど、 まだカプセル間違えたかな。 ここ、ここのボディ、こっちだ。 えーと、これがSwiftUIのカプセルですね。 えーと、これはこれで良くて、もう1個、ここ。 ここはカプセル。こっちのカプセルですね。 ちょっと名前が分からなかったかな。 カプセル。ハイクグラフの、 んー、待て待て、しょうがないか。 あー、とりあえず、ロー、ローチェックとじゃないや。 レビューはできましたね。 じゃあ、これで、えーと、持ってきたから、 グラフカプセルのファイルは、いらないですよね。 これね、ザクッと消して、 で、それで、グラフ、ハイクグラフの方なんですけど、 まだちょっと気になるところがあるような気がしていて、 えーと、どうしようかな。 このファイルだけ見ればいいかな。 横の、えーと、ナビゲーション消しておいて、 えーとね、これで、 この辺のカラーは、まあいいのかな。 パートレイト。 このカラーも、なんかまとめたい気がしますよね。 すでに、ほら、えーと、これ、カラー、 カラーは定義してなかったっけ。 スタイルにしてたのか。 シェイプスタイルか。 シェイプスタイルでも、まあいいか。 だから、えーと、シェイプスタイルと、 カラーとか、ちょっと試しに、 えーと、なんだっけ。 パッチ、あ、パッチシンボルありますね。 じゃあ大丈夫だ。 レビューをちょっと溶かしておいて、 この2つのカラー、 これをスタイルに定義しちゃいました。 シェイプスタイル。 えーと、シェイプスタイルをオプション押しながら、 えーと、シェイプスタイル。 シェイプスタイルここか。 別に今いかなくなったか。 エクスコードがね、バージョンアップした状況で、 ナビゲーションで、 ウィズオプションクリック、 これだ、ウィズオプション、 これでいいのかな。 クリックじゃなくて、ナビゲーションで、 ウィズオプションで、 ユーアンピングタブ、 えーと、これじゃない。 ネクストエディター、 セパレートエディターペイン、 セパレートのエディターペイン、 これが、昔の設定。 あまりね、新しいバージョンになったときに、 昔の設定に戻さないほうが、 基本的にはいいんじゃないかなと思うんだけど、 でもね、タブで出られてもね、 ちょっと困りますよね。 ということで、こうしましたが、 えーと、あ、そうなんだ。 なんかいろいろ変わりましたね、これ。 今まであの、左側のナビゲーション、 で、アートレートカラー、 この辺も、なんか、 カラーとしてね、 シェイプスタイルとして持っておきたいな、 という気が、 不意にしたんで、 スタティックバー、 計算型プロパティと、 これは、あと、 プロトコール拡張だから、 計算型プロパティじゃなくて、 いいんじゃないですね。 なので、これにしようかな。 エレベーションカラーみたいなのをつけて、 エレベーションでいいのかな。 エレベーション、 なんだこれは、グラフ? グラフか。 エレベーション、 エレベーションハイクグラフとかにしたら、 スタティックバーの、 アートレート、 ハイク、グラフのカラーね、 それとして、 このカラー、 これを返してあげる、 という風にして、 それでもう一個、 スタティックバー、 フェース、 ハイク、グラフ、 そしてカラーですね。 このカラーは、 こっちのカラーね、 こういう風にしてあげると、 そうしてあげて、 これでいいのかな、 カラーが揃ったら、 これを使ってあげる、 という風にするのが、 一般的ですからね、 今だとね、 名前を付けられて、 分かりやすくなるよっていうね、 エレベーション、 グラフのね、 ハイクグラフのね、 カラー、 あとカラーっていうことで、 残っちゃいますけど、 戻りのカラーがね、 カラーなので、 OKですよね。 で、このディフォルトで、 グラフっていうのは、 まあまあいいのかな、 特に名前は決めなくても、 これはまたね、 この辺を決めておくとしたら、 スタティックバー、 アンノウン、 ハイク、グラフ、 こんな風なカラーを 決めておくっていうのも、 まあありますよね、 この辺は、 どちらですかね、 まあ、 今はスイッチ式があるんで、 わざわざ消すことでもないですけどね、 リターンがあったほうが、 何か都合よかったりすることもあるんで、 わざわざ消す必要はないですけど、 とりあえずせっかくね、 スイッチ式があるんで、 スイッチ式を使ってみたという感じで、 このカラーのプロパティは、 いい感じに作れたでしょうと、 いうですね、 ここはね、 これからちょっとプレビューを 見ておきますか、 今のうちにね、 これで今壊れてないでしょうけどね、 出てくるかな、 出てきますね、 大丈夫そうですね、 はい、 これでよくて、 なんか、 それはステップじゃないよっていう主張は、 別にアットマークステップが付いてないので、 十分できてはいるんですけど、 まあなんかね、 最適可能なことなんかないかなというね、 そんな機会もあって、 とりあえずここはレッドに、 今はね、 してみていると、 でしたが、 何でしょうがないというか、 もともとこういうものとして、 で、 ボディープロパティの中で、 アイクのオブザーペーションと、 アプレンジオブレンジーズという関数を読みますね、 この今自分のファイルの中でね、 定義している、 ボディーの関数にしましょう、 それ以外は、 ちゃんと所属させますよというガイドラインがあるので、 所属先がすごい気になっているんですよね、 今ね、 なのでちょっと見てみますか、 まずは、 ちゃんと所属に行きそうなマグニチュードから見てみますか、 マグニチュードオブレンジで、 レンジに対してダブルが返ってきて、 アップアバウンドとローアバウンドの絶対値は、 距離じゃないこれ、 アップアバウンドだから、 ローアバウンドだから、 距離ですよね、 だからこれはレンジに所属していいんじゃないのかな、 レンジ、ディスタンスとか持ってないか、 ディスタンスを持つには、 ディスタンスを持つには、 昔はインデキサブルだったんですが、 ストライダブルかな、 ストライダブルは、 ストライダブル、 ストライダブルの定義は、 これは別にでもストライドするだけで、 仮にこれでディスタンス取れても嬉しくないですね、 はい、じゃあレンジ、 レンジのダブル、 ここですね、 ここにエクステーションした方が本来でしょう、 あとこれは、 どこにするべきか、 中だけに留めるか、 中に留めるほど特徴な状況ではなさそうですね、 エクステーションですね、 エクステーション、 レンジ、 レンジに対して、 W、 W1-1って何ですかね、 Wは、 バウンドが、 ディスタンができるってことは、 リズム的ですね、 これでこれに対して、 マグニチュード、 アンク、 アンクじゃないか、 オフレンジ、 レンジのマグニチュードは、 マグニチュードプロポティですね、 バーで、 マグニチュード、 マグニチュードを作る前に、 持ってる髪とか、 レンジのマグニチュードなんですね、 大丈夫ね、 これで、 マグニチュードが、 ちょっと先が決まった、 という感じになるんで、 そうすると、 マグニチュードオブレンジとか、 まどろっこしいこと言ってないで、 これもう消しちゃって、 エラーで戦えばいいか、 このエラーはショートカットで、 どうだったんでしたっけ、 ナビゲーションかな、 で、 どれだ、 一周、 ネクスト一周、 チャンプトゥーネクスト、 この辺か、 コマンドシングルコードも、 コマンドダブルコード、 あーなるほど、 コマンドシングルコード、 あー飛んだ飛んだ、 いいですね、 これで、 これで、 プロプロ、 プレビュー、 プレビューを出したので、 さっきみたいに破壊すると困るんで、 プレビューを出しておいて、 まだ見れないけど、 これで、 マグニチュードオブの、 ドラゼロのキーパス、 キーパスで所属したレンジ、 これのね、 マグニチュード、 ここですね、 マグニチュード、 ちょっと分かりやすくなりますよね、 こうするとね、 ただこれもちょっと分かりにくいから、 データのマップの、 これで、 データのマップの、 マグニチュードの、 マックス、 このデータはオブザーベーションでしょ、 ちょっとデータが分かると、 全然分からなくなっちゃうじゃないですか、 オブザーベーション、 マップに対して、 ドラゼロというかオブザーベーションですよね、 それでオブザーベーション、 ここが長くなってきますけどね、 自分の頭はそれほどよく、 覚えられないんで、 これくらいしとかないと、 混乱する、 なので細かくやっていく、 オブザーベーションの、 で、 マックスマグニチュードになってる、 これマグニチュードのマックス、 できてますね、 大丈夫そうね、 あとは、 これで、 ここがマグニチュード、 0.15の最大値を、 ハイトレイトを取ってるらしい、 というのが、 すげー見えるようになってきましたね、 ここもマグニチュードですが、 これもオーバーオール、 エンジンのマグニチュードですね、 これでいいですね、 これでデータが解消して、 グラフが変わってなければ成功と、 ということですね、 言わせないでしょうと思ってるけど、 限らない、 大失敗ですね、 どこが悪いか、 顔見ないといけないですね、 全然ダメになってますね、 どこまで乗せばいいんだこれ、 これ厄介ですね、 どこが大間違いだったのか、 この辺間違ってるのかな、 えーと、 あ、もったいないな、 ここまで戻ってくれば、 これで今回は通る状況でしょ、 この時にプレビューが、 まず戻っているはず、 戻ってますね、 いいですね、 壊しちゃったらしょうがないな、 えーと、 この段階で、 えーと、 マグニチュードをね、 マグニチュード、 こんな風にスパークしましたけど、 コールヒーラル機能が、 マグニチュードオブ、 これのコールヒーラル機能ね、 ここで使ってると、 ここでMAX、 そうすると、 マグニチュードが、 おかしいよって話になってるんで、 まあまあ、 何やってんだこれ、 ローアバウンドを2回引いてる、 もしかして、 これは、 なんか大効果ですね、 こうですよね、 はい、 これで、 もう1回こっちへ来ると、 これで壊れてるんでしょ、 きっと、 うん、 うん、 大丈夫だね、 一応、 一応1回戻しました、 怖いからね、 反転してるとか、 そういったことないでしょうね、 大丈夫だね、 大丈夫そうね、 はい、 これで、 えーと、 マグニチュードにして、 これで、 ああ、 また使わない、 えーと、 これで次、 重そうね、 OverallBendy、 これのマグニチュード、 マグニチュード、 これでもグラフが壊れなければOKと、 うん、 大丈夫、 そんな感じしますね、 次もう1個、 TPathこれもマグニチュードですが、 マグニチュードオブのところを、 これでTPathの、 どこ、 マグニチュードね、 うん、 えーと、 あれ、 8、 7、 8、 TPathの、 あそこ、 ここね、 ここにマグニチュードですね、 これで、 プレビューが壊れていなければOKと、 そしたらこのマグニチュードオブ全部使ったことになるんで、 これを消して、 これでやっと戻 でしょう、 これでマグニチュード、 ね、 これでプレビューが動きましたね、 大丈夫ですね、 よいよい、 はい、 じゃ、 これでプレビューがいい感じになったよ、 というところで、 まだもうちょっと行きましたね、 えーと、 こういったいろいろありますが、 まずはタイプグラフのところの、 ここがさっき言ったとおり、 分かりにくいよね、 という話に自分はなるので、 Observations、 で、 それで、 ここのちょっとエンジンフルエンジンが届いて、 まずはこれね、 Observationsのマップで、 で、 ここでObservation inにして、 で、 ObservationのTPathのマグニチュードですね、 TPathマグニチュード、 TPathとマグニチュードが、 TPathがあって TFloatはダブル型と暗黙型変換をするという、 それとの基本的な特徴があるので、 これを使って型変換した方がマップでしょうと、 で、 TPath何言われてるんだ、 TPathが、 I2Observationが適用できない、 I2Observationに適用できない、 これね、 方向ですね、 はい、 うん、 そうね、 で、 これでよく出て10mリリーダーがあって、 これなんかネット版があったらおかしくなったんで、 そこまた気になってるんですけど、 まあまあ、 これはもうしばらくリファクトが行けそうね、 とりあえずここで解決したい、 Range of Rangesがこうフリーで、 あの、 浮かんだっている状態、 これは何をしているのかな、 Gがコレクションをね、 コレクションを取ってレンジを返す、 で、 その時、 Gのエレメントはレンジのダブルですよ、 埋まるところはレンジのコレクションからレンジのコレクション、 違う、えーと、レンジの、レンジ、 レンジのコレクションからレンジを返すっていうものみたいね、 レンジのコレクションから レンジの、ダブル型のレンジのコレクション、 ここからダブル型のレンジを取るよ、 で、その時にレンジがバラでない条件で、 バラだった時には0から0、 という無効なレンジを返すって言ってますね、 で、それで、そうでなかった時にはロードハイをイントマックスで取得して、 これレイディル、レイジー、結局全部チェックするでしょ、 でないかな、なんか変だねこれ、 レイジーマップの必要があるんですかこれ、分かる人いますかね、 どうなんだろう、レイジー、レンジー図の中からレイジーで一個一個取っておいて、 マップ、Minが見つかった時点で終わるって言ってますけど、 Minが見つかるので一番最後じゃないの、ってなるのかな、ね、で、それで、うん、あー、でもあれか、あ、そういうことか、 マップでいっぱいこうそっとメモリを全部やらなくても、 一個一個もうMinチェックしてくれるとか、あ、そういうことか、 なるほど、もう一発ハイパッターでメモリが節約できるんですかね、これはね、 なるほど、こんな使い方があるのか、なるほどなのですが、 えーと、レンジー図があって、でもレンジー図って、レンジー図、レンジ図これか、で、コレクションですよね、 コレクションだからシーケンスでもあって、で、シーケンスから、 Minとマップって先頭から順番にやっていきますよね、その時とかローアバウンド、 ローアバウンドだからか、あー、なるほど、やっぱいるのか、あれ、レイジーがあるほうが早いのか、 早いというか、埋め替えなくてよいからやっぱ早いのか、 これってシーケンスじゃダメなのかな、シーケンス、 シーケンスだってIsEmptyが使えないからか、IsEmptyが使えないからか、 あー、それだけ、あれだけか、どうしようかな、まあ重要といえば重要ではあるんですけど、 レンター取って最大値を取るか、いや、うん、コレクション、 IsEmptyのためにコレクションか、Nextを取るわけにもいかないしね、シーケンスで、 まあ取るわけにいかなくはないんですけど、 コレクションか、ちょっとオーバースペックに見えますけどね、 まあいいか、これでレンジのコレクションで乗っていて、それでアラートだったら、 イリガルな値を返すと、そうじゃなければ、レンジのレイジーマップで、 ローアバウンドね、アッパーバウンドそれぞれのミンマックスを返すんだ、 それぞれの、ローアのミンとアッパーのマックスか、ここ面白いですね、レイジー使って頑張っている割には2回同じことをしているのが気になっていて、 あと言ってね、これでミンとマックスを同時に取ろうとすると、特に行動をかくことになるんですかね、みたいなところがあって、 それでいいのかなって気もするんですけど、ミンとマックスをこれに対して稲木するっていうことは、 まあ、そうか、ミン関数とマックスが今ミンとトップで打って、コレクションに対してミンを取っているのか、 コレクションに対してミンを取るのか、ミンとマックスでしょ、ミンとマックスを自分で頑張ればこれでいくか、みたいな感じですか、うん。 マックスでローアとアッパーが手に入って、 ちょっと自分で組んでみます、これ間違えるとどうなるのかなというのを、こういう間違え方をすると、 ああ、こういう感じになるんだ、それでやってみますか、どうしようかな、ミンとマックスで、ミンとマックスでやっていく、ちょっとやってみましょう、 あんまりね、最近こういう行動をかくのやってないからね、難しい、こういうことで単なる行動ですけど、 自分の中では見にくいのでこうして、向こうのやつでしょ、インデント変なのなんだっけ、ガードで、これフリーの関数ですよね、フリーの関数、いいですね、これでいいですね、こうして、で、レンジのCCCのエレメントが終わりか、 エンフィだったらトップコックで抜けるということにしてるけど、シケンスにもなるんじゃないかな、やってみよう、レンジ図に対してリデュースできますよね、イニシャルバリューが、イニシャルバリュー、イニシャルリザルトが0、0という形で、ラフィロコシカのこれ、ローと、こんな感じで、これでローじゃ、ファーシャルリザルトとレンジですね、レンジ で、この中で、レンジの中で、ローのミンとアッパーのマックスやればいいんですね、だから、F文でやる手もあるし、暗数でやる手もあるのかな、だからイントゥ、ファーシャルリザルト、ファーシャルリザルトのローというのは、出てきた、これですね、ファーシャルリザルトのなんだかのセルフは、ローとレンジのローアバウンドのちっちゃい方っていう感じでね、で、ミン関数、まぁどうなんだろう、ミン関数そんなに重たくないですよね、で、ファーシャルリザルトのアイがマックスで比較すると、アイと、こうね、マックスでファーシャルリザルトのアッ リテラルでね、この方を不動称する、まぁ大丈夫ですね、セルフのできれば大丈夫ですね、これによってファーシャルリザルトのローは全体を通してミニマムに押さえられますよね、で、それでアイは全体を通してアイ、最大限に押さえられますね、これでよいでしょうきっと、で、こうすると、ローとアイを返してるわけですけど、だからここで、ローアイ、まぁここでいいのか、レンジ、レンジというかバウンドかな、イコールって形にして、で、これのバウンドのね、えーと、バウンドのローとバウンドのアイ、これ完全に好みですが、この間の間に、なんかグラフ違ったね、ちゃんとできなかったですね、 そうですよね、レンジーズがあって、レンジーズですよね、レンジーズがあって、で レンジーズひとつひとつに対して、ローアバウンドを取っておきますね、ローアバウンドを取っていって、で、その中の一番小っちゃいやつですよね、で アイの方は、あ、アブロハイとか言ってるけど、ミンマックスでいいのかコレ、ちょっとミンマックスに変えますね、えーとミンとマックス、おう ね、マックスで、これでここが、ここらへんがね、いいんでしょ、んでここがマックスでしょ、えーと こうねって、これ これでいいわけですけれども、このローバウンド、ああそば、バウンドか、バウンドはダブルですよね、ダブルになっていて これdetoiwais、けっこうバウンズじゃないとなりましたよね、これでね、なんて言ったら、レンジ、レンジって変だな えーと、あ、ここで止めがえのいいんだ、ミドマックスね、ということでミがパブっちゃったなら ミンがパブっちゃったからこれはえっと、ダーリンが持ってる?ダーリンか持ってねぇか、ミン grind数は誰が持ってんだ? ミンは、ここちょっと、灰野大してといちゃいますね、これミンにして ミンは、ツイストのコレクション、コレクション、えーと、あっちからコレクションファイルにいるけどツイストが、ツイストが持ってるのね、だから、えーっと、まあここは、ミンの方ね、ミンマックスで、受け取って、それでここで関数がツイストのミンですね、ツイストのミンとツイストのマックス、これで0もできて、で、ミンとマックス取れてるでしょ、で、0と灰あるでしょ、で、これで、return、0と灰、灰、0と0じゃ何、0じゃない、ミンとマックス、あぁ、わりと違うらしい、何か、レベルの低さがすごい出てるんですが、リピースでミンとマックス0、0でしょ、 どういうことだ、えーと、パーシャルリトルトのミンでしょ、対象が0、対象が0が邪魔してるか、あ、邪魔してるね、ここか、対象が0だと、あー、ダメでしたね、対象が0か、対象が0だと0に落ちてますもんね、あー、ここか、なるほど、どうするとこれオプショナルにしないとダメだね、オプショナルにするとなると、あー、なるほど、で、すると、これは、ミンとリピースがあって、ローソがあって、あー、なるほど、どうしようね、これね、どうすると、 これシーキャンスにしたいんだけど、シーキャンスにすると、ファーストがダメなんっけ、えーと、シーキャンス、シーキャンスにすると、ファーストレンジ、ファーストレンジガタですよね、だからこれをするには、シーキャンスの、えーと、何かないかな、レンジとシーキャンスだと、レデュースとレデュースガタ、ラ Mallamb. あとはイテレーターを使う方法なんですけど、メイクイテレーターね、メイクイテレーターで返ってくるイテレーターは、シーキャンスのイテレーターですよね、このイテレーターはネクストしかなくて、ネクストをするとなると、別にレデュースガタ使えないだけなんで、大したポイントじゃないんですけど、悩んでるところはね、 まあそれがいいのかな、だからバー、レンジイテレーターイコールレンジイテレーターでしょ、こういう風にする、それで最初、最初をとって取れなかったら、ガードで抜けるか、もっと良い方法ないかな。 これでいいですね。これでガードの前に、バーできるのかな、2発音ありや。それでバー、Minダブル。で、バー、Maxダブル。で、ここの後、また待ちいけるのかなといえば、ここでMinとMaxイコール、レンジイテレーターの、レンジイテレーターのネクスト。 でそうじゃなければ、これを返すなんですが。ここまた待ちさすがにできないとか、バーと。 レッドにすればね、大丈夫ですよね。あれレッドダメか、イテレーターはネクストがダメ? ああダブル?ああダブルか。うーんと、ダブルいいですよね。ダブルは良い。レンジイテレーターは良い。良くない?良くない。 レンジは、レンジのイテレーターのネクストはエレメントからですから、レンジのダブルが返ってくるんだ。 だから、レンジか、まずレンジで取るんだね。レンジイコール、こうやって取って、そうじゃなかったら、と言うとここでいいんだ。 制御が難しいけど、ローカル変数で使う分には、この関数の外に出さなければね、その可変状態というのは完全に外できる状況になるので、これでいいですね。変数を3つ使いましたが、その代わりと言うと綺麗になって、変数による懸念はこのRangeOfRangesという関数の中に完全に閉じ込められていて、パンパンサイトという感じですね。 じゃあこれでいいんじゃない?この関数を作って、ここまではいいけど、ここまででやったこととして、MinとMaxを使っているプレイだけですね。プレイだけだとここでリテラルを使ってますね。 リテラルを使っている中、そういったことを考えると、RangeのこれはWじゃなくて、例えば、バリューとして、Rangeはバリューという風にして、これでRangeバリューですよね。 それで、リテラルがあるんで、リテラルの方どうしようかな、リテラルのエクスプレッションでごまかすか、あとはAdditive Arithmeticでも確かにやってないですよね。 だから、まあリテラル変換でいいんですかね。それか、またこの関数自体が2両返すっていうね、そういった仕様もありますけどね。 今回は無効な範囲を返してますけど、無効な範囲ってすぐ返せないのかな。Rangeでバリュー、0,0か。 リテラルか、バリューがエクスプレッシブル、インテージはリテラル、これでいいんですかね。 それで、これだけだとMin、Maxが取れないはずなんだけど、ミラーが出てるのなんだ、ここか、ここ、上は下だ、間違えましたね。 なので、これでここですね。ローアバウンド、あれ、Rangeがバウンズをコンペアラブルで取っているのか。 なるほど、Rangeがバウンズをコンペアラブルで取っている、既に。 だからこれ比較できるんだ。 だから0があるかどうかってだけで、それはエクスプレッシブル、インテージはリテラルで表現することにしたということか。 なるほど、うん、なんかちょこっと微妙ですね。0、0か、いや0のある場所がちょっとね、例えば数字の0、数字の0なのか、0、0、0はなかったっけ、0あったと思うんだけど。 0はAdditive Arithmetic、この中で定義されてるんですよね、0ね。 だからAdditive Arithmeticに準拠させればいいんですけど、別に足段やってないからね、といった状況なわけですよね。 なので、悩ましいところ、Rangeが、インバリットなRangeを作りたいわけなんですけど、インバリットなRangeを作るにしても0が欲しいわけですね。 0が欲しいときに今考えうるのは、こうやってエクスプレッシブルかインテジャリテラルにするか、もう諦めてAdditive Arithmeticか、またはニューメリックにするかというね、そういったところがありますが、 ニューメリックにするのも別に数字を求めてるのかな、今回。こっちの方が確かですかね、ニューメリック。これでもできますよね。 こうするとね、リテラルに変えられてかつ、ちょっと半端なのよりは、バリューは数字ですよっていうね、こっちの方がまずは妥当なんですかね。 あんまりこういうジェネリックプログラミングで大きい方に寄せるってあんまりしたことなかったけど、妥当な気がしますね。 あとは、TがSequenceですよってなってるけど、ここはRangesでいいですね、Ranges。あとはここか、Ranges。割れていいですよね。 これでRangesがRangeのバリューで、エレメントでバリューがニューメリックで、という感じで、例えば割れてないし、ということでOK。 ここまでやったけど、これあともフリーな関数で、Rangesの中からRangeを取るよっていうお話ですよね。 なので、具体はRangesの気がしますよね、これね。そうすると、フリーな関数で持たせるんじゃなくて、Rangesに持たせた方がいいのではというね、APIデザインガイドライン的にはそういう風になっていくのかなという気がするんで、さっき作ったRangesファイル、この中に移動してみましょう。 移動するときにコードが、これです。これをつけると何がいいんだろう。今回とにかくSequenceで良いので、エクステンションで、Sequenceで、 エレメントがRangeの値となっていけないか。そうすると、SequenceでエレメントがRangeの値となっていけないか。 Sequence、これどうするんでしたっけ。Rangesで、エレメントがRangeプロトコルでいいのかな。 Rangeプロトコル、ここでダブルになっちゃいますよね。ダブルになるのもちょっと困るなという気があって、 これどうやるんだっけ。Sequence、エレメントがRangeで、RangeのバウンズがRangeの、とりあえずプロトコル拡張ではなくて、Rangeの、もうちょっとやってみますか。 Sequence、これがイコールイコールRangeでやるとなると、 バリューとか言わないといけないじゃないですか。 このバリューがないわけですよね。 というわけで、ここでバリュー追加したところでどうにもならないですしね。 ここにバリューなんて書いたら、プライマリー要素になるだけなんで、 何の意味もないし。 Range、ここを省略ってわけにもいかないしね。 バリューがここでヌメイクにしたいわけですけど、こんなこと書けないですからね。 ここでバリューとかやると、これは第一要素になるしね。 ここでRange、バリューなんて書けないしね。 そうすると、バウンズとして。 RangeWだったら別にいいわけですけど、他にはRangeプロトコルでしょ。 Rangeプロトコルなんてなかったっけ、Expressibleかな。 ExpressibleRangeとかの?違うか。 Range型見てみればいいのかな、Range型のプロトコルは。 選挙しているのがRangeは、RangeExpressionか。 なるほど。 RangeExpressionはあるんですけど、RangeExpressionっていいのかな。 やってみますか。これでいいかもしれない。 だからここでSequenceですね。 エレメントがRangeで、エレメントがRangeExpressionで、 RangeExpressionで、そうするとバウンドが使えてくるので、 エレメントのバウンドがユメリック。 こういう風に解決してきましたね。 これで条件は整った?整ったけど、ここだとまだダメなはず。 アッパーパウンドとロアーパウンドが多分通れないんでしょうね。 まずは関数全部持ってきちゃいますけど。 名前も問題ですね、これね。名前わからない。 意味わからないですよね、RangeのRangeってね。 だから全部を含む。 全部を含むRange。 1から3と、例えば5から10だったとき、 1と10の範囲を通ることをなんと使ってたら裏切れますよ。 この場合は、別の離れた範囲の全体を覆う一つの範囲。 Union of Intervals 対象方眼区間 Smallest Enclosing Interval 絶望するMerge バウンディングレンジ 境界レンジ、いろいろあるらしい。 ってことは、Unionはキュアドリかな。 Union Mergeもどうかな。 あとは何だっけ。 対象Smallest Enclosing Interval これがいいかな。 Smallest だからここでRangeを取るけど、 今回もRange入ってるから、ファンクションじゃなくてバーディですね。 で、これでその中で、Smallest Enclosing Range という形で取って、 このプロパティ引き継が入らなくて、元リチがエレメント。 で、こうしてこの実装として、この中身をいろいろ書いていくわけですが、 8レンジが自分なんで、メイクインテレーターですね。 戻り、あ、そっか。 ニューメリック、範囲、エレメント化、アズ、レイエレメント化ですから、ここもダメなんだ。 エンダンチがダメらしい。 ロアバウンドとアバウンドがもう入らないという、そういった状況になっていると。 そういうことになっちゃってるんで、ここでエレメントがさらに、ここでレンジのエレメントバウンド、 という風にしてあげる必要がある。 これでも全部取り足しましたよね。 なんかちょっと遠回りしてるような気がするけど、 ジェネリックプログラミングこんなもんですか。 で、あとはリカーシブ。エルフのエレメント。 エルフのエレメントがエンディングエレメントバウンドとリカーシブ。 ここがリカーシブになっちゃった。 レンジでエレメントが、エレメントがレンジエクスプレッションで、 ここを言いたいんですね、エレメントが。 あ、そっか。これでエレメントのバウンド。ここが瞬間になっちゃった。 そっか。バウンドがあって、表現できないかもしかして。 あー、なるほど。ちょっと限界かもしれないですね。 コンピュータのバウンドで。 バウンドと、バウンダバウンドで良くて、 エレメントのバウンドを持ったレンジは、 エレメントから、表現できなかったとか。 そうすると、エキウェンスのエレメントで、 エレメントエクスプレッションで、 で、それで、ローバウンドとアッパーバウンドが、 レンジでしょ。 レンジはメイクインティレーターでとってますよね。って、 メイクインティレーターでとってるってことは、 エレメントがレンジであると。 、メイクインティレーターで取ってるってことは、 レンジで有ると。 アッパーバウンド、ローバウンドという概念が、 存在しないというね、こんなことになっていて。 それで、イコアルに考えたとして、 リレーティブトゥーでしたっけ? リレーティブトゥー、で、レンジに 振り返るというコレクションっていうのがありますね。 というコレクションにすることで、 どういう変換でしたっけ? えーと、こういうパーシャルレンジを渡った時に、 何十、四十、五十、六十みたいなのは、 五十、六十とかで取れるのかな? ていうか、えーと、あれの使い方が、 これがわかるかな?とかになりますね。 リレーティブトゥーで、与えられた コレクション表現の範囲で、 レンジを取るようというね、 そういったものになっている。 パーシャルレンジを渡したとして、 リレーティブトゥーコレクション。 あ、リレーティブトゥーコレクション。 レンジが変えるで、 何を具体的に渡すのか、これ。 リレーティブトゥーコレクション、 この使い方がわからない。 えーと、調べてみますか。 アッパーリーワン、アッパーリーワン、 閉じたか。 多分、レンジエクスプレッションを使うときは、 今のを使うんですよ。 そうしないと、映ってなくなっちゃってね。 レンジエクスプレッションとかどういうのか。 リレーティブトゥーってこれをする人もね。 えーと、リレーティブトゥーこの辺でいいかな。 リレーティブトゥーコレクションを 取られさせるのに適した範囲。 返される範囲は、コレクションの境界内にあることが 保証されていない。 それでいいんですけどね。 ナンバーズとして10から70まである中で、 アップトゥー4が4までのパーシャルレンジ。 アップトゥー4をリレーティブトゥーナンバーズにすると、 0から4になるかな。 R1が0から4。 0から4になるんだ。 0、1、2、3、4。 R1の範囲は、別の開始インデックスであるため、 下の端が0で囲まれる。 リレーティブトゥーに渡されたコレクションが 別のインデックスで始まる場合は、 それは加減として測られる。 2から始まるスライドだと、2から4までか。 なるほど。 なるほどって感じですかね。 パーシャルレンジ。難しいな。 どうしようかな、パーシャルレンジ。 レンジエクスプレッションで動きが分からないな。 どうしようかな、プレイグラウンドで試すか。 とにかくパーシャルレンジをレンジに変えたいんですよね。 レンジに変えるにあたって、どういう手法を取れば いいのかというのが、なんとね、分かっていなくて。 これをするには、プレイグラウンドでちょっとやってみますか。 ファイルで、ニュープレイグラウンドで。 それで、プレイグラウンドブランクでちょっと作って。 これを持ってきて。 例えば、レッドレンジイコール。 レンジがサム、レンジエクスプレッションだとして。 この中で1から出ていいか。 この時にプリント。プリントじゃなくていいかな。 この時にレンジのrelative2と0があると。 これは何が変えるんだ。 relative2で1から10が変える。 relative2だめ。 サムレンジエクスプレッション。 これでいいのか。 押してあげるとこれでいいですね。 これでプレイグラウンドを動かした時に、 これが1から10になるのか、それとも1だけになるのか。 relative2、0、どうなんだろうね。 ちょっと今、実行中ですが。 これで取れたとしたら、とにかくレンジ型に振り返られるっていうね。 そういった効果が得られるよっていうことでいいのかな。 範囲内にあることは保証しないといけないからいいんだと思うんですけど。 0から、relative2、0だからインデックスが0からで、レンジ型が取れる。 そうするとアップバウンドとかが取れると思うんですが、 プレグラウンドどうなってるんだ今。 結果は? 結果はリペアか。 リペアリングっていうか。 この間に私、レッドに出て、 リザルト、ドパス的なかた。 なんかちょっとプレグラウンド変わりましたかね。 まあいいか。 iPad系に似てきてるような気がして。 あまり使ってないから。 あまり使ってないから。 使い方変わりすぎたから嫌だな。 まあいいか。とりあえず。 これで、あれディスタンス? ディスタンス? ディスタンスフロームがあるじゃないですか。 さっき作ったよね。 自分でね、ディスタンスね。 リザルト、ディスタンス、フローム2。 あ、でもあるって言ったけど、 これは別にあれか。 プレディクティブコードとコンプリッションか。 別にこれが正しいとは限りないですね。 一応保管してみようか。 あ、でもディスタンス2で2つのあれか。 数字から範囲出してるだけか。 これプレイグラウンドだよね。 プレイグラウンド。 今ぐりぐり回ってるけど、 例えば、クリントさんとかやると、 これはどうなの? プレイグラウンド。 動かせてないのか? これを押して、 いや、大丈夫だね。 エラーになってるね。 この辺全部、コメントだと。 すると、これは動くの。 これは動くんだ。 自分のコードが、 地味的な間違いを犯していると。 いきなりここなの。 でも、これは。 これかな? いきなりこれか。 外レンジかな? これならどうかな? ダメか。 サムレンジエクスプレッションイント。 レンジエクスプレッションプライマリーも出ますよね。 1から0をレンジとして入れるんですよね。 これはもうダメなんだ。 これ困ったな。 じゃあ、しょうがないな。 ファンクション作りますか。 ファンクション、何だ? 名前悪すぎる。 まあいいか。 ゲット。 レンジか。 レンジエクスプレッションバリュー。 バリュートレンジは、サムレンジエクスプレッションのイントを取るよ。 という風にして、ゲットというか、 エクゼキュートというか、エクゼキュート。 そして、これで、この中は入れますよね。 これを中に入れて、まだ何も結構しないから、 だんだん絵がスマートに出てきてOKですね。 それで、リザルトがレンジだらけで、 返しましょうか。 ここで、レンジイントを返す。 という風にして、これでリザルトを返せますよね。 これで、リターンリザルト。 リザルトが返せれば、 普通に、レッドリザルトイコールエクゼキュート。 これで、コードコンプリーチションはダメですね。 インテリジェンスじゃないか。 インテリジェンスかな。 プレディクティブコードコンプリーチョンはどこだ。 で、リッティングかな。リッティングの、 プレディクティブコードコンプリーチョンなのか。 その中のプレディクティブとか。 あれここじゃないのか。 コンプリーチョン。インテグレーション。 まぁ、いいか。 まだ分からないからいいや。 とにかくエクゼキュートって、 この中で1から10まで、これを渡して、 で、この時にリタルトの、 アッパー1とローアバウンドがどうなるかってのを見たかった。 で、これを動かすと、 ローアが1で、アッパーが10ですね。 なんか、プレグラムが見にくくなったな。 対応しなくなったって、あの、あの、 共通だと思うんですけどね。 うん、まぁ、いいか。 とにかく、これで7行目が、 こうすれば、選ばれるんだ。 1から10。うん。 ですよね。って感じで、かな。 1から10。そうですよね。うん。 これが、0、1、2、3とかなって、 これの部分レンジで、3から4。 あ、5ぐらいで4でいいか。 それと、3から10になるのかな。 そんなことない。 1から10。 リレーティブ2、リレーティブ2で、 部分レンジにしたつもりなんだけどね。 3から10だけど、1から、何と10になってる? これはね。うん。 どうか。うん。 なるほどなのか分かんないや。 これに頼っていいのかなと、理解が、 それではダメな気がしますね。 こ、このさっきのコードね。 レンジオブレンジ図を書き換えているところですけど、 レンジエクスプレッション、そうね。 で、まぁ、でも今のノリだとすると、 受け取ったレンジとか、自分自身のレンジか、 エレメントのレンジ、これを、えーと、ここでね、 リレーティブでやっていけばいいんだけど、うん。 これも、なんか、あんまり、出し方ないですね。 ちょっと、ジェネリックに頼りすぎないでいい? うわ、なんか、ぎみょんですけどね。 レンジ、ダブルで書いちゃえば、 もう、決着がつくわけですよ。 レンジダブル、ね。 レンジダブルにして、エレメントとか言ってるけど、 えーと、レンジダブルじゃないや。 えーと、レンジオブレンジ図とか、レンジ図だから、 これの配列ですかね。 こうね、この形。 これならね、一発でオッケーなんですけど、 レンジでダブルで、どれの配列でしょう。 で、ここの配列ぐらいは、なんだかなりますね。 やってることは、シーケンスを求めるだけなんで、 ここで、シーケンス、エア、エレメントイコール、 レンジダブル、これでいいですね。 うん。 このレンジの後に取るね、ここ、なんか、 ジェネリックにしたかったんですけど、 ここで、サムがいないインテージャブがいることなんだ。 これだと、ネクストがもう取れなくなってくる、 サムに。 サムがダメですね。 うん。 あとレンジか、これ。 エレメントがレンジで? えーと、不利な関数。 今、使ってたやつですね。 所属がまだ決まっていない、これがレンジオブレンジ図。 これの呼び出し元を調べて、行きましょうか、とか。 まあ、いくつかで関数にしない理由には ならないですけどね。 レンジオブレンジ図になってたところを、 Eパスのパス、これかな。 これに対して、オブザーベーションズか。 オブザーベーションズ。 オブザーベーションズをマップした後、 これに対して、自分で名前を作って忘れちゃった。 何だっけ、キーパスでしょ。 ちょっと前、上に書きました。 レッド、レッド、エクス。 また名前変えますが。 オブザーベーションズをまず素直にマップして、 ザラーゼロのEパス、そしてパスを渡す。 このパスを渡してできたものに対して、 何だっけ、ローエンクロージングレンチ。 そうですね、こうしてあげれば良いと。 これでパフォーマンスを大きにするとすると、 マップで一回配列に詰めるということをしないために、 レイジーにしたと思うんですけど、 良いとはね、これでキーパスで、 もう一度、ローエンクロージングレンチにして、 このレイジーが使えなかったレイジーが 続いているだけはレイジーにして、 これでオーバーオールレンジを消して、 これでレビューが終われない。 OKですね。 そうすると、オブザーベーションレイジーのマップで、 キーパスでマップして、それをエンクロージングレンチにして、 こっちはオブザーベーションズのマップで、 あれ、ここはレイジーじゃなくていいの? なんか、統一感ないですね。 オブザーベーションマップでレンジのマグニチュードのマップでしょ。 エンクロージングレンジと、ここもまとめたくなりますね。 とりあえずレイジー入れときますけど、 これで壊れないでしょ、別に。 まあいいや、とりあえずこれで。 さっきのランス、これの所属先が決まったので、 入って前回くらいに基づいて移動ができたと、 まあそういう感じですね。 はい、いい感じ? いい感じなのかな? ここが引っかかってますよね。 レディバーでマップでキーパス取るまで一緒じゃないですか。 だからここ一回メモリーに戻っておくか、 またここでプロジェクトにして、同じようにね。 エンクロージングの範囲のマップと、 つまりそのマップとマックスの両方を リリースで計算していくって言っても、 まあ取れなくはなさそうかなっていうね。 そういった状況ができてますよね。 一個マックス取っていくわけでしょ。 もう一個のエンクロージングレンジ、これはもうまとめたからな。 まとめちゃった場合だと、これと同じで一緒に、 というかマックス取れてない? これ。 マックス、マックス、あれ? マックスか。 これでループしてループ回っていって、 マックスはアッパーワンドのマックスか。 ここでやってるのはマグニチュードのマックスか。 この違いですね。 だからキーパスで、キーパスで、それに対してマックスを取っていってるんだから、 同じノリですよね。 ここの中でマグニチュードに対してマックスも取って、 一緒に計算さすがにね、なんかまずいですけど、効率感に考えるんだったらそういう感じになってくるんですかね。 マグニチュードを取ってね、うん。 だからこれでオブザーベーションズの中でオーバールレンジとマックスマグニチュード、エンクロージングレンジ、レンジ。 だからここでオーバールレンジとオブザーベーションレンジズ? みたいな感じで一回やって、エンクロージング。 オブザーベーションレンジズ、イコール、オブザーベーション。 レンジはいらないな。レンジいらないし、これもしかしてオブザーベーションズ、ここでしか使ってない。 もういいか、使ってないなんてどうでもいいや。 とにかくマップにしてこれで、セルフキーパス、これはダメですよね。 これはこう、で、こう、で、アップですね。 で、これでオブザーベーションレンジズに、一回メモリーも取っちゃって、そんなにメモリー食わないと思うんで、 で、オーバールレンジは、こうですよね。 そう、で、えーと、.smallest。で、これで、あれ、これバカツリ大変なだけね。 はい、で、これで、ここ、えーと、max、これもそうですね。 .max、で、オブザーベーションレンジズ、で、.max、という風にして、これで、ここがダメ。 えーと、オブザーベーションレンジズの、あ、そっか、マグニチュードのmaxか。 だから、レイジ、あんま綺麗になりませんでしたね。 レイジの、マフの、オブザーベーションじゃない、えーと、マグニチュードのそれのmaxか。 あー、微妙でしたね、ちょっとね。はいはい、なるほど。 ま、でもここが、アイクの、えーと、押してあげて、で、それで、あ、使ってるのか、どうか。 なるほど、じゃあこれでいいか。 あ、微妙でした、これは微妙でした。ま、いいか。えーと、押して、エナメレティブトップポイントで回して、 その中でいろいろという感じでやっている中で、ま、いろいろとネット解きになるところがあるんで、 もうちょっと、要はだいぶ時間かかっちゃったので、またにしましょう。引き続き、リファクタリングを進めていくというのを次回に回すことにします。 はい、じゃあ今日はこれで終わりにしますね。お疲れ様でした。
