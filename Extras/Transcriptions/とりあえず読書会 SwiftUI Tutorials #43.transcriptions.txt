Transcription & Summarize : とりあえず読書会 SwiftUI Tutorials #43

はい、では今日もとりあえず紹介を始めていきましょう。 えーっと、Swiftをマクロ使ってね、既に出来上がったデュエトリアルの方と、えーっと、リファクタリング。 僕は聞くと、まあマクロが絶対に使われそうな雰囲気の通称か、えーっと、そうではなくてですね、あのー、いろいろリファクタリングをしている中で、 ここを申し上げると、マクロを使うと面白いのではないかみたいなね、そんな好奇心からやっている感じで、 まあこのタイミングでマクロは持ち出さないかもねみたいなね、そんな感じのところではあるんですけど、 まあでも汎用化とか、もうちょっとね、フレームワークみたいな基本感での汎用化とか考えればまあ十分にね、マクロで表現する可能性はありそうなところは、 そんなところをね、やっていったりして、やっているっていうのはリファクタリングをね、やっていたりとか、そんな感じの状況ですね。 まあそこまでしなくてもね、プロパティラパーとかぐらいで普通だったら十分かな、みたいなところではあるんですが、 まあまあ、あのー、こういったね、勉強っていうんですか、こういったタイミングで、あの好奇心に任せてね、いろいろ試してみるっていうのは、 結構ね、有意義な学習方法だったりすると思うんで、やっていく自分でね、臨んでいくといいんじゃないかなという気がします。 で、さっそくね、続きに行っていきますが、前回マクロを作る中で、こっちまでできましたね。 どんなの作ったかっていうと、えーっと、具体的なことだったかな、まだ消してないですね。 えっと、Notificationコンテンツね、この中に、えーっと、これですね、ユーザーインフォというフィクショナリ、 StringとEnnyのね、フィクショナリがあって、で、その中の、Eを元列で指定して、 で、得られたものをキャストするっていうのがね、一般的なString Ennyを用いたユーザーインフォへのアクセスだと思うんですけど、 これを劇場で表現してしまおうっていうね、そういったやつですね。 ユーザーインフォが、APSと、あとは、レネランドマークIDというので構成されていて、 で、APSはさらにタイトルメッセージっていうね、あれ、アラートだった気がするな、アラートだよね。 アラート、APSが、ユーザーインフォがAPSで、APSがアラートですね、これ間違ってますね。 なので、APSが、んーと、ここでアラートを用いますね。 なので、ここでいいのむ、アラート。 で、この中のケースで、アラートがタイトルとボディを持つ、 こういったふうな構造で、このテストはね、ちょっと試しに作っただけなので、 これは、まあまあ、後でしますけどね、置いときましょう。 で、あとでテストする、これは完全にテスト用の構造だから、このままでもいいですね。 で、アラート、アラートでユーザーインフォのラグマが入ってますね。 これを取りたいよ、というお話の中で、部屋で一義にね、いろいろ書いていくっていうのは悪くはないんですけどね、 まあまあ、あんまり、直感的じゃないコード、昔のペツブキ的なね、コードになってしまったところがあるんで、 で、もうちょっとね、宣言的なコード、そんなのがストリートの側ではね、 ハイヤリって言っていいのかな、まあプロトコルスクは結構宣言的なのでね、まあそういった感じで、宣言的に書きたいなということで、 こういうね、列挙型で構成して、それをマクロで展開するっていうね、そういったのがまあ、よく取られる手法。 で、今、間違いなく言いついた、ここがね次のですね、イーナム、アラート、 エータ、アラートでタイトルメッセージで、こうですね、こういう形で、はいじゃあ、まあこんな感じでやって、 で、今のところ出来上がってるのは、この、イーナムに対してのコード展開だけですね、 具体的に展開すると、これ、下に出てきたこれですね、APSはユーザーインフォの中のAPS、でそれがStringAny型ですよ、 っていうね、こういった形ですよね、でアラートはAPSの中ですよね、その中のアラートでStringAny、 で、テストも同様にこんな感じでね、ここまで出来てますね、あとは各ケースで、実際のプロパティに対して、 その他のね、戻り値を返すよっていうね、そういったのを作ってあげれば、今回のマクロは完成するので、 まずはそれをやっていけば良いのでしょうと思うんですが、 この時に、やっぱり何回も気になるんですけど、 これインデントがずれてるのがすごい気になるんですけど、これはしょうがないのかな、 エクステンションマクロでエクステンション追加した時に、なんかインデント入っててもおかしくなさそうですけどね、 なんでかな、なんか自分で昔マクロ作った時そんなところは、あんまり苦労しなかった気がするんですけどね、とにかくやっていくしかないですかね、 ターゲットをランドマークスマクロクライアントにしておけば、 まだね、マクロだけ注目してね、実装していくんで、これにして、でその上で実装ランドマックスマクロマクロスの中のユーザイファアクセサーですね、 ユー 用意されていて、かつ、今回聞かなかったんですよね、 なんかよくわかんないんですけど、そんなの待ってね、どうしますかね、これねって感じなんですが、 どうせなくていいと思うんですけどね、いやまあまあとにかくそれは、まずまず実装した方が面白いですよね、実装していきましょう、 ここが実装実際のところで、デクラレーションの中のユーザイファアクセサーですよね、これが付けられた全体、 その中のメンバーブロックというのが、何かここから始まることがですね、起こっていますね、こっちまでで、もっと下までね、なので、 その中のメンバーブロックの中のメンバーズ、バックメンバーですね、今回の場合は列挙型1個だけになって これを見つかったら、この処理を突破する、で、見つかったインフォメーションの ネームがユーザイインフォだったときには、さらに処理を続け、 ユーザイインフォじゃなかったときは、また次のね、方法を見ていくよ、という感じで、 そういったところまで出てきたら、ユーザイインフォの列挙型の中に、 メンバーブロックに対して、中の列挙型を拾っていくね、 こういった、コンティニングイーノム、コンティニングイーノムビジター型、 これは自分で作りましたけど、このね、ビジターを使って、ビジターパターンのね、パターンを使って、 中身の列挙型を見つけていく。 で、見つかるたびに、ビジターは自分自身、インスタンス自分自身の中に、 この見つかったものに基づいた、マクロ展開すべきコードをね、エクスパンションに、 蓄えていくので、最後それを返してあげれば完成というね、そういった動きですね。 で、そのエクスパンション、何が保っていくかというと、これですね、 コンティニングイーノムビジター、これが、シンタックスビジターに準拠していて、 除去じゃない、逆検証していて、それで、このエクスパンション、エプリシンタックス配列に、 どんどんね、展開すべきコードを蓄えていく。 で、それで、あとは、オーバライトファンクビジットで、 ノードがイーノムエプリシンタックスを見つけたときに、 呼び出されるビジットメソッドの中でやりたいことがあるというね、 それが、このシンタックスビジターはそういう作りになっているので、 ここでイーノムが見つかったら、このキーとして、キーというのはマクロ展開したときのコードですね、キー。 このキーとして、ノードのネーム、ノードというのはイーノムですね。 だからノードのネームのエキストで、ロアキャメルケースに変換したもの、それをキーとする。 だからこれ、小文字で始まるAPSですね。 メガ下でこんな感じで展開される。このためのキーで作って、 で、プロパティネームとして、 プロパティというのはこっちの名前ですね、ユーザーインフォーでは。 これは、このノード、使ったイーノムが、それを囲んでいるイーノムを取る、 プロパティをこの前に戻ってくれましたね。 これを呼んで、囲う親のイーノムを取って、 そのエキストをロアキャメルケースにしたもの。 だからAPSだと、それを囲んでいるのってユーザーインフォーレット型ですよね。 なのでこれをロアキャメルケース、 ユーが小文字で始まるユーザーインフォー。 それにして、出力はこのとおりですね。 プライベートバー、ここに書いたまんまですけど、 プライベートバーのキー名ですよね。 キー名でいいのか、変数名がよくないですね。 これプロパティ名とも取れますね。 キー名、だから、キー名か、ちょっと名前が悪かったな。 これをキー名じゃなくて、ノードネームにして、それで、 ペアレントノード、イーノムにしようか。 イーノムネーム、ノードネームもね、イーノムネーム。 分かっていれば後悔ないですね。 プライベートバーで、レッドボタンの名前。 それで、レッドボタンの名前でもないですね。 ロアキャメルケースしちゃってますね。 若干違和感ありますね。 だから、プロパティネームとイーノムネーム。 ちょっと語弊があるけど、まあ、いいのかな。 ロアキャメル、そこまで語らなくていい気がしますからね。 交渉しておきましょうとりあえずね。 とにかく変数名でレッドボタンの名前を採用して、 それでトイングエンディングの中で、 ペアレントのイーノムネームに対して、 サブスクリプトを取って、イーノムネームをキープする。 同じですね。 やっぱり出てきたものがある。 じゃあ、それでどうしようかな。 次ですね。 このレッドボタンのケース、バックケースに対して、 なんと、プロパティを生やしていくということをするわけですけど、 またね、このASD。 ちょっとね、オープンキーをね、実際に見ながら、 確認していきましょう。 SwiftASD、あ、ちょっといきなり閉じてしまった。 SwiftASDエクスプローラーっていうのがね、 ネットでもう一回作ってくれた人がいらしてね。 あれで、SwiftASDエクスプローラーを使うことができて、 これの中でプロパティが相当楽になっているので、 これは奇跡的なツールですよ、なかなか。 こうしてあげると、ここにね、オープン、ASD出てきて、 だから今回作りたいのは、アラートを見れば分かりやすいですかね。 アラート、この辺ですね、アラート。 ここで、アラートの中ではメンバーブロックがあって、 メンバーのアイテムの中に、イーノムケースでくるってのがありますね。 なので、これを拾っていけばいいということがまず分かる。 イーノムケースでくる、これを見ると、 まずは、イーノムケースエレメントのタイトルというのと、 イーノムケースパラメータークローズ、 英語が分からない、 クラウズ、 こういう時に英語も勉強しておくと、すぐに忘れるんですけど、 クローズ、クローズ、 みたいな感じなのかな、 ここを見ると、クローズで、 その中にパラメーターがいろいろあることが分かるので、 これをドリフトの方に使いたいという感じですね。 何してもまずは名前を取ってプロパティを作るというところからやっていきたいんですが、 そうすると、ここですよね。 まずはイーノムがあって、プロパティがあって、 あとは、上のケースですね。 ケースを探していきたいという状況になっていて、 ケースを探すとなると、メンバーに対して回せばいいですね。 その方がいい気がするな。 基本的にはその時にこんなビジットの中じゃなくて、別の何かを作りたい気がするんですけど、 まずは、いいですかね。 ノードイーノムが取れているということは、この中からケースが取れるんで、 イーノムとイーノムがまず情報を揃えましたかね。 取りたいものは、アタとプロパティ名ですね。 アタとプロパティ名を取りたいので、 この時に似合う方法は何になりますかね。 アタと名前。 タイプがネームとタイプなので、 ネームがストリングとタイプがストリング。 こんな感じの配列が欲しいなという気分ですよね。 それに対して、ノードのメンバーブロックの中のメンバー。 これに対してマップをかけて、この中でメンバー。 これに対して取り出していくという感じですかね。 メンバーブロックのメンバーでマップをかけていった時に、 メンバーが必ずしもケースであれば限らないわけですよ。 なので、どこでフィルターをかけるかですかね。 かけ方としては、メンバーに対してここをマップの中でかけるとすると、 メンバーが空っぽだったりするという恐れがあるわけですよ。 そうすると、どうしますかね。 マップではなくて、リビュースがいい可能性も出てくるなと思うのと、 アタとやっていった時に、この辺の方がややこしい感じの表現に。 機構が多いとコードがややこしくなってきちゃうんで、ここでタイプエリアを作っておきましょうか。 こんなちょっとタイプエリアを作って、 自分はまだやったことないですが、今日ちょっとやってみちゃおうかな。 プロパティインフォにしようかな。 これは、Mタイプですよという形にして、 それでこれを出すように、このプロパティインフォはノードのメンバーブロックの中の メンバーの、メンバーのマップではなくて、ここはコンパクトマップですかね。 コンパクトマップで、リビュースでプロパティインフォの配列ですよね。 リビュースインフォの配列、これを初期値として、 バーシャルリザルトとメンバーで、 この中で使っていけばよいと、そういう形になりまして、 それでまずいきなり一つ目は、 コードに戦略しますか。いきなり一つ目は、カードですよね。 ここら辺、こっち側かな。 バーと、ノード、ノードって言うのかな、メンバー。 メンバーイコール、ノードって言うのかな、メンバーアズ。 イーナムと言うのかな、ケーステップル。 イーナムケーステップルシンタックス。 で、コードじゃなかったら、リターンですね。 次の初期値に移る。 で、カードはデプリケティブ。 ディスキャストフィールド。 メンバーは、メンバーブロックアイテムリストシンタックスエレメント。 で、その中デプリか、テップルの中のアズか。 ちょっと戻ってみると、ここね、癖がありますね。 デプリに対して、イーナムケーステップルシンタックス。 ここはちょっと分かりやすいように、ケースメンバーにしましょうかね。 ケースデクルか、ケースデクラレーションにしましょうか。 残してあげて、これでケースだったでしょ。 で、これがどれからレッドネームイコール、ケースデクラレーションのタイトルかな。 何かネームあるかな。 何か、ケースデクラレーションのケースキーワードじゃなくて、 エレメントじゃなくて、モディファイアーじゃなくて、 アイデンティティみたいなものがあったかな。 何かID、IDって何だ。 ユニークアイデンティティオブディスノード。 これが何だか分からないですね。 Kind、Parent、Position,Range,Root,Dreamed。 あとはDreamedって何ですかね。 Dreamed、イーナムケースデクルシンタックスって、 このノードをレーディングトリビューなどなく。 あ、なるほど。 余計な情報ね。 それはいいとして、 さっきのケース、イーナムケースエレメント、 イーナムケースデクルシンタックスの エレメントが欲しそうな雰囲気を感じますね。 エレメンツ、エレメンツ、エレメンツ。 ああ、そうか。 原理型は構文的に、エレメントが、 エレメントリストでしょ。 エレメントが複数ある可能性があって、 例えば、これケース、A、イント、で、B、イント、 みたいな風に比較すると、ここも成り立ちますよね。 ここだってね。 ここら辺、ここら辺、なんか変な気がする。 ドリング、で、イーナムケース、この下、イーナムケースデクル。 この中で、イーナムケースデクルの中で、 イーナムケースエレメントリストのエレメントのAと、Bっていう風になってくるんで、 イーナムケースエレメント。 だから、エレメンツに対して、1個1個取っておけばいいのか。 逆にご都合ですね、これはね。 なので、イーナムケースエレメンツ。 だから、メンバーズの中で、ReduceInto、で、イーナムケースエレメンツ。 俺らに対してですね。なので、4ですね。 ケースデクラレーションが、やっぱりちょっと長いな、名前が。 ケース、イーナムケース、イーナムケース。 ここ、イーナムケースにしてみましょうか。 多少は良いかな。 これで、イーナムケースのエレメント。 なので、イーナムケースエレメンツ。 よく名前が悪いですね。どっちにしろね。 メンバーデクル、まず、メンバーデクル、イーナムケースデクル。 やっぱりケースデクラレーションにしておきますか。 それで、エレメンツが、エレメンツ、エレメント、メンバーズ、メンバー。 名前、また変えますよ、やっぱり。 メンバーにしましょう、ここがね。 それで、ここがエレメントイン、エレメントイン。 プロパティに寄せて名前を付ける形に 今回してみることにしました。 この気分感だったらね、まあまあ、大丈夫でしょうっていう。 これで、エレメントが取れたときに、 このエレメントの、ネームとか出てきましたね。 パラメータークローズも出てきましたね。 これで、ほぼ完成ですが、 レッドネームイコール、 エレメントのネームのエキストですね。 レッドタイプイコール、エレメントの パラメータークローズですよね。 これの中の、パラメーターズの中にこれのパラメーターズになってきますね。 どっちかのパラメーターズか、1個だったら、単純な方、 複数だったら、タップルにしようかなと 思ったけど、便利にタップルが入って エキストするって滅多になさそうですね。 まあまあ、ないことはないでしょうけど、 そこまで考えないでやってみますか。 だから、そうすると、エレメントの中で、 まずガードを取っちゃいましょうかね。 ここで、ガード、ネット、名前はなんだろう。 パラメータークローズの、何を取ろうとしたっけ。 パラメータークローズのパラメーターズか。 ガードレッド、パラメーター、 パラメーターイコール、エレメント、 あ、ダメだ、これだと、複数の基線とだけ取ることになるので、 ガードは数のように、ここ、エレメントの パラメータークローズの、これで、 パラメーターに対して、パラメーターズが、 パラメーター、パラメーターズの、 E フェータルエラーで、メッセージとして、えーと、えーと、なんだ? イーノムケースフォー、ユーザーインフォー、アクセサー、えーと、 えーと、マスト、一個わからない、えーと、一個、えーと、 あとマスト、パブ、オンリー、パン、えーと、パラメーター、 あの、8点のか、これ、わからないけど、 ちょっと、訳させてみるにも、 ニートエルだと、ちょっとね、 吉野に訳してくれちゃう可能性があるから、 これが、ちょっと、GPTですよね。 こういったところに来て、えーと、英語のお話を、 ちょっと、GPTに聞きまして、えーと、この、 英語は正しいですか?ってね、 聞いてあげると、教えてくれるの、革命的ですよね。 これ、正しいかどうかがね、あの、英語ができない人間にとっては、 判断のしようがないわけですよね。 で、先生とかつけるわけにもね、いかないじゃないですか。 そういったときにね、こうやって、聞けるっていうのが、 革命的だなと思って、すごいよね。 えーと、イーノムケースフォー、ユーザーインフォー、 アクセサー、マスト、パブ、あげるのか、ほら、 えーと、ユーザーインフォー、ユーザーインフォー、 アクセサー、マスト、パブ、オンリー、 1パラメータと、1のザ、えーと、そうね、イーノムケース、 対する、をね、ザ、つけるのが、自然です。 あるイーノムケース、イーノムケース、あー、 そうすれば、ザがないと、英語的には、ある、あるってね、 中学、英語では、アーとか、ドイツ語だったり、 ゴーラドアンか、ね、それを、習った気がするけど、 だから、ここに、マストがまたネイティブだと、 なんか、感じが違うでしょうけどね。 まあ、とにかく、なんか、バカだった感じに、聞こえるのでしょうね。 イーノムケース、フォー、マスト、パブ、 この辺は合ってたみたいね。 うん、おお、なるほど、まあまあ、 自分にしては、ずいぶんよく書ける気がする。 ザ、イーノムね、ザ、イーノム、ケース。 ね、こんな感じにして、これで、えーと、 エレメントが、唯一になったので、 ここで、ケース、パラメータークローズの、 パラメーターズの、ファストね。 これで、あの、最初の要素が取れて、 で、その上で、その最初の要素の、 ファストネームですね。 ファストネーム、あれ、ファストネームでいいのかな。 えーと、ディスクリプションでいいのかな。 ディスクリプション、うん、こうしてあげる。 こうすると、タイプ名がね、取れましたよ、 っていう感じになって、これで準備が、 おそらく、できたと思われ、こうすると、 この中でやるべきこととしては、 やるべきことも何も、ないのかな。 ロパティノードネームと、ロパティーズが、 そろったので、これでいいんだ。 これで、2つができたので、あとは、リターンで、 ネームとタイプ、これを返してあげる。 あれ、これでダメだったね。 ストリングと、プリンの後の中で、 クラリシー、ディスクリプション。 パラメータクローズ。 パラメータクローズのカウントが1であるってことは、 パラメータクローズありますね。 2でなってたら、除去に立たないんでね。 ここも、強制アンラップでいいですね。 これで、ディスクリプション、強制アンラップして、 これで、コンバートが、ストリングストリングから、 リザルトタイプが、オイドになっている。 パーシャルリザルトのメンバーが、 パーシャルリザルトに立っていくのか。 パーシャルリザルトアップエンド。 ここで、ネームとタイプですね。 プロパティタイプですね。 これで、タイプを取って、この中のコードとしては、 のローのエヴァレント、 エヴァレントじゃないね。 他はイーナムネームですね。 だからイーナムネーム、で、私が作った プロパティね。 このディクショナリーから、値を取っていくんで、 これで、ローとして、この中身が プロパティのネームですね。 プロパティのネームをサブスクリプトで取って、 アツーで、ここで、ローで、イーナムネーム。 イーナム、違う違う、プロパティのタイプですね。 で、押してあげて、やすとかけ、切ったら終わり。 で、1個スペース開けときますかね。 1個開けんの上がいいかな。 上がいい気がしますね。 じゃあ、そうしよう。 ということで、上に1個スペースを開ける形を取って、 これで、たぶんできた。 ビルドをかけるでしょ。 ビルドをかけて、あ、止めた。 デストかな。 エヴァレントを入れてくるアレでしょ。 展開すると、えーと、デスト、デスト、デスト。 あ、このデストか。 あ、こういう破り方ね。 なるほどね。 抜かそうか。デスト。 で、次にね、デストを作ろうとした。 これはどうしようか。 これは回避しにくい問題ですね。 だから、まあ、アラートが浮かばれると 突破すればいけますね。 これはだから、えーと、どこだ? ネットワークで作るときの、 名前をかぶらないようにしたいのか。 名前をかぶらないようにするとなると、 うーんと、タイトル。 まあ、必ずかぶる可能性は存在しちゃう気がするので、 ここは何とかしないといけないんですかね。 えーと、かぶる可能性が、アラート、デュータインフォー、タイトル。 あれ、これ作りがまずいんだよね。 なんか、配送コードになっていないと、 うーんと、プロパティがあって、インスタンスがあって、 まあね、うん、不可能というか、要はアラートのタイトルがあって、 デストにタイトルがあっても、チョコ落としちゃうでしょ、これだとね。 なので、これをやるには、アラートタイトルか。 まあ、そんな感じで、えーと、 名前を連結していかないといけないのかな。 そうですね、そうしないとダメ、ダメになっちゃうのかな。 それか、ユーザーインフォー、コンテント、APS。 で、APSに対してプロパティを載せていて、 あとはプロパティ、APS。 APSをインスタンスにして、ユーザーインフォーのAPS、 配送コードを作らないといけないんですね。 そうすると、やるべきこととしては、ユーザーインフォーを持って、 ユーザーインフォーを持って、プロパティ、APSを作っていくのか。 なので、構造パイナップル的なことが判明した。 なので、やり方としては、まずはここで作るときに、 うーんと、これですね、プロパティを作ってますけど、 このプロパティは構造パイに作りますね。 構造パイ、そうね、構造パイ。 なので、これは、えーと、 メインエンドブレーキの方に行きます。 えーと、ここら辺、ストラクト。 ストラクト、プライベートでもね、ストラクトいいね。 ストラクトに対して、プロパティネーム。 プロパティネーム、いや、イーナムネーム。 この時、イーナム別に、 ローアーキャメルケースじゃなくていいですね。 ローアーケース、ローアーキャメルケースで、 あ、そっか、あともう1個あった。 イーナムで既に定義しちゃってるんで、 このままだとダメですね。 イーナムにすると、えーと、ケースがあって、 名前空間をね、ちょっと作りたかったんですけど、 これだとダメですね。 名前空間、名前空間が売れないとなると、 うん、とか、イーナムで定義。 イーナムで定義でユーザーインフォーで、 できなくはないか。ユーザーインフォーの中に、 あ、で、それが展開されているから大丈夫だ。 できますね。なので、やっていけばいい。よかった。 えーと、この中でストラクト。 で、型名ですね。 で、この型名が、この、えーと、ローアーケース。 イーナムネーム、これローアーケースなんですけど、 これが、ここで2カ所くらいで使っているのか。 うん、まあ、じゃあ、そうしたら、えーと、何だろう。 イーナムネームとか、えーと、劣況型の名前ですよね。 劣況型の名前として、うん、まあ、いいのか。 えーと、お持ちになっていないやつ。 これはね、今足りないんですけど。 これは、イーナムネーム。 こっちがイーナムネームなんですけどね、本来ね。 だから、どうしようかな。 ローアーキャメル、ペアレントネームと、うん、ローアーキャメルケースで、 なんか毎回調理するのもったいない気はするんですけど、 わかりやすさの都合で、今回、毎回やりますか。 そうすると、えーと、イーナム、イーナムだから、 エレメントネームではなくて、ここが、これでイーナムケースの、 ローアーケースと、ペアレント、うん、うん、ペアレントは、 ここが、これもだね。それで、イーナムネーム、この辺。 この段階でローアーケースをね、作ってあげるみたいな風にして、 それで、プロパティ名は、プロパティネーム。 プロパティネームも、あ、プロパティネームも、テキスト。 これで、えーと、このプロパティのマッパーで、エレメントに対して、パラメータファースト、 ディスクリプションをやっていて、ネームは ね、こんな感じで作ってあげて、そうすると、プロパティに対して、 ネーム、プロパティがね、揃っていった。 あと、イニシャライザーが欲しいですね、この方に対してね。 この方に対して、どんなイニシャライザーが欲しいかって言うと、えーと、 どんなイニシャライザーかというと、これでもAPSとか打ってて、 これは、もしかして構造が、なんか、出てかできたかな。 えーと、プロパティを作って、で、ビジットして、 最初の、ある劣化型を見つかった時に、その劣化型で、 その劣化型に対して、えーと、 中で打って、まあやってみますか。 だめな気がしてきたんですが、 ま、やってみる。 あ、えーと、これで、プロパティでストラクトを作って、 で、それで、ここでイニシャライザーで、 イニシャライザーでは、何をするかって言うと、 イニット、これが、でも、プライベートイニットファイル、 プライベートイニット。 で、ユーザーインフォ、そして、えーと、 ドリング、エニー、これをね、ドルイニシャライザーを作り、 で、それで、後から、プロパティか、 プロパティとして、ユーザーインフォを取り、 そのユーザーインフォに対して、 渡してあげる、いろいろ。 えーと、だから、レイジバ、 嫌だな、レイジバはあまり使いたくないな。 レイジバが必要となると、プロパティか、 プロパティで、Eがあって、アクセスって言って、 で、FPSとか色々アドっていく中で、 今作ろうとしているのは構造体でね、 名前空間を整えていこうと、 そういった発想を今作ってるんですけど、 これはちょっとややこしいかもしれないですね。 ちょっとやり方変えましょう。 やり方変えて、えーと、どこまで戻すかね、 この辺までですかね。 この辺まで、この辺まで、この辺まで、 この辺まで、こうしたときにテストがタブるのと、 あと、名前がちょっとばかり よろしくないという状況になっているので、 ここでやることとしては、ユーザーインフォの コンテンツの回数に応じて、 名前を作っていきたいということですね。 そうすると、えーと、このどこだっけ、 エンクロージングEナムですね。 まあ、エンクロージングEナムも そうなんですけど、 えーと、プレフィックス、ペアレントEナムネーム、 ペアレントEナムネームは、 ユーザーインフォ、エンクロージング、 エンクロージングEナムが、これを繰り返し処理で、 名前を取っていく、ワイルドでいけるかな。 えーと、ここで、Mとしてワイルドループだとすると、 番数が欲しい感じですかね。 なので、ここで、プライベートスタティックファンクかな。 それで、メイク、ペアレント、エナムネームという形にして、 それで、戻り値がストリングというふうにして、 こうして渡すのが、メイク、ペアレント、エナムネームノードから、 ノードが、メイク、ペアレント、エナムネーム、 オブ、ノードとして、ノードは何が取ったっけ。 ノードは、アドリビュー、どっちだろうね。 これは、ビジターの中のノードだから、 ENAMで来るシンタクスだ。 なので、これで、ENAMで来るシンタクスから、 名前を取っていくときに、これで、順々に辿っていくときに、 いろいろ考えられるけど、 結構今不意に思い浮かんだものとして、 レッド、ペアレント、ターゲットかな。 ENAM、シリーズで取っちゃったら面白いのかなと、 普通思ったけど、意外と面倒ですね。 意外と面倒になりうるので、 ここは素直に、ファイルループですね。 そして、ノード、ノードじゃない、ノードでいいのか。 ノードイコールノードから始めて、 それで、この中で、オプショナルで始めて、 で、それで、いきなりニルのことはないから、 2ですよね。それで、リピート、リピートですよね。 リピート、で、ファイルか。 リピートファイルのコンティニューってどうなるのか。 そういえば、条件判定は? っていうのがすごい気になった。 やりにくいかな。 ループを作って、また、静かに考えればいいでしょ。 リピートファイル、で、ノードね。 リピートファイル、ノード、ノード。 これ、ノードのノードですけど、これはどうだ。 EnclosingPnodeがこうしてあげれば、 あるノードの親がいきなり取れてますよね。 その中で、リピートファイルじゃなくて、 ファイル分なら扱いやすそう。 ファイル、ファイル、ノード、ファイル、 ファイルノード、ファイルレットノードでいいのかな。 リフレット条件判定ってこんなところで使うのか。 使わないんだ。リフレットノード。 それで、親の名前が取れてるんで、 この時にノードを、もう1個ばかりありますね。 リザルトでいいのかな。リザルトにするか、 リナムネームでリザルトでいいかな。 それから文字で作っておいて、それに対して、 リザルトプラスイコールノードのネームのテキストですよね。 で、押してあげると名前が出ますけど、 名前が付いた時に、これが連結していかないといけないのか。 連結していくわけだから、これでアレでやっていくには 大丈夫ですね。 意味がいらないので大丈夫ですね。 これでリザルトを出していくわけですけど、 そうすると、ユーザーインフォ、 これが出てきてしまうサイドね。 なので、エンクロージングインナムなんですが、 ワイルドノードのネームのテキストが、 ノットイコールだな。 ノットイコールユーザーインフォだった時。 そうするとユーザーインフォを除いて、ループが回って、 ユーザーインフォまでループを回していって、 名前を出していくということがこれでできたと。 そしたらリターンでリザルトに対して、 ドローアウトキャメルケースで押してあげる。 そうすると、名前のアピールレットインナムネームが 出来上がるんで、どうしたらこれをどこですかね。 プロぱっぴーこ。 プロぱっぴーに対して、 さっきのプロぱっぴーの上にある、 ペアレントインナムネームだ。 ペアレントインナムネームがここ。 ここで呼ぶ。 セルフの・ヘヌルヘノムのノート。 これで名前が出来たので、なすると、 ペアレントインナムネームがここで期間外の、 ペアレントインナムネーム インナモネームはペアレントインナモネームの人 Vert personality。 インナモネームもここ、ダメですね、 それもインナモネームの中で、 ロアキャメルケースですが、インナモネームも違います。 インナモネームはペアレント取ってから、 インナモネームで、 これからの可能性がありますね。 ペアレントノードネーム。 まああということはいいのか。 ペアレントインナモネームを出すことの、ノードネーム。 これをロアキャメルケースです。 ロアキャメルケースではない、ロアキャメルケースです。 そうすると、インナモネームって、 小文字から始まっていけないんでしたっけ? ここが2つあって、ローでここで変わってますね。 インナモネーム、インナモネームか、あとは大丈夫ですね。 インナモネームでよくなりましたね、むしろね。 なので、ロアキャメルケース、これはいらなくなり、 ペアレントもいらないですね。 もうやってやりますもんね。 ロア、ロア、キャメル、イザルトのときがありましたよね。 それで、インナモネームもローでやって、 ここにペアレントネームが空の場合があるんでね。 そのときに読んじゃってるけど、 結構もったいないけど、流しますね。 そうすると、上も忘れてるのではないかみたいな、 そんな心配が出てきちゃうような気がして、 ペアレントネームが空だったときは、みたいな風に、 やってもいいのかなという、そんな気がするんですけど。 えーと、だから、ペアレントネームのテキストを、 そうですね、ちょっとそれやってみますか。 Switch、ペアレントインナモネームisEmpty。 これがブルーケース。 ブルーだったときには、空っぽだっていうことなんで、 ノードネームテキストのロアキャメルケースですね。 フォルスだったときには、ノードのペアレントインナモネームに、 ノードネームテキストそのまま出せば完成ということですね。 こっちの方がやってることは一緒で、 取り捨てもそんなに変わんないと思うんですけど、 こっちの方がね、いいとしてロアキャメルケースを 読んでいるよっていうのがね、分かってくるので、 多分いいんじゃないかなという気がする。 これでできたのかな、ちょっとビルドかけてみますね。 ビルドかけると、エラーは出るのか出ないのか、 ループが延々なのかどうなのか、 ループ延々な可能性なのか不安になってきた。 これファイルループ、ループの中でやらないとダメですね。 今、無限に頑張ってるでしょ、きっと。 だから、これでファイルループ、 バイザルとノードでEnclosingEnumにして、 ファイルで、そうそう出しちゃってるでしょ。 なので、これを出すわけですけど、 それからこれはノードで、 ノードはEnumTickleSyntax、 EnumTickleSyntaxのオプショナルですね。 それで、ここの中で、ループで、 ノードのノードイコール、EnclosingEnumで、 これはエラーになってるのかなんだ。 オプショナルかオプショナルのオプショナルか、 これか。 ノードEnclosingEnumで、ファイル、リピート、 リピート、EnumTickleSyntax、EnumTickleSyntaxの上がダメですね。 EnclosingEnumがオプショナルはいいですね。 ノードが上で入ってますね。 なので、これがリピートですね。 リピートで、リピートで、リピートでファイルなんですが、 リピートで、リピートの中で、 ガードレッド、リピートガード、ガードレッド、 条件がこのガードレッドでコンティニューしちゃうと、 より押しなくなっちゃうノードを代入していっていいのか。 これで、まずノードイコールを進めて、 あれダメなのか。 EnclosingEnum、EnumTickleSyntaxがメンバー、 EnclosingEnumを持っていないノードが、 EnumTickleSyntaxですね。 EnumTickleSyntaxでEnumTickleSyntaxで、 EnclosingEnumを持っていない、 下の影響か。 これはいいんだ。 これでリピートファイルで、 ノードのネームが、 ユーザーインフォではない間、 レッドノード、リピートだと頼りすぎばダメですかね。 なので、ノードで、EnumTickleSyntaxでリピートで、 EnclosingEnumを代入して、 それで代入をして、ここでノード、 ここも同じように押すね。 パーノード、イコール、ノード。 これで、ノードはEnclosingEnumで、 それでEnclosingEnumなんですけど、 ガードレッド、2部のファイルなのか。 ガードレッド、ノードで、 ノード、ネーム、テキスト、ノットイコール、 ユーザーインフォ、エルス、ブレイクですかね。 それでブレイクが終わったら、この中で出していく。 リザルトで、ノード、ネーム、テキスト。 ノード、ネーム、テキストを2回割ってる。 あと、ブレイクが効いてない。 リピート、あとがリピートだからですね。 リピートファイル、リピートファイル。 ここで条件を満たすというか、 もうすでに解除しちゃってますね。 だから、リピートファイルじゃないのか。 ニルでなくなるまで繰り返すっていうね。 私たち方の一番シンプルに見えるものといえば、 Equalsですね。 Equalsを使いますかね。 シーケンスを割っていくとすると、 ニルになるまで×ユーザーインフォでなくなるまでという形で、 その形でReduceが回せるんですよね。 Reduceが回せると良い感じには確かになる。 Reduceを回すための準備をして、 Reduceを回す。 Reduceを回すのには、それも一つありますね。 どうしようかな。 ホワイルループが思ったよりきれいに 書けないなというのがあって、どうしようかなこれ。 ペアレントでしょ。ペアレントのもの。 だから、でもループ1はループでいいとして、 ホワイルでずっと回していくという中で、 ブレイクは、ブレイクオンリアロー。 リピートはブレイクできないのか。 ホワイルループでもいいんですけど、 もっと代入してニルだったら、 C言語だとできるんですけどね。 これができないとなると、しょうがないな。 どうすると、Doブロックですか。 Doブロックで、どうしよう。 何しときにしよう。ループ。ループ。 まずループでいいかな。 ブレイクループ。こうする感じですかね。 これで状況を満たせばループ抜けて、 それ以外は回っていって、 今度はエンプローチングになるものを やっていくということになりますね。 ビルドがどうなるか。終わるかな。 終わって、長いエラー出てますね。 終わっていったエラーとしては、 ここの中のプロを展開すれば出てくるんですかね。 エクスパンド。あれ、これはどうかな。 展開すると、この辺ですね。 アーズストリング。あ、そっか。 オプショナルではなくなっているからかとか。 今まで作ってたのはどうなってましたっけね。 コンテント。 これですかね。 今まではオプショナルか。 オプショナルで与えられたならば、みたいな作りにしたんですね。 まあでもこれは、与えられる前提でいいのかな。 前提でいいかどうかで、ビッグリマークにするかどうか 決まってくるんですけど、うん。 いいか。 与えられる前提にしましょう。 使用上、ないことがありますよとは言われてないので、 ということでね。 そういった感じにすると、 ここでやることは、エンプロですね。 強制アンラップしてあげれば良い。 どっちを強制アンラップするかなというのがちょっとあって、 どっちにしようかな。 プロパティ名にしようかな。 それでも一応バーでカットしてプロパティ名ね。 これでオッケーなんですけど、 まずもう1個気になるところがあって、 フェースアラートとかこういったところは名前が 期待通りに作られてるくらいなんですけど、タイトル。 これがちゃんと取れてないですね。 タイトルがずばりタイトルになっちゃってて、 これはプレフィックスの付け忘れですね。 単なるね。 なので、えーと、どこだ。 プロパティネーム。 あ、この辺か。 プロパティネーム。 これですね。 プロパティネームではなくて、 えーと、この中でエクスパンションする前に、 ネームイコール。 ここもスイッチ文か。 同じ雰囲気になっちゃうと使い回してる感が出てきて困っちゃいますね。 えーと、どうしようかな。 でもこれなんですよ、要は。 スイッチ文でプレフィックスで、エアレントイーナムネーム。 あ、これいいな。 イーナムネームが取れてる。 イーナムネームが取れていて、イーナムネームの中の新たに、 だからイーナムネームの、 ここのネームを作る必要はなくて、 0-0-0のイーナムネームでしたね。 これに対してプロパティネームをつけるんですけど、 このネームをつけるときに、えーと、もうすでに文字ですか。 これを、ローアじゃなくて、アッパーキャメルケース。 アッパーキャメルケースね。 これをちょっと追加しないといけないですね。下の方がですね。 ローアキャメルケースと、アッパーキャメルケース。 コードは全く同じような雰囲気で、えーと、アッパー。 ここが、これは共通コードとは言えないかなという気がするんで、 ここをリセットすればいいわけですよね。 だから、0-1のここが、0じゃなくて1になって、 ニュアスキーバリュー、これをANDでね、変算してあげる。 こういう風にすると、できた、ビルドができるというのが終わって、 展開も終わった、もう1回閉じて、展開をね、もう1回やるとすると、 エクスパンドしたものが、APSとAPSアラート、いいですね。 で、それで、APSアラートタイトル、いいですね。 うーん、できた、できた。こんな感じで、展開して、ね、できましたね。 これで良しということです。 あとは、インデントがまだ気になっているんですけど、 これを、うーんと、これをどうしますかね。 そうだね、これを、Appendで、アザリを続けていきたいんですけど、 この時に、for-property-propertiesでエクスパンションでしょ。 エクスパンションを使うときですね。 エクスパンションを使うときに、使っているのが、 ここですね、ここですね、エクスパンションを使うときに、 .mapでいいのかな。 これでMapで$0、$0というか、えーと、えーと、なんだ、Syntax、Syntax。 で、Syntaxの、えーと、TreeP、 あ、えーと、なんだ、ReadingTreePが、これはダメなのかな。 えーと、あー、戻り気になっちゃう。 これだとね、declSyntaxでしょ。 これをdeclSyntaxの、で。 イニシャライザーは何回もあるかな。 declSyntax、えーと、今、打ってるのは完全にdeclSyntaxか。 なのでdeclSyntaxの、えーと、この中の、 ユニットの中には、Syntaxからのイニシャライザーでしょね。 それがあるのと、Reading、えーと、これだけか。 Syntaxプロトコルから、Tool、これで、Syntax。 これはできるでしょね。 なので、こうした後に、えーと、Syntaxイコール、 そしてSyntaxのReadingTreePに対して、 Nodeの、Nodeかな、入れてみようと思ったけど、 これはダメか。あー、ですか。なるほど。 じゃあ、ダメですね。うん。うん、なるほど。 じゃあ、まあいいや。ここは、ちょっと怖いような感じで撮られたけど。 よし、そして、じゃあ、ここにアンティストが邪魔ですね。 これね、何してんだっけ、これは。 メンバーで、メンバーがあって、ユーザーインフォーが、 あ、違う、えーと、ユーザーインフォーがあった。 ユーザーインフォーが見つからなかったときですね。 なので、テストじゃなくて、純粋に何も活用しないよって、 それだけの話でしたね。はい、これで完成した。 うん、で、これによって完成したので、えーと、 そうすると、このようなノーティフィケーションコンテンツ。 これの作りがね、自分が変わってきて、 ここの作りはいいですね。で、それでマクロを用意してあるんで、 ここのプロパティたち、これを全部消してしまう。 で、これで、先輩者にもなくていいか、ビルドをかけて、で、押したときに、 プロパティがないというね、やらがいが出てくるんで、 タイトルがないよっていうときに、コンテンツに対して、 ユーザーインフォー。ユーザーインフォー。 ノーティフィケーションコンテンツ、これがユーザーインフォー。 プライベートでも、ユーザーインフォーコンテンツの、 エフィケーションコンテンツ?コンテンツってユーザーインフォー。 これを作って、プロパティ消しすぎ。 ノーティフィケーションコンテンツの中に、 ピョーキューしているだけだからいいですね。 なので、ユーザーインフォーを、開くさなくてもいいか、 開くさなくてもいいですが、マクロを展開すると、 マクロが不完全なのかもしれないですね。 なので、マクロが不完全、マクロが不完全か。 エクスパンドで、その中身しかやってないですよね。 だから、プロパティ、ピジットの中で、 イーナムの中で、ピジットイーナムテープルシンタックスでしょ。 なので、ピジットを一緒に、 これですよね。 ノード、ノードがこれじゃなかった。 イーナムデクラレーションのメンバーブロック。 これを渡しちゃったんで、イーナムデクラレーションの中の、 要は1個目ですかね。 ユーザーインフォーだとかどうかで、ユーザーインフォーに対して、 やっていかないと、オーバーがいけないんだ。 こうすることも、余計なプロパティを取っているんじゃないかな。 インバイントリデクラレーションユーザーインフォーですよね。 でも、こう感じてすればいいのか。 イーナムビジターで、プロパティを売るときに、 イーナムネームアペンド。 ここでユーザーインフォーを除外してあげれば。 ユーザーインフォーを除外する。 それか、それを除外しないという点もありますね。 デクラレーションで定義を見てみると、ユーザーインフォーって、 こうなっちゃうのか。 なるほど、セルフ自体ね。 セルフのユーザーインフォー。 セルフのユーザーインフォーってわけにもいかないですしね。 ユーザーインフォーだったら、ユーザーインフォーをする。 これはモーターセールでいいですかね。 なので、どうするとユーザーインフォーだったら無視するというコードで。 ちょっと無理を感じるんですけどね。 また再度リファクタリングすれば、なんとかなるんですかね。 とりあえず、じゃあそうすると、 このプロパティを作るときに、 イーナム、M、イコール、ユーザーインフォー、 イコールじゃない、ノットイコールだったらば、 という形を取れば、任せればね、 ビルドソウルでしょ、きっと。 あ、どうなった。メンバーランドマークIDをまだ持っていない。 これでもまだ持たないか。 どうなってんだ、つまりユーザーインフォー。 ユーザーインフォーランドマークIDか。 どうなっちゃうのか。 ユーザーインフォーランドマークID。 あ、なるほど。ユーザーインフォー。 ちょっとルートが厄介ですね。ルートが厄介だから、 もうちょっと共通化した方が良さそうですね、コードね。 なので、これまた今度にしますか、とりあえず。 やりたいことも、ちょっと色々ありそうな気がするんで。 ここで、コードを戻していって、 メンバーブログね。この中で、X2ですね。 現状では、ユーザーインフォー型に、 インフォーに直接持たせたSが、 プロパティに搭載されないので、 それも、あそこがずれちゃうのか。 ないので、ビジターのプロパティを出力するコードを共通化して、 ENUMデクラレーション自体にも、 直接適用する必要がありそうな気がする。 なので、これを次回やっていって、マクロを完成させて、 完成したマクロに置き換えていって、 あと、リファクタリングね。 コードが雑になっているところがあるので、 直していくということをやっていくことにしましょう。 今日時間になったので、これで終わりにしましょう。 お疲れ様でした。
