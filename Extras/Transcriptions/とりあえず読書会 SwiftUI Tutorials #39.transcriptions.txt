Transcription & Summarize : とりあえず読書会 SwiftUI Tutorials #39

はい、ではとりあえず紹介を始めていきましょう。 ウィフトUIチュートリアルの最後のとこまで言って、前回デバッグですね、デバッグ、そう、がうまく動かないところが一箇所あって、それを直すということをやっていて、それが終わったらリバッグフリングもやろうと、そういった感じで進めていたんですが、バグの方が結局取れずに終わった感じなんですよね。 原因はまあ、だいぶ掴めてきたかなという感じではあるんですが、まあそのあたりをもうちょっとだけやってみて、バグが取れればですね、取れないのはちょっとまずいんですが、でも今のところちょっと難しいなという感じになっていて、終わったとこですよね、これはね。 まあまあまずやっていきましょう。 バグとしてはね、このマックOS用アプリ、他のOSどちらかなんでしょうね、まあでもマックを直せば大丈夫でしょう。 このリストを選ぶときに1回目のクリックだと無視されちゃうというね、今クリックして一瞬選択されてこれで消えちゃった、でもう1回押すと大丈夫だよというそういった感じで、これは1回できればもう大丈夫なんですが、コマンド押しながらクリックを押して1回ね、選択をリセットしてしまうとまた同じことが起こる。 例えばこの2番目の押してあげるとこれで1回選ばれて無視される、でこうなったときに同じの選ばなくてもどこでもいいのでもう1回目は大丈夫という、こういったふうになるのはリストの動きの問題みたいですねとりあえずね。 リストが実際に表示しているもの、これがセレクションがニルだったとき、この次選んだときにどの細病が発生してしまうというね、そういった状況っぽいですね。 1回選ぶと、このニルからちゃんとバインドされているところに対しては、ピカリと両方が与えられている状況になるので、次からはニルから変わったという変わり方にならないというね、こんな感じで実間が合うということなんですけど、これの問題がちょっとまだわかんないんですよね。 一つ言えることとしては、セレクションをバインドしないとちゃんと動くというね、そういったところがあって、これをどう直していくんだろうという、こんな感じ、なんかリストですよね、何とかリスト、ランドマークリストかな、このコードの中で問題となっていて、このボディのところにあるリストですね。 ボディがどこだ、えーと、ボディランドマークリストここですからね、ボディのリストですね、リストを4位置と代替させても問題は変わらずというところですね、とにかくこのセレクティブランドマークID、これがある以上、預期値がニルだとダメというね、預期値じゃない、ここにニルがバインドされるとダメという、そういった状況になっている。 この辺りはね、なんでなんだろうなというのは、すごく謎なんですけど、類似するものをちょっと作ってみたらちゃんと動くと思うんですよね、きっとね、やってみますか、例えば新しいファイルで。 プロジェクトでいいですかね、それでこの中で、OSでやっているのでOSアップで良いでしょう、それでリストのデバッグかな、といった風な名前にして、そういうUIでOKですね、こうしてあげて、とりあえず作って出来上がったもの、この中にオーサーインフォメーション、例えばオーサーネームがこんなので、メールとかもいるのか、どうしようかな、メロイカ、とりあえずはキャンセルしただけれど、押し上げてコンテンツをこの中で試してみればいいですかね、それでやることとしてはこの中でリストを作りますよね、まずね、リストを作って、そのリストの中でセレクションですよね、セレクティブバリューの感じだと、バーIDで IDにしますかね、これをオプショナルで持つということにして、これをバインディングしてあげる、リストのセレクションとしてからID、このコンテンツとして、さっきのコードだと、4-1でしたよね、4-1にしてあげて、4-1の中で表示するものが、エンバイロメントでしたけど、ここにどうしますかね、ステートにしますかね、どっちでもいいか、エンバイロメントでもいいかな、エンバイロメントにしましょうか、そうするためには、 オブザーバブルでプラスで、そして、この中にバーとしてIDと言う感じで、イントの配列を持たせるという、コードにするか、イントの配列じゃなくていいですね、コードを大胴体に、大胴体で、その他に例えば、オブジェクトだとプラスの名前に見えますけどお、大胴体プラスどっちでもいいかアイテムにしますかね、アイテムにしてこれがバーでIDとしてイント型を持っている、ネームとしてストリングを持っているみたいなね、このスペートはアイテムと同じだから、スペートと言えばコンテナですかね、それでアイテムはアイテムの配列、それでイニシャライ で、アイテムの例えばIDが2番でA、で、アイテムの5番でB、で、他にアイテムで7番でCとかね、で、アイテムの10番でE、ま、こんなところでいいですかね、で、こうしてあげて、イニシャライザーがかんばった、ね、かんばっ、ん、れ、れ、だった、アイテムのイニシャライザーがアーギメントがあったとか、アーギメントのIDとネームが、これを忘れてましたね、これはFixedItより書いた方が早そうですね、ID、おーっと、失敗した、えーと、ID、あれ早すぎるかな、ID、あ、で、そっちに行っちゃうんだ、なんでそっち行っちゃうんだ、あれかそれかどんなくなったら面白いね、 で、これだけでいいのか、で、これで、とりあえずプレビューに、.Environmentとしてコンテナーをね、初期化して入れてあげるので一緒に、あとアプリの方もこれ持たせておきますかね、忘れないうちに、こうして、Environmentでね、コンテナーを、あ、そっか、で、取りに行った、あとステート、プライベートバー、プライベートバー、コンテナーとして、コンテナーですよね、うん、で、そうしてあげて、Environmentに対してコンテナーをね、渡してあげる、いいんでしたっけ、コンテナー、そうですよね、うん、って言われていいやつとして、で、このときに、インデックスでのIDが見るのとか えっと、あ、そっか、OE1でこれで、アイテム、いいんですね、で、そしてここで、アイテムのネームっていう風にしてあげると、これで名前が表示されたリストが出てくると思うんですけど、これの最初の選択ですよね、この選択がうまくいくかどうかって、この最短距離で書いたリストだったらうまくいかないはずがなさそうに自分は見えるんですけど、分かんないのかどうか、で、あとなんかプレビューができていないって言われてますね、えっと、移動できてないか、アプリ、とりあえずビルドかけてみましょう、ビルド大丈夫ですよね、じゃあいいや、実行したい場合でしょう、で、実行してリストが出てくると思うので、 やっぱりね、だからどっかが山を押してるっていうことでしょう、で、コマンド押しながら一回カラコンにして他押したとき選べますよね、で、こっちがチュートリアルで作ったやつなんですけど、 これは選べるときはいいんですけど、一回何も選択してない状態を作った後に何かを選ぶと、これが無視されちゃうんですね、一回選ばれた瞬間無視されちゃうっていう、ここですね、なので作り方は他が影響してる感じですね、 ディテールの方にはあんまり意味ないけど、アイテムのIDとネームこの2つを表示することにして、ラベルには名前だけ、こういう感じにしてみましょう、これで動かしてみたときに、これくらいだったら動くでしょうと思ってるんですけど、どうだろう、クリックしてみましょう、あ、ダメだ、これだけでダメだ、もうなるほど、今もう大丈夫ですよね、で、これコマンドでクリックすると危ない状態になって、この状態でBを一回クリックすると、お、再現しましたね、早いですね、結構な短距離で決まった、とにかくそうすると、ナビゲーションスプリットビューの中のまずナビゲーションリンクですね、ナビゲーションリンクを例えばやめて、エキスト これが例えばこうやってナビゲーションリンクの中身を例えば何も入れない、まあ何も入れないのも気持ち悪いんで、emptyで入れてみますかね、要はアイテムに依存しない、入れたときどうなるんでしょうね、こうすると選択すると、あ、これもダメですね、だからもうナビゲーションリンクの段階でダメと、ナビゲーションスプリットビューか、ナビゲーションスプリットビューの段階でダメということになったらちょっと手を切っちゃうのかな、どうなんだろう、ナビゲーションスプリットビューでリストでリストが入れる、どうなんだろう、で、4-1で、あ、まだナビゲーションリンク使ってますね、ナビゲーションリン クリアしたねって言いましたね、4-1ね そういえばナビゲーションスタックっていうの出来てましたよね、iOS、MacOSどっちだろう、ちょっとまだよく分かってないんですけど、ナビゲーションスタック、これのソフィスとUIのね、これを調べてみると、ナビゲーションスタックの使い方どうでしょうかな、Appleのドキュメントからまず見てみますか、ナビゲーションスタックは、ルートビューと、ルートビューを表示して、ディスプレイ、ルートビューを表示するビューと、Twitterのビュー、ルートビューの上に表示するののTwitterのもの、で、MacOSは13から、まあまあですね、ナビゲーションスタックでデータとルートという形を取って、それでナビゲーションスタックでナビ ビューを追加、スタック、クリックとトラック、ナビゲーションリンクをトラックする、これが出来るものらしい、他にビルトインのビューを使って、ビルトインプラットフォームに適切なコントロール、リムーブビュー、ユーティングビルトインプラットフォームに適したもの、バックボタン、スワイプジェスティアといったもの、これを、コントロール、リムーブ、ちょっとよく分からなかったけど、これは位置を良くしておきますね、こうしてみると、適切なコントロール、スワイプ操作などを使ってビューを削除する、そういえば先の提供されたことだ、スタックは常に ナビゲーションリンクを作るのにビューをデータタイプ、ナビゲーションでディスタイニティションメモディファイア、これを使ってデータタイプ、あ、それを加えてビューのデータタイプと ビュープレパート機能を割り当てる。それからナビゲーションリンクが表示されるもの、同じタイトルサイドと同じ種類のデータでバックボタン、それを表示するナビゲーションリンクを除去、次のスタックはDisk愛好作りはディスプレイとPARKのデータを表示する。 パークのデータを表示する。ナビゲーションスタックで始まり、ディストでパークスで、パークスはナビゲーションリンクのネームとバリュー。ナビゲーションリンクでこれ、ネームとバリューってのがちょっと気になりますね。今までやってない気がする。 とにかく、ナビゲーションディスティネーションフォーパークセルフ、これはパークを取って、ディティールズ、そのパークを表示すると、うん、なんか全然使い勝手が変わってるような気がするけど、とりあえず、そうすると、ディスティネーションと、あ、リンクか、はい、なるほど、これを使ってみますか、ちょっと。 これでノーンかな。これが今作ってるデパクト用のビューですね。なので、ナビゲーション、あ、そっかスクリプトビューはナビゲーションスタックとちょっと違いそうね。書いてみますか、一応。ナビゲーション、パーク、こうやって、それでナビゲーションスタックの中で、おっと。 ディスティネーション、ナビゲーションディスティネーションフォーパークセルフ、これ、何だっけ。 そう、ナビゲーションディスティネーションフォーパークセルフ、なので、ディスティネーションを、Hashableとの間、Hashableを取るもう一個の実装、えっと、イニシャライザー、これ、あ、何ちがうな。 ディスティネーションとして、アイテムを受け取って、ここでコードを何か書くという感じなのかな。ここがですね、バインディングアイテム、オプショナルディパス、ここで、ナビゲーションディスティネーションの、えっと、どこだっけ、えっと、サンプルは、ないんだ、ここのアプリのドキュメントですね、この中でナビゲーションを作る時に、型を指定してましたよね、フォーパークセルフ、あ、でもここだったらいいのか、このアイテムがエラーになっちゃいましたね、コンバートできないバインディングアイテムの配列から、パーキュメントバインディングオプショナルのB、これにバインディングでき ここで求められているのは、ディスティネーションのOじゃなくて、イニシャライザー下の方でしたっけ、あ、ここか、違いますね、えーと、あ、ここだ、ここの中でディスティネーションでアイテム、バインディングでオプショナルDで、ディスティネーションはDを受け取る、だから、配列を受け取ってる、で、Dを返す、うん、Dを受け取ってCを返す、で、Cは、完全に任意ということなんですかね、あ、違う、このCは、えーと、型が持ってるCですか、えーと、持ってるんですかね、ナビゲーションスタッフ、うん、持ってそうな感じが分からないですが、で、頂ってみればね、いいのかな まあ、そういうことかな、ではまあ、どうすると、これじゃないですね、えーと、どうすると、ディスティネーション4でパッシャブルタイプ、これを受け取る時に、パッシャブルのタイプだからアイテムのセルフですかね、で、これでディスティネーション、ディスティネーションは、えーと、こうしてアイテムを受け取ってですかね、で、それで何かをするよと、で、何かするっていうところでは、ビューを3回してあげて、このビューはさっきので言うとナビゲーションリンクの本体ですね、おそらくね、だからこれ、何やぞ、ちょっと拝借して合わせてもらって、で、ナビゲーションスタッフの中では、これを アイテムズですね、で、それでアイテムズインで、で、それでこの中で、アイテムズじゃないや、アイテムインで、あ、で、それでエキストじゃないや、ナビゲーションリンクですね、なので、ナビゲーションリンク、で、タイトルキーとバリュー、これを表示しようとしてますね、いや、これっていいか、で、タイトルキーは アイテムのネームですね、バリュー、バリューはパッシャブル、バリューはアイテムズインですか、わかんない、で、これでバリューパークがあってそうですね、ナビゲーションリンクでパークネーム、あ、文字でズインだ、だからこれスタミングインターポレーションとかじゃなくて普通にアイテムのネームとかにして、で、それであとはリストがエラーになってますね、リストは、アイテム、アイデンティフィアブル、それに準拠していないといけない、あ、これは、えっと、IDをセルフじゃない、IDっていう風にすれば大丈夫ですよね、これでちょっとナビゲーションスタッフも用意したので、と思ったけど、ワイン� で、ビルドを掛けて、で、そうすると、あと同じバインディングになっちゃってちょっとやりにくいんで、ナビゲーションスクリプトビュー、これを一旦止めてみますけど、でもナビゲーションスクリップビュー止めてしまうとちょっと問題ですね、あれはこれで、うんこうなって、で、それで選ぶことはね、できるんですけど、ナビゲーションスタッフとしてよしなに表示させるっていうことが、ちょっとね、これだと難しくなっちゃいますよね、うん、だからこれをナビゲーションスクリプトビューを生かした状態で、無理ってね、ちゃんとやっていかないといけない、そのナビゲーションスタッフはやらないで、これで実行かけたとき、この時ですね、えっと こんな感じで困りましたね、これね、ナビゲーションリンクを置いてしまって、それを選択して画面が表示されると、リストがリセット一回されちゃう、うん これは、なんか簡単そうなんですけどね、簡単そうな割に難しいですね、これどうにもなんないって言ったらいいのか、自分が単にね、あのリスト周り、ナビゲーションスクリプトビュー周りがちゃんと使えてないっていうね、そんな可能性も考えると、ナビゲーションスクリプトビューを調べていけば、まあいいことあるのかもしれないですね、これやってみますかね、うん まあでもこの最短距離でね、再現できた気がするところはとても良かったですけどね、簡単に再現できた方が楽でいいんですよね、リストが配慮がされてしまうコンテナのアイテムズ、アイテムズを例えばハッシャブルにしていないアイデンティフィアブルにしてみましょうか、こうしたときにはアイデンティフィアブルなので、IDを明記しなくて良くなりますよね、ここでね こうしたときに、これだけで上手くいくとは思えないですけど、上手くいったら嬉しいんでね、やっておきますが、これでCを選ぶと、エヴァって言いますね、うん あとは、言っている、これが例えば最初何もないとかそういった状況でやるとどうなるでしょうね、この状態で何もない、選択、エヴァって言いますね、そうすると、リアルの方位置の中でエンバイロメントを使っているというのも1個ありますね、例えばこのアイテムズをエンバイロメントではなくて、ステートにしますか、ステート、プライベート、バー、バリュー、何だっけ、アイテムズ、そして、ステートで持たせて、で、このアイテム、コンテナじゃなくてね、この持ち物のステートのアイテム、このときにどうなるかというのも結構重要になりそう、例えばBを選ぶ、ダメですね、これもダメか、じゃあ、ありにこれが 一応こうなったら、エンバイロメント一回なかったことにしてみましょうか、こうして純粋にアイテムズだけで動く、そういった最短ルートで、これダメですね、うん、なるほど あと考えられるのはオプショナルですね、このオプショナルをやめて、例えばゼロみたいな存在しないアイテムを入れてあげる、まあまあこれは大丈夫なんですよ、ヌルじゃなければこれ選べる、一回選べれば動く、これはいいんですけど、一回またコマンドクリックなんだっけ、リセットできないですね、コマンドクリックが効かない、そうなんだ、それならいいんですけど、これがヌル、あ、そっか、オプショナルを、今やめましたっけ、あ、そっか、オプショナルをやめたから、だから選択できないという状況が存在しないという形になって、この中でゼロとか設定してあげると、それはもはや選択しにないという状況になるので選ばれていない、 最初はいいですけど、これで選択というのが起こらなくなるので、これなら安定的にネットを出しますが、でいいんですかね、ヌルだったときが何でおかしいのかがわからない、まあとにかく原因がわかったので、あとDPTにいろいろ入れてみますか、 例えば、スウィフト系のお話を言いたいのですが、スウィフトUIのナビゲーション、スプリットビューだけあってたかな、あってますね、ナビゲーションスプリットビューを使ったOSアプリを作っています、 その中のこのナビゲーションスプリットビューの最初はサイドバーが、イニシアライザーサイドバーですね、なのでこのサイドバーでリストを使ったとき、それに関連付けていて、それにオプショナルな型を関連付けていて、 このサイドバーの1か、キッチンが2かを持っていると、すると最初のリストクリック時に、 fontsRawの行が一瞬選択された後で非選択の状態になります。これの回避方法でくださいと、私もちょっと聞きましたね。 これで通じるのかな。よくわいたる問題ならAIで解決してくれると思うんですけど。何を許容するとなるのかわかるんですが、ナビゲーションインクでは、ディテールのサイプを申めるにしても非選択時に2の時に戻るキッチンの現象が発生します。 コンテンツビューがあって、セレクションがアイテムの発生なので、アイテムが一致にA、Bとあって、それです。ナビゲーションスプリントビューとリストとあって、エキスト表示してそのディテールとして、セレクションがあった場合の選択肢の名前、そうでなければエキスト。 これはナビゲーションインクを使わないで、ディテールで実践したバージョンですね。ディテールで実践後、ディテールで実践。 ナビゲーションインクを使うとダメなのではなかったでしょうか。 ディテールで条件分岐して中身を書き換えるのはアリなんじゃないですかね。 これを実行すると、最初にリストを一瞬選択されて、すぐに2に戻るらしい。 ナビゲーションスプリントビューは、コースではナビゲーションスプリントビューコントローラをラップしていて、 ディテールの制御のためにセレクションを監視していて、ディテールが設定されたところから非2に変わる時に再構築が発生。 その結果、セレクションが初期化してしまう。 このように、セレクションを1秒の間とも、一瞬を設定すると、何か違いがしますね。 このように、セレクションを1秒の間とも、一瞬を設定すると、何か違いがしますね。 コース14以降なら、ナビゲーションスプリントビュースタイルを使う。 このまま以降では、バランススタイルを使うことで、再構築の状態を安定する。 これは一番手軽だから、やってみますか。 これはやるところとしては、最短距離のエラーのことですね。 これで、ナビゲーションスプリントビュースタイルとしてバランススタイル。 これで実行してみると。 オプショナルに押してましたっけね。 押してない。これは絶対大丈夫。 これで面白くないので、ヒントのオプショナルにして、ニルの状態で突き進んでいく。 やっぱり選択されていない状況は、ニルで表現したいところか。 自分の中では絶対状況の気がするので、押して開けて、早速選択。 ああ、やっぱりダメですね。2回目はOKと。だからこの方法はダメと。 そうすると、他に考えられる方法としては、このナビゲーションリンクを使わない。 だから、ラベルのテキストだけをここで表示してあげて、これで、まず、いいですね。 ここで、ディテールのところで、IDが変わっているだろうと踏んで、そのIDを元にアイテムを探す。 なので、えっと、そうですね。 どうするのかな? カードかどうかな? まあ、ちょっと、IFでやってみますか。 IFで、IDでしょ。 IDが、IFLET、アイテム、イコール、アイテム数だけど、ここでは、アイテム2。 まあ、アイテム2。 で、FIRST、FIRSTインデックスがあるね。 FIRST、どこだ? WHEREか。 FIRST、WHEREは、あらわ0のIDか、セレクティブ。 えっと、それが、自分のIDか、IDと一致するか。 これで条件ができて、この条件を満たしたときには、テキストの、アイテムの、あれですね、ID。 で、それ以外だったときには、ディテールビューを表示する。 押してあげたときに、ナビゲーションを使わないからどうなるんだろう? ナビゲーションというか、ナビゲーションリンクを使わないから大丈夫なのではないかというかするとね、ディテールビューが出てきて、これで、Cを選ぶ。 お、出た。7C。7Cはとても良い。 こんな感じで、上げて、で、もう1回、コマンドで押すと、何もない。 これでいいですね。よかった。 じゃあ、こうすると、バグ直せるじゃないですか。 じゃあ、この勉強の元を開いといて、とにかく、やることとしては、ここですね、モデルデータ。ここは良くて、セレクティブランドマークIDがあって、これをナビゲーションリンクで管理するんじゃなくて、 ここから、ランドマークディテール。これを表示するのを、えっと、ナビゲーションビューの、あれ?何だっけ? あ、そうそうそう、ディテール。ここですね。この中で表示するわけですけど、このランドマークを取るときに、えっと、 えっと、セレクティブランドマークIDだった場合には、レッドランドマークイコール、これモデルデータからですかね、フィルターデータ、えっと、フィルタードランドマークの中から表示している。 えっと、あまり関係ないですね、そこはね。とにかく、モデルデータから取っている。元というと、えっと、ここに表示しているランドマークが、モデルデータから取れているということは、ランドマークリスト、この方が知っていることなので、 このかたが、IDによってランドマークを取る手法を提供してあげれば、ですね、なので、ファンクションで、えっと、ランドマーク、えっと、by ID、みたいな感じでIDをInt型で受け取ってモードリストして、ランドマーク、binding、ビンディングランドマークこれを返してあげる というのがね、ビンディングランドマーク。あ、読みますね、ビンディングランドマーク。うん。 ランドマークを返してあげる。で、その返し方としては、IDさえ渡れば良いわけだから、これはモデルデータ、これの、えっと、ビンディングランドマークで、あ、そっ、これかな、えっと、by IDみたいなやつ、エレメントby ID作りましたよね。これでIDを渡してあげる。これで、できましたね。 ビンディングランドマークをIDで取得するということも、ランドマークリストができるようになったので、これを使って、えっと、ここだ。セレクティブ、あ、そうだ、これをIDが取れて、それで、えっと、ランドマークイコール、えっと、ランドマーク、こうするのも良いけど、どっちにしましょうかね。分かりやすいのは人によりそうですね、ここはね。 イフレットランドマークイコール、えっと、セレクティブランドマークID.map、で、セレクトランドマークIDby、違う、セレクティブ、違う、これは違う、えっと、ランドマークbyID、こんな感じでね、取れた場合には、それを表示する。 ガードティッパーのこれはね、ガード。 で、エルス、で戻り、戻りというか、ガードした場合は、いやガードじゃなくていいですね、これね、 スイッチ代ですね、スイッチが好きなのだけですが、 ランドマークのIDを取って、これがケースレッド、ランドマークだった場合には、ランドマークID、で、セレクトじゃなかった場合、ニルだった場合ですね、ケースニル、これだった場合は、 解決を消しちゃった。えーっと。 えーっと、これがスイッチにして、ニルとする時には、セレクタランドマークね、こうしてあげれば、 ビルドもできるし、ビルドができるだけではなく、 ローを1で表示してあげる。そして実行してあげると、これでもうバグ直しましたね。よかった。 こういうバグはなくても、練習の時は、こうやって解決できるところまでね、やってあげないといけない。 これがランドマーク、これがバインディングランドマーク、バインディングランドマーク、オプショナルバインディングランドマークから、ビクリマーク、ランドマーク、これですか、マップにしたからだ、ランドマーク、 こうですね、フラットマップ。で、こうしてあげれば、よいしょ。 このフラットマップに自分が慣れてないだけだと思うんですけど、 オプショナルだった時にランドマークバイIDでフラットに丸め込むっていう、 ここが、なんか若干配慮を感じますね。まあまあ、わかればいいんですけど、 何をしようとするのかが一瞬わからなくなりそう。 これはどうしますかね。えーっと、それはまあ名前つけてあげればいい感じですかね。 先にやっちゃいましょう。このメソッド。 だから要は、セレクトされているランドマークを取るというメソッドを 作ればいいわけですよ。 ここで、例えば、バー、セレクティブ、ランドマーク。 で、こうしてあげると、バインディング、ランドマークを返すよっていう風にして、 セレクトされていない可能性もあるからにいるでしょ。 で、こうした中で、あのフラットマップを使う分にはね、 一緒に何やってるんだろうって思うけど、 すぐそこにセレクティブランドマークを取るっていうね、 ことが書いてあるんで、そうするとまあ、わかってきますよね。 ただまあ、これもわかりにくいなと思ったら、 これぐらいの関数になると、 ガードレット、セレクティブランドマークID、 エルス、リターン、ニルって書いて、 ランドマークID、これをね、リターンでも使っちゃう。 セレクティブ、ランドマークID、 セレクティブ、これでいいかな。 こうしてあげると、行数は増えるんですけど、 まあ、行数が増えたところでね、 セレクティブランドマークっていう、 というか、プロパティがやってることなんだから、 明白ですよね。 この明白さは、コードが多くても明白ですし、 さっきみたいに、 フラットマップみたいな感じでね、なんとなく、 なんか、なじみの薄いものを使っても理解できる。 なので、どっちでもいいと思うんですよね。 1行の方が綺麗に見えるかなっていうなら、それを買う。 まあ、これでいいか。 まあ、いいや。とりあえずこれで、 今回は長く書いておきますかね。 これでいいかな。 あとは、自分を使う方法も、 ここは十分ありますしね。 フラットマップ、どっちがいいかな。 AT、うん、どれも迷うって感じですね。 どうしようかな、今回。 あ、これでいいか。 はい、これでできたので、実行してみましょう。 こうすると、今度こそ、うまくいってるはず。 こういう状況で、セレクトランドマークが出ていて、 ここでツインレイを1回押すだけで、 おお、できましたね。 これで、シルバーサーモンクリック押せば、 またそっち行きますし、 コマンドクリックでセンター化解除もできるし、 アイラブもすぐできる。 おお、バク乗りましたね。 完璧ですね。 はい、こんな感じで、よい気がする。 で、こうなったら、他のプラットフォームもね、 結構大きく変えたんで、 動くかどうかは確かめておかないといけないところなので、 iOSをちょっと見てみましょう。 で、iOSのシミュレーターですよね。 シミュレーターは? んー、どこか。 シミュレーターどこいる? シミュレーターがまだいない? えーと、マックスと、これは? あ、DKのやつですね。 これで、あとは、マックスじゃない。 シミュレーターがどこにいるかが、わからない。 どこだ? あ、ここの後ろか。 あ、DPTもわかった。 まあ、助かりましたね。 DPTのおかげでね。 まあ、マットが外れてたところも、 いっぱいありましたけど、 まあ、マットを置いていったところもあったんで、 まあ、そうやって活用していかないといけないって感じですね。 で、マックスの画像とか、よかった。 これを、あ、そう、iOS。 一番上だったから、ディップを押してみて、 で、これで、シミュレーターが動いてくるはずなので、 それで、動作確認をして問題になったら、 ランドマークリストだから、あとは、 もちろんですかね。 これも試してみて問題なければ、 まあ、OKと。 えっと、見れた。 これですね。 シミュレーターが動いてない。 1回落としてみますか、シミュレーター。 うん、落ちましたね。 そしたら、もう1回。 一方かけて、ビルドが失敗か。 ビルド失敗を見落としていた。 動くものとばっかり思ってたけど、そんなことはなかった。 えっと、ビルド失敗は、あれ、どこかで見ると。 ビルド失敗。 あれ、見落としてるかというと、どこにも表示されてないですね。 あれは、ビルドのログを見る。 ここですかね、iOS用のビルド。 これですね。 この中で、ここだ。 えっと、フォーカスドバリュー。 エレクティブランドマーク。 この辺が見つかってないらしい。 フォーカスドバリューか、とりあえず。 フォーカスドバリューはメニュー用でしたよね。 iOSもやるって、確かデュートリアル出てませんでしたっけ。 フォーカスドバリューがないのかな。 えっと、iOSでしょ。 これで、どうしますかね。 エラー出て欲しいんですけどね、このログ説ね。 フォーカスドバリューだと定義を辿ってみますか。 定義を辿って、フォーカスドバリューはiOS16でありますよね。 じゃあ、このエレクティブランドマーク、これがない。 えっと、エクステンションで。 このエクステンションはiOSがありましたね。 iOSあるから、大丈夫に見えますね。 で、それ以外だと、エレクティブランドマークIDはありますよね。 で、あとはランドマークス。 これは当たり前になりましたね。 エレメントバイアイディ、これもありますね。 えっと、ビルドが失敗したことをはっきりと知りたいので、 一度クリーンしてXコードを落としますかね。 それで、Xコード落とした後に、もう一回プロジェクト。 これを開いて、ここだ。 そう、ランドマークスだ。 これを開いてみて、もう出来上がってると思うんですけど。 出てきましたね。 その上で、もう一回ビルドをかけてみて。 ちゃんとエラーのところに出てほしいですよね。 ビルドはエラーなんですが、エラーの内容が予想に出ている。 出ている予想というのは、この中の2パショですね。 2パショの中でも、オチOSだ。 オチOSに切り替えてビルドをかけていけば、エラーの場所が出た。 プロスプラットフォーム、ここ難しいですね。 タゲットが出るだけで、エラーが表に出てこないけど、 移動するタゲットだからビルドしてあるっていう。 フォーカスバリュー、ここなら確かに無いですよね。 オチOSだと。 フォーカスバリューが無いのではなくて、 エレクティブランドマークが無いですよね。 エレクティブランドマーク定義はされているんですけど、 これはオチOSに入れていないんで、これだ。 なので、フォーカスバリューがオチOS以外でやらないといけない。 もうちょっと言うと、PIFOS、MACOSと、 あとは、または、OSがiOSですね。 こういう風にやるのは、将来ビジョンOSを作ろうと考えた時に、 この時にビジョンがターゲットに追加された時に、 どっちがいいかは分からないですけど、 思いがけないものを通過させるよりは、 最初から無い方がいいかなということで、 オチOS以外ではなくて、MACOSはiOSではいるんですよね。 それではいるんだ。だから、これが、いいですね。 これだといる。 今、MACOSとかではなく、オチOSなんで、 これでいいですね。 ビルドをかけると、これでビルドが通る。 またダメだ。ランドマークがカテゴリーを持っていない。 ランドマークがカテゴリーを持っていない。 このランドマークはiOS用ですね。 iOSのビルドでエラーになった。 なので、なぜかエラーちゃんと出てますけど、 iOSに切り替えますかね。 一応、iOSに切り替えて、 ビルドをかけて、カテゴリーが無いと言われる。 カテゴリーを入れる場所を間違えたんですかね。 カテゴリーは、これだめですね。 入れ忘れてそうですね。 カテゴリーを通して、これですかね。 iOS、オチOS、MACOS、カテゴリー。 以前はランドマークの中のネームクーカーに 入れてたのを、そこに出したからだ。 なので、無くなった対応っていうね。 それだけで、名前クーカー消せばOK。 iOSのタレントですね。 その中で、iOS専用だから、 MACOSいじってる間に、名前クーカー変えたから、 これが抜けちゃったってことですね。 カテゴリーのネーム、カテゴリーのネーム、 カテゴリーのネームを持っていない。 このカテゴリーは、このカテゴリー、 このカテゴリーは、このカテゴリーのカテゴリー。 ネームをやめて、ディスクリプションで 提供することにした。 そうすると、これ、まぜですね。 ソーティングバイネームじゃなくなってますね。 ディスクライミングでやってるんで、 これ、ソーティングバイネームじゃないな。 その前にも何もないか。 その前にも何もないとして、 さっきのエラーのところは、 ネームがないよって話ですね。 テキストを拡張したので、ネームを渡さなくても テキスト表現できるようになりました。 カテゴリーですね。 テキストのカテゴリー。 カテゴリー。カテゴリーを使う場面で、 テキストを使っている場面というのが、 他のOSであったと思うんですけど、 カテゴリーこの辺じゃないですね。 テキストは、カテゴリーローか。 これにはいいですね。 カテゴリーローのiOS版じゃなくて、 他のバージョン。 カテゴリーロー。 カテゴリーローを見ますか。 カテゴリーロー。 なるほど。 どこにしますかね。 カテゴリー自体に拡張してあげる。 これでもいいですかね。 カテゴリーローじゃなくて、カテゴリー。 カテゴリーの中で、カテゴリーローというのが、 カテゴリーローでテキスト表現するわけだから、 ここで作ってありますね。 なので、カテゴリーローのエクステンションではなくて、 プライベートという、 secresect で云うかな? プライベート??じゃなくてですね。 エクステンションで、テキストに対して拡張してあげて、 で、それでこの中で、Initializerで例えば、あたりとしてカテゴリー。 これを受け取るカテゴリーがあります。 そうした上で、これはセルフのイニシャライザーのパワーバッティングの、 ドリング、ディスク、ディスクライディング、カテゴリー。 という風にしてあげればね、これでテキスト表現が可能になったので、 ここでランドマークが良くて、カテゴリー。 カテゴリーのテキスト表現が可能になった。 ここが良いですね。 で、それができたので、あとやることは、カテゴリー。 さっきの名前を配置したことによって、明らかにストーティングパイネームじゃないわけですよね。 名前じゃない。 そうすると、どうするかというと、 これは定件数を拡張するというよりも、カテゴリーには並び順があるよという、 こういった表現の方が妥当な気がしてきますね。 本当は、エクステンション、要はやりたいことというのは、 カテゴリーは比較可能ですよという、こういった表現。 そうしてあげて、ナピック、バンク、フィオナリ、 エフトハンドサイドが自分、 ライトハンドサイドも自分、戻りというかグーグルというのを作って、 この中で、さっきのストーティングパイネームで使っていた代償比較ですね。 要は、ディスプレッションで代償比較をするよという、 こういった実装してあげると、これで、 ストーティングパイネームなんて特別なものを要らなくなって、 カテゴリーを相当するという表現ができるようになる。 そうすると、今消したストーティングパイネームが使われているのは、 カテゴリーフォームかな、ここが一箇所やらになるので、 ここでストーティングパイネームだったのを、 ストーティングにしてあげればこれでOKですね。 そうすると、ランドマックスパイカテゴリーのカテゴリー図を、 相当したものを表示する、出てきた。 カテゴリーが並べ替え可能で、並び順が表示テキストですよ、 というのは、これは基盤次第ですね。 並べ方が本当にそれでいいのか、それとも登場順という可能性もあるわけですよ。 カテゴリーって列挙型になっているのだと思ったんで、そうそう。 なので、これが上から順を登場順と捉える手もあるし、 これをアルファベット順で捉えることもできるし、 ただどっちがいいとか、どっちであるべきとか、 そういった状況には全くないので、 ここは使用として決めたってもいいかもしれない。 他にもいろんな並べ替え方法が存在するんだったとしたら、 さっきみたいなSortedByNameとかSortedByIDとか、 SortedBy何だろう、そういう風に名前付けた方がいいとは思うんですけど、 今回そんなこともないですよね、きっとね。 持ってる値で情報を取れるって言ったら、ローバリューぐらいですからね。 それが将来公平を招きそうだなっていう感じだと、 SortedByローバリュー、そんな感じになるんですかね。 あんまり言わない気がするけど。 とにかくこれでビルドが今度こそ取れるようになったと思うので、 ビルドをかけて、動かしてみて、 MacOSでの変更がiOSの方に悪影響が出ていないか、 そんなあたりを調べればとりあえずOKですね。 うん、もっともいい。 まあ、かけてというか直せて。 アグは直せないとき辛いですよね。 まあ、辛いけどもそこも楽しいと思いますけど。 で、iOSのシミュレーターを今度は動いてくれそうですね。 で、ここでやったこととしては、リスト。 えー、どのリストでしたっけあれは。 お気に入りのフィルタリングのリストですね。 これが1回目のクリックでちゃんと動くかどうかっていう、 そういったやつが1回目のクリックではもう直ってるはずなんで、 クリックしたときにちゃんとそれが言っている表でされる。 ここを見ればコードがね、悪影響を及ぼしていないか、 そういったことが判明して、 で、問題なく動いていれば、 かけて、MacOSとiOS完成。 そしたらウォッチOSも確認して、 ウォッチOSもちゃんと動けば全部完了で、 チュートリアルは完了って感じですけど、 まだね、やろうと思ってたのはデファクト、 リファクトリングなんで、リファクトリングまだ手付けられてないですからね。 そのところが直ったらまあ今日はちょっと終わりに1回して、 また次回リファクトリング、 リファクトリングしながらやってきたんでね。 まあまあでもそんな感じでやっていけば良いのでしょう。 お、動いた。 これでエミュレーターが立ち上がり、 で、ここでアプリが動き、 アプリ早く動くのかな、画面、 止まるかな。 ウィンドウをちょうど良い大きさにするのってどうするんですかね。 えーと、zoom、オマンド、 オマンド1234、Polityですね。 Polityやって、この横にホジティブの形のガナだけにね、 横にあるだけで随分画面が広くなりそうで嬉しくなりそうなんだけど、 これツラせんのかな、ちょっと余計なことを始めましたが、 デバイスベゼル、これはバックですよね、 これは無理かもわけないですね。 ベゼルは出しときますか。 ウィンドウ、他にはresizeとか、 ドスクリーン、さっきのオマンド1234はこれですね、 あとメニューは、 まあいいか、こんなのはとりあえずどうでもよいか、横に動かせれば最高ですよね、 これね、忘れてた、YouTubeライブのコメントをいろいろ忘れてたというか、 完全に言っちゃった、大丈夫ですね、まだコメントが来ていない感じで、 ライクの方ですね、これでリストが出てそうですね、これをクリックしたときに、 大丈夫ですね、全力保守とかもちゃんと入ると確認して、戻ったときに全力入りましたね、 これを一応、エバリットオンリーとかにするとこうなるし、これでマリーレクとか選べばいいし、 この時、フィルターを変えていないからリストが残るのかな、重ねてしたんですけど、 これはちょっとリアルになったやつね、iOSだといって帰ってきたとき、要はこれね、お気に入りのみっていう あの段階で、これでほら、よくあるのが、今回はここの星を押したからといって、お気に入りからは消えないわけですけど、 仮にこれが送るボタンだったとして、これを押したときに一瞬でいなくなるアプリとか出てくるじゃないですか、リストから、 それを間違ってプチッと押しちゃったっていうね、そういった感じでリストから消えちゃうと困るなと思って、これで重ねてしたんですよ、次のフィルターをいじるまでは残ってるっていうね、そういった調整をして、それでmacOSだといい感じだったんですけど、iOSだとどうなんでしょうね、こうやっていって、ここでやり直しが効くじゃないですか、macOSの場合ね、なのでこれで星を入れて、入れ直して戻ればいいでしょ、仮にこれで飛んで、押してリセットして戻ったのに、いるのが嬉しいかどうかっていうこういったところですね、これはまあアプリ作る側、それの好みと使う側の好み、必ずしも一致するとは限りないと思うんですけど、そういったところをどう かオフになった、もう一回アプリをオフになった、これでいいですかね、はい、こんな感じでiOSOKですね、じゃあbotOS見ておきましょう、botOSはビルドかけて、ビルドかけるでしょきっと、どうなんないことが普通にありますけど、まあまあとりあえずこれで取りましたね、シミュレーターが動いて、これでbotOSの方のリストもちゃんと動けば、まあ大丈夫、iOS動いたから大丈夫かなと思うのと、あとはbotOSの影響の良いのかもしれない、リスト、ちょっとコードを見ますけど、リスト、これはカテゴリーの、カテゴリーの何だっけ、カテゴリーローですね、カテゴリーロー、これがiOS用、違うカテゴリーローじゃないや、ランダムなリストだ、これOS3つばっ 大丈夫ですね、メニュー、リストに戻れるし、まあまあ大丈夫ですね、これでね、念のため最後にbotOSをもう一回だけ見ておいて、まあ大丈夫でしょうけどね まあこれで、クロスプラットフォーム3つ完成、で、とりあえずね、やっぱり結構解像しましたが、できたということになるのでしょうかね、まあこうですね、これでさっき言ったのはこれですね、お気に入りを例えばオンリーにして、3つだけになったときに、これをね、なんでここで起こしよう、消したとこ、リストから消えちゃってたんですよね、で、とりあえず取り付けるとね、それがまた復活できるから、いいのかな、あっやっぱり、復活ができなかったんだ、そうそう、そのバインドが切れちゃって、古い方のバインドがこっちに残って、で、いなくなっちゃったから、このリストがやべばされて、今だと大丈夫かもしれないですね、今回のあの、アップの具合を直した影 感じでね、ちょっとデバッグが終わったので、次回は念のため、あの、リファクタリングすべきところがまだ残っていないかという観点で、ロスコードを全部見ていくっていうね、結構書きましたね、チュートリアルやってるうちにね、そういったところを見ていきたいなと思います、だいぶ綺麗なはずだけどこういうね、これもそうか、フィックスみーか、これがでもリスト、アプリウォッチのネットを便利にするためのいいのを勝手に思い浮かんでつけてただけなので、まあこれはまあ、練習してもいいけど、まあチュートリアルでやるほどではないかなっていう気はしますね、まあとりあえずそういった、いらなそうなコードとかをね、なんか見つけてこう
