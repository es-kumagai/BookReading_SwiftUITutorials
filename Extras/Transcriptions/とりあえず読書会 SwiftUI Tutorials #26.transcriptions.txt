Transcription & Summarize : とりあえず読書会 SwiftUI Tutorials #26

はい、ではとりあえず紹介を始めていきましょう。 Swiftはチュートリアルを見ていて、最近は、最近はですね、前回からね、Apple Watch対応のものを始めていてますけれど、 その方法は一通りというか、まだちょっと、私の方だけね、作ったチュートリアルに沿って作ってみましたが、 それを例にながって、リファクタリングっていうんですかね、今までのiOS用のコードと同じような雰囲気に直していきたいなと思うので、 これをやっていくんですが、どうやっていくのかね、直感に任せてやって、iOSと似ていくかどうかを試すっていう遊び方もありそうね。 そのほかは、ちゃんとiOSのね、アプリの方のコードを見て、実際どんな風にやったっけな、みたいな感じでやっていく。 まあ、自分でコードを書いたからと言ってね、あの、必ずしも、あの、同じ発動で次が書けるとは限りないんでね、 一般的にはどっちなんだろう、まあ一般も何もないかもしれないですけど、 まあ比較的ね、既存のコードと照らして合わせていくみたいなことをするんじゃないかなと思うんですが、 ちょっとあえて独自にやっていってみますか。その方が面白いかもしれないですね。 えーと、じゃあまず早速やっていきたいんですが、直すのは主にこれですよね、ランドマークって言っている。 えーと、iOSの中で今のところ独自に存在しているものね。 それ以外は、既にiOS用に作ったものを流用しているっていう感じになっているんで、 まあこれを重視に見ていくっていうことになりますが、 えーと、早速これはコピペの問題ですが、何かここが変なところにあるから直すというのをやったりしつつ、 あとは何だろう、エンパイロメントでモデルデータを取っておく、これはいいですね。 で、ランドマークをバーで取っている、これレッドでいいですね、うん。 で、一応個人的にここが良かったかなというのは、これはただの好みですね。 で、ランドマークインデックスか、このインデックスがちょっと気になりますね。 インデックスは、ファーストインデックスウェアでIDが一致しているかを取っていますが、 これ何か無かったっけかな、というのがね、になって、 モデルデータに何か作りませんでしたっけ、モデルデータのランドマークは無いか、 ランドマークの中に、アースとインデックスじゃないな、インデックスでいいのか、 ファーストインデックスオブランドマーク、作りましたよね、これね。 で、これでランドマークを渡せば良いという状況になっていたはず。 ただの実装は、インデックスbyIDで、インデックスbyIDは何だったかというと、 IDでね、ファーストインデックスを解くよ、というね、そういった感じですね。 インデックスbyID、うん、いいのかな。 で、これで、だからこれで良くなりましたね、インデックスを解くのはね。 あれ、ファーストインデックスオブで取れないか。 えーと、あー、そっか、見つからないことがあるんですよね。 元のコードは、強制アンラップか。 うーんと、強制アンラップ、強制アンラップはあまりかしこくないですね、この場合には。 エンバイロメントからランドマークを取って、そのインデックスを検索してなかったらどうしようという、 そういった状況になっていますが、ランドマークディテールを表示する都合、 えーと、そのランドマークは絶対にありそうですよね。 モデルデータって何に使ってるのか、バインドするために使ってるのか。 モデルデータをバインドして、インデックスのフェカリと書き換えるために使ってるっていう感じですね。 なので、そうすると、ランドマークってバインディングできるでしたっけ? というのが、すごい基本的なところが、分かんないけど、 パーにして、バインディング、ランドマーク。 こんな感じにして、エンバイロメントを取らないようにしてもいいんじゃないかな、という気がした。 ランドマークインデックスなんかいらなくなるでしょ? それで、ちょっとプレビュー出しといたほうがよかったですね。 もう終わって遅れですが、まあいいや、大丈夫でしょう。 それで、バインディング、バインダブルとかどうでもよくなって、 それで、モデルデータ、ランドマーク、インデックスじゃなくて、 ここ完全にもうランドマークですよね。ランドマークのisFavorite。 あとは、ランドマークの情報をいろいろ持たせていて、 ここだけですね、モデルデータのファーストをバインドさせてますが、 これについては、まあそうなんだ、これは。 アットステートでは、モデルデータとしてモデルデータを持たせて、 それで、あと書かれたランドマークは別に取れないか、取るかな、とやってみました。 モデルデータのランドマーク数の0、こんな風にね、持たせてあげて、 これをバインドできるのかな、この辺を。 大丈夫でね、アットステートをするためには、 アット、プレビュー、アップルですね。 それで、できた、渡したとか、まだちゃんと渡してないからこれでOKですね。 後々、ランドマークのバインディングでね、ちゃんと渡す必要があるような状況が作られていくと思うんですが、 まずはこれでいいですね。 で、プレビューが出てくれるかどうか、ビルドエラーが出てるのかな。 ビルドエラーは、バインディングのランドマークか、 そうか、そうすると、ランドマークリストがダメになっちゃった。 ランドマークディテールは、あのランドマークディテールは、 iOSのほうがイメージしてますけど、 iOSのほうのランドマークディテールってどうなってましたっけね。 ランドマークディテールは、 iOSのほうがランドマークディテールは、 レッドでランドマークを持って、 エンバイロメントでモデルデータを取っているという状況ですね。 で、フェーバリット、これをイズセットでバインドトゥ、 あ、バインドトゥを作ったのか。 あ、そうか、バインドトゥランドマークね。 なるほどね、って感じだけど、 これなんてダメなんでしたっけ。 あと書き換え対応が出てきたんですけど、 モデルデータのバインドトゥでバインドを返すっていうことをやっていて、 そうですよね、インデックスでね。 でもこれは、ほんと、他モデルデータどこで使ってるんですかね。 モデルデータ、バインド、うん、それだけですね。 で、まあなんかね、これをいろいろやるにあたって、 宣伝できないねって話になってたしか、 バインドを作ることにしたんだと思うんですけど、 忘れちゃいましたね、なんでこうしたんだかね。 バインディングをやらないと反映されないんだったかな。 反映されない理由っていうのが、 モデルデータじゃないやつをバインディングしたからだったかな。 あ、そうだそうだ、isfavoriteとそうじゃないやつ。 それをフィルター通して手に入れたランドマークをバインディングして、 もうモデルデータから切り離されてるから、 だからダメだったっていう、そういったお話でしたね。 なので、ランドマークリティールじゃなくて、 ランドマークのリスト、この辺かな。 ランドマークリストの中で、フィルターとランドマークス。 そうそう、これですね。 フィルターとランドマークスかランドマークス返してるわけですけど、 このランドマークスはフィルターで、 isfavoriteかどうかっていうふうにやってるわけですけど、 このランドマーク自体が構造体なんですよね。 なので複製が取られちゃうと、これのバインドを渡したところで どうにも何もなっちゃってるよね。 そういった問題があるから困ったよっていう、そういったお話だ。 そうすると、一つの方法としては、バインドして使う予定があるから、 最初からバインドされたものを返すっていう予定がありそうですね。 そんなコードはあんまり見ない気がするんですけど、 参照を返すっていうのは一つの手段としてありだと思うんで、 そのアプローチをやってみますと、必ずあるものを探すっていうのが コード上あまりよろしくない気がするんですよね。 だからランドマークスを取るときに、 これ普通のランドマークスじゃないですか。 なので、バインディングされているランドマークスみたいなのも 取れるようにしたい気がする。 そうするためには、エクステンションバンドルじゃない、 バンドルは関係ないですね。 モデルデータ、これをエクステンション、どうかな、どうしようかな。 ランドマークスを返すときに、もうバインドされてたら いいんじゃないかなっていう気がしてきた。 モデルデータを使うときは、この先はまた別ですけど、 やってみますか、そんな感じで。 するとランドマークスもそうなんですが、 モデルデータはランドマークを持っていて、 ランドマークはロードをしていて、イニシャルアイドで 手に入れているという状況で、 だからバイクスはバインドすることなのかな。 バイクスはあるかもしれないし、 ないかもしれないしって感じですかね。 バインディング、バインドランドマークありますね。 これを使っていったらいいのかな。 なので、バインドランドマークか、どうしようかな。 ロファイル、ロファイルもバインドする。 ロファイルもバインドしますね。 だからバイクスとランドマークス、 この辺が時になりますね。 バイクスはこんなに重要じゃないですね。 じゃあやっぱりランドマークか。 だからランドマークスを内部に保持して、 それでランドマークのバインディングを返すっていうのかな。 この辺はどうしようかな。 とりあえずランドマークスはそのまま残しておいて、 バインディングしたやつを作ってみますか。 基本的にバインディングしたやつだけを扱うの方が、 使いやすそうな気がするんですけどね。 エクステンション、モデルデータ、 そこの中にタイプエリアスがまずいかな。 タイプエリアス、バインディング、ランドマーク。 こんな感じで用意して、 これはバインディングのランドマークね。 こんな風にして、それで同様にバインディング、ランドマークスとして、 これは配列ですね。バインディングランドマーク。 こんな風にしてあげた上で、 バーとしてバインディングランドマークスというのがバインディングランドマークスで、 これになったっていうのはランドマークスに対して、 .mapでbind2かなって。 オプショナル。オプショナルっていうのはバインドできない可能性っていうのを考慮したんだ。 バインド2ってなってるかな。バインド2。 あとはfirstIndexでランドマークスのインデックスを返してるっていうことをやってるだけだから、 周りはうまくそんなこと言ってないで、いいのかな。 いや、良くないかな。 とか言ってないで、このindicesですね。これに対してマップをかけていって、 インデックスイン。1秒でいいかなここは。 自分自身か。だからランドマークスの0かな。 ダメだって。ランドマークスが見つからない。 fかな。あ、そうか。自分がバインダブルになってないのか。 モデルであれね。バインダブルね。 だから、これでマップするには、バインド2でマップするにはちょっと負荷が高いですよね。 だからこれはred.modelData.modelDataイコールセルフってやるんですが、 この時にあとバインダブルってやってあげて、 これが元1ですね。returnでmodelDataのランドマーク数の、 どっちか。で、ここでmodelDataのランドマーク。 あ、これダメなんだ。モデルデータがない。 モデルデータ。あれ、これじゃないのか。モデルデータ。 モデルデータ。あ、そうか。モデルデータ。で、 逆チャー。逆チャーできないのか。そうか。 そうすると、やっぱりちょっと変えないといけないですね。 バインドを独自に作る感じか。本当かな。 バインダブルだった時にモデルデータをバインドさせるのに、 モデルデータをキープすることはできないのかな。 ここがバーナーなんですね。とりあえずね。 で、この中でconvertランドマークから、 モデルデータbindingランドマーク、 bindingランドマークに変換できませんよ。 こちらですね。で、からね。これで大丈夫だね。 で、セルフは取ってるけど、モデルデータは。 モデルデータはクラスだけれど、 マップしてマップし終えたものは、 クロージャーも終わってるから大丈夫ですね。参照の問題ね。 なので、これでバインドされたランドマークが取れますよね。 まずね。 で、それと同じようにして、featuredランドマーク数もそうだし、 この辺もそうか。ランドマーク数byカテゴリとか。 えーと、どうしようかな。えっとね。 フォルト、プロファイル、これ関係ないですね。 んーと、またコピーして持っていきますか。 この2つね。利用になりそうな気がするやつ。 これを、例えばここにコピーして、で、この2つの名前を、 えーと、ランドマーク。 えーと、featured、binding、bindingランドマーク数、 みたいな風にして、で、それで、 ストックするところは、bindingランドマーク数ですね。 ランドマーク数byカテゴリか、ランドマーク数byカテゴリ。 なるほど。これはどうしようかな。 ランドマーク数bybindingランドマーク数。 だから、わちゃわちゃしてきましたね。 bindingでも必要そうな気がしますね。 bindingランドマーク数というか、もうなんか、 外側を全部bindingとしちゃいますかと、 なので、bindingランドマーク数という風にして、 で、そうすると、ほか、ランドマーク数。 orランドマーク数でいいや。 bindingbindingランドマークっていう風にして、 bindingランドマークはModelDataが持ってるけど、 これはランドマークを、って解釈する circular ahh 解釈するとか typeAliases, bindingランドマーク、ちょっと名前書きにくいですね。 bindingランドマーク bindingランドマークか。 bindingランドマークイコールbindingランドマークでしょ。 やっぱここは厳密にやった方がいい気がしますね。 インポッドソリフトUIですが。 そうね。名前はなんとつけますか。 ランドマーク数の代わりにbindingランドマーク数にしちゃって、 で、ランドマーク数byカテゴリーもbindingランドマーク数byカテゴリーにして、 で、binding。全部bindingでやってみましょう。 どうなるだろうね。 大丈夫だと思うんですけど、あんまり意味ない気がする。 こういったbindingを持ち出すの。 まあ、あの参照、書き込み可能な参照みたいなの持ち出してると思えばね、 こんなに不自然じゃないと思うんですけどね。 で、sequenceランドマークのカテゴリー、これはいいですね。 で、コレクション、この辺はいいですね。 あとは、このbind2が使わなくなりそうなので、コメントアウトしておくでしょ。 で、あとはbindingランドマーク数を返す。 で、このソースじゃないや、平格化アイディアス。 この2つはグローバルのほうが使えばいいですよね。 で、モデルデータのランドマーク数、これは何回来るようになったのかな。 ラタラーがいる。そうですね。 取られてますね。いつ消えたんだろう。まあ、いいか。 で、これでbindingランドマーク数を返しますよね。 ここもbindingランドマーク数にしてカテゴリーを取るのは、 配列が壊れてランドマーク数にしたくて、で、これで、どうしようかな。 private type areasで、ランドマーク数イコール配列のランドマークね。 で、このランドマーク数もprivateで効果してあげて、privateで効果すると大丈夫だと思うので、大丈夫ですね。 うん。こうすることによって、外からはね、bindingされたやつ、それだけしか使えないようにすることができると。 うん。で、こうしてこれで効果を通してはOKですよね。 で、ランドマーク数は変更もできる必要があって、で、そうね、そうですよね。 で、これでランドマーク数とカテゴリー、あれ、さっき作ったやつだ。 これはいいですね。エフェクトランドマーク数、これもいらないですね。 本当かな。こんなに消しちゃって大丈夫かな。一応、怖いからコメントアウトにしようかな。 大丈夫だと思うんですけどね。 ま、これで、えーと、これでここまでOKでしょ。 そうすると、他の画面でビルドがやられてますよね。 今ね、あれがランドマーク数がスコープにないよって言われてますが、ランドマークリスト法は、えーと、bindingランドマーク数ですよね。 で、それで、モデルデータ、えーと、これはなんだ。 featuredランドマーク数ってモデルデータがもうすでに持ってますよね。 フィルターをかけても、これは無駄なことだったかな。 featuredbindingランドマーク数返せばいいですよね。 うん、そうですね。無駄だったかも。 で、これでランドマークローとして、ランドマークローは、このランドマークローはディテールを表示するのかな。 えーと、ランドマークローは一行一行表示して、itsfavoriteを表示しますよね。 スターイメージでね。で、スターイメージは普通にスターなだけか。 そうかな。うん、そんな気がしますかね。 で、じゃあ、これはいいのかな。 えーと、あとは、animationfilteredランドマーク数、これは、ミラーになるのは、イコータブルに準拠していないか。 えーと、ランドマークのアニメーション、これがイコールに準拠していないとなると、アニメーション、そっか、イコータブルで放すのが、イコータブルですね、アニメーションの部位ね。 binding、bindingの配列、これはイコータブルに準拠しないのか。 えーと、配列でbinding、binding自体はどうだろう。それにもよる。 でも、bindingがイコータブルだったら、配列もイコータブルになりそうですね。 だから、これじゃダメなのか。なので、.map、ラップドバリュー。 あれならね、いけばするんですけど、ちょっと無駄が多い気がしますね。 えーと、で、ランドマークリストでしょ。で、ランドマーク。 ランドマーク、とりあえずラップドバリュー渡してみますけど、そうすればね、フィルトが通るので、 これでちょっと、previewを止めて、またフィルトが選ぶかな。 ランドマークリストが、あとあれだ、今、iOSをいじってるんで、WatchOSじゃなくて、iOSにしましょう。 そうすると、もっと余裕が出てくるのかな。 モデルデータBですね。モデルデータイコールモデルデータ。ディフォルトで読めるやつね。 これでいいかな。あ、これダメなんだっけ。 えーと、ノンセンダブル。セーフじゃないと。 モデルデータはコンカレンシーセーフではないよと言われちゃった。 えーと、モデルデータはプラスであって、コンカレンシーセーフ。 あ、そっか、bindingか。bindingを使ったから。 あれ、使ってないね。えーと、使ってないね。 じゃあ、どこでだ。これがファイナルクラスだからな。センダブル。 こうすると大丈夫だけど、今のこのアーニーなセンダブルは気を付けた方がいいのでね。 えーと、とりあえずセンダブルのメンバーがセンダブルのまま持っていて、 モデルデータがプラスであるけれども、えーと、ランドマーク、bind、センダブル。 うん、まあまあ、大丈夫って感じは任せますね。 うん、なんかしますねって感じですけど。 それか、あのモデルデータはメインアクターからのみのアクセスに絞るっていうのもありますね。 えーと、どっちがいいかな。binding。bindingで書き換えたときにセンダブルデータが更新される。 まあ今まで、別にね、大丈夫だったから、今までセンダブル送られることはですね、ついてなくてもね。 だからここが問題なのか、プレビューの外でやってるからか。 だからこれを取ってあげて、完全にこのプレビューごとに作ってあげればいいのかな。 えーと、プライベートがいらないのかな。えーと、これで0かな。 これと、これと、これ。うん、そうね、これでいいですね。 そしたらライフテープとかもいらないですしね。この方が長すぎるといいかな。 で、ランドマーク4プレビューとか言ってるけど、これがえーと、モデルデータの、えーと、モデルデータのランドマーク。 ランドマークだ、バインディングランドマークです。0のラフとかあるよね。 こんな感じですよね。で、それで同様にして、セカンドロー。これがいいと。 で、これで、次のグループ、この2つが0と1かこんな感じで、0と1。 うん、これでいいのかな。で、ここがランドマークローカスとコピーが間違えましたね。 これはここがいらないと、ない。こんな感じ。で、これでどうなりますかね。 で、ここがダメですよっていうのもこれも一緒ですね。ランドマークス。 モデルデータのロードから入らないのかな。で、バインディングランドマークスこれでいいですね。 で、ビルドが消えて次のがランドマークスがインコンパクティブ。 モデルデータのランドマークスの閉塞とバインディングだからヴィルターでランドマークのカテゴリーカクイル。 これもモデルデータの中のバインディング、ランドマークスでヴィルターでランドマークス。 ここのwrapped violinはちょっと面倒ですね。 まあしょうがないですけどね。バインディングされてる。 これでモデルデータのバインディング、バインディング、ランドマークスのこれでwrapped violinですよね。 で、こうしたときにここの要は何だ。 wrapped violin、binding、ランドマーク、ランドマークスとかこの辺がランドマークスのドットマップかな。 でこれでwrapped violinと。 まあとりあえずね、コンパイルを通すためにやっていますが。 ここはランドマークスbyカテゴリーじゃなくてカテゴリーフォームはbinding、bindingランドマークスbyカテゴリーでここもbindingランドマークスbyカテゴリーにしてここもか、 fetchedランドマークス。これもbindingランドマークスでモデルデータのfetchedバインディングランドマークスね。 であとはこれをinitランドマークスに渡すにあたってfetchedランドマークスをbindingでね、とれてますからね。 でこれでfetchedカードに今のところは、あと課題でね、渡してるんでこれレイジーですかね。レイジーのマップのラップドバリュー。 まあその通りね、いろんなラップドバリューとれていくと思うんですけど。 まあこんな風にしてfetchedカードも用意して、fetchedカード表示して、これここがなんか出来なくなってますね。 バグ、バグになっちゃったのがちょっと厄介ですね。 これはfetchedカードとあとは、categories、ランドマークス、ランドマークスバイカテゴリ、ここな気がするなラップドバリュー。 ラップドバリュー、ランドマークスバイカテゴリのカテゴリで、 これはラップドバリューは無いって言われてるのか。 bindingランドマークスですよね。 これでカテゴリローのランドマークス、あ、ランドマークスか。 なのでマップでラップドバリューがここですね。これでバグとか言われなくなるでしょう。 はいじゃあ次、次は、これがfetched、binding、ランドマークス。 これに対してラップドバリューですね。 なんか大掛かりな変更すぎてイマイチかな。 バインディングランドマークね。これでラップドバリューですね。 今のところはね、モデルデータがバインドを持っていないよっていうのも、 これはMizfitモデルデータでbindingランドマークですね。 ここからも乗せるかな。ランドマークを持たせるんじゃなくて、 バインディングランドマークを持たせて、これでこの辺はラップドバリューになっちゃいますね。 これがやっぱりかな。やっぱりってことでもないですけど、 ラップドバリューがちょっと格好悪いですね。 どうしようかなこれ、ラップドバリュー。 バインディングでしょ、バインディングカッターで、まあしょうがないか。 ランドマークのラップドバリューのネーム。これでbindとかじゃなくても、 普通にランドマークのMizfitを渡せますよね。 そういった状況になってくれたと。 格好スマートにするためなんですよ、とりあえず。 その代わりにランドマーク、ランドマークが、 バインディングランドマークとかラップドバリュー。 これはちょっと大げさかな。すると、このイニシャライザー、 この辺はbinding、bindingランドマークにしちゃって、 で、これで、一番高いプロパティでバックバインディングじゃないやつ。 ランドマーク、そしてランドマークだったね。 bindingランドマークのラップドバリューを返すというふうに、 そしてあげればありますよね。 そうするとランドマークに対してラップドバリュー、みたいなふうに、 全部ね、スマートに書けますよね、とりあえずね。 で、こうして、これがいいかな。 そして上で、bindingが必要なとこ。 ここだけはね、bindingランドマークみたいなふうにね、 こんなふうに書いてあげれば、メリハリも良いですね。 で、モデルベッドのbindingランドマーク数の0のラップドバリュー、 そしてここが選んだんですね。 これはイニシャライザー、ランドマーク、bindingランドマーク数の0ですよね。 で、ラップドバリューで、このエラーは何だ。 ラップドバリューですよね。で、ランドマークが取れてますよね。 ランドマーク、あ、そっか、bindingランドマークに変えたんだ。 だから、bindingランドマークにしてあげて、 ラップドバリューじゃないよという、そういった話か。 はいはい、なるほど。 で、こうしてあげると、まだいいですね。 featureとbindingランドマーク数のイニシャライザーをする前に、 .razyの.mapのラップドバリューのfeatureカードね。 それでpages、これがまだエラーになるのは、 あ、razy、razyが残ってる。 あ、そっか、これでrazyが残っちゃうのか。 あ、そっか、razyのあとのマップだから、 これをエクセキュート的なことをしてあげないといけないのか。 そしたときに、このpagesのイニシャライザー、これですね。 これが、たとえば、init、page2、sum、sequence、page、 という風に取るイニシャライザーを作って、selfinitのpagesとして、 配列にページを入れてあげるという風にすれば、 これでさっきのビルドは通りますよね。 こっちの方がいいんじゃないかなという気がするんで、 これにしますか。 ただ、razyはちょっと怖いですね。 これ、エラーが多くに行き過ぎちゃいますね。 そのsequenceってちょっと怖いとかありますね。 まぁ、でも、razyを使う方が基本問題と捉えてみようかな。 ここでrazyって解消できないのかな。 ちょっと、マップで、特殊なマップがないのかな。 特殊な、なんだろう、completeみたいなのがないよね。 commitとかね、ないか。 あ、これは迷いますね。どうしようかな。sequence。 まぁ、でも、razyプロパティを使うからsequenceを使わないとか、 そういう発想は普通しないですよね。 こんなことを考えると、まぁ、これでいいか。 これでビルドが終わってるってことになる。 まぁ、ダメか。ランドマークス、これがないよ。 これもランドマークスなんですけど、bindingランドマークスですね。 bindingランドマークスにして、それでbindingランドマークス。 ここでrazyのランドマークスを入れてますが、そのランドマークスは、ここでコレクション取ってるのか。 コレクション、コレクション。 同じカテゴリーを取ってコレクションにしてるのか。 all satisfyですよね。 all satisfyはsequenceで良くなるかな、これ。 どうやってやりますか。extension、sequence、で、ランドマークスですよね。 その中で、with sameカテゴリー、これを実装ね。 実装ね、sequenceの方で良いはずですよね。 そうだよね。 これで良くて、これで良いってことは、別にコレクションじゃなくて、sequenceで良いですよね。 で、それで、あとはここで排列でランドマークスを入れてますが、これbindingを使うことにする都合で、ここもbindingランドマークスですね。 で、そうするとwith sameカテゴリーね、これもランドマークじゃなくてbindingランドマークスですね。 bindingランドマーク、ランドマーク、これはプロトコルでまとめる必要があるかどうか、という見切りになったんですけど、 どっちもランドマークスとして扱えて、インターフェースを持っていてってやる手は、まあまあありますけど、実装の手間はちょっと増えちゃいますかね。 bindingだったとして、そうね。手間かかりそうね。 だからまあbinding、基本的にbindingランドマークでね、やっていくよっていうことにするんで、ランドマークのwrapとかいうカテゴリーに対して色々やっていくと。 で、このコレクションも一緒ですよね。bindingランドマークに対してやることにして、with sameカテゴリー、as firstカテゴリー、これはwith sameカテゴリー、ここはいいのかな。 with sameカテゴリー、as firstカテゴリー、これがfirstカテゴリーはfirstのカテゴリー、これbindingになってるってことか。 これはbindingとかやっぱりですね、bindingでwith sameカテゴリーをやるというよりは、やっぱランドマークだね。ランドマークにして、で、上もランドマークにして、 必要なときbindを解除するというか、bindから取ってね、使ったほうが無難な気がしますね。押してあげて、そうするとここが使えないよってなるわけですけど、 これについてはドットのwith sameカテゴリーはずですよね。だから、lazyですね。lazyで、upで、wrapとかいうで、で、それでwith sameカテゴリー。 長いですね、ランドマーク数で。これbindingにも持たせたらいいのかな。こういう可能性もありますね。 そうしてみますか。長すぎるのでね、同じことやるにしてはね。なので、さっきのところ行って、これでflexionのwith sameカテゴリー。 これをね、index byteとかもいろいろありますが、まあ使う必要が出てきたら考えればいいのかな。 index、どうするとindexは使わない可能性ありますね。こんだけbindingを、なんか、あいまくってるとね。 flexionがbindingランドマークスだった場合には、これをdrop first、with sameカテゴリーパーツにしますが、 ここで、firstカテゴリーはfirstのwrapバリューのカテゴリーにしてあげた上で、with sameカテゴリー。 これをどうしようかな。これも載せてあげますか、bindingにね。with sameカテゴリー。 えーと、これをシーケンスじゃダメなのかな。 えーと、これをちょっとコピーしてあげますけど。 ここね、firstがfirst、firstがダメなのか。あーなるほど、firstがダメか。 with sameカテゴリーのfirst、firstがノーオプショナルバリューだと思った。 セルフは、セルフはfirst、firstではしかないのか。 で、あとdrop firstとremove firstはないね。 うん、どうしようかな。でもmake iteratorありますよね。 これでいいんじゃないかなっていう言い方をしたんですよ、今。 でも、イテレーターの残りの部分をまたシーケンス、でもwith sameカテゴリーはシーケンスですもんね。 えーと、イテレーターからシーケンス、2シーケンスっていうのがありますが、 えーと、どうしよう。どっちがいいんだろう。 ま、書いてみますか、ちょっとね。 あー、イテレーター、イテレーター、メイクイテレーターですよね。 そうした上で、要はfirstじゃなくて、イテレーターのnextですよね。 これに対してカテゴリーがあるかどうか。 で、あった場合、それはいいとして、 次いくとしてなければリターンですよね。 で、それでここdrop firstとかやってますって思ったけど、 drop firstはどうか。drop firstはある? drop firstはシーケンスにあって、firstを消すっていうのは? えーと、removeみたいなやつ。そういったのはないのか。 なんかすごいアンパランス感わかりますね。 えーと、このイテレーター、このイテレーターはイテレータープロトコルか。 あー、そうか。このイテレーターに対して、 is sameとはいかないんですよね。 だから、これを何とかするにはanyシーケンス。 で、えーと、baseかな。あ、baseはシーケンスか。 だから、anyシーケンスのメイクアンダーレイングイテレーター。 だから、こうやってイテレーターってやって、それで、is sameみたいなね。 こんなふうな書き方になるわけですよね。 どっちがいいのかな、一旦。 drop first、drop firstにするか、anyシーケンスにするか。 うん。 まあ、dropはもったいないですよね。 既に1回言ってますからね、上でね。 うん。まあまあ、捨ててる。まあそうか。 捨ててるよね。シーケンスだから重要ですよね。 もうね、まあこんな感じか。うん。 まあまあ、これでいいですね。とりあえずね。 イテレーターでね、あ、anyシーケンスでね。 そうすれば、なんか不思議というようなね、 コレクションを求める必要がなくなりますからね。 だから、firstが使いたいためにね。うん。 これでいいですね。それで、えーと、 is sameカテゴリーというのも変えようになって、 で、それで、ここもコレクションでのクリって話ですね。 そうするとね、えーと、シーケンスかな、シーケンス。 で、それでfirstが使えないよって話ですけど、 これもさっきと一緒なわけですが、 この時にどうするかな。えーと、うん。 これは使いましてた方がなんかいい気がしますね。 そこまで効率化を求めないんだとすると、 えーと、シーケンスレイジーにして、 あれ、レイジーって、えーと、セルフになったっけ。 セルフレイジー。ありますね。 これをね、使いたいんですけど、セルフがいるのか。 これとも効果のレイジーのドットマップのラップトゥバリュー。 で、これに対して、イズセイムカテゴリー初、 ファースト、えーと、ファースト、ファーストか。 ファースト、あれ、ファースト。 イズセイムカテゴリー、あれなんか間違ってるかな。 イズセイムカテゴリーのプールで、あ、いないな。 先頭と同じものをね、取ろうとしてるんで、 だから、レイジーでマップバリュー、 イズセイムカテゴリーっていうのを使えばいいのか。 で、これで終わりと。こんな感じ。 大丈夫かな。カテゴリー、こうかな。 うん、そうですね。ちょっとね、あのレイジーが気になりますけど、 これちょっとね、余裕になっちゃいますからね。 あ、大丈夫なのか。色が悪いだけか。 レイジー、マップ、ラップトゥバリュー、あ、大丈夫そうね。 ちょっと気持ち悪いけどね、色がね。 これでファインティングランドマップに対して、 イズセイムカテゴリーを使うようになったと。 で、イズセイムカテゴリーを使って、ゴリ。 これも使えてもいいのかなっていう気もしますね。 これも載せておきますかね。 こうやって。で、それで、この中で。 要は。取れた? もはや、これは、レイジー、マップ、ラップトゥバリュー、後忘れた。 ラップトゥバリューのイズセイムカテゴリー画図。カテゴリーね。 うん、これで良いですね。 そうすると、バインディングに対しても安心して、イズセイムカテゴリー画図が 使えるようになるので、これでOKですね。 で、この下で回すと。 ランドマークですか? ダウンティングランドマーク? ここはいいか。 バインディング、さっきの流れで行くと、これはバインディングランドマークという名前にして、 両方に落ちて、ランドマークをプロパテを定義する。 こんな風に動かすのが、今までの、今までのと言うかさっきのね、テオリーな気がしますが、 バインディングをそこまで強調する必要があるのかなというのが、ちょっと気になっていて。 最後がちなみにね、ラップトゥバリューを毎回使うようなのって、 なんか不毛だなと思うんですけど。 延べをしない。 そうするためには、バインディングしていないランドマークのことを何と呼ぶかというね、 そういった問題ですよね。 ぽりあではバインディングって名前つけた方がいい気がしますね。 パリパットは。で、ビーディングランドマークね。 こんな風にして、メリハリをつけておいて、なんか面倒ですけど。 これ、イニシャライズもここもそうですね。バインディングランドマーク。 できなるか・・・出来ないね。 ここもですね、バインディングランドマークここもデー。 バインディングランドマーク この風にしていただいて それで、パテゴリのここもですねバインディングランドマーク そして、このランドマーク数は スーパー・バムコレクションこれもバインディングですね バインディングランドマークスで。 で、それでここもバインディングランドマークスで。 で、こここれで ディツエンピートとパーソナル パテコリこれ、バインドされているから トババビュートですねぇうん、としてあげて そうね ここは、おー.いい位置のバインディングランドマーク うん、バインディングランドマークス それでこれで、ランドマークですね。 ここはランドマークディアカビンディングかな えーっと、ここバインディングランドマーク バインディングランドマークスでしょ? で、それでバインディングランドマークスか バインディングランドマークスが 例えばバインディングランドマークス ランドマークスとね あ、ここもするしかないわ ランドマークスでバインディングランドマーク ス広を配列をこの全体を全部をバインディングするか バインディングされた後配列にするかってるところでね 配列を変えて んですけど、ランドマークそれぞれバインディングの中で えーっとバインディングそれぞれがバインディングの中でどっちに add されてますか? 用はアレイのバインディング のランドマークとあとはバインディングのアレイのランドマーク こんな風なのね考えてみて でそれでこの2つで 交互変換をしたい気がするんだからこれでバインディングランド バインディングアレイをした時にバインディングのラプトバリューで やりたいことというのはエクステンションでバインディングでバインディングで 要素が配列だからランドマークスの時ですね ランドマークスの時こういった時にイニシャライザーでランドマークスとして バインディングランドマークスを取ったときに上手い事バインドさせる気がしていて こんなことはラプトバリューに対しての貸しないといけないですよね ラプトバリューに対してあらゆることで 計算型でいいのか 計算型ではいいけど できなくはないけどいいのかなこれ バインディングだから読み取りせんよって言うのか じゃあそんなに問題ないかな イニットは ラプトバリューでサブスクリプトを一時的に取ったけど これじゃダメですねバインディング でも特定のバインディングを作りたい気分でもないですしね そういうのを考えるとバインディングでランドマークスで イニシャライザーは何かのかな イニシャライザーはGETセット ああそうか セルフイニットでGETセッターを作ってあげればいいわけでしょ なのでGETとセッターを作りますが 特殊可能なパーじゃなくてGETセッターからでしょうか GETターとして このGETターはポイントを取ってランドマーク ランドマーク GETターはランドマークスを返すのかな ランドマークスを返すよっていう風にしたときに このランドマークスはバインディングのラプトバリューで ランドマークを返せばいいんだから BINDINGランドマークだからランドマークス ランドマークスのマップでラプトバリュー まあこれダメかGETターとしてはこれで マップじゃないのかなランドマークスとバインディングでしょ これをクロージャーでまたGETターだからこれで 引こうかなと思ったんですね GETセッターそしてセッターはこれで ランドマークスかなランドマークスじゃない バインディング これからゲッターがランドマークスを取って VOIDを返す こういったクロージャーで こういったクロージャーの中で やってるかな 待ってますよね この中でVOIDへとNewRandomarksInっていう風にして これでランドマークだからバインディングされてる ランドマークスとNewRandomarksですね NewRandomarks同じ数とは限らないなっちゃいますね GETターセッターで ランドマークスで取り替えるときに ゲッターで渡してランドマークスを バインディングでランドマークス ランドマークスパイレットのバインディングですね それでバインド これ数が一致してないとダメですね 一致してないとダメだし それ以上の問題がありますね まったく同じバインディングじゃないと 反映の仕様がなくなっちゃうところが多分ありますからね バインディングでセットするときでしょ セットするときだからバインディングのラプトバリュー まあラプトバリューじゃなくていいんですけど バインディングGETしてもらって GETしてもらった先でセットしてもらって 問題変わらないと取られていいんですかね ちょっと無理やりやってみましょう だからNewRandomarksとランドマークスを ジップ取るわけですよね つまりね それでジップに対してフォーインか ランドマークとニューランドマークインですかね ニューというかバインディングランドマークと ニューランドマークですね それに対してバインディングランドマークの ラプトバリューに対してニューランドマークを 入れてあげるということすればセットは 実現できますよねとりあえずね ただこれを怖いわけで まずここから解釈しましょうか GETはGETERでセットはセッター こんな感じ こっちダメなんだ Non-SendableからSendableにしてるのがダメ そうか NewRandomarksでランドマークが ランドマークはSendableだと思うんですが Non-Sendable FunctionでIsolatedにSendableでに Array、ランドマーク ランドマークだと見てみますけど ランドマークはSendableですよね だからこれもSendableでいいのかな AddSendable なんかすごい適当に今やってますけど Sendable これでNon-Sendable Functionの Arrayの、あ、GETERだこれ GETERですね AddSendable、あれでいいですね 怖いですけどね いいのかな そうするとBindが振り返られますよね BindのランドマークをBindingランドマークで 振り返ることができれば 結構なことができる気がするんですよ ただここちょっと怖いんで どうしようかな アーションですね Assertで ランドマーク数の ランドマーク数をマップで これをSortedしたものと NewRandomarksをIDでマップして Sortedしたものですね これが一致すれば 完全に同じランドマークということですね 順番並べ替えてるけど 順番も一緒でやってほしいですね その後のFor Loopを見る限りね なので順番も完全に一致してもらう状況にして ランドマーク数と 元のランドマーク数と 新しいものかな ランドマーク数 なんていう感じだこれ Bindingが ランドマーク数のBindingが 崩れています 大変な変容がですね とりあえずいいや これでいいか 押してあげたとすると Bindingが効くようになったということは 入るとそのまま渡すことができるということで これで何なんだ 詰まるところはランドマークが そうだな ランドマークがこれで 振り返られるようになったことによって Bindingされているものを 素直に使えるという それだけですね これで名前の回避もできるかと思って やってたんですけどね Bindingランドマーク数 ランドマーク Binding またBindingじゃないっていうやつ あれなんだっけ なんだっけ まあちょっと これは準備としてやったということにして Builderランドマーク数 Bindingランドマーク数 を押してますけど ModelDataFetteredBindingランドマーク数 これがBindingランドマーク数 ここのBindingランドマーク数がここでいろいろBindingを分解してますけど これをランドマーク数のBindingを返すように 押してあげるとして Bindingの中からここですね Bindingのランドマーク数 やってあげると ここでマップとかしなくて ModelDataのランドマーク数 これのBindingをそのまま返せば いいと思ったけど プライベート プライベートタイプを使ってる これがランドマークね ModelDataにランドマーク数をここに用意してた さっきそうしましたね そういえばね こんな感じ これでランドマーク数 これでランドマーク数を外に出しちゃってもいいんじゃないかな という状況になったとりあえずね それでこの中でBindingランドマーク数っていうのが そもそもいらなくなりましたよね これでModelDataをBindingすればよくなるんでね それで続いてBindingランドマーク数byカテゴリーっていうのを Groupingbyランドマーク数にして これのBindingランドマーク数byカテゴリーを Bindingのランドマーク数 これはどっちがいいかな Bindingランドマーク数でいいかな 押したときにランドマーク数だとBindになってないから これBindにして これだめか Bindingにするためには あっそうか bindable.modelDataイコールelfってやってあげて それでモデルデータのランドマーク数をプラで渡してあげると これをReturnって返すと まあそういう感じですが ちょっと面倒ですねこれね さっきのBindingランドマーク数をちょっと復活させますか 1個は例ですね Bindingランドマーク数は普通にね ランドマーク数っていうのをBindingで変えてあげるとすると使い勝手良さそうね それでBindingランドマーク数のほかに Bindingランドマーク数byカテゴリー これはこれでいいですね あとはFeaturedBindingランドマーク数は これはBindingのランドマーク数にしてあげて それでフィルターのランドマークが ランドマークValuesFeaturedにしたやつをMapかけてあげるのかな これでBindingに渡してあげるでだめか Mapじゃないね これね 両Bindingでくくんないといけないのかな こうすると これ自体はフィルターでBindingランドマークをBindingにできないから これでBindingで こうですかね 丸かっこ これでいいですけど ちょっと構図があまり好きじゃないですね だからこれは2段階に分けました RetLandmarksイコール これでランドマークフィルターをかけてあげて それでビタンですね ビタン Bindingランドマーク数 こんな感じ これでFeaturedランドマーク数という名前にしてあげて これはBindingでランドマーク数を返していくよ という雰囲気にしておいて それでBindingランドマーク数 byカテゴリー Bindingランドマーク数 これもランドマーク数byカテゴリーって いう気がするけど やってるけど あまり意味ない気がしてたな 悪いなって思うな バイアスさは増すことになる気がするので これでやっていきますかね Featuredランドマーク数Binding この辺が難しいですね Bindingの名称っていうんですかね BindingのFeaturedランドマーク数 ここからBindingFeaturedランドマーク数 みたいな感じで 冗長なことになると変わらないですね でもこれでいいや Bindingができれば どれくらい違ってくる気がするので これでやっていきますが すると相当ミナスがありそうね ランドマークディテールがBindingランドマークですけど これをBindingランドマークというか これランドマークでいいですね ランドマークでそれでAtBinderBlueBar っていうふうにしてあげる BindingかAtBindingBarっていうふうにしてあげて こうすると名前もランドマークでよくなりますよね こんな感じ あれ えーと まあわかった ランドマークで名前が変わったかな これでいいですね こうしてあげると 普通にランドマークをランドマークと使えて Bindしたときには $つければいいですもんね これをやればとりあえず そうすれば名前の問題が解決するっていうお話ですね これでBindingランドマーク これもランドマークにした上で これでBindingだから$ですよね あれ これじゃダメだっけ AtBinderBlueBarのスタートステップでBindingしてますよね で これがBindingじゃなくてランドマークでよくなりますよね 名前の問題できましたね 直しましたね で それでデータは 別にさっきの順番の準備そんなに重要でもなかった これでBindingランドマーク FeaturedランドマークはA3型プロパティか A3型プロパティだとBindingで どうしようかな A3型プロパティか Featuredランドマーク Featuredランドマークは計算型でModelData ModelDataから取ってるのか Binding Featuredランドマーク これがBindingにしていったからFeaturedランドマーク これのBindingですよね Binding Featuredランドマーク これ自体はこれでいいのかと思ったんですが Bindingのランドマークですね Bindingのランドマーク っていう風なやり方がいいのかな Environment これEnvironmentが要らなくなるという恐れもありますね ModelDataで結局このところを使っているので EnvironmentはEnvironmentでかしこい気がするんですけど Bindingがわざとなるかとか話が変わってきますね これでFeaturedランドマーク これをコメントアウトしてみますか どれくらい影響あるんですかね 大して影響ないけどそれは4-1 あとここがマップでラップで書くアニメーションか FeaturedランドマークだからこれがModelData Featuredランドマーク あーなるほど だからこれでAtBindableでバーでFeaturedランドマークにして ModelDataのランドマークじゃない Featured FeaturedBinding Featuredランドマークっていう風にしてあげると そうするとFeaturedランドマーク数 これ4-1できないのか 4-1がEnvironmentインフェアレンスできない ここがランドマークかな まだ早いっけ ModelData Bindingにしてますね これでランドマークで これでFeaturedランドマーク数のランドマークの だからでいいのかな ダメですよね ダメだよね そうするととりあえずここFeaturedランドマークで これはマップはいらないのかなっていう風には なるかと思ったけど ならないね Filteredランドマークか Filteredか Filtered? Filteredランドマークで Featuredランドマーク なんか違う気がするんだけど Binding Featuredランドマーク あれ?ModelDataですよね ModelData ModelDataの中にフィルターなど なんか ランドマークリスト フィルタード? このフィルタードは何だ フィルタード フェーチャード なんかコード間違ってるかな Favorite Onlyですよね それを出すことしてるんじゃないのかな Favorite Onlyですよね これコードなんか今日始めたとき違ったかな もしかして この可能性を感じつつある Filteredランドマーク Filteredですよね だからこれが要はBinding Featuredランドマーク数で これでBinding Featuredだから これはBindingランドマークフィルター IsFeaturedですよね IsFavoriteは IsFavoriteだといった Bindingランドマークですよね これ間違ってる気がするな Filteredランドマークだから Bindingのランドマーク数を返したいと仮定して ModelDataとして Binding Featuredランドマーク数じゃなくて Bindingランドマーク数に対して フィルターが出てくるという感じですね .FilterでランドマークInでランドマークのIsFavorite これがBindingですね Bindingに対して これがReturnタイプが違うだけですね これはね ランドマーク数イコールでやってあげて これがWrappedValueですよね WrappedValueとしてあげて これによって出てきたランドマークをReturnで Bindingランドマークマーク数 これでフィルタードランドマーク数ができて それでフィルタードですね ここがね Filteredランドマーク数 そしてこれが自分自身ですね Filteredランドマーク これがBindableができないのか Unavailable オブザーバブルか ここで引っかかっちゃうのか ここで引っかかるんだからランドマークがさっき Bindingがあれば だからBindableだと Filteredランドマークになっちゃうから これは使えなくて その上でFilteredランドマーク数がBindingだからこれで回せて ここでFilteredランドマーク数でこれはマップが必要だよということですね Filteredランドマーク数なんですが 中で2回使ってるのを踏まえるとBodyのとこで マップでラプトバリですね こんな風にしてあげて それでナビゲーションタイトルバイラー これは何だ アマルバコータリー無いというそれだけですね 入っちゃうのでOK ここなんか気持ちが微妙ですね Bindingでしょでランドマーク数 Bindingのランドマーク数だった場合 だった場合にはラプトバリは これはしょうがないか モデルデータはFeaturedランドマーク数を持たなくなったから ここでBindingFeaturedランドマーク数 0のラプトバリ これはこれでいいですね それで次はここも一緒か BindingじゃなくてFeaturedランドマーク数 BindingFeaturedランドマーク数 ここもいいですね これで2回 ここも一緒ですね これ全部置き換えちゃおうか FeaturedBindingランドマークなどというものは無いので ReplaceでFeaturedをね Bindingを消して BindingFeaturedランドマーク数 もう一箇所しかなかった ここね Replace all あで頭散らし Bindingをね でこれで Featuredランドマーク数かBindingランドマーク数 モデルデータ これのほうが要らない気がしますね でこうしてあげて どうすると色々と問題が出てくるので あーそっか こっちを置いてもいいのかな Bindingのランドマーク数ですよね これね それで あーそっか 結構不便ですね まるでFeaturedランドマークを作ればするんですけど まるでフェーチャーカードね ラップズバリューか ラップズバリュー まあまあいいか まあ綺麗なことになっていかないですね ランドマーク数byカテゴリー これもBindingだった気がする Binding あーでも上か えーと だからあれだ あれだからこの定義は あっこの定義は自分が持ってるやつか Bindingランドマーク数byカテゴリーね でこれでランドマーク数としてカテゴリーロー 渡してるけど このカテゴリーローで ここも色々やりたかったやつだ だからこれが Bindingランドマーク数とか Bindingのランドマーク数にして これをバーにして やっとBindingにしてあげたいというのをね 今回考えたやつで こうすることによって Bindingランドマーク数のイニシャライザーで ここサムシーケンスじゃなくなってきますね もはやね これがイニシャライザー まあいいのか これでBindingランドマーク数ね これでBindingのランドマーク数ですよね あれで ここがOKで 代入するときには Bindingランドマーク数 これで実際に入れてあげればいいですよね これで使うときも これはイニシャライザーか Bindingランドマーク数で 一つ一つのランドマークを渡す必要があります みたいなことをしようとしたときに Bindingランドマーク数でイニシャライザーで Bindingランドマーク数ファーストロップトップバリューの Bindingランドマーク数 これをBindingで入れてあげればいい感じですかね 間違った Bindingランドマーク数コレクションだから これはあれにしないといけないんだ あれにして OKと とりあえずこれで名前がBindingランドマークとか ややこしい名前じゃなくて ランドマークにできますよ というところが一番やりたいところで これによって 公一のランドマーク数っていうふうに まずできるわけですけど このときにBindingが取れてないとしたら これはどうなってるランドマークは わからない ここランドマークって言っているね これBindingなので これに渡せば大丈夫か Bindingのまま取れてる気がしますね これならいいんだ これなら名前がスッピリしてくれるんで ジオメトリのランドマーク Bindingランドマーク数フィルターなので 最後にBindingで打ってあげればOKと 止めたかな これは何だ Bindingランドマーク数 Bindingランドマーク数 ラベルが違ってる感じね これはイニシャライザーの定義ミスですね これですねランドマーク それでここもランドマークで ここもランドマークと ここもランドマークにして ここもランドマークで ここもランドマークだし ここもランドマークと ここもランドマーク ここが選んだのはランドマーク数に対応するときに SELFのランドマーク数 ランドマーク数ランドマーク数ですね ランドマーク数イコールSELFの どちらか書き込みに使われた このランドマーク数がラベルですよね これは選ばぬ検証ミスか こんなことないか これはアンダースコアとか そういったやつかな 違うか Bindingでランドマーク数イコール ランドマークカテゴリー これかな カテゴリーはパラメータですね ランドマーク数ですよね ランドマーク数 これですよね SELFが使われた SELFのランドマーク数が書き出されていませんよか そうか そうか だっけ Bindingのランドマーク数を取っていて ランドマーク数が 違う これBindingじゃねえ こうですね そうするとフォールループはどうなるんだ これでアンダースコアに代入するとして ここだ ここがポイントのランドマーク数が Dollarがいるのか DollarがいるのでBinding これは助かりますね いいですね 次 ここはラプトバリューですが カテゴリフォームか Bindingわけないか モデルデータ この辺はBindingになっていて ヘッダーカーズ この辺もいいのかな 良さそうね カテゴリーロードでランドマーク数としてラプトバリュー ランドマーク数バイカテゴリーのカテゴリーをラプトバリューしてるけど これが違いますね ラプトバリューではなくて これをBindingとして渡してあげると このBindingなんとかしたい気がするのかと オプショナル? これがオプショナルか 加工してあげて ペッジ側か こんなとこ引っ込めないとね こうしてあげるとBindingにしているからOKと この辺は再変換してあげればいいのかな まあそうしてみますか 次は ビルドが落ちたりして 本当かな 本当かな 本当な気がしないけど 動かしてみますか エミュレーザーで うまくいくのかな バインディングがちゃんと全部できてれば もういくと思うんですけど 元のデータがちゃんと下から取れてるはずなんでね とりあえずランドマーク これを見るとランドマークはこの配列で これでBindingランドマーク Bindingランドマークス Bindingランドマークスbyカテゴリーですね この辺がいろいろあって で シーケンスのランドマーク マインシーケンスのランドマーク これは両方付けたやつですかね カテゴリーズは良いとして ここも良いですね ランドマークあるでしょ カテゴリーもコーディネーターも別に良いですよね モデルデータ ここはちょっとおちゃおちゃしてるなというイメージを持ってるんですけど ランドマークに対してBindingランドマークスっていうのを返すようにしてたりとか これは便宜上ですけど これは別にやらなくても大丈夫な気がする とりあえず動かしてみますね ここは動けますね Bindingとか大事なのはクリックしたときにちゃんとするけど ここはいいんですよ これじゃなくてお気に入りの方ね こっちの方で あっお気に入りが あとこれを左右させるの忘れた あとトレイル このトレイルクーとこれをオフにしたときに オフにならなくなっててね こういったところがちょっとダメになってますね BindingランドマークってこれがBindingしたものを返すでしょ この後の辺はBindingしたものを返してってますよね ここもBindingランドマークスに対してフィルターとかをやって 最後にBindingにまとめてて おかしい可能性があると言ったらあの辺なんですけどね Bindがちゃんとできてるかどうかっていうね その辺が気になりますけど アイテムスクリプション これはモデル管理から取るやつか クールイメージとかいろいろありますけど コンテンツから見ていきますか 8ビューのコンテンツビュー コンテンツビューですね このコンテンツビューに対してプレビューはやめて それでスペースとかいろいろある中で コンテンツビュ というよりはエンバイロメントでモデルデータを取っていて フィルターとランドマークはランドマークのBindingですね これはモデルデータのBindingランドマークスをランドマークのUsefavoriteでフィルターしてますけど これを忘れていたUsefavoriteOnly これねUsefavoriteOnlyPowerですね UsefavoriteOnlyPathか こうするのを忘れていた これ大事 あとここでモデルデータのBindingランドマークス使ってますけど 別にこれはねBindingして いきなりフィルターかければ まあいいんで あるためかFind モデルデータ モデルデータのランドマークスだ あれこれじゃダメなのか モデルデータが見つからないエンバイロメント モデルデータがあそこか これでアップファインダブル それをしないといけないな そう考えるとBindingランドマークスが取れてもいいのかな そうしておきますか なにかとBindingしたものがフィルターとランドマークスで取れるということになって フィルターとランドマークスでランドマーク ランドマークで言っているとランドマークロー ローは別にいいのかな ランドマークラップでバリュー バインディングになっているんだね バインディングされているランドマークが サークルイメージは関係なくて Bindingされているランドマークが サークルイメージは関係なくて もう一回シミュレーターで動かしてみますかね バインディングをやり取りしていれば大丈夫だと踏んだんですけどね ダメかな これで右にこっちのほうにして 何も出てない 条件がフェイバリッド オンリーフォルスだった場合には全てが そういうことでしたね どこやったんだろうねって感じだね フィルターと別ののを作っているのだったかな そういえば だからこれでSwitchですよね Switchのフェイバリッドオンリー このフィルトは消しちゃっただけかな フィルトはここ ここ ここ そうですね 消しちゃっただけですね じゃあ 自動でとか フェイバリッドオンリーだった場合には 今やったやつですよね ただケーストルーだった場合には これですよね そうじゃなかった場合には モデルデータのバインディングランドマークですね これはそのまま返してあげればよいと こんなふうで これでいいですね これで格好が足りないって感じね こうね こうしてあげればいいけど バインディングはちゃんとならなかったな おかしいな おかしいのはまあ自分でしょ けどね これでリストのほうを見て これで いいですね これでリナーション ちゃんと引っ張り上げるようになって これでちゃんとリレークを選んで この保証したときにね 変わらないという状況になって でもきっと反映されてるんじゃない そうですよね 昔の話に戻ってきましたね これね ああ そうか そうか 分かった気がする これで 超フェイバリットボタンというか ランドマークリストの中のランドマークロー ランドマークデータのボディの中の ディテールもそうなんですけど ここのランドマークローも バインディングしてあげないとダメなのかな こうね 要はね あとバインディングって 押してあげて コードはあとはラップドバリューなんてものは要らないけど あれ ラップドバリュー これはなんで選ぶのかと思ったんだ えーと レビューだからかな なんか気づかなかったときですかね これをOKしてあげて これでコードとしてはOK あ 違う 今インターフェース変えたからだ これでどうなのかな ローも ディテールも別にバインディングにしたからって ディテールのほうのバインディングには 影響しないですね これにして このリレーク選んで さあ 外す 外れた 外れたね どうなのか これディテールゲーでしょ なんでこれがローのほうに影響するんだろうと思うんですけど でもローのほうの方針が働かないから ここまで来ないとかそういう話 戻って そのままリレークにしなくてはいけない 外しなくなりましたよね もう1回押し押すと入りますね あ 上手くいった あ 大丈夫ですね これならいいや いいんだけど なんでバインディングをローに対して いや ここですね これ1個1個に対してロー あ そうか この後か これクリックしたときに えーと ディテールが出る いや でもそれはナビゲーションばかりしてますよね 1個前のね それなのに これより先で これとは関係ないランドマークなのに 関係ないバインドとされてるほうのスターが 効かないってのがちょっと分かんないな なんでなんだろう まあでもうまくいったからいいんですけどね 全部バインディングにしたことによって こうか まあまあ いいや いいのかな いや あまりね 納得いかない状況で進むのってあんまり良くないことありますけど ランドマークリストでしょ ランドマークリストの中で ボディの中で こういう位置で ここのフィルタブルランドマークはバインディングなわけですよね だからランドマークがバインドデッキに入ってて その中でナビゲーションリンクのランドマークディテールはバインドしたものを渡していた そのラベルのランドマークローには 別にね そこのスターを押せるわけじゃないんで そこにはバインディングしたものを渡してなかったってやったら ディテールのほうが そこでバインドされている星ボタン これを押しても何にも変化がなかったのに ローのほうをちゃんとバインディングさせてあげたら これがちゃんと反映するようになった そういうものなのかな わかんないな そうなったからそうなんでしょうけど どこで再評価のタイミングが来るんでしょうね 考えてもすぐにはわからなそうだからひとまず置いておきますかね これでなんとかなったということで こうしたら後はApple Watchのほうか Apple Watchのほうにターゲットを移すとして それはランドマークス4 WatchOSのほうで ランドマークディテールだけしか入らないので これでモデルデータ このプレビューは良いか モデルデータはバインディングにして情報を持たせた これのプレビューは良いのかな ビルドが今かかるからOKですね ランドマークでボディがこうやって ランドマークに対していろいろやってるから ここ触ってないしリファクタリングしたくなるところももうなさそうなんで これで良いですかね ただ今までやってきた 今日やってきたリファクタリングがバインディングに頼りすぎてるところがあって そういうUIのコードをあんまり見た記憶がないのを考えると あんまり良いコードではないのかもしれないというのは感じてるんですけど ただバインディングをずっと使い続けることによって 得られることとしては 元のデータは同じものっていうのが確実視されていて 他のちょっとリアルにあったみたいな 渡されてきたランドマークと エンバイロメントにあるランドマーク数と照らし合わせて 見つけてなんかするっていうの 結構ランタイムに依存しすぎるじゃないですか まぁだいたい渡ってきたランドマークは エンバイロメントの中には絶対あるんでしょうけど その保証がなくなっちゃうんで それよりはランドマークのバインディングを取り回したら絶対にあるわけですよね その辺の観点から今回はエンバイロメントを 使わなかったというそんな感じですかね エンバイロメントが出る前まではね その辺は普通に取り回してやってたんでしょうけどね その頃あんまりじゃない全然 とりあえずコンカレンシーでないや とりあえずUI弄ってなかったから その頃のセオリーは分かんないや まぁとにかくそんな感じでできた気がするから 要らなくなったコードを消しつつ このバインディング2みたいな細かいやつも じゃなくなってありがたいですね でこれでOKかな ここはねエルザーがないか でこれってやっぱフェーバリットボタンを バインディングでいくぜと思ったらよいし イメージこれを表示するだけだからいいですね ランドマークリストはIOSのですけど モデルデータ モデルデータまだ使ってますね じゃあここはいいとして ランドマークの方法はモデルデータ 取ってないからOKですね できたかもしれない 良さそうですね リファクトリングできたということで いい気がする また再びスウィートURLが随分様子が変わってきました まぁまぁ色々試していって 最終的にできたコードがどんな いい感じか悪い感じかそれも楽しみにしながら やっていけばいいのでしょうとりあえずね 今のところ意外と綺麗に収まってるかな 論理的にね あくまでもちょっと煩わしいところありますけどね インデックスバイってまだ使ってんのかな まずインデックスバイで使ってるか ファーストインデックスオブランドマーク なかなか使ってないのか思ったけど ページビューコントローラーで使ってますね これを使うねって言わないですね いいですねファーストインデックスオブランド マークでページビューコントローラー これは違う関数ですね 違う関数だから これはもしかしてもうあっていない あったというかこれか ファーストインデックス 違うな ファーストインデックス インデックス バイ そうか これちょっとアウトしてみますね ビルドを開けてみると あともう インデックス探してないんじゃない かな 多分そうかな インデックス を探すって多分エンバイロンだから やろうとしたんだと思うんですよ いらないですよね インデックスバイ ITも使ってないんじゃないかな こんな気がする これも使ってんのかな 使ってないですよね あの方も いらないですね よかった インデックスに依存しなくなった のがちょっといい感じがする これでビルドがオッケーで あと1個 警告が出てるからそれだけ飛ばして おきますか 何の警告だろうこれ トレイトセット 47と18 トレイトセット トレイトセットの18の26でトレイトセット は取れませんとか言われてる どこで言われてるんだろうこれ ビルドの中 えっと1回ちょっとクリーン してみますかね クリーンすると 当然警告がなんかなるでしょ その後ビルドをかけて このときに 警告がどこで出てくるのか 今ビルド かけてるんだけどビルドは警告 が出ますね やっぱりビルドの警告 これでプロジェクトでアセット カタログ アセットカタログのコンパイル で警告が出てる トレイトセット デバイス トレイトセットはどこだろう ちょっと下のほうに書いてない か でもアセットですね アセット というとまず1つはWatchOSのこれ ですね トレイトセットの中のこっち かな トレイトセット アップアイコン とか この辺はプロパティのやつか トレイトセット この辺は分かんない あともう1個ね アセットという とコモンの中に入れといたリソーシブ この中かな この中でトレイトセット って何だろうね ユニバーサル ユニバーサル インヘリテッドとかいろいろある けど 検索しないといけないかな Xコード アセット トレイトセット これだ アイパッドとかの出てきて ますよというやつ これがバグ バグって言葉は安直に使うもの ではないと思っているので 信用 するのかな UIトレイトコレクション っていうのかな UIトレイトコレクション は個別のエレメント アプリケーション のユーザーにとって別の個別の エレメントを表現するコレクション で これだけしか書いてないかな クラストレイトコレクション アイ パッドアプリ これがいろいろあります けど これのことかな トレイト っていうのはね あとはアセットカタログ の共同を試してみた これでトレイト 出てくるかな トレイト出てこないか 日本語で出てくるかな トレイト 出てこないね あとは 何かデバイス のなんかっぽいですね なので考え られるとするとこのイラストという か映像全体をユニバーサルでなくて iPhoneと例えば 投げ込み直さない といけないのか Apple Watchとか こういったふうにするっていう 手もあるのかなというのをちょっと 感じたわけですけど 移動しかない もんね コピーできたか こんな感じ 大丈夫かな 恒例で でも 全部 やっていくのちょっと骨が折れる 作業ですかね どうしようかな ユニバーサル ユニバーサルは悪くない 選択肢があったらそうするとダメ なのか なるほど よくできてるような 難しいようなことが ユニバーサル ユニバーサルでいらなくなった のも消して それで無視していい警告 かなとは思うんですけど あまり 警告を無視したくないですよね っていうのがあって ユニバーサル iPhone iPad Mac 今回はそれ用なんだろ ユニバーサル ユニバーサルでいい ですかね とりあえずもう一回ビルド 掛けてみますが これでビルドを掛けて 警告変わらないですよね きっとね 警告1個のまま 変わらなそうね 変わってないですね これで例えばこのリソースをターゲット から外してあげるみたいなことを 例えばしたとするとOSのビルドのとき に警告消えるんじゃないかな 警告 残るか 残りますね ではもう1個 こっちにもアセットがあるんで これ もちょっと消してみますかね これで ビルドを掛けたときに警告が残る か消えるか 残ってますね クリーンを1回したらどうなる かな 警告出ますね じゃあ今目指し をつけたアセットとちょっと違い そうね 別のアセットのコンパイル ですかね とりあえずこの復活カバラ が落ちた あの2つを復活させたら いいので 復活だけはさせないと ねって感じですね やっぱりまず ウォッチでいいというそういった ことなんですかね マークスアプリ は出た 出た 出た これのリソース と 選ぶと落ちるのか 一つずつやる しかないか 警告消したいな アプリ ウォッチのなんか問題ですよね きっとね シミュレーターの問題 なのかな これでとりあえずOSを追加 してあげて この手押しでもう1個 ね こっちのアセットこれもそれを ウォッチに追加してあげて 取り てアプリウォッチの26だからなの かな これ11とかにしてあげて ビルド かけるとどうなんだろうね これで ビルドかけると警告がどうなる か なくなってくれるかな 何か検証 してる お手OS26でシムランタイム これはよくわからないけど ランタイム ですね シミュレーターのね まあいい や ビルドかけて これで警告が出なく なったらどうしようかな そっちで やるか お手OS26がいいですかね 正確 やるならね 今はね じゃあ こんな感じで今戻ってるようで ちょっと 待ちですが 大丈夫だ ビルド がかかって警告は 今出ますね 警告 が出て バージョン26 フォーデバイス クルーズエッド フォレイトセット デバイスの デバイスの問題はOS というよりね でもビルドバージョン 26か バージョン デプロイ ああそか シミュレーターのバージョンですね そっか これね しょうがない 過去の 警告 気持ち悪いな ビルドの中で アセットのビルドで出ちゃってる けど そうやって出ちゃってるもの と捉えればいいのかな とりあえず ビルドのこの中の警告 ここですね コンパイルアセットカタログ です この中で警告が出てるのは この中の 最初の実行のログで これ がアニメーションベリエットが 実装されているいくつかのライブラリ これはよくありますね それで 開くACツールノーティスという ところがあるのかな マーニング でデバイスのフォレイトセット となるものが取れないよという お話になっていると フォレイト のことはちょっと分からないですね コマンドとしてはアセットカタログ バリアントで カタログはこの辺の iOS Appのアセットカタログ iOS App にもビルドしてますね そういえば アイフォンのに変えてみますか iOS ビルドをかけて このビルドの 警告がどうなるか こっちも警告出ましたね 出た やっぱり オートOSか オートOSのデバイス のって言ってるから そうなんでしょう けど まあいいか これは流しておき ましょうかね 同じでリファクタリング が終わったので 引き続き 次回は またチュートリアルに沿って 次は Section 4かな クリーニングオートOS Appのリストをいよいよ作っていく ところになっていくと思うんで それをまたここだ Section 3ですね Section 3かな ここからやっていく感じ にしますかね DTLBか DTLBはその前の DTLBか どこまでやるか これやったね Section 3はやっていって DTLB ここだ 次回 アドバラントマックスリスト これをやっていく感じにしましょう 今日はこれで終わりにしますね お疲れ様でした
