Transcription & Summarize : とりあえず読書会 SwiftUI Tutorials #40

はい、それではとりあえず紹介、Swift UI 2.0に進めていきましょう。 まあ大詰めも大詰めというか、終わりはしたと言いますか。 というわけで全部ね、やったんですけど、コードのリファクタリング。 まあ前回と前々回はテレパクですね。 リファクタリングしながらコードを書いていく。 今日とかおかしくなったとこ、それを直して、ようやく前回でね、いい感じに直したので。 今日は純粋にコードを全部見渡して、ちょっと手を入れたら面白いかなとかね。 または、まあイラストワークが来てるけど、もうちょっと面白い表現がありそうだねとかね。 そういったところを中心にやっていけたらいいのかなと思います。 はい、では早速いろいろやっていきますか。 まあいろいろと言っても、やることはそんなにイメージはできてないんですけど、 まあでもその中でもちょっと気になってたのが、それだったかな、映像ですね。 うーんと、まずコンパクトマップ周りというんですかね。 まあ大したことではないんですけど、コンパクトマップってそれくらい分かりやすいんだろうというね、 そういったところがちょっと気になるところでありまして、それをまずは眺めてみようかなと。 まあそんな感じで、どこだろう、コンパクトマップ検索すれば分かってくると思うんですよね。 うーんと、コンパクトマップ、あれですか、コンパクトマップでしょうね。 えーと、ソースは?あってますね。コンパクトマップの中から。 まあいいか。で、あと出てきたらゆっくり見ていきますか。 まず何にしても、クロスプラットフォームで、クロス?マルチ?どっちだろう。 まあクロスというか、複数のOSを想定して作ってるけれど、 そのコードの整理の仕方がどうなのかなというのがちょっと気になってて。 まあまず、こんなのも気にしながら、カテゴリー、一番上のソースから見ていきますか。 えーと、タイプエリアでカテゴリーとカテゴリーにする、これはまあいいですね。 それはちょっと後で検討してみますか。 まあ何にしても、カテゴリーで、ストリングで、センダブルで、 あ、そうそう、ドイツとコンカレンシー対応も今回ね、 ちょっとリアルではまた触れてないんですけど、 今回はそれもやってみてるんですけど、ほとんど引っかかんなかったですね。 ドイツとコンカレンシー周りは、別にやってればこういう感じなのか、 それともまあネットワーク通信やってないからですかね、今回はね。 まあ分かんないですが、とにかく一応、ドイツとコンカレンシー対応もやっている。 で、あとコーダブル。コーダブルで十分なんでしょうけど、今回の場合ね。 まあでも、まあコーダブルで、うん。 そんな、えーと、まあカスタムでね、エンコード。 この場合はバグ含んでるかチェックしないといけないんですけど、 まあそんなに複雑じゃなければ、 で、ダブルつければ勝手に実装がつけられて、適切な動き方するんでね。 最初からコーダブルにしておけばいいのかなっていう気がする。 あと、ケースイッテラブル。 これはまあ、あの、この、ビルダーするためにね、 これらをレッキできるようにする、ということでケースイッテラブル。 まあまあ、とりあえずそんな感じですが、うん。 ケースイッテラブル、いいですね。 で、それでカスタムコーディングのカスタムコーディングコンバーティブル、 えー、は、えーと、ディスクリプションで問題なんですね。 で、アイデンティフィアブルもITでセルフ、いいですね。 で、それで、これいるんでしたっけ? ビルドをかけてみますけど、今ビルドが通りますよね。 ちゃんとね。 で、このアイデンティフィアブルっているんだったかな? の感、デバッグ上に作った気がするんですよ。そうですね。 うん、なのでまあ余計なITっていうプロパティを生やすと、このIDなんだろうって感じになっちゃうんで、 今回は、いらないなら消しておけばいい気がしますね。 あとカテゴリーのダイナリショナリをディスクライビングでね、 この並び順変えてるっていうところ、若干コードが難しいですよね、これね。 なのでここがちょっと気になってはいるんですけど、まあでもね、これはまあ、カテゴリーのテキスト表現というものは自分自身なんで、これでいいですね。 これでランドマークはOSもミッドだし、よくて、ハイクを埋めていきましょうか。ハイクもOSもミッドですね。 で、同じようにハイク図で配列をね、こうやって表現していって、ハイクも元同様に24488アイデンティフィアブル。 今回はIDというプロパティもあるんでね、アイデンティフィアブルはつけておいても何も差し使えないのと、 そういう人いわゆるは何かとアイデンティフィアブルを使うことができたりするんで、まあこっちね、入れておいていいでしょう。 実際使ってるんじゃないかな、今回。そんなことないならなくていいか。 まあでもIDで識別できるかどうかっていうのが大事ですけど、普通できますよね。 だからまあアイデンティフィアブルつけておいていいでしょう、きっと。 オブザベーションを中に配列にしてますけど、これはタイプエリアスしなかったんだ。なんか自分のコードに一貫性はないですね。 まあまあ、一貫性つけておきますか。タイプエリアス、オブザベーションで、イコール、配列のオブザベーション。 こんな風にしておけば、ここで配列を持ち出さなくてもオブザベーションでできると。 ここはそんなに動かなくていいですけどね。 これでディスタンスワープル出し、ディフィカルティ、何位かな、ピント出し。 で、フォーマッターがメインアクターで保護してますね。 これはちょっと気になった。ディスタンステキストがメインアクターで保護されている。 これちょっと気になりますね。えっと、パティックタップはしようがないのか。 でもなんかフォーマッターでフォーマットするためだけに、ディスタンステキストを使うってことは大体UIのために使うと思うんですけど、 このためだけにメインアクターっていうのはちょっと大げさな気がしますね。 あと、これ取っちゃったね。レングスフォーマッターがエラーを思ったけど、エラーなのか。 まあ、ちょっとやってみました。 こうやって取っておけると、大丈夫ですね。 じゃあいいや。レングスフォーマッターってオープンクラスでフォーマッターですよね。 で、フォーマッターはコーティング、コーティング、NSオブジェクトですよね。 どうしてか出てない中でこれがトールっていうのがすごく気になりますね。 えっと、センタブルじゃないので、フォーマッターが警告出しても良さそうなんですけど、出てないのは何でだろう。 気になるのは、アプリの設定で、例えば、バージョン。 バージョンいいんですけど、バージョン、TWIFTランケージバージョン。 これはやってしまってますね。TWIFTロックにして他のOSは、このOSもダメですね。 iOSは確かロックですね。 これをやってしまってますね。 TWIFTコンカレンシー対応が甘かったということになるので、これから厳密なTWIFTコンカレンシー対応をしていくことになりますという話のようだったんですが、 ここは、あれ、えっと、ここが出なかった。TWIFTどこですよね。 ロックですよね。 ドリフトコンカレンシーはコンプリートですね。 コンプリートですね。この辺ね。 うん、大丈夫ですね。 設定は良いはずなんですけどね。 もう一回開き直してみますかね。 で、ビルドをかけて。 で、これで。 結構出ると思ったんですけどね。出ないはずないでしょうという気分でいっぱいなんですが、 私、ちゃんと、クリーン化したほうがいいのかな。 ファイルのファイルですね。このフォーマータ。 これをメインアプリの保護をやめたというそういった状況。 これで一回保存してビルドをかけたからって変わんないのかな。 クリーンしてみますね。今、クリーン成功。 で、ビルド。 成功しましたね。 成りそうなのかな。 これがプライベートスタティックレッドですけど。 プライベートレッドだとどうでしょう。 これは実験ですね。 ビルドをかけたときにファイルがエラー。 これはエコーダブルに準拠していない。 あとこれが同じだね。 あとは、そうですね。 グローバルに置いてみますか。 とりあえずグローバルにプライベートレッド。 これでいいですね。 ビルドをかけると。 大丈夫ですね。 バーにするとダメでオッケーなんですかね。 ダメですね。 そうなると、スウィフトコンカレンシーチェック 働いてないでしょうと自分は思うんですけど。 違うのかな。 スウィフトのバージョンでいいんですよね。 スウィフトのランゲージバージョン。 上に出てきたか。 モジュールバージョンじゃなくて。 ここら辺。 スウィフトランゲージバージョン6ですよね。 スウィフト6でコンカレンシー周りはこれで良かったと思うんですね。 マックスOSも6なんですけど。 これでプロジェクトの中で6を指定してやって、それを引き継いでるという形を取ってますけど。 これ明示してみます。 明示したって大体変わらないと思うんですけど。 1回選んで、1回6。 選んでビルドをかける。 マックSOSのビルドですよね。 サクシードで英国が出ない。 中身は中でハマってますね。 これはどうしよう。 スウィフトコンプリートでやると。 これもう大丈夫か。英国出てないですね。 スウィフトの話じゃないでしたっけ。 じゃあiOSでビルドかけてみましょうか。 iOSは最初からiOSを想定したコードを作ってるんで。 ここは大丈夫と思ったらエラーだ。 コンカレンシーセーフのエラー出ますよね。 マックSOSも出ましたね。 もう1回マックに変えてみましたね。 マックSOSビルドで。 これは困りましたね。 どうしたものか。iOSだとレポートがされるけど、そうじゃないと。 こうしてないのかな。 マックSOSここですよね。 もう1回ビルドかけてみて。 これですよね。 これ何でしょうね。 わかんないとちょっと困りますよね。 スウィフトストリクトコンプリートセーフがここですよね。 これがiOSウォッチOSマックOSに保存されていて。 それでこのプロジェクトの設定のレベル数にしてみますかね。 スウィフトランゲージバージョンは最終解決がロックですよね。 ランドマークスアプリがロックセットされて、プロジェクトがロックセットされて、 マックOSのデフォルトはアンスペシファイトですよっていうね。 こんな感じですけど、とにかくリトルブされてるんでOKだと思うんですよ。 あと考えられるのは、どのビルド、どのターゲットかっていうところ。 これでマックOSは26ですよね。 他にないから良いと思うんですよね。 ウォッチOSも26ですね。 iOS、これはいろんなプラットフォームに対応ということになってますが、26ですね。 ここね。 そうすると問題ないと思うんですけどね。 マックOSとiOSでここのストリクトコンプリートセーフが変わってくるなんてことも、 なんか考えにくいような気がするんですけど、それがなんでパスしちゃっているのか。 Linuxフォーマット。Linuxフォーマットはオープンクラスでファンデーションに持っているもので、 もう一回さっきも見ましたが、一応こう説明を。 一応見ましたが、フォーマッターはNSオブジェクト、NSコピングとNSコーディングで、 これらは別にね、メインアクターで保護しているみたいなこともなさそうですしね。 そうするとここで、コンカレンシーテッキングでエラーになるはずなんですけど、 これメインアクターになってるのかな。ノンアイソリティブ。こうしたときにはエラーになりますね。 これメインアクターなんですかね。 何か書いてあったような。メインアクターを追加せよ。 またはコンカレンシーセーブチェックを無効化する。 これのメインアクターかを調べることをまずやってみますか。 やり方は非常に簡単で、タスク。 ここでメインアクターですね。 その中で使ってみれば良いと。 プリントで、セルフのFでなくて良い方が良いかな。 Iクのフォーマッター。 これが普通にまず使えますよね。 どちらのほうが別のエラーで、エラーになってますけどそれは負けないので。 これをメインアクターで縛らなかったとき。 この時に、ディタッチの方が良いですね。 この時にフォーマッターをメインアクターばっかりになってますね。 だからこれディフォルトアクターばっかりが、もう導入されたんでしたっけ。 あ、それコンパイルオプションがありますね。 それを見てみれば良いんだ。 なるほど、合ってるかな、予想が。 ビルドセッティングスですね。 ビルドセッティングスで、この中でアイソレーション。 ディフォルトだけで出てくるかな。 ディフォルトアイソレーションが スイストコンパイラーのオプションで、多分あると思うんですよね。 ディフォルトアクターアイソレーション。 ディフォルトアクターアイソレーションがメインアクターになってますね、この絵が。 なるほど、もうか。 macOS 26だとそうなるんですかね。 ディフォルトアクターアイソレーションはこれを有効にしておくというか、これにメインアクターを指定しておくと、 特に明記されていない、または推論されるべきところ、 それ以外のアプリ領域がメインアクターで隔離されるという、 最近登場したスイストコンパイラーを 楽に導入するための仕組みですね。 よほど詳しい人じゃなくても、スイストコンパイラーを 扱っていけるようにするというための機能。 普通はメインアクターでやればいいんだと思うんですけど、 個人的に大気心で、これが導入される前のノンアイソレーティブ。 これでやってみたくなっちゃうタイプなんですよ。 ディフォルトアクターアイソレーションをmacOSのアプリの設定だけして、ノンアイソレーティブにした。 WatchOSもメインアクターですね。 これもダウンロードしてノンアイソレーティブにした。 iOSはノンアイソレーティブですね。 設定してない。 これでディフォルトアクターアイソレーションプロジェクトの方も 指定していないという感じですね。 これをどうするかですね。オープンクラスのフォーマッターなので、 これがセンダブルであるという保証がちょっとないですよね。 なのでこれを安心で使うためにはメインアクターで保護するというのがまず一つですね。 あともう一個はこれをロックさせないで、 ロックしてあげるというのがもう一つですね。 そういったのが考えられる。 その中で何を取るのか適切かということを考えていったときに、 一つはフォーマッターを使うたびにイニシャライズする。 これが一つですね。このフォーマッター。 これがどこだ。どこも何もないか。 このインスタンスを使うときに作ってあげる。 一般にこのフォーマッターは作るのにコストがかかるよってよく言われるので、 この中で作るというのはあまり見ない気がするような、 そんな気がするんですけど。 考えられることとしては、そういったパフォーマンスを度外視して、 度外視してローカル変数としてPenguinフォーマッターを導入する方法が一つ。 あともう一個はロックですね。 なので間制御を行って、フォーマッターへのアクセスを同時にさせない。 これがもう一つですね。 あとはフォーマッターを使うだけなら、 アイソレティとアンセーフでもいけそうな気がしますね。 それも選択肢に入る気がする。 完全に読み取りだけで使うのでね。 あとはメインアクターで保護ですね。 ディスタンスエキストというのは明らかにスイートUIのエキスト表現で使うんだろうというのが考えられるので、 ならばどれをメインアクターで保護しても問題ないだろうと。 そのあたりはブロックするよりフォーマッターで保護した方が、 フォーマッターじゃなくてメインアクターで保護した方が 最適性もあるので、そっちの方がお勧めですかね。 そんなことをいろいろ考えた上で、 今回はどれをやろうかなという感じで、 オンアイソレイティブもいい気がするのですが、 あとはアクターでブロックするにもそのあたりはいかなそうなので、 さっき言ってくれたか。 プライベートスタティックレッドでノンアイソレイティブで、 ディスタンスエキストが同時に呼ばれたからといって、 読み取りだけしかしてないから大丈夫ということでいいんだと個人的には思うんですけど、 どうでしょうね、ノンアイソレイティブアンセーフ、こんな感じ。 良いようなと怖いような、こんな感じの雰囲気を持ったと思いますね。 迷惑ですね、これはね。 あと考えるな、ここだけ同期的に、 オブジェクティブシーンのときにね、何だっけ、なんたらワンスみたいな、 そういった企画方法があった気がするんですけど、そういったので動かせるか。 ノンアイソレイティブアンセーフでいい気がしますね、これでやっときました、今回は。 パフォーマンスと安全性は若干自信ないけど大丈夫だと思うので、 まあまあ落ちることはないでしょう、落ちたら考えればいいでしょうということで、 これで俳句はOKですね。 次、俳句のオブザーフィッシャー。 これは、エレベーションとベースとアートレイとこれらをレンジで持っていて、 グラフを拡幅に使う要素が大事ですね。 それのシーケンスのレンジのダブル、レンジのダブルのシーケンスがそれに対してマックスマグニチュード、これによりレイジマップマックス、 レイジマップマックス、最大取るときに解決を計算していったということだ。 まるっとまとめるよりは良さそうですね。これで大体位置を取るわけですが、オプショナルになってますね。 レイジのマップ、レイジってことはシーケンスで、これでマグニチュード、ワンスですよね。 これでマックスの中でオプショナルのことってあるんですか? あるのか、ああそうか、マックスからのときか、はいはいはい、なるほど。 良いですね、これでね。シーケンスのレンジエレメント、ここが若干分かりにくいかなという気もしたんですが、こういうものですよね。 またレンジダブルに名前を付けるかですけど、レンジ、まあまあ、これはいいですかね。これでOKで、次、イメージ。 イメージの方は、センダブル発射ブルなイメージでネームを取り、そのネームをオーダブルでそのまま名前からインスタンスを作るようにしていって、 フェーチャーイメージオブランドマークでランドマークのフェーチャーイメージを取得する。 パークとかステートとかいろいろあって、成り立っていて、ランドマークのエクステンションで、オーディングキーズ。 初期のときにプライベートエクステンションでやってますけど、オーダブルの必要なものはプライベートで大丈夫なので、こういう定義にしている。 イメージだけちょっと名前を変則的にしていて、イメージネームから自動的に変換して、イメージにして持っておくっていう、そういった変更の方式になっている。 Bindingランドマークスバイカテゴリーで、カテゴリーズプロパティを使うことによって、このキーを取得できる。 これは完全に防衛公文的な用意ですね。 キーズとか言われても、何の話か分からないと困るので、カテゴリーズと名付け直したという感じ。 BindingランドマークスをBindingにしているときには、Bindingランドマークス。 別に1個1個Bindingしてあるランドマークを追い込んでまとめることができるよというコードになっている。 パートセッター用意して、そのBindingを設定するという感じですね。 こんなに難しくはないかな。 これがエレメントがアイデンティフィアブルだったときのシーケンスで、エレメントバイIDか。 この辺がちょっと読みにくいなと感じていたことですね。 エレメントバイIDでいいんですけど、 ちょっと私、この名前をわかりやすくしたいなと思ったことがあった気がして、ランドマークバイID。 もう作ってあるか。 ランドマークバイIDはエレメントバイID、そういうやつを作りたいという感じ。 だからこれはランドマークリストか、そうですね。 あとはサブスクリプト、エレメントバイID、そうですね。 シーケンス、ランドマーク、シーケンスって言っているこの時点で、 エレメントバイIDか、シーケンス、そうですね。 サブスクリプトぐらい持たせてもいいのかなという気がしたら、ちゃんと持ってますね。 じゃあ、いいですね。 ってことはつまり、ランドマークでエレメントバイIDとか書いてあるけど、 ランドマークでID、これでいいんじゃない、もしかして。 どっちが直感的か、テキストで説明するよりも、 こういう記号だけでの方が意味が取りにくいという問題があるので、 悩ましいところですけど、 BindingランドマークのIDがありのまま。 エレメントバイIDとどっちがわかりやすいか。 これは記号対文字なので、別の問題ですかね。 どうしますかね、これ。 でも、サブスクリプトでいい気がしてきたので、 こう思ったらここがセルフ書き加工になっちゃうんで、 わかりにくい気がするので、ここはいいや。 そうしてあげたら、次はランドマークコーディネート。 全部見ましたっけ、ランドマーク。 また、ITSAME CATEGORY ASでカテゴリーに準拠しているのか見てるし、 また、ITSAME CATEGORYでイテレーターを回していって、 カテゴリーが手に入ったら、それとそれと。 同じカテゴリーか、イテレーターに対して、 ITSAME CATEGORY、これをイテレーターで出し消す。 それに対して、ITSAME CATEGORY AS、これを読んであげると。 大丈夫そうな気がしますね。 じゃあ、これで次。コーディネート。 コーディネートも同じように、1280x1280でコーディネート、 いや、CLロケーションコーディネート2Dは、 外側にシャライザーを持たせたと。問題ないですね。 あとは、CLロケーションも、外側にシャライザーを持たせたと。 大丈夫ですね。 マップズーム。えーと、こちらはマップビューのズームがストリング、 受け継いでいられる。 ストリング、ニアがローバリューを持っているというのが、 なんとなく引っかかるんですが、 それはね、カスタムストリングコンバーティブルで 優秀したので、まあ、これはいいでしょう。 で、ローバリューなのは、これは、えーと、ズームの値が、 えーと、あれ、これ使っているのかな。 あと、ストリングのローバリューをカットしてみましょうか。 なので、ここでコピーしておいて、で、この辺のロキ地ね、 これをカットしてあげて、で、えーと、 3つ選んで、これ消せないのか。 あ、消せないんだ。 じゃあ、まあ、後ろ3つを選択して、 オプションを押しながらやっていけば、大丈夫ですね。 で、それでこうして、ストリングを持ち物から 除外したときに、どうなるか。 こっち列を求めているのかな。ローバリューがないでしょ。 で、それで、イニシャライザーはない。 AppStorage、ズーム、ズーム。 えーと、イニシャライザー。 ローリプレゼンタブルか。 あ、なるほど。AppStorageがローリプレゼンタブルを求めるから、 どういう風にしたっていう。 どういう事情か。ローリプレゼンタブル。 ダイナミックプロパティ。これだけか。 ローリプレゼンタブル、バリュー。 こんなこと書いてない気がするけど。 バリュー、ローリプレゼンタブル。 うん、まあ、ローリプレゼンタブルか。 そうすると、ストリングですね。 で、まあ、せっかくならローバリューも設定しておいて、 これを映像化に使っていくっていうね。 そういった形をとっている。 で、これはいいですね。これでね。 で、アイデンティフィアブルで、 ITを返す性格を持たせていて、 ストリング表現と、あとはテキストに対してね。 ズームを渡せば、それのテキスト表現が得られるようになっているよね。 こういったコードにもなっていると。 OKですね。 次、マップビューズーム。 これが今見たやつだ。モデルデータ。 オブザーフィッションで、ファイナルプラスで、この中の中身が、 えーと、バーになっている。 バーになっている。パイプ。 うん、そうだね。パイプ。 うん。まあ、いいか。 デフォルトプロファイルをスタティックレッドで持っていて、 プロファイルが終わって、デフォルトプロファイルを取得するプロパティ。 まあ、これは便器上ですね。 あとはエフェクティブプロパティとイニシャライザーで、 バインドバンドルから取ってきていて。 モデルデータのエクステンションで、 バインディングランドマークス。 これもね、取得して。バインディングライフォーメーション。 バインディングランドマークスですかね。 道場が…。我等は、道場の名前が分かりにくいのかな。 バインディングランドマークス。あれ、何ていうところになってるかな? バインディングランドマークス。うん、いいよね。 これでモデルデータのランドマークスを返せば済む、 と。 で、バインディングランドマークスの アイカテゴリーもこんな感じで済む。 バインディングランドマークスから アイカテゴリーをね、その、取る訳ですと言うんですか。 そういった形でグルーピングする。うん、いいですね。 で、バインディングフェチャードランドマークスは、 バインディングランドマークスからフィルターでフェチャード。 これに、これを満たしているかってことですよね。 で、これで、プロジェクトを使わなくても書けるのでは、 丸カッコ、一応上に書きます。 アドット、フィルター、フィルター、丸カッコ、 円の、トラップドバリューの、フィルター、アイズフェチャード。 こうすると、一個上と同じノリになるので、 収まりがいいですね。 で、あとは、バンドルのエクステンションでモデルデータ。 モデルデータとして、URLからデータを取って、 データをレーソン、レコードとして、 うん、リターンするくらいですかね。 うん、なるほど。 これはこれで良いですが、モデルデータはどこで使ってるんでしょうね。 モデルデータは一箇所だけで使ってますね。 モデルデータの中で、メインバンドルからね、 呼び出すのに使っている。 えーっと、モデルデータのバンドル。 ここで思ったのがこの、バンドルなんですけど、 必ずしもメインバンドルにあるとは限らない気がしますね。 なので、バンドルとして、えーっと、 バンドルでデフォルトをメインにしてあげて、 それでバンドルに対して実行するという方が、 汎用性は高そうですね、このモデルデータとしてはね。 うん、これで良いでしょう。 で、ファイル名とかもここで固定してますが、 ここでしがろうとしないから良いのでしょう。 エクステンションモデルデータで、 バインディングランドマークスとか、 バインディングノンドラバイとか、 これ見た気がするって、今、 データ取ってきたからかな、そんなことないか。 で、デーソンでコードしてデータを返す。 で、エラーだった時には、デコーディングエラーか。 デコーディングエラーでキャッチして、でまた別のキャッチか。 で、レッドエラー×デコーディングエラー。 アンノンデフォルトか。 うん。 んーと、レッドエラー×、このエラーを、 えーっと、デコーディングエラーだった時、 まあそれはね、これやってるわけですけど、 デコーディングエラーの、うん、アンノン。 アンノンデフォルト、これはどうするかわからないや。 アンノンデフォルトも問題なく使えるようだから、 この2段階のスイッチいらない気がするんですよね。 うん。 それをどうするかはですね、これはね、 なんかスイッチ分が複雑になってるような気がして、 えーと、リーズンですよね。 リーズンでコンテンツ、タイプミスマッチとか色々やってますけど、 この理由、この理由はもしかすると、 デコーディングエラーに対してローカライズエラー、 これを準拠させてあげるっていう手もありますね。 デコーディングエラーにそんなことやっていいんだろうか。 アプリケーションなら大丈夫ですね、とりあえずね。 えーと、うん。 それやっておきますかね。 デコーディングエラーこの辺を。 追加するために、やっぱここですね。 この辺の文字をコピーしておいて、それでデコーディングエラー。 デコーディングエラーはどこに入ってんだ? これは。 ザリッと標準ライブラリーか。 どこでもいいですね。 これで新たに場所を作りまして、 それでフォーダブルとして、 エクステンションを3つのビュー全部に搭載してあげて、 保存場所はとりあえずルートでいいですかね。 で、コピーしてきたやつを貼ってあげて、 貼ってあげるけどエクステンションだ。 エクステンション、コード、デコーディングエラー。 これに対して、アッドマーク、プレディクティブ、 カスタム、ローカライズドエラーとして搭載させてあげて、 これで返すのがエラーディスクリプション。 これをコードでね、返してあげると。 こうですね。 こうしてあげると、モジュレットとして取れる。 ここのエラーというのはセルフですよね。 なんとこれ、リーズンと言われますけども、 変数に受ける必要がない規模感ですよね、これね。 なのでこれで、OKで、他のアンエクスペクティブエラーはセルフか。 セルフ。アンエクスペクティブエラーがセルフか。 これはローカライズド、無限ループすると怖いですね。 多分大丈夫なんですけど、セルフか。 セルフで、セルフでしょうがないのかな。 難しいですね、これね。 デコーディングエラーでセルフを返しちゃって、 アンエクスペクティブエラー。 大丈夫な気がするんで、これでOK。 そうすると、デコーディングエラーがモジュレット表現できるようになったので、 そうした場合には、もはやさっきのレッドエラーで デコーディングエラーだった場合には、エラーのローカライズドディスクリプションですよね。 これで、もうフェーザーエラーか。 落としてあげればいい感じですよね。 これは悪くない気がする。 これで、モデルデータは終わり。 次、プロファイルですかね。 このプロファイルの方は、プロファイル型があって、 ユーザーネーム、プレフェクションネーム、 シリーズンフィンター、シリーズンナウン。 これを見るからに、センダブルですね。 なので、センダブルにしときましょう。 問題は出てないですけどね。 シリーズンはもう、ここかな。ここか。 シリーズンはもう、暗黙的か。 センダブル、こんな感じ。 これによって、プロファイルはユーザーネームとか、 いろいろ持ってるか。 ここで、ふと思ったんですけどね。 センダブルは、インターナルの型に適合する時点で、 暗黙的に、グローバルアプターとして、振る舞ってくれる。 センダブルとして、振る舞ってくれる。 グローバルアプター関係なかった。 なので、センダブルって書かなくていいんですかね。 ここね、あえて自分は書いてましたけど。 まあ、見通しがとってるならね。 いいと思うんですけど。 まあ、いいや。今回は入れときましょう。センダブルね。 で、ハッシャブルとかもいけるけど、 使ってないからいいですかね。 で、プロフィールの確定を落として、シリーズ。 いつもセンダブルで、こんだけやって。 で、IDか。このIDはいるのかな。 とりあえず、アイデンティフィブルだけ消してみて。 フェイルか。これは、買ってたみたいね。 あ、違った。買ってたかどうかわからない。 ローカライズクエラーがないよって言われた。 これは、インポートファンデーションが抜けてるからですね。 なんて言う、勉強か。違った。 高のぼって、連打させるんで、プレディックス。 違ったっけ。プレディックスが違うわ。 全然違う機能の話だ。 えーと、確かエラーで教えてくれましたよね。 えーと、んーと、ちょっと出てこなかったんですが。 なんだっけ、プロ、プロ、プロ、なんだっけな。 えーと、まあ書いてみますか。 プロ、ような、なんとかティフィル。 えーと、わからない。 ヒルガエルとかそういう意味だったと思うんですけど。 えーと、それを知るには。 ある方が、別の方を同期する。 これでいいですね。 その時に、マーク、なんて言うの。 ここがちゃんと出てないね。 ローカライズクエラー、エラーディスクリプション、もうすでに全部知ってる。 ローカライズクエラーはエラーである。 そんなところでもわかんないですね。 エラーディスクリプションという方があるのか。 デコーティングエラーか。 デコーティングエラーは、いや、ちょっとわからないな。 とにかく、ローカライズクエラー、すでに出ている。 ローカルモジュール、ファンデーション、エラーディスクリプションがまだ使われていない。 ローカライズクエラー、デコーティングエラーが宣言する。 ファンデーションのデコーティングエラー。 ローカライズクエラー、エラーだから、ローカライズクエラー。 なんだっけ。 プロ、プロ、ちょっと調べた方がいい気がしますかね。 第三者の方。 第三者の方にイコーダブルをするときに、 トゥイフトで答えてみますか。 トゥイフトでそのときに特性。 これが何がいるか。 特性も書いてみますか。 プライマリオソシート、これじゃないですね。 あとは、高登ってとかやるとできそうですね。 えーと、スライドばっかり。 スライドばっかり、不思議ですね。 な感じなのか。 自動吸収等、レトロアクティブ、全然違った。 レトロアクティブ、でもやっぱり準拠されてるんだ。 ということは、ローカライズクエラーで、ディスクリプション、エコーディングエラーでね。 コーディングエラーで、ローカライズクエラーに既に準拠している、 ローカライズクエラー。 そこにエラーディスクリプションを搭載してあげれば良いということだと思うんですが、 何で消滓しないのか。 デコーディングエラーですよね。なので、デコーディングエラーさせてあげれば、 ちゃんと動くかどうかが確かめられるということになりそうね。 なので、デコーディングのエラーを起こせるとしたら、 どの方でしたっけ? リーズン、プロファイル、これでしたっけ? ローカライズクエラーだから。 エコーディングのエラー、JSONデコーダーでモテルデータを復元するにあたり、 モテルデータだから、デコーダーがあるのか。 ここですね、モテルデータってね。 これで、タイプとかその辺が復元するの失敗するのが大事なのかな。 ランドマークで復元を失敗する方法としては、 このコーディネートが良さそうですね。 このコーディネートで、これは良いとか、これは良いです。 ランドマークでコーディングキー。ここで全然違う。 こんなキーにしてあげて、それで実行してあげればエラーになるでしょう。 その時、エラーメッセージがちゃんと出るかどうか。 うん。ベータエラーで、checked into first。 で、リーズンが、えーと、the data could be read. という風になったが、これは普通の、 ウィストコンパレンシーのエラーですね。 あ、コンパレンシーじゃない。コーダブル。 コーダブルのエラーだから、それはそれで良くて。 今やってたエラーは何でしたっけね? エコーディングエラーか。 あ、エコーディングエラーでいいのか。 エコーディングエラーで、えーと、checked into first みたいなことをやってましたが、 えーと、まだダメな気がする。 えーと、コーダブル。うん。 そうね。だから、この辺をやるとしたら、タイプミスマッチか。 タイプミスマッチをやるとすると、 えーと、モデルデータの中で、ランドマークでいいのかな。 うん。と、タイプミスマッチか。難しいな。 あとは、value not found。value not found。うん。 と、key not found。この辺が選べるかと思ったんですけどね、さっきね。 うん。実行した時ね。 と、ま、この辺はどうしたら。 ちょっと私、プレイグラウンドで試しておきますか。 こっちの方がなんか、良さそうね。 やりたいことは、エコーディングエラーですよね。 なので、プレイグラウンドは、 これが、あってもダメだ。 これですね。 で、これでこの中で試していけば良いと。 この試し方としては、うーんと、 インポートはいいのかな。 えーと、例えば、Expansion。 で、Localize。 あ、やっぱり、ファンデーションね。 インポート、ファンデーション。 で、Localized Errorに、Localized Error。 で、これに対して、Error Description。 これを、Springオプショナルを返す形の、 ローパティーですね。 で、これで、例えば、テストみたいな感じにして。 で、これで、Localized Errorじゃなきゃ。 えーと、エコーディングエラー。 で、こうしてあげて。 で、その上で、えーと、プリント、ロー、 えーと、ていうか、エコーディングエラー。 イニシャライザーは何かある。 あーそっか、レッドワーカー。 なので、これにしました。 で、コンテキストね。 コンテキストは、えーと、あ、まあ、何でもいいや。 こういう風にして、これをLocalized Descriptionじゃない。 Localized Error。 これでね、表示してあげようと思ったんだけど、 ダメって言われますね。 で、これを、Localized Errorってあげると、 ダメですね。 Localized Errorにするには、 これ一旦、エラーに止めるとダメなんでしたっけ。 エコーディングエラー。 エコーディングエラーは、えーと、 スウィート表示のエコーディングエラーですよね。 うん。 で、これはエラー型だから、Localized Errorっても いいはずだと思ったんだけど、 えーと、レッドエラー。 エコーディングエラーイフォールイニットの、 そうね、イニットの、 えーと、コーディングパス。 あれ、ないな。 エコーディングエラー。 で、エコーディングエラーのイニシャライザー。 そして、うん。 なんかが違う気がしますね。 エコーディングエラーが、えーと、 コントローラーとか、イニシャライザーじゃないですね。 ね、これで、えーと、 で、キューバーだ。 で、キューバーとして、ここでコンテキストとして、 イニシャライズで、 で、コーディングパスは特になく、 で、ディスクリプションが、まあなんか、もちです。 うん。 で、これでエラーが来れたところで、 このエラーを使っていく。 エラー、Localized Descriptionとですね。 で、こうしたときに、えーと、 メッセージがテストって出れば、ちゃんと、 エラーディスクライリングが動いてる。 なので、コードとして間違いないというね、 そういったことが伺えてくると。 まあ、そういうことになりそうですね。 うん。 まあ、で、これで無かったとすると、 Localized Error。 これのね、準拠が、なんか、うまくできない。 エコーディングエラーは、もはや既に、 それが取られたっていう状況になるんで、 他のね、手段を取らないといけなくなってくると。 まあ、そういった面倒さがちょっとありそうね。 こうやってうまくいくといいんですけどね。 で、うまくいったら、どうしますかね。 うん。まあ、それよりも、まずは、これがどうなるか。 あと、原因もね、もうちょっと探りたいんですけど、 多分、どこかで、Localized Errorに 準拠させちゃってると思うんですよね。 エコーディングエラーをね。 まあ、それを辿ってみればいいのかな。 でも、エコーディングエラーは、 Swiftの標準ライブラリにあると思うんですよね。 なので、できたいというか、実際のところは、 えーと、多分、ファンデーションで 設定してると思うんですよね、これ。 今、普通に、エコーディングエラーは、 Swiftの中にありますよね。 で、この中で、エラーで確認をしている。 それぐらいか。 うん、それぐらいか。 でも、やっぱり、ファンデーションですね。 ファンデーションの中にズバッとあれば、 まあ、嬉しいんですけど、 ファンデーションのインポートの中にあるのは、 えーと、ファンデーションとか。 ファンデーションエラーズ。 この辺かな。 えーと、ファンデーションエラーズ。 この中で、エコーディング、何か。 あとは、 HMRとかじゃなくて、 NSエラー。 NSエラーじゃない気がするけど、 エコーディングいないですね。 じゃあ、この他だと、 えーと、 これっぽいのはないですかね。 今のところね。 NSなんたら、 オブザーベーションとシステム。 システムかな。 システムはまた違いそうですかね。 お、何かあったと思ったら、 ストリング、エコーディング。 うーんと、これはでも関係ないですね。 ストリング、エコーディングなんていうのがあんだ。 それで終わっちゃったね。 アクションを探していくの難しいですね。 動いてない、動いてない。 早く動いてほしいな、今。 ローカライズドディスクリプションの敵か。 これを例えば、何か分かんない。 エラー、エクセッションエラーズとして、 ファンデーションがエラーズとしてですよね。 これで、エコーディング、エラー、エクセッション。 あー、ありましたね。 ローカライズドエラー。ありました、ありました。 で、これで特に何も発表してないってことは、 エラー、ディスクリプション。 これは省略されてる感じですね。 なので、省略として既定のディスクロが使われているので、 あとまで追加したものはちゃんと活用されるはず。 動いてほしいですけどね、そろそろ動かないかな。 プレイグラウンド、うーんと、プレイグラウンド、iOS問題なんですかね。 今はまあ、マルチプラットフォームでやってるから、 別にiOSじゃなくてもいいから、ちょっとmacOSにしてみましょうか。 macOSにした上で実行させて、このS4という文字列がローカライズドディスクリプションで 取れればと思ったけど、どうだ。 読み取れなかった? 適切なフォーマットではない。 ローカライズドディスクリプション。いや、そんなことないです。 ローカライズドディスクリプション取れなかったですね。 エコーディングエラーでもう一回やってみますか。 エラー、ディスクリプション、アプリクト、アプリクト。 これでもう一回やってみて、あ、ダメですね。 これは基本のエラーになるから、 ローカライズドディスクリプションが取れなかったか。 これはちょっと予想外だったんですが、自分の中では。 これをオフにしても一緒ってことですよね、つまりね。 あと考えられるところとしては、エラーメッセージを エコーディングエラーに対して持たせる。 この方法として、このローカライズドディスクリプションがダメだとすると、もう一つの方法としては、 これはちょっとよくない気がするんですけど、カスタムストリングコンバーティブルですね。 そしてこの実装がローカライズドディスクリプション。 これでこの中でテキストを返す。 これがアクティブルですね。 これで実行してあげる。 実行じゃないや、プレイグラウンドね。 プレイグラウンドを動かすと、これも規定のエラーかローカライズドで使われるからですね。 これは別に使わなければ、このときはなんと置き換わる。 これはいいんですけど、これで例えばエラーに対して、 エラーディスクリプションを直接呼ぶとどうなるでしょうね。 エラーディスクリプションが定義されているのが、 ローカライズドエラーの拡張ですよね。 なのでこれは機能に実装させてあげれば 大丈夫なんじゃないのかなと思ってたんですけど、 別のモジュールだからフィクスしちゃってる。 そういったことなのかなっていうのが気になる。 例えばこうやって、それでレコーディングエラーの エクセンションかディスクリプション。 これでもう一回一応消して、エラーディスクリプション。 この中で、同じじゃダメだね。 これでもう一回やってみますけど、 これだと本当にオブジェクト設置ができるからですね。 エラーのローカライズドディスクリプションにすると、 これが取れなくなる。 どうかこの拡張をデコーディングエラーにできないのか。 そうするとちょっとおばかしい厄介ですね。 どうしますかね。 リファクタリングね。要はこのエラーの表現。 あれどこだっけ。ローカライズドディスクリプション。 デコーディングエラーだったときには、 それをエラーエラーで表示していくよ。 このときにさっきみたいに別のエラーメッセージを出すための 工夫というのかな。 これをやってあげるっていうのもあるんですけどね。 まあでもこれだとね、このデコーディングエラーのときは そうしないといけないみたいな。 とにかく不死骨が非常に赤くついちゃうので、 それはやりたくないのでローカライズドディスクリプションでまとめたかったんですけどね。 それはできないのか。 そうするとやっぱりこの中で推定を書くしかないか。 もうちょっとね、パターンマッチングを細かく 入っていくかっていうところか。 これは結構悩ましいですね。 もう1個考えられることとしたら、 これはあり得るのはここでエラーディスクリプションじゃなくて NSエラーなんだっけ? カスタムNSエラー。 これは? カスタムNSエラー。 これならいけそうですね。 やってみましょう。 こうやって、そうするとNSエラーは ユーザーインフォで、この中でこれをまずコピーしてきて、 これをメッセージとして使いますよね。 なので、コピーしてエラーディスクリプションをやめて、 それでまず貼り付けて、これをメッセージイコールという風にしてあげて、 これでメッセージが取れたら、ここでリターンですかね。 リターンの中で、NSなんだっけ? ユーザーインフォなんとかキー。 違ったっけ? 違った。 ユーザーインフォキーみたいなのが、エラーユーザーインフォキーかな? こんな雑ビームかな? いいのかな? エラーユーザーインフォキー。 行きましょう。ここ、0リプレゼンタブル。 これは? エラーユーザーインフォキー。 あ、そうですね。 これのローカライズ。 ローカライズディスクリプションキー。 これで大丈夫ですね。 ローカライズディスクリプションキーのローバリューかな? これに対してメッセージという風に入れてあげるというか、 これは違うらしい。 これリプレイキーというか、NSローカライズディスクリプションキーを使えと言われた。 助かりますね。 これはビッグスイットというか。 で、あれ? 適用が結局ペーストかな? そしてあげて。 で、キーがローバリューはないのかな? これも事実でいいんですかね? 良さそうですね。 これでストリングですもんね。 こうしてあげた時には、これも事件か。 結局のところ、レコーディングエラー。 これがちゃんと取れるか。 それか、プレイグラウンドはまだ残ってたってかな? プレイグラウンドはこれですね。 で、これでダイクステーションレコーディングエラーじゃなくて、 いいんだけど、カスタムNSエラーでの特定にして、 エラーがちゃんとメッセージ出てるかどうか。 出ないのか? やり方間違ってるのか? それか、これをNSエラーですかね。 これでここでイコールにして、 ここでまずNSエラー。 プリッジしてこれでどうなるかですね。 この場合もダメか。 エラーユーザーインフォーじゃなかったかな? カスタムNSエラー、このタイプだと確認しておきましょう。 カスタムNSエラーのタイプだ。 これを使ってカスタムNSエラーをやって、 それでエラーボードとエラーユーザーインフォー。 ここで一旦ユーザーインフォー。 これはちょっと例になってないな。 これじゃなくて、Appleのドキュメントに書いてあるかもしれない。 エラーユーザーインフォー。 ここがエラーユーザーインフォーね。 この辺で使い方としてどんどん書いてあるかな? 書いてないね。 ほか、NSエラー。 これもなんか出てきそうな気がしますね。 ローカライズドエラーじゃなくて、NSエラーのプリッジはこれね。 これですかね。 これはNSエラーはそのまま投げるのか。 カスタムNSエラー。 これはどこで投げるかな? Appleかな? 惜しい。どうすると? これはドイツの勉強会の時のやつですが、内容が出ないですね。 ここを見れば出てくる気がするけど、まだ後悔してないか。 あとは、NSエラーユーザーインフォー。 ここを2回やると予感として、エラーディスクリプション。 これはローカライズドエラーですね。 これじゃなくて、カスタムNSエラー。 こうなっているので、細かく両方欲しいので、ローカライズドエラープロトコルを使う。 これはいいんですが、他のエラーとしてNSエラーですね。 それのNSエラー変換の説明のところ、 上のように細かく書いてありますね。 ローカライズドっていうのは違う。 これじゃなくて、リカバラブルエラー。 リカバラブルエラーとこの辺は使ったことないな。 なるほど、もっと色々書くか。 それではそれとして、カスタムNSエラーが出てくるのか。 検索した方が良かったですね。 カスタムNSエラー。 これで事後しか出てこないのかな。 カスタムNSエラー。 これでいいのか。 カスタムNSエラーで、エラーユーザーインフォーで、 登録とカスタムNS。 このキーじゃなくて、ローカライズドエラー。 ユーザーインフォーのローカライズドディスクリプションを出したいんですけどね。 それは載ってなかったか。 詳しい方から載っていったらよかったんだけどな。 これでカスタムNSエラーローカライズドディスクリプションキーとかやれば出てくるかな。 出てきそう。ローカライズドディスクリプションをするのに、 ローカライズドディスクリプション? ローカライズド、これじゃないな。 出てきそう、出てこないですね。 NSエラーのローカライズド。 これを調整するときにこの辺ですよね。 それで出てこないですね。 GPTの方が早そうですね。 ちょっとGPTに行ってみましょう。 この続きでいいかな。 新しくしますか。 えっと、やった。 カスタムNSエラーでローカライズドディスクリプションを カスタマイズする方法をください。 こんな感じで続けてみれば。 サクッと出てくるんじゃないかな。 そんなにマイナーなことじゃないはずなんで。 ブリッジされなさいの情報でしょ?って言うのもらえてきた感じですよね。 それでエラーディスクリプションでこうやってリターンする。 あれはローカライズドエラーですね、もっとも一般的。 それはいいんでしょ。 これを作るときにはカスタムNSエラーで、 エラーコード、エラーユーザーインフォでリターンで NSローカライズドディスクリプションキー。 あとはエラーコードとエラードメインですかね。 これを忘れたからなのかわかんない。 ちょっと書いてみます。 まずはユーザーインフォのキーがちゃんとしていること。 今起きててね、やって大丈夫ですね。 あとはエラーコード、エラーコードとして例えば1を返す。 そうですね。 というのと、あとはエラードメインとしてここでは何がいいですかね。 デコーディングエラーですね。 これでやってみましょうか。 実行させて、あ、やられないですね。 ローカライズドディスクリプションですね。 ユーザーインフォはここには入っているのかな。 NSデバッグディスクリプション、入ってない。 入ってないか。間違ったかな。 ユーザーインフォですね。ユーザーインフォ。 ここだってそうですけど、 この中で、廃している気がするんですけどね。 これが無かったとすると、 まあ要はだからラップだったとすると、 ラップだったとすると、 何も合わないけど、何も入っていないですね。 入ってないね。 ユーザーインフォ。 エラーユーザーインフォ。 エラーですよね。 NSエラー。 ブリッジをした。 ユーザーインフォが入っていない。 これはちょっと予想外ですね。 どうしようかな。 デバッグディスクリプションが入ってた。 で、エラーとして。 あ、本当だ。 このさっきのエラーディスクリプションってここは効果というか、 NSエラーのエラーじゃなくて、 デコーディングエラーの方が効果というのかな。 そんな気もしてきた。 とにかくカスタマイズ失敗ですね。 そうすると、この辺をどうにかするには、 これでもダメだったからしょうがないですね。 そうすると、デコーディングエラーが、 Zwift側で用意されているものだというのを踏まえると、 オーダブル準拠ではなくて、 未知に作るしかないですかね。 プロフィールの中でしたっけ。 プロフィールと違った。 違わないかな。 モデルデータでしたっけ。 この中にモデルデータは、この中に文字列が。 そうですね。ここですね。 なので、ここを失くしたかったと言っただけなんですけど、 これができないとなると、 デコーディングエラーだった場合には、 デコーディングエラーのそれぞれに対して、 エラーメッセージを作っていくということになるのか。 デコーディングエラーだったときに、 ここを直していくとすると。 エラーを取って、 そのエラーからエラーメッセージを出していくという。 これで特許というか、やっておくべきか。 コンテキストか。 これをフラットにする方法もあって、 デコーディング、エラー、データ、コラプティック、 データ、コンテキストというふうにキャッチして、 それで、この中でプリントしていくみたいなね。 これをフラットにする方法もあるけど、 これだとエラーのカタンダリにならないですね。 だから、これをやめた方がいいか。 そうすると、これでやっぱりいいですかね。 エラーがないとなれば、しょうがない。 これでいいとして、そうすると、このオーダブル用の拡張が 嫌になるとなると、こんな感じでしょうがない。 いいとして、それでふと思ったんですが、 Drawing Functionですよね。 オーダブルでいいのか。まあいいか。 そんな感じで、ここがあまり好きな感じのコードには なってないのですが、デコーディングエラーの正確上昇がない ということで、OKということにして、 それで残りのキャッチもフェイトエラーですよね。 これでモデルデータはOKですね。 で、あとプロファイル。 プロファイルの方は、上から見たと、センダブル。 これはOKですね、センダブル。 これ見ましたよね、センダブルね。 センダブルいらないのかな、みたいなことを言ってました。 アイデンティフィアブルとエースインテラブル。 これアイデンティフィアブルを抜くとどうなるんでしょうか。 とりあえず、フィルドをかけると、フィルド通りそうですね。 IDがないとどうなんでしょうね。フィルドをかけると、通りますね。 これでいい気がするんでしょうね。 うん、大丈夫。 これで良くって。 プロファイルの既定値入ってますね、この既定値って。 プロファイルの既定値って今どうしてましたっけ。 これなんか気になる。 プロファイルに既定値も何もないじゃないですか、普通。 イニシャライズしたときに、 デフォルトプロファイルのユーザーネームこれですよって言ってるのか。 だからユーザーネームだけじゃなくてか。 ウィファーズ、ノーティフィケーション、通知が欲しいかは デフォルトで0にしとくとかそういった意味ですね。 シーズン、ウィンター、これはデフォルトなのかとかありますよね。 ゴールデートは、これはゴールデートが何かって感じだけど、 この辺がなんかちょっと気になりますね。 特に既定値っていうのは、本当にそれが一般的なものなのかどうかっていうのがすごく大事で、 もし無いと、ホテルアップするためだけに既定値を載せることになって、 その既定値が適当だと変えるわけにはいかなくなっているわけですよ。 既定値を変えるって結構影響が大きいんでね。 なので既定値は安直に選んだほうがいいし、 APIデザインガイドライン的にも既定値が設定されている椅子っていうのはあんまり重要ではないもの。 普通こうだよねっていう感じで、ちょっと試したときだけ使うみたいな。 要はオプショナルが似合う、省略できる形が似合う、そういったプロパティとして存在させるもの。 なので、安直にプロフィールを既定値を用意するよりは、 こうやって型をちゃんと明示だけにして、 実際の値はどうしようという状況を作った上で、 こうするとビルド失敗したときによく分かると思うんですけど、 ディフォルトプロファイル、これ最高な場所ありますよね。 ディフォルトプロファイルで用意しておけばいいわけですよ、既定値なんてものはね。 空地をトゥルーにして、それでシーズンあることはウィンターを評価の標準にして、 オールデッドを今にするっていう風に書いてあげれば、 型の方でも縛っちゃうと全てに置いてその既定値になっちゃうんですけど、 こうすればディフォルトプロファイルに置いてはこうっていう話になるんで、 もしディフォルトプロファイルの型値を変えたいなってなったときには、 ディフォルトプロファイルの用範囲しかなくなるという、絶対これの方が良いですね。 で、あとこっちは何だろう。 ディフォルトプロファイル、モデルデッドディフォルトプロファイル。 これは大丈夫かな、ビルド飛びますよね。 飛びましたね。こんな感じで、これは良いファクタイングができた気がしますね。 型値をむやみに使わないこと、大事ですね、これはね。 シーズンのシンボルとして、リアルではローバリューで設定してましたけど、 どう見てもこれローバリューじゃないので、別の名前を割り当てて返すようにしたというね、そんな感じですね。 ローバリューじゃないでしょ、これ、そう考えてもね。 そんな感じでOKですね。 ここまでできて、結構時間が経っちゃいましたね。 ではこれぐらいにしておきましょうか。 まだまだ全然行動があるから、次はノーティフィケーション、 この辺からリファクタイングをしていこうかなと思います。 はい、じゃあ今日はこれで終わりにしましょう。 お疲れ様でした。
