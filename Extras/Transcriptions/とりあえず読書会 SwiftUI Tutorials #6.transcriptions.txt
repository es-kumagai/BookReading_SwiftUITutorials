Transcription & Summarize : とりあえず読書会 SwiftUI Tutorials #6

はい、ではとりあえずご紹介。今日もSwiftUI中といわれるを読んでいくのをやっていきましょうか。 えっと、今のところ順調ですね。いろいろコードを書き換えつつ。だからSwiftUIと一緒にSwift6対応だね。 そういったのをやりながら進めていきますけど、ま、さっそく続きのところ。だんだんとね、本格的になってきて、出来上がっていくのがね、面白い感じですね。 で、えっと、今日はこの中の1章のとこでしたっけね。1章のアンドリングユーザーについて、いよいよユーザーの入力に対して、いろいろ反応をしていくみたいなね、そういったことを書いていくという中で、 これまでのスタートステートとかアップステートをね、なんかとりあえず適当に使ってましたけど、それがなんか、もっととても使いどころをイメージしてね、 意識して、あ、選んでいかないとダメだよってのを言われそうな感じの作業ですね。で、まあ見ていきますけど、ここは読んだかな。とりあえずダウンロードまでやった気がする、この先ですね。 はい、セクション。まず、今回はお気に入りのランドマークをマークするとか、これをやっていく感じみたいにね。で、えーと、リスト、リストをエンハンス、バック調味料の拡張とか、なんかよくよくしていくとか、 まあそんな感じですか。意外と意外とわかんないね、エンハンス。エンハンスはあかめるか、よくするか。で、えーと、そうするのをやっていくらしい。で、そのために、えーと、お気に入り、えーと、フランスショーピューブル、えーと、お気に入りをすぐ見れるようにするという感じですかね。 で、えーと、あと、ロパティ、ランドマーク構造体にロパティを1個追加して、えーと、初期キティ、ランドマークをお気に入りにする生徒の初期キティを読み込む、違うかな、なんか意外と難しいな、なんでだろう、えーと、それから、さあ、えーと、それからランドマークのローにお気に入りのランドマークを表示するよと、まあそういった感じですよね。 なんか、意外と単純そうに見えて難しかったので逆させちゃいますが、えーと、待ってるよね、リスト強化でお気に入りを1個目で確認できるようにする、うん、で、ランドマーク構造にプロパティ追加して、初期状態をお気に入りとして読み込む、あーずー、あれか、データにあるやつをお気に入りのとこからね、読み込むって感じみたいですね。で、それでランドマークローのところに保守を追加するよという感じでやっていくと、という感じね。 えーと、まずは、えーと、大事点をひばくエクスコードプロジェクトは、えーと、えーと、プレビュースチュートリアル、以前のチュートリアルで終わったところ、で、セレクト、ランドマーク、プロジェクトのアピケーターにとにかくランドマークを表示するところをやって、で、それで、えーと、フェイバリットプロパティをランドマーク構造体に追加する、この時のプロパティ名はいずフェイバリットになるみたいですね。で、ランドマークデータファイルは、すでにこの名前を持っているのかな、えーと、ランドマークデータファイルは、このキーね、この名前のキーをすでに あるか分からないときは、コマンドシフトを押すと、オープンクリックリというのが出るので、ここで、ランドマークドタテッドに打つと、それを含むものが出てきて、で、きっちり打ってあげると、一番上にそれが出てくる、一番一律が高いやつね、それが出てきて、ま、それで良ければ、これでエンターだし、他のが良ければ、カーソルなりね、えーと、マウスなりで選んであげる。そうすると、こうやってファイル、ランドマーク、ほぼ、こっちは見ただけど、まあいいや、こっち、一律が高いでしょう。で、こうやって出てきたときに、このランドマークが、ま、今回ここだけね コマンドシフトでね、うん、はい、まあいいや、で、ランドマークがあって、ここに、isfavoriteをつけていくっていう話になってましたが、このときに、リソースの中ね、このランドマークデータ、この中、一応確認しておくと、isfavoriteっていうキーがね、ちゃんとあるんで、この名前をつけてあげたりすれば、もうダブルで、すぐにこのプール1をね、呼んで、来てくれるよっていうね、そういった感じになるので、これをつけてあげる、順番はね、どこでもいいんですけど、は、isfavorite、プール型、こんな感じですね、これでできたと、これだけですね、じゃあ次、えーと、スポート、じゃない、アファリコンね、 じゃあ次として、ランドマークローを開いて、プレテ、エーサーの後に、じゃあイメージを、えーと、if statement、えーと、test、パレントランドマークがお気に入りかどうかを検査するifの中に入れるんだって、えーと、ifランドマーク、isfavoriteだったらば、イメージとして、システムネーム、starfill、これを入れていくよというお話ね、で、このときにstarfillがまだ入ってないんじゃないかな、なので、とりあえずやっていきますが、やろうとしているのはランドマークローですね、はい、じゃあそんな感じで、多分ね、リソースにまだ、アセットカタログに入ってない、今、アセットカタログって言わないのかな、アセットに入ってないと思 で、それを使えば良いから、ランドマークローに対してstarfillか、えーと、作っていくのもいいけど、どうしますかね、これね、えーと、なんかstarfillをここに入れていくっていうのが、悪いこと何もしてないんですけどね、ちょっと煩わしそうだなと思うところがあって、どうするというか、イメージ型は、これは自分のイメージだもんね、これは違うね、えーと、とりあえずランドマークローにstarをつけるところまではやってみましょうか、えーと、この中のスペーサーの後って言ってましたね、スペーサーの後に、ifランドマーク、isfavoriteだったらば、ランドマーク、ランドマーク、おー文字になった、えーと、ランドマーク、isfavoriteだったらば まあ、知ってる場所とせっかくね、プレビューカルでこれで確認していきますが、まあ大丈夫なのかな、この名前の間違ってるとね、この表示がおかしくなってきますけど、まあ大丈夫かなと思いつつ、あ、エラーになった、ランドマークのコンパイルエラー、ランドマークはプロトコルに準拠していない、えーと、準拠していない、えーと、defaultable、defaultableに準拠していない、isfavoriteは追加したけど、あ、コーティングキーが忘れてましたね、このイメージネームをちょっと名前変えたかったために、このコーティングキーを追加したんでしたね、これはちょっと手間ですね、isfavorite、これなんとか良い方法ないかな、コーティングキーが キーを使うんじゃなくて、イニシャライターでね、エンコードとかをちゃんとやってあげる、どっちの方が楽かな、イニットコーダーとエンコードフロムコーダーね、あれを使うと、あ、結局一緒ですね、べき方の方が、今回のの方が、なんか忘れてればエラーになるからこっちですね、これでやりましょう、で、こうしたときに、ちゃんとスターフィルが出てくれるのかな、マンキュアエラーの間違いかな、一応確認しておきますか、あ、ここだね、これでいいですね、で、タートルロックが、あ、スター出てますね、大丈夫そうね、じゃあ、えっとね、黒いスターが出ておけば、まあまあ、いいでしょう、こうしたときにですよ、 まあ、持っとこうですけど、ちょっとやってみますか、このイメージシステム ネームスター、まあ、これでもいいんですけど、もうちょっとね、安全に言ってますか、このときに、ビューの中に、スターイメージ、スターイメージっていうのをね、例えば作って、スターのボディとして、さっきのね、スターを表示するっていうコードに仕上げて、これでこのスターが出てますけど、このスターを、使ってあげるっていう形を取るっていう点もありますね、たしかにですかね、あ、これくらいなら、別にリアルの通りでいい気もするけど、そんな感じでね、スターイメージっていう形で、れすると、まあまあ、リテラルをね、間違えるみたいなことがなくなったり、リテラルを思い出す必 特徴がありますね、これを使ってみたというところですね、で、それで、イメージは、ベクター形式で作られているので、カラーを簡単にね、コアグラウンドスタイルモディファイアで書き換えられるよと、で、スターは、ランドマークがE2フェイバリットプロパティがスルーのときに表示される、で、 えーと、見てる?えーと、ハウトゥーモディファイ?プロパティレイタリング?このチュートリアルの後、え、見られる?モディファイ?あ、もう変更する方法みたいな感じ、あ、多分ね、 ザ・パウダーキーワードと略しておこうか、で、略させておこうかって感じですか、うん、とね、後で見ていくよーってことですね、変更方法ね、で、とにかく、フォアグラウンドスタイルをイエローにすることで、星が黄色くなりますよと、 という感じで、次へ行って、セクション変わるか、じゃあここまでやっておきますか、で、今回はスターイメージとして、まあ作ったんで、ここでイエローやるとどうなんだろうね、変わると、勝手に想像するんですけど、 分かんない、どんなに自分は詳しくない、まあでも分かりましたよね、黄色でね、まあ変わるけれど、スターイメージって言ったら黄色でしょうみたいなね、そういった先入観で行くんだとしたら、このスターイメージの定義自体、 フォアグラウンドスタイルをイエローにして、黄色い星にしておくと、特に何も触らずにね、スターイメージを使えば、黄色い星が出るよ、という感じで、まあこれで多分大丈夫でしょう、まあ指標が出ればね、後でゆっくり直していけばいいんで、まあそのままやっていきましょう、 じゃあセクション2、フィルターとリストビュー、カスタマイズ、リストビュー、カスタマイズしていく、すべてのランドマークがお気に入りのものだけ、どちらかを切り替えられる、そういった風なものを作っていくみたいね、そうするために、 少しだけランドマークリストにステートを追加していく必要がある、ステートは値であって、または値のセットで、それぞれ変更できる、オーバータイムというのが必要なものみたいな感じかな、時間とともに変化していく、まあ状態性というものですよね、時間とともに色々変わっていくような状態、 で、その効果がビューのね、挙動とかコンテンツとかレイアウトとかそういったものに影響していくと、で、こういったプロパティをアッドステートアトリビュートを使ってビューに表現していくと、追加していくという感じですね、そのためにランドマークリスト、これを開いて、 で、アッドステートプロパティをfavoritesonlyというプロパティに対してつけてあげると、で、このイニシャルバリューはfalseですよという感じでつけてあげる、で、そうすることで、このステートのプロパティをinformation、情報をホールドする、特定するビューとアブビューを特定する情報として使っていける感じですか、 フォールドインフォメーションを保持するか、ステートプロパティースフォールドインフォメーションか、特定するビューとアブビューの情報を特定するために常にプロパティを作っていくと、これが一つの、プライベートじゃなくてもどうなのかな、いいんでしょうけど、まあ合理的にね、これをプライベートのプロパティとして作っていくというね、そういった感じですね、なのでランドマークリストの中で、ステート、アッドステート、プライベートが、その中で両favoritesonlyがあったんで、まあフルバーだけを任せるので、ここはね、初期値はfalse、まあこんな感じで、ステートができました、ということで次、あ false、いいですね、で次に変更する、ビューの構造、これを変えていくらしい、ツイッパーや編集、プロパティを追加や編集する、キャンパスごとのリフレッシュ、リフレッシュ使うので、そうやってビューの状態をね、自動で更新していくプロパティ、そういったものを追加していく、キャンパスがビューティブルじゃなければエディターからキャンパスを表示してくださいと、プレビューを出したいということですね、プレビューの出し方はいいので、次行ってみましょう、で次にイルタートバージョン、ランドマークスのイルタートバージョンのプロパティかな、コンピュート計算すれ ここに書いてあるとですね、フィルターランドマークスっていうのは、それをね、フェイバリッツオンリーかどうかと、フェイバリッツオンリーじゃない、つまりすべてのときか、またはランドマークがお気に入りのときかっていう形で これ丸カッコ書けたんだろうね、なくて良さそうだけどね、あとこの条件はちょっと読みにくいなというところも感じることはない、読みにくいって言うとね、自分が対してね、こういった複雑なのを読むというのが苦手というか何だか、そういった事もありますけどね、意味が大変じゃないですか、小フェイバリッツオンリーじゃないか、または、いずフェイバリッツとかランドマークだね、っていうのを読んだときに、この意味を考えなきゃいけなくて、小フェイバリッツオンリーじゃないっていうことは、すべてのものですよね、お気に入りオンリーじゃないもの、すべてのものって言ったときには、じゃあすべてのものって わかんないですけど、まずらわしいなという所があるんで、これフェイバリッツか、と考慮して、やっていきたいんですけど、フィルタードランドマークス、お互い考え方あって、例えばフィルタードランドマークスっていう名前だと、どんなフィルターがかかっているかわからないというところがある気がするんですけど、 ここでは、小フェイバリッツオンリーでのフィルタリングしか今回はしないとはいえ、いろんなフィルター条件があったら、それらを加味した、方向的なフィルターを通して得られたランドマークスが手に入るという、そういった意味で、これフィルタードランドマークスってしてるんじゃないかなと解釈すると、名前としては悪くないですね。 で、こうした時にですね、さっきみたいに不文と言えば論理分析が、論理してうまく組み立てていくっていう手も普通に必要となりますね。 あともう一つとしては、1式を使って、まず小フェイバリッツオンリーかどうかを調べるという手が、個人的にはあるかなと思うんですよ。 で、それがTrueだった時には、お気に入りオンリーっていうことは、そうすると、えーと、これクロージャー、8フェイバリッツランドマークス、これちょっとコード忘れてました。 ランドマークス、これをフィルタードですね。フィルタードでランドマークインでできるんですね。これでいいですね。 で、こうしてあげて、その時に、フィルターをかけていく時に、お気に入りオンリーだった時にはランドマークのwithフェイバリッツのものですよね。 で、これだけに限られますよね。 で、お気に入りオンリーじゃなかった時には、全てですよね。無条件ですべて。こういうような書き方をするっていう手もある。 えーと、でもこれなんて言うのかな。ランドマークスの配列が、あのメンバー、フィルタード、フィルタード、あれ待ってないのかな、フィルター、フィルター、あ、フィルターか、あ、フィルターでいいのか、あれなんかすごい急速的なことを忘れている。 どうか。どうだっけ、フィルターかどうか、まぁいいか、フィルター、フィルターでいいからね、 なんでこれを忘れてしまったか、まぁいいや、これでフィルタードランドマークができた。 まぁまぁちょっとここが徐々に長くなっちゃいましたけど、 まぁ構造としては、わかりやすいかなという気が自分もするので、こんな感じでのビデオで見てみましょう。 で、フィルターができて、次、あ、それでさっきのここと今度はフィルタードランドマークス、まぁいいか、はい。 で、ステップ5として、フィルタードバージョンのランドマークリストを使っていくと、さっきの、この、さっきのというか、リストアップするのをフィルタード、フィルタードでね、やっていくよということみたいね。 で、それで、イニシャルバリュー、小フェイバリッドオンリーのイニシャルバリューを0に変えて、この動きを見てみましょうということみたいね。 うん、とても細かい段階で分けて、なんか確認していくの、面白いですね。 とにかくここを、えーと、フィルタードランドマークスにして、で、それで、レビューがどうなるか、もう変わったのかな、きっとそうですね。 で、これで、今、フォルスなんで、この小フェイバリッドオンリーがね、これを0にしたときに、ここがね、欲しいものだけに限定されるということが起こるはずという機会で、0にすると、これでレビューが更新キットされて、おー、そこだけになりましたね、ということですね。 で、これが仮に一定とか無かったとする、そうしたときには、あ、これは別によるか、自分の手で代入してるから、どっちでもいいですね。 まあ、じゃあ、これは後で、なんか確かめられるときにやりましょう。 まずはとにかく、小フェイバリッドオンリーをもう1回フォルスにね、戻した上で、次のステップに行ってみましょうか。 を追加する、スペースをトグるためのコントロールを追加する。 で、ユーザーコントロール、リストフィルターの上のところに追加するためにコントロール。 一応、フェイバリッドオンリーの値を切り替えられるコントロールを追加する。 で、これをするために、ベインディングコンタグトグルコントロールに、ベインディングすると、で、ベインディングはどういう動作するかっていうと、 ミュータブルスペースへのリファレンスとして動作して、ユーザーがトグルをここからオンに切り替えると、また逆をすると、コントロールはバインディングした単体を使ってアップデートする。 アコーディングリってなんだ?アコーディングリってなんだ? それに従って更新していくよと。 なので、このフェイバリッドオンリーというまずはトグルスイッチを作っていこうということになるんですね。 ネストした4-1グループをそれを作って、トランスフォームランドマークスをローに入れていくグループの4-1を作っていく。 今まではリストの中で一気にやってたんですけど、今回はリストのアイテムとその間にトグルを入れたいからですよね。 4-1でフィルタートランドマークスをやって、リストをローか4を作っていくということをやる。 なので、リストで今までフィルタートランドマークスをやってたのを、1回ここで2個作ればいいかな。 この中で4-1、4-1、この中のパラメータとしてフィルタートランドマークスで、これはすでにITでアイデンティフィアブルで表現されてるんで、 特にITのメーキを忘れずに、このままそれぞれに対してナビゲーションリンクを貼っていくというのをやって、 それでOKですかね。これでレビューはちゃんと動いてるのかな。はい、動いてそうですね。ここまでOKと。 はい、で次は、ここ読むんだっけ。 LATICとDYNAMIC VIEW、リストのLATIC VIEW、 今回のオブグルですよね。 このLATICとDYNAMIC VIEWのアローを組み立てるやつを、 組み合わせて使うために、また大人のグループを、 DYNAMIC VIEWの大人のグループを結合するのに、 4-1タイプを使うと、 こっちのリストに渡すんじゃなくて、 4-1に渡していく用途用紙書法を取るらしい。 その後、オブグルVIEWをファーストチャイルドリストの 最初の要素として利用する。 それをBINDINGしよう。 FAVORITES ONLYにBINDINGしていくと。 で、DOLLAR PREFIXを使うことで、 その変数をBINDINGしていけると。 または、ONE OF ITS PROPERTYとBINDINGしたり、 DOLLAR PREFIXでTAX BINDING TO STATEが呼ぶのが、 ONE OF ITS PROPERTY。 あ、ん?BINDのことかな? ちょっとよくわからなかった。 プロパティのいずれかやBINDINGにアクセスする状態です。 また、そのプロパティのいずれか。 そのプロパティ。どのプロパティってなんだろうね。 ちょっとよくわからなかった。 とりあえず、今回はSTATEにBINDINGさせていくので、 トグルをリストの最初に追加して、 そのテキストをFAVORITES ONLYにするという感じですね。 なので、FORITYの前ですね。ここで、トグル。 トグルとして、BINDINGだから、 トグル、あれなんだっけ。 ちょっと見ますか。 トグルディズオンか。 ディズオンとして、DOLLARの小フェイバリッドオンリー。 で、この中のトグルの中のテキストとして、 フェイバリッドオンリーですね。 あんな風にするとできたりだと。 で、これで、ラティックなロードと ダイナミックなロードが存在しているよと。 で、一緒にスクロールしてくるのかな? そうですよね。 今、スクロールすると、こうやって FAVORITES ONLYが消えちゃうんじゃないですか。 で、この中で、ここまで読んでたけど、 やっぱりFAVORITESなのがいいなと思った時に、 戻るのって、なんか面倒じゃないかもね。 上に、このお気に入りに限定するボタンがあったので、 忘れちゃうことがありますしね。 そういったのを考えると、これ、リストより 外がいいんじゃないのかなと個人的に思うんですけど。 どうですかね。ちょっと変なとこに行き過ぎては、 これだとね。 こうするとね、ほら、これが、ロールさせても、 残るんでね、すぐに使いたい時に使えるじゃないですか。 っていうのは、ちょっとやりたい気がするんだけど、 でも不確保だな、これ。 えーっと、これはどうすればいいんだろう。 マージンとか変えちゃえばいいのかな。 マージンとして、パティングか。パティングとして、 例えば、10とか、 あれ、10から100だとか言わないですよね。 うん。パティングの、例えば、パティングの、 えーと、パティングの、これHか。 インセットじゃなくて、Hの方ね、使って。 インセットじゃない。えーっと、 Hの方はどう使うんだ? これか、インセット。 で、これで、.。の、ちょっとわからないや。 えーっと、ボトム。ボトムじゃない。 えーっと、リーディング。リーディング。 え?例えば、500とか、これで合ってる? 合ってないか。 なんと、ちょっと使い方知らないから、わからないや。 えーっと、これで定義を見ればいいですね。 パティングで、えーっと、Hのセットですよね。 で、Hのセットだから、オプションセットで、 で、このオプションセットは、トラクトか。 トラクト、テローバリューがあって、 で、トップリーディング。 あー、そういうことか。はいはい。なるほど。 で、これでHのセットを指定した後に、 リンクすか。あー、なるほど。 これが、リーディングと。 えーっと、またトレーディングかな。 トレーディングにして、それぞれをね、20ぐらいとかやると。 で、ちょっと動きましたよね。 まあ、これぐらいでいいですかね。 ここだとね。 まあ、こんな感じにすれば、ずっと、 いいのかと言ってやるから。 まあ、これでどうでしょうかね。 また、今はこんなのね、パテにやるタイミング じゃないかもしれないですが、 まあ、ちょっと私、これでいってみましょう。 で、それで、インプルーブズフィルタリング。 えーっと、アニメーション。 アニメーションモディファイアを使って、 フィルタードランドマークス、バリューが変わった時に、 アニメーションを始めるようにしてみようと言っているが、 ここが、えーと、ここが、リストに対してですね。 リストに対してアニメーションで、ディフォルトのアニメーションで、 バリューが、フィルタードランドマークス、 ファイアが変わった時ですか。 これを、ちょっと、やりますか。 今のところ、こうやってね、 ブチ通すと、もう一瞬で変わるよ、 っていう状態の中で、リストに対して、 アニメーション、おっと、アニメーションって、 ディフォルトって、 で、これで、バリューとして、フィルタードランドマークスが、 フィルタードランドマークス、 で、やってあげる感じ。 アラベルが大事な感じですかね。 バリューが、どうでしたね。はい、こんな感じで、 フィルタードランドマークスが変化するとね、 ディフォルトのアニメーションしてくれる、 っていう意味ですかね。定義としては、 バリューがモニターする、変更モニターする値でしたね。 で、実際にこんな感じですね。特定の値が、えーと、 与えられた時にアニメーションする。 で、これで早速、ブチ通すと、こうなんか、 ライトする感じで動きますね。 これね、今、表示してくれてるやつ。で、ドライブプレビューで、 それをね、特定を切り替えて、 あー、そういう意味か。そうだ、さっきのね、 テスト用にするようにしたんだ。 なので、ここでフォルスに戻っておきましょう、 っていうことを言ってんのね。 で、その上でプレビューで実際に特定を動かして、 遊んでみましょうと、という感じね。 OKですね。じゃ、次。えーと、オブザーベーション。 ストレージのオブザーベーション、感じですかね。 それを使っていくよと。 で、えーと、準備する。えーと、ユーザー、ユーザーに、 えーと、ランドマーク、 うーんと、まあいいか。とりあえず読んでいきましょうか。 えーと、そのプロパティを直接的に読んでいるとき、 そのときにアップデートするという感じみたいね。 何かこう、オブザーバブル型、 オブザーバブル属性のついたモデルデータが、 これを作っていくということになるみたいなので、 じゃあまずはこれを作りますかね。 えーと、モデルデータ、モデルデータファイルに対して、 まあ、いろいろバンドルを圧縮するみたいなね、 そういったことをやる形になってますけど、 ここで、オブザーバブル、プラス、モデルデータ、 っていう風に定義する。 で、おそらくですけど、このモデルデータ型は別に、 どのメソッドはオーバーライトさせないべきかっていうのをね、 ちゃんと考えていかないと、 本来オブジェクト機構ってちゃんと動かないはずなんですよ。 なので、そういったのを考えないんだったら、 ファイナルクラスにしておくのが妥当でしょう。 ということで、まずはファイナルクラスにしておく。 で、その上で、ランドマークスアレイを、 モデルデータの中に移動する。 これだとですね、この場所なら悪くなるのかな。 こうすると、えーと、元の面チップスがあるから見ておきました。 コマンドプラスオプションプラス並格項。 並格項を押すことで、ラインを上下に動かせる。 これは確かに面白いですね。そういったことありますね。 今回動かすものないんですが、動かしたいときは、 コマンドオプション並格項を動いてもいいですね。 面白いね。 こんな感じでね、予言していく感じみたいなね。 とりあえず今回はこの中で、プロパティを、バーですか。 バーですよね。ランドマークス。 バー、ランドマークス、そしてランドマークス。 これをね、予言していきますが、今までだともう読み込んでたんですよね、ロードメソッドでね。 こういう風に初期化をやっていたけれど、今回の場合は、 ランドマークスイコールバンドルメインで、 モデルデータ、デルデータ、 で、フォーリソースでランドマークデータですね。 それに対して、JSON、これをランドマークスにしてあげて、 これで読み込みOKで、モデルデータクラスの準備ができたと。 それといろいろなくなってきそうな雰囲気を感じますけど、 まずは先に進んでみますか。 この中でもちょっと気になるのが、ランドマークスがバーになっているということは、 これ外からいろいろ書き換えられますよね。 書き換えられてもいいのかもしれないんですけど、今回の場合、 現在のコードの書き換え方の場合は、 イニシャライザーは既定イニシャライザーだけになっていて、 この中でランドマークスを書き換えさせているということは、 基本的にこのランドマークスは外から自由にアクセスさせるということだと、 私のその雰囲気をとりあえず感じるので、 これはそのままバーにしておくのはなんとなくよろしくない気がしますね。 なので、ここはプライベートセットバーにすることで、 ランドマークスは外から書き換えさせないと、 というふうなことをしておいたほうが、 なんとなく今のところは良さそうな気がするので、こうしておきましょう。 次に、モデルデータオブジェクトを使っていくということになるでしょうね。 モデルデータオブジェクトをビューに連結させていく。 このためには、モデルデータオブジェクトを作るにあたって、 ビューをアプリのデータストアとして使うように、 改良していく必要があるよと。 ということで、まずやっていくのが、 エンパイロメントオブジェクトかこれを使って、 エンパイロメントかエンパイロメントを使って、 モデルデータを扱っていくという手法をとるみたいなね。 じゃあ、ランドマークリストに対して、 エンパイロメントプロパティを追加する。 エンパイロメントプロパティラッパーは、 カレントビューのモデルデータを読み込めることを。 エンパイロメントモデバイヤーは、 データオブジェクトをエンパイロメントとして、 渡すよという感じになってるみたいね。 ここまで読んでいて、自分の中の意識があんまり、 ちゃんとできてないんでしょうけど、 エンパイロメントオブジェクトというのもありますよね。 意識せずに使ってたような気がして、 それはちょっと今回考えると良かりそうね。 とにかくランドマークリストに、 まずこのモデルデータエンパイロメント、 これを提出する方法からやってみましょう。 ランドマークリストに対して、 プレビューは、とにかく最初ですね。 今、ランドマークを普通の変数として渡しちゃってるんで、 悪いことが分からないですけど、 まずはチュートリアルに沿って、エンパイロメントをここで、 パターンとして、あれ、パターンだっけ? 忘れてた。エンパイロメントとしてパターンとして、 モデルデータ、デルフ、デバーとしてモデルデータ。 こんな感じですよね。これでOKですけど、 ちょっと気になることがあって、 これ言う方がないと、もちろんエラーになると思うんですけど、 この後ろにパターンを書くということも、 できることがありますよね。 今回のプロパティロはどうなってるだろう。 モデルデータ。 どっちなんでしょうね。どっちでもいいと思うんですけど、 まあまあ、好みなのかな。 まあいいか。とりあえずこんな風に作って、 このランドマークリストに対して、 モデルデータをエンパイロメントで渡してあげると。 といったときには、ここのデータも モデルデータで読み込むようにしたからいらなくて、 それでランドマークリストも引数を取らなくなって、 それでここで.エンパイロメントとして、 .エンパイロメントとしてモデルデータのイニシャライズ。 ってやってあげて、あれまだ引数を取ろうとしてる。 モデルデータとランドマーク。 モデルデータとランドマークを取ろうとしてますね。 やっぱダメなのかなこれ。どこかし消してみましょうか。 あ、違う違う。あのランドマークが残ってるからですね。 もういらなくなったんで消す。 で、それでランドマークが出ると、 これはモデルデータのランドマークです。 モデルデータのランドマークですね。 そんな感じでやって。 で、他は?あの方ですか。ランドマークのリストで。 まだダメか。モデルデータを取ろうとしてますね。 やっぱ引数はダメなのかこれ。 あ、あなたも書けちゃっただけってことですかね。 エンバイロメント、モデルデータスルーフ。 押してあげると、これでエラーはなくなって、 プレビューも動き出してって感じなので、 どっちが良いかがなくて、絶対動かないとダメっていう、 そんな感じになってる感じね。 あとは他のコードもエラーになってきたんで直していく。 コンテンツビューか。 まずは色々直していくんで、まずはここですね。 エンバイロメントを与えないとコンテンツビューは落ちるので、 とりあえずランドマークリストの方のプレビューだけね、 なんと動くことを確認しておいて、 それで次行けばいいでしょう。 あ、引きますね。こうやって引いてますね。 いいですね。次、エンバイロメントを作った。 下も色付いてるところもすでに書いてあるからOKですよね。 はい、次行こう。モデルデータのランドマーク数を使って、 フィルタリングランドマーク数を計算するときにやっていきましょうと。 ランドマークリストか。ランドマークリストの フィルターとランドマークでモデルデータ。 もうすでに書いてますね。OKですね。 あれ、こっちはフィルターとか。 ああ、ダイトですね。はい、OK。 次、ステップ3。 ランドマークディテールを更新して、 モデルデータオブジェクトで動くように、 これもエンバイロメントでやっていこうと。 そのためにやることとしては、 ランドマークディテールでモデルデータのランドマーク数を プレビューに渡していくよという形を取っているよという、 そういったことが、今まではグローバルなところに ランドマーク数を置いていたから、 モデルデータから取らないと、 どうにもならないよという話をしたいわけですね。 今回はそこまで考慮しなくて大丈夫かなという気がするので、 まずは次に行きましょう。 ランドマークローについても同じようにやっていくと。 次のステップとして、コンテントビューに モデルオブジェクトをエンバイロメントで追加してあげるよという話になって、 サブビューが大丈夫になるとか、 必要なところ以外でモデファイが使うだけなんだね。 なのでプレビューが失敗する。 サブビューがモデルオブジェクトを要求しているか、 それをエンバイロメントで渡していないとエラーになる。 コンテントビューを使おうとやっていきますかね。 コンテントビューでまたいろいろエラーになりますよね、きっとね。 変えていかないといけない気がする。 コンテントビューで、とにかく今のところは エンバイロメントを使うことによって、 コンテントビューの中ではランドマークスはどこにいらなくなるということですよね。 ここでエンバイロメントを渡すんですけど、これをコンテントビューのところでやっていくということですかね。 必要なくなって、それでエンバイロメントとしてホテルデータを渡していって、 そうすると、このコンテントビューの上でランドマークスをわざわざ作らなくても良いので、 これでプレビューはどうなるんだろう、一枚ビルドかけますか、ここで引っかかるかどうか。 コンテントビューがアプリケーションのほうですね、ランドマークアップなので、 これはいらないですね、特にね。それでコンテントビューここから渡せば良い気もするけども、ランドマークいらないですね。 これでコンパイルが通るようになったので、プレビューを早速の前にコンパイルをしてから見ていきますか。 ビルド通るんで、プレビューをちょっと見ていって、ちゃんと動くといいですね。 確かにエンバイロメントとかって悪くないですね。 アプリケーションインスタンスを作ると、モデルオブジェクトをエンバイロメントに渡す。 アプリケーション、エミュレーターやデバイスで動いたときのランドマークアップにこれを指定するのか、しかもデータですね。 これは何を狙っているのかというと、アプリのほうでしょ。 アップステートプライベートバーでモデルデータイコールモデルデータと、こんな感じでモデルデータを作ったら、これがエンバイロメントですよね。 エンバイロメント、モデルデータという風に渡してあげて、コンテンツビューの中では特にモデルデータを渡していなくて、プレビューの時は渡しても良いですよね。 これで出来たと、そういうことです。 アップステートプライベートをモデルオブジェクトを初期化の際、初期化の際、イニシャライズ初期化するモデルオブジェクトを同じ方法で、それを使うのと同じ方法、イニシャライズプロパティインサイドビューの中で初期化するのと同じ方法でやっていくと、つけるやつをね。 それで、ストリートUIのイニシャライズ、ストリートUIは初期化する。 ビュー、オンリー、ビューの中だけ、ビューで一回だけですかね。 ビューのライフタイムの中で一回だけ、それを初期化する。 それはアプリケーションだけのインスタンス、ランドマークアップのインスタンスはアプリケーションの中だけで唯一の一回初期化されるインスタンスと、そういったことを言いたいね。 ランドマークリストに戻って、動くかを見てみましょう。 これが出来ましたね。出来た。 これでフェイマリストボタンを作っていこうという話に移りますが、これはまた次回ということにして、今エンバイラメントをつけたことによって、多分いらないコードがいっぱい出てきてるはずなんで、これを調整していきますか。 サークルイメージはランドマークのイメージをとっていて、これは問題ないですね。 コンテンツビューはすでに直したと、特に何も状態を持っていないと、ランドマークが出ていることですね。 これもランドマーク情報を使っているので、これはランドマークを受け取るのではなくて、エンバイラメントにしたときに色々変わるのか、色々変わるのか、この辺はどうとられると良いでしょうね。 とりあえずやってみますか。 これでランドマークじゃなくて、ランドマークアップでも良いかな。 ナットマーク、エンバイラメント、これでモデルデータセルフにして、モデルデータと。 これでモデルデータ経由で色々ランドマークをアクセスしていくって言うのはもちろんあるんですけど、 近くでランドマークでアクセスするのが楽だったとすると、ランドマークはモデルデータのランドマーク、あれランドマークですか、あ、そうか。 これモデルデータじゃないですね。色々喋りながらやってましたが、ランドマークデータは一回で接着していくことになるので、ここは良いんだ。 とりあえず受け取るのがエンバイラメントじゃなくて、パラメータで受けちゃえば良いと。 これをバインディングにするかどうかは編集してないから大丈夫ですかね。 書き換わるかどうかってのが大事なのかな。とりあえずそこまでは今は考えないで、ディテールは大きいですね。 ランドマークリストはすでに書き換えたエンバイラメント式が採用されていて、ランドマークローはランドマーク1個1個に対してなので、エンバイラメントは別にいらないですかね、ここね。 あと更新されて欲しい気がするけど、それについては今後考えていけば大丈夫でしょう。 あとマップビューは特にないですよね、コーディネート渡すだけですもんね。 これはいいですね。あとスターイメージはそれこそ何の影響もないので良いですね。 ランドマークアップは今やった通りで、あたりもですねこれでね、全部とりあえず一通りイメージできる限りでは上手くいってるんで、またこれで次へ進んでいく感じで準備はできたという感じな気がしますね。 はい、じゃあ次はセクション6のお気に入りボタンをね、それぞれのランドマークに対して付けてあげるよというのをやっていくということになりそうですね。 はい、じゃあ今日はこれで終わりにしますね。お疲れ様でした。
