Transcription & Summarize : とりあえず読書会 SwiftUI Tutorials #38

それでは続編を始めていきましょう。 Swift UI中途表律をついに1000回読み終えまして、 これでネタがついてるはずなんですけど、 なんかリファクタリングしてたからですかね、 共闘がおかしいなと感じるところが1つあるのと、 あとはさえがいでもね、今やってる中でだいぶ綺麗に 効果がかけたなとは思うんですけど、 この辺りでまたもうちょっと言い切れるとこあるのかなとか、 あとShapifディレクティブ、ディレクティブって言うのかな、 Swiftだと、まあ分かんないけど、 もしもといふ、その辺りもね、なんか、 まあマルチプラットフォームだとしょうがないのかなと思うところはあるんですけど、 なんかもうちょっとね、綺麗な感じにというか、 分かりやすい感じにか、 で言ってきたら、なんかいいのかなとか思ったりとか、 まあいろいろね、思うところはあるんで、 まあせっかくなので、といったのにも目を向けて、 いろいろ考えてみたいなと思います。 はいじゃあ早速ね、そんなあたり見ていこうと思いますが、 どれ見ていきますかね、まず、 副愛ですかね、副愛はね、もはや、 私はそれを見ないとダメですよね逆にね、 副愛を残しておいて、 それで、完成ってのもね、まあまあ、 いいんですけど、いろんなドレドフが世の中にもあるようなんでね、 まあでも、そんなドレドフ考えたときには、 こんな練習では、ほとんどやるのが絶対いいと、 自分は思うんでね、 うん、やっぱり知らないで、やらないのとね、 知って、なんかの事情でね、やれないのとね、 その辺はちょっと、やっぱ品質が違ってくると思うんですよね、 という感じで、えっとまずは、パク見ていきましょうか、 なので、えっと最近ね、テロップも書くようにしたので、 ここから聞くときもさね、 まずはね、あの、最初の一回なんですよ、 最初の選択が無視されるかも、 このところをね、やっていきたい、気がする、 えっとじゃあね、そういった形でやっていくとしますと、 まずこのアプリですよね、 まあ、OSの話ですね、選択がおかしいわ、 多分、多分ですね、 というわけで、この辺もちゃんと見ないとダメですね、 マルチプラットフォームはね、 全部デザート動いてるかみたいなのみの大変ですよね、 まあしょうがないですけどね、 コードが再利用できてるだけ、まあいいとは思うんですけど、 まあとりあえず、なので、これ実行して、 まずね、で、最初の1クリックですね、 これを見ていきたいなと思うんですけど、 この時、今日だったら、まあ、ディファクタリングはやろうかなと思いますけど、 まあ、出てね、ハマると難しい時ありますよね、 うん、まあそんなもんでね、 まあ、僕はそんなもんだと思って、 元の方が一番良いですかね、うん、 コンパイルエラーとかもね、 まあ、慣れないうちにたくさん出てくると、 なんか面食らったりすると思うんですけど、 まあ、慣れてくると、どうでもよくなるじゃないですか、 いきなりエラーが100個とか言われてもね、 100個ぐらいのエラーだったら、 2、3カ所直せば乗るかなみたいな、 逆に多い方が楽というかね、 そんなのあったりしますよね、 この狭い画面でね、やるには辛いですよね、 なのでいいや、 こうやってエクスコードを小さくする方がなんか、 快適な気がするので、これでやってみましょう、 ね、これの中で、 クリックするっていうところだから、 リストですよね、 リストのランドマックリスト、 ここが問題になってるのだろう、 という事が刺せるのですが、 そうすると、 まずは、ここを狙っていくといいでしょうね、 難しいな意外と、 まあ、慣れてないからっていうのもね、 あると思うんですけど、 ランドマックリストのアップデート、 この辺はあんまり関係ないかな、 リストがあって、4位違って、 で、ナビゲーションでこれクリックした時ですよね、 おそらくね、 なので、 スイッチした時の、 えーと、表でここか、 この辺りがどうなってるかっていうのを、 まず見たらいいのかな、 えーと、 まあそうね、 ここでブレイクポイントを貼って、 で、それで、 自動的にね、 処理が続くようにした上で、 ここで、 えーと、押されたコードを、 このマークにしようかな、 このマークにしましょうかね、 で、それで、 ランドマーク、 ランドマークのちょっと状況を見て、 様子を確認。 これは、今の状態で様子を、 何もなないか、 えーと、 あれ、何もなかないですね、 あ、なってる、なってる、 あっち、違うかな、 えー、やばい、 あ、でも出てますね、 で、あと、 ランドマークで出てないや、 なんか間違えましたね、 ランドマーク出てくれないとこもあるかな、 えーと、 あっという間でしたね、 次はね、 あっという間で、 リオが来るな、 うん、 えーと、 これで、これで押すと、 ブレークポイントが当たり前ですけど、 バックを、あれだ、 えーと、 あー、ブレークポイントね、 ビルドし直さなくても動くのいいですよね、と思ったけど、 あ、プリベートネーム、それを期待している、 あ、名前間違えてるのか、 えーと、エディットブレークポイントで、 ランドマーク、ランドマークあってそうですけどね、 ランドマークが違うかな、 えーと、あ、コンディション、間違えました、 コンディションじゃない、アクションですね、 な、なのになぜこれが出ているというのがちょっと気になるんですけど、 そういうものは、まあいいか、 とにかく、6名捨てて えっと、ランドマークがでない、 でないことないですよね、出ないので、 無いもの、何もないんですけど、 えーとランドマーク、マットマーク、ランドマーク、 ヤードマーク、ですよね、 で、これでコンソールに出しますよ、読めなくていいですね、 なので、これで、 畳までが無くってのスピークオプションがね、 電話ですね、よくわからないですね、 ランドマーク出てこないのはなぜでしょう? ランドマーク側、、ランドマーク価格は放 neural netで、 売られているからこれでないことじゃなくてよね、データ以降どうできるってい てしょうがないと そしたら、 デバッグ用にこれ作ってありましたっけね、プリントを選べるように、 そうだとしたら、これをやりたい、プリント、で、ランドマーク、 うん、いけますね、まあランドマークディテールでやればいいのか、 こんな余計な形でね、ランドマークディテールで、 まあいいか、ここでやりますか、これで、 こんな感じで、これなら安定でしょう、ちなみにこのプリントが ここで使える、要はビュービルダーの中でプリントが使えるのは、 以前に仕掛けておいた、ビュービルダーの拡張、これでデバッグモードに限り、 ビュービルダーで、ボイドを渡すことができて、ボイドを渡したときには、 Nilにしてくれるという拡張してあるので、ボイドを返す関数を、 ビュービルダーの中に埋め込んでも影響なく使えるという、 そういったコードが書いてあるので、プリントができるようになっている、 あまり読めないと思うんですけどね、なのでここでもデバッグだけでやるようにしてある、 本当に動くか分からないからというところですがね、と使っているとね まあそんな感じでいろいろやってますけど、 選択をすると、例えばインレーク、1回完全に無視されましたね、 もう1回押しましょうか、あ、違うの選んじゃった、 ダイレクトだけどログが無視されてなかったかな、 ログ出してなかったですね、えーとハートマークが1個、1個どうか分からないから、 ハートマークを検索かけると、あれ?48個もある? これ、どっか、ディテールが表示されるときに、 表示されるのに関係なくデバッグされちゃうのか、これ、どうかも言えないですね、 レイク、インレークでもインレークだな、 これどうかな、こっちは毎回捨ててみればいいですね、この状況でね、 それでレイクマークドナルドを選ぶと12個、12個、えーと0.1番目のハートブロック、 もうね、全部、材料が全部出てますね、 だからこれあんまり意味ないや、これやったところで、クリックされた顔、実際、っていう状況ですよね、 なのでクリックされてディテールが出るか出ないか、 っていうところなので、オンアピアでいいか、ディテールに対してオンアピア、 で、オンアピアの中で、プリントすれば大丈夫ですね、 プリント、で、絵文字、で、この後にランドマークだと長すぎるから、 まあ、ネームでいいですかね、ネーム、ですよね、 押してあげると、ディテールが表示される、 っていうことになった、ランドマークの名前が、アートマークと一緒に出ると、 まあ、そういった形になれば、OKですよね、やってみましょう、 ログは、出なくてもいいとか、えー、縦に、 この辺のログ名、あのデバッグ用の名前で切らないですね、あとでいっそ、 とりあえずこれで、インレークを押す、大丈夫じゃないですね、 で、次、もう一回押すと、この時には、アートマークが出るかな、というのを、 ちょっと確認して、うん、1個だけ出ていて、で、それで、あれ、バインディング、 えーと、これ、なんか、円というのっていいのか、わからないけど、 えーと、なんだ、なんだろう、バインディング、 バインディングで、ネームを出したはずなんですけど、 ネームってそんな複雑でしたっけ、ネームはストリング、あ、そういうことかな、 バインディングからランドマークって、バインディング、 まあ、バインディングですね、そのせいで長くなってますね、 なので、アウトバリュー、これ取ってあげないと、ちょっと長くて困っちゃう感じですが、 まあでも、インレークなのでね、これで良いでしょう、 なんで、1回目のクイックが完全に無視されているということが、とりあえず分かりましたね、 完全に無視されたのが分かった時はどうするんでしょう、っていう、そういったのが、なんかそういったの無理そうな、 予感を感じるんですけど、このデバッグはもういいや、出れば、ちゃんとなるんでね、 なので、Selected Landmark ID、これが変わったかどうかを見てみればいいですかね、 どこにしようかな、Selected Bodyの一番上でいいですかね、一番上の、一番上の層に、オンチェンジ、 で、Selected Landmark ID、で、その時に、なんか忘れようっていうね、プリント、これで、例えば、アウトマーク、 みたいな風にして、せっかくなので、オールドバリューとニューバリュー、これをね、出してあげて、 で、これでどうなるかっていうのをね、ちょっと調べたいんですが、この前にこの余計な感じの、トログメッセージ、 これをちょっと消しておきたいかなと思います、はい、うん、もういらないですからね、モデルデータがイニシャライズされたタイミングとか、プリント見ればいいのか、プリント、で、レシーブ、 えーと、いくレシーブで、やーと、あー、シェアが関係ない、マイクリフィケーションをゲットした時、これもいいですね、 あの、こっちを別の、えーと、こっちをアップしたところですね、これはね、うん、で、これは良しとして、で、そうすると、あと他にこれ、お気に入りが変化したことをチェックするオンチェンジ、これもい で、オールドバリューとニューバリューが両方ともオプショナルですよってことなので、 あとエニックしとけば回避できますね、で、これでビルドして、実行して、スタートとなりますね えーと、これで、えーと、クリックすればいいんですかね、はい、回った、ニルから1006、1006、まあIDですね、で、この後は、回りましたね、1006から1003、みたいな感じで、最初にニルだからかなというのを、いや、そりゃ関係ないかなって気もするけど、まあちょっとやってみましょうか、何をするかというと、このランドマークIDの初期値を例えば1001とかにしておいて、で、これで実行をかける、押したときに、どうなるかですね、で、これで、最初はナードル6が選ばれている状態ですね、ディテールには出てないですけどね、ディテールには出てない、ここもちょっと面白いところね、で、これで、例えば、ISPを選ぶと、あ、もう出ましたね、最初にニルだから問題 もう一回ニルにしましょうか、この時に実行すると、何も選択されていない状態で始まり、えーとね、ここでツインレートを選んでもいっぱい無視される、そうなんだとしか言えないんですけど、そうなの、そんな話なのか、えーと、じゃあどうしよう、リストがあって、セレクティックIDがあって、4E1があって、で、ディテールがあって、まあそもそも最初のリストですよね、リストのセレクション、で、えーと、これが変わったとき、変わったときに、えーと、うん、変わったときに動く、動かない、分からない、ちょっとこれAIに聞いてみるとどうなるんだろう、えーと、AIはコマンドを映ってるかな、出てきた、うん、えーと、 ディスプレイ、ディスプレイングがはるまるかな、ハットマーク、ディスプレイ、セレクティックか、セレクティック、なんだこれ、どうか、もう一回じゃあ、で、セレクティックランドマークIDか、 初期値としているときに、今のコードのように見てる方がいいかな、今のコードのように、えーと、初期値としているときに、フリを実行して、リストから、えーと、ローティックかな、4Eか、 アイテムを選択しても、えーと、最初はセレクティックランドマークIDか、選択したものに更新されはするものの、リスト自体は選択状態に一瞬なって、えーと、解除ですね、解除されてしまう理由を教えてください、 えーと、セレクティックランドマークIDのロキティを見る以外、えーと、リストにあるものに置くと、対象の選択から正常動作します、って感じで聞けば、 一般的には、あーそれエディット当たったら結構いい感じに教えてくれると思うんですが、別のコードで聞くのは初めてだな、そういえば、えーと、多分読んでくるのかな、最初のタップにデータソース4Eの配列が差し替わる、再編成されているため、リストセレクションが選択状態を維持できずにクリアしてしまう、 ほう、横のIDにしておくと、最初の再編成、再構成でも選択が残る、ため問題が起きにくくなる、うーん、あー、あー、どうでしょうか、うーん、どう、どうなの?って感じがするんですが、えーと、まあ、とりあえず次見てみようか、 リストのデータが初回表示後に差し替わる、リストの中の4E値はフィルターとランドマークス、 その中にディスプレイランドマークスIDに、ランドマークIDに依存している、 うーん、まだ3回まで出てたら安心しました、はい、で、えーと、まあそうね、確かに、 バインディングランドマークからフィルターでディスプレイランドマークIDsに依存している、 そうね、そこまではいいですね、で、それで、ディスプレイランドマークIDsは、 アップデートランドマークリストによって、あとからセットアップされる、 このときのオンアピアと、えーと、アップデートランドマークス、 あ、違う、フィルターが変わったときですね、 で、それで、画面の初期、初回表示時点では、ディスプレイランド、 ディスプレイランドマークIDsが空のまま初期で、 えーと、えーと、画面初期、初期、初期時点では空のままで、 フィルターランドマークスも空に近い状態で描画される、 えーと、あーそっか、アピア、オンアピアでやるからってことですかね、 で、それで、最初のタップを押してIDが変更されるタイミングと、 ほぼ同時にオンアピアのアップデートランドマークリストによって、 ディスプレイランドマークIDsが更新され、差し替わる、 なるほど、最後まで読まないで最初に考えようかなと思うんですが、 つまり、オンアピアの場所が変なのかな、かつ、 リストに対してオンアピアが付いてますけど、 このオンアピアってもしかして、リストじゃなくて、 ナビゲーション、こっちかな、 ここ、フォーカスバグとか音チェンジとか入れたとこ、 申し上げれば、もしかすると、リストがね、 初めての評価とかそういった話じゃなくて、 いいのかな、あ、ダメだ、今クリックしたんですけど、 録画が出てダメでしたね、自分の予想は、 外れとすると、あとは、えーと、 セレクティブランドマークIDが更新されるタイミングと、 ほぼ同時にオンアピアのアップデートランドマークリストが実施される、 って書いてあるんですよね、オンアピアとディスプレイランドマークIDsが更新、 そうですね、ただあの、セレクティブより前にリストが表示されてるじゃないですか、すでに、ね、 そこが気になっていて、この後選択してるんで、 なんか説明と違う動きに見えるんですよね、 で、まあとにかく差し替えが起こって、選択が解除される、 これはね、分かるんですけど、うん、 で、特にそういった場合のリストセレクションは、 選択中のIDがその瞬間に表示データの中間に存在するかを厳密に見る、 差し替えの瞬間に存在しない状態が挟まると、 選択はクリアされたし、うん、 うん、選択したときに見るとIDになると思うんですが、 この時に変わるのかな、なんか違う気がするんですけど、分からない、 えーと、まあいいや、とにかく、アニメーションセレクションの再評価が、 選択時を不安定にする、うん、 えーと、あとは、アニメーション、アニメーションのディフォルト、 バリュー、フィルター、えーと、ランドマークスもプラッグ、バリュー、 これでも、用語タイミングを増やす、アニメーション、 どんなの作ったっけみたいな記憶ですけど、えーと、アニメーション、これか、 これに対して、フィルターしたランドマークスもプラッグ、 フィルターしたランドマークが、えーと、 なんだこれは、アニメーションでディフォルトで、 それでバリューが、えーと、フィールドランドマークス、 あー、フィールドランドマークスが変化したときか、 このときのアニメーションかな、で、えーと、これで、 あとは、初回のみの条件、えーと、 リストセレクションとナビゲーションリンクを使っていれば、初期状態から、 最初の選択を行う瞬間は、スプリットビューの線や、 ティエールの描画方針が同時に走る。 これに伝説のデータ差し替えが重なると、 リセットされやすくなる。 一方で、最初からセレクティブランドマークを 回避に行わないでおくと、初回のデータ差し替えが起きても、 選択されるアイテム表示集合が、えーと、 存在する集合に存在する。 状態を位置しやすくクリアされにくくなる。 一旦ちょっとアニメーションを切ってみましょうか。 アニメーションを切るとどうなるか。 これで、例えば人類を選ぶ。 ああ、どっちもダメですね。 アニメーションはまずEとして、これ以外の根本原因ですね。 ただ、この説明がまだ納得できていないので、 まあいいや、解決策をちょっと読んでから考えますか。 良い表示前にディスプレイングレーラーの マークアイテムを準備しておく。 イニットや、よきかや、パスク、イニットソフト、パスクか。 パスクはオンアピアー前と聞いているけれど、 オンアピアーと違うのかな? そういえば。 オンアピアーとって、どっちが先に動くんでしょうね。 確認してみましょうか。 確認というと、まともに事実の確認だけですけど、 パスクをやる前にパスクと表示させて、 これでまず実行してみましょう。 そうしたときには、パスクが先に動きましたね。 説明でパスクが先、タイミング的に動くという話を ここは無茶するから、あんまり期待できなかったですね。 パスクにすること自体はね。 パスクにしたので、ちょっと確かめておきましょう。 全体的に合計アンセルされましたね。 なので、これはパスクでもオンアピアーでもいいですが、 不必要にパスク立ち上げるよりは、 オンアピアーの方がタイミングが測りやすい気がするので、 こっちでいいでしょう。元のままで良いでしょう。 あとは、初回だけアニメーションオフ、これは違いましたね。 モデルデータ、ちょっと順番に逆に言っちゃいましたけど、 これは、スペートフルライブベースバディスプリング、ランドマークID2。 これがフィルターのように初期値を計算済みにする。 私、モデルデータのライフサイクルに注意。 これはダメですが、エンバイドモデルとなって、 今回はオピーの時に有効な値が使えるはず。 フィルターとランドマークス、バインディングとランドマークスではなく、 安定したアイデンティフィアブルのアタイ配列。 ランドマークスとして、私、O1のアイデンティティ、これを厳密に保つ。 その可能性はリクサバーグなんですけど、あるのかなと思ったところではあって、 バインディングを使っているので、ちょっとややこしいことにはなってしまいましたね。 あとは、アレンダリングでセンタコアンセルさせたい場合は、 最初からIDを入れる。これも一つ例としてありますよね。 ファストインデックスを入れておけば、ランドマークス、 フィルターとランドマークスのファストインデックスを入れておけば、問題ないんでね。 そういう点は確かにある。 ただし、今回はそれをしたくない気がする。 なぜなら、挙動がおかしいからってそういったことですね。 なんか、クオリティの中で対応するならいいんですけど、 根本の原因を見つけないまま、ID設定すればいいじゃんっていうのは、 なんかちょっと気分がよろしくない。 まあ、できない人があればいいんですけど。 そうするとどうしますかね。リストが、とにかくキャンセルされてしまう。 リストの選択状態ですよね、でもね。 リストのセレクションはちゃんと表示が、 表示がというか、ちゃんと保たれているにもかかわらず、 行為の偽装だけがされちゃうってのがすごく不思議ですね。 なんでだろう、これは。 大量化が走ったとみなされて、 キャンセル届けてみようかな。 リストが更新されたと判定されて、 選択が解除されてしまうとするのなら、 セレクティブランドマークIDが直前の選択のIDを 維持続けているのはなぜなんですかってのが知りたい。 選択が別レイヤーで管理されている、 データのランドマークIDで管理する状態。 あとUIレイヤー、リストセレクションが内部で管理する状態。 まあ内部でね、なるほどね。 バインディングとはいえ、確かに、 更新が増える、内容が増えることは、 これまでのバインディングで 結構悩まされてきたからなんでね、 確かにわかるところだし、 考えるとやっぱりバインディングの問題なのかな っていうのをちょっと感じたりするんですけど、 フィルタードランドマークス、 これはフィルタードランドマークスで、 これはバインディングのランドマークスですよね。 バインディングのランドマークのIDが、 どれを取ってるんだこれ。 といえば、IDを取ると、 SwiftUIのIDで、バインディングのIDですね。 Every Identity of Entity、 このインスタントに割り当てられているバインディングのID。 これが得られるよってことか。 これがもしかすると、古い可能性も あるのかもしれないですね。 ランドマークが、バインドになっている都合で、 材料がかかったタイミングとの都合で、 バインディングが指しているランドマークと、 どれの実際のランドマークとが、 違っている可能性がありそうですね。 選択変わったときにね。 なのでそうするとなると、ElectiveランドマークIDも 変えないといけないってことなんですかね。 クリックしたときに。そういうものでもないか。 あれは難しいな。どうしようかな。 初回でElectiveランドマークID、 これをいっぱい、 例えば意図的にパスクで、パスクじゃなくてもいいかな。 意図的にいっぱい更新してあげれば、どうなるのかな。 オンアピアのところで、Updateランドマークリスト。 これをやった上で、その上で、ElectiveランドマークIDとして、 2両代入する。 というのを意図的にやってみる。 そうしてみると、いっぱい2両になりますよね、最初ね。 その上で、クリック。変わらない。 変わらないとなると、Updateランドマークリストは、 DisplayingランドマークIDをモデルデータの、 ランドマークスのフィルターのID。 Updateモデルデータ。 モデルデータってことは、やっぱりポーティでやらないとダメですね。 それで、ElectiveIDをここで更新したところで、 何も変わらなかったということなので、 そうすると、クリックしたときに、どういう動きを見せるのか。 という状況ですかね。 リストセレクションでセレクションが変わって、 セレクションが変わったときに、セレクションの変化が取り替わりになるのは、 何にも取り替わりにならなかった気がするんですけどね。 このセレクションをちょっと取ってみましょうか。 そうすると何もセレクションよりできなくなるので、 これはメニューに影響する程度で、 実際問題は特に何もないと思うんですが、 これでTwinLegをクリック。 これは大丈夫なんだ。なるほど。 そうすると、完全に原因は、これですね。 セレクションがあるかどうかですね。 セレクションがあったときに、このIDが、 エルダードランドマークスのIDがIDって感じであるけど、 もしかしてこのときにタグを付けたらどうなんでしょうね。 今逆してるじゃないですか。 なので、list foe1、タグ。 どう付けるのかすっかり忘れてしまいますが、 list foe1、タグ。 タグとして、 これ、そういう人を見ないとダメですね。 リストをやってあげて、 そうね、これで、 foe1、タグ。 リスト内で繰り返し、このタイミングでfoe1を使うか、 foe1のループ内でタグを使う必要はない。 そういう必要がないとかは、とりあえずどうでもいいや。 まずは、list foe1、タグ。 タグを知りたい。 パッチン的には、 と、スプライド。 このか、読みとかい。 まあいいか。 foeは、 あ、list foe1とか入れないとダメかな。 list foe1、タグ。 これで、 シンプルな方法というか、 foe1テキストで、 これは特にタグいらないですね。 で、他には、オプショナルの場合、 foe1テキスト。 これも別になんともないですね。 で、セレクション、バリュー、コンテンツ、 シンプルな書き方、list foe1、で、IDでタグ。 ここでタグ。 タグ、中身にタグってことですか。 つまりね、foe1の中身。 やってみますかね、どこだろう。 foe1の中身。 ここに対して、タグ。 そして、IDですよね。ランドマークのID。 これでいいのかな。 ラップ入れるのかな。 ビルドをとりあえずかけてみますか。 これで別に問題が解決するとは限らない気が、 予感がしていて。 ラップとバリューのIDだとどうでしょうね。 こうしたときに、クリック。 これもダメですね。 ここに出ちゃう。ラップとバリューのID。 これもダメですね。 そうすると、タグね。 あとは、foe1でIDを指定しなかったときに、 ビルドをかけると、選択状態がダメなわけですけど、 こうしたときに、今押したんですけど、ダメですね。 これもダメか。 そうすると、タグ。ここにタグを入れてみましょうか。 .タグ。 タグもそうなんですが、クリック2回目は大丈夫ですね。 タグとしてランドマークのIDという風にしてあげると、これがどうだろう。 最初はやっぱりダメですね。 なるほど。 これで、SelectedRandomMarkID。 これもあるんですけど、 あとは、stateをprivateがSelectedRandomMarkとして、 バインディングランドマークという風にして、 オプショナルで見るとした上で、 こっちでステートか。 最初は、いや、変えときますか。 プライベートはちょっと置いといて、 SelectedRandomMarkIDがオプショナルで、 これはSelectedRandomMarkのIDですね。 という風にしてあげて、 こうしたのは純粋にコードを交換して、 持ったまま実況をしたいというか、それだけですね。 そしたら、Selectionの方を、 SelectedRandomMarkをバインドさせる形にして、 それで、タグとしてランドマーク。 こんな風にすると、どうですかね。 ビルドをかけて、実行をかけて、 えっと、ダウンロード、えっとなんだ。 チェック。 レーゾナブルタイムに行くべきだったというのが、 ちょっとした間違いをしたというですね。 ランドマークをここにしていって、 このランドマークはバインドされていましたよね。 確かに。 Electorとランドマークスを見てもいいのか。 Electorとランドマークスで、 その他はBindingのランドマークス。 それで、タグがあって、このタグをちょっと消してみましょうか。 ビルドをかけると、これだったとどうだ。 これもダメか。 SelectionがSelectedRandomMarkで、 あとはBindingのランドマークのハッシャブル。 ここね、あれが赤の型がハッシャブルじゃないよ、 ということですね。 なので、IDが欲しい。 IDが欲しいという状態で何とかしようとすると、 Bindingは普通にランドマークをもらうということにすればいいだろうですね。 そしたら、あとはここでタグ。 このタグとしてBindingしたのじゃなくて、 これを渡してあげれば、これでいいのかな。 という感じでやって、ビルドが囲んだ状態になりましたよね。 これで、最初のクリックが、あーダメですね。 2回目は大丈夫ですね。 2回目は大丈夫で、これを、お気に入り。 オンオフするのは大丈夫だと思うんですけど、 オンオフすると、消えちゃう。 あ、消えますね。 これは、おっと。 面白い、面白いというか、これをオンにした時点で、 新しくなったと認識して、選択が切れてるんですかね。 これはちょっと面白いですね。 要は、このタグをやめて、選択しかないか。 タグをやめただけに戻してみますかね。 タグをやめただけだと一緒かな。 今、選べましたね。 選べたけど、これもう一回実行してみますけど。 これで実行して、最初のクリック。 選べた。選べて、あとはお気に入り。 お気に入りはダメですね。 だからつまり、セレクティブランドマークが変わってないですね。 これはね。 なので、セレクティブランドマークがリストと同意ができたと捉えると、いい感じですね。 きっとね。 なので、そうすると、コードを戻そうとりあえず。 ID、ランドマークIDでタグもない状態ですね。 ここまででいいかなとね。 それで、少し良くなった。 リストがやはり更新されたと見なされたということですね。 だから、それを回避しないといけない。 ITが変わったとき。 または、セレクティブインデックスの管理の仕方を変えるというのもあるのかもしれないですけど。 それはね、やっぱり良くないかなと思うので。 そうすると、また頭で考えていかないとわからないですかね。 どう考えるといいんでしょうね。 セレクティブランドマークIDというのがあって。 それで、ボディに突入してきて。 アップデートランドマークリストというものが、ディスプレイランドマークIDを更新する。 ディスプレイランドマークIDが更新されると、それを使っているフィルタードランドマークが更新されるんですよね。 だから、ここをちょっと見てみてもいいですね。 アップデートフィルタードランドマークですね。 同じにして、実行してあげる。 そうすると、とりあえず3回更新されましたね。 これでツインレークをクリックすると、もう1回更新されましたね。 この後、多分更新されないのかなという風な。 更新されてないですね。 これで他を選んでも、更新が。 アイディが内側にあるかどうか。 ニルがないと見なされる可能性がありますね。 リストにニルがないと見なされて、ニルから更新されたとき、選択状態が。 そうすると、更新されたと見なされて、中身が変わる。 アップデートフィルタードランドマークが更新されると、フィルタードランドマークが更新されるとリストが確かに更新されますね。 フィルタードランドマークは、バインディングランドマーク、ディスプレイランドマークIDですね。 だから、オンアピアでアップデートランドマークリスト、オンアピアとか。 実行したときに更新がされるとかですよね。 これをオフにするとリストが出ようもないですかね。 なので、これだとどうにもならない。 フィルタードランドマークが2回更新されているようですけど、フィルタードランドマークは2回。 あと、これケースの方がフィルタードランドマークを1回ですよね。 ここが2回。 オンアピアで3回ということですね。 要は、セレクティックが変わったときに、例えばアップデートか。 アップデートでディスプレイランドマークID2ですよね。 ディスプレイランドマークID2。 これがアップデートでしたっけ。アップデートランドマークリスト。 そうですね。モデルデータから色々やっている。 そうですね。難しいですね、これね。 セレクティックでリストが変わったと見なされて再描画されてしまう。 2度の代入というか、セレクティックランドマークIDが変化したときに、 リストが更新するしかないですね。 フィルタードランドマーク数が変わったということになり、それで。 これは難しいですね、どうしようかな。 セレクティックランドマークID。 これいっぱいオンチェンジで見た後に、 セレクティックランドマークIDに ニューバリを入れるなんて無意味なことだと思うんですけど。 これをちょっとやってみましょう。 ダメですね。トゥインクしてキャンセルされた。 これはそうですよね、って感じですよね。 これをパスクで立ち上げて、時間差でやってみる みたいな感じにするとどうなるのでしょう。 これもダメですね。 そうですね。とにかくオプショナル化はアップデートフィルタードランドマーク数。 フィルタードランドマーク数オンチェンジ。 オンチェンジか。ここで例えばリスト更新してやるとどうなるんだろう。 アップデートランドマークリスト。 押し上げるとバインディングが直れますよね、とりあえずね。 なのでどうなるか。それもダメか。 アタイムオンチェンジをとってみる。 これはあまり意味ないかなと思いますが、ダメですね。 そうか、原因だけは噛めたけど、 わからないという状況になりましたね。 とにかくこのリストが新しいものになったというね、 といった認識がされて。 そうなった理由としては、やっぱりフィルタードランドマーク数。 これが更新されたと見ていいんじゃないかなと思うんですよね。 で、その中にIDが見つからないと。 ニルからニルでなくなったとき。 そのときだけですよね。 そのときにニルが更新される。 エレクティブランドマーク。ナビゲーションリング。 ランドマークっている。 これは困った感じですね。どうかな。 どうにもならない気がしてならない。 どうすると。そうね。どうしたら。 あやましい。フィルタードランドマーク数。 これフィルターじゃなかったらどうなるんでしょうね。 フィルターじゃないとすると、モデルデータのランドマーク数。 バインディングじゃないとダメか。 バインディングじゃないとダメですが、 バインディングすればいいんですね。 これだとどうだろう。フィルターをかけて。 フィルターは効かなくなりますけどね。 引っ越して。それで動いたところで選ぶ。あれ、今押せてない。 押せもしないみたいな。 そういう状況。あ、違った。 押させるの間違えた。これでクリック。 あれもダメですね。ランドマークもダメか。 モデルデータのランドマーク数。 これもダメだとすると、もはや簡単な話ではないですね。 テストする上では、どっちがいいんだろう。 テストする上では、どっちがいいかな。 当たってもいいか。 2回目このクリックで大丈夫なんで、 1回目なんとかすればなんとかなんじゃないかな。 そんな気がするので。 これは最初はとりあえず選択しちゃった方がいいんですかね。 オンアピアでランドマークリストアップデートしたら、 セレクティブランドマークIDを フィルタードランドマーク数のファーストのIDに設定してあげる。 これでとりあえず実行すると最初のリストが選ばれてないの。 ダメだった。 最初は選ばれなかった。 このIDがどうなったかこれを見てみたりですね。 ここでプリント。 マークは何か。 決定。 それで穴掻き。 アップデートしてあげて。 それで実行して。 どういう風にIDがオンアピアで変化するかですね。 ニルが出たか。 ニルが出たか。 ランドマークアップデートランドマークリスト。 これはディスプレイランドマークIDが更新された。 ディスプレイランドマークID。 これがバインディングランドマーク数。 それはどうでもいいか。 フィルタードランドマーク数。 空っぽなのか。 という感じですね。 これちょっとタスクで。 タスクで。 フライアウェイとタスク。 スリープ。 4。 バンド。 1。 という風にして。 ニルとはいかないですよね。 ニルか。 フィルタードランドマーク数。 アップデート。 これはどうしたんだっけ。 アニメーションとかいろいろあるけど。 フィルタードランドマーク数。 これか。 ボディからフィルタードランドマーク数を入れている。 これのせいか。 これのせいで古い情報を使っているのか。 もしこれでフィルタードランドマーク数をローカルに入れないとすると、いつかどこか検索しないといけなくなっちゃうんですけど。 こうすると。 最初から選ばれましたね。 今ね。 それで選ぶと次回ってことでね。 そういった状況にまでとりあえずなりましたね。 そうするともう一つ考えられるのが、このタスクをもうやめたところでちゃんと取れるというのは明らかなんですけど。 これ実行してあげて。 これで動いたやつ。 これはね。 選択されてますよね。 押すと映る。 いいですね。 ここでですね。 IDをいじらないということをやってあげるとどうなるかというね。 こういったのを試すと。 これで大丈夫な気がするな。 これはダメなのか。 そうか。 そうすると。 セレクティブランドマークIDをとりあえず2をここで代入してあげるにしましょうか。 これで実行がきると。 ダメか。 ここで最初の1個を選択状態にしておくというのが、この現在の感じだとあまり好まないなといった感じでたどり着いてましたね。 なんかね。 そうか。 そうするとたどり着いちゃいはしたんですけど、ちょっといけなくちゃっぽい感じにはなったというそういった感じですね。 オンアピアとかでアップデートしたっていうのが問題なのかな。 オンアピアでアップデートをする? それともどうなんだろう。 これちょっとしてみましょうか。 オンアピアでのアップデート。 セレクトもいらないかな。 オンアピアじゃないとすると、そうしたときにはランドマークリストのアップデートが働かないからディスプレイングランドマークIDが更新されないんだ。 そうだね。 ランドマークディスプレイングIDは最初に更新してあげないといけないんでね。 そのせいか。 なので。 そのせいか。 アップデートランドマークリストをどこかボディで更新してあげればいいと思うんですけど、それがかなわないということで、 アスクでオンアピアでやってるようなことなので、これだと全然ダメですね。 リストが最初出てこなくなっちゃう。 なるほど。 わかった。 ということで、そうするとしょうがない。 これにしましょう。 セレクトランドマークIDを最初のものに選択してあげる。 これで良いでしょうと思ったけど、まだダメな気がしたの。 選択状態になったとして、最初のこのセレクトランドマーク これはもう選択されてるのに出てるんで、これはこれでまた別のバグがありますね。 これは困りましたね。 そうするとどうするか。 アップデートランドマークリストをセレクトランドマークIDが変更したとき、他にする手もありそうですね。 オンアピアは何もしないで。 押し上げると、選択したときにリストの更新が図られて、どこかオンアピアでのアップデートがありますね。 押し上げて、引っ越してあげて。 選択。ダメだ。無視されましたね。 ダメですね。これでダメだとすると、選択状態にして、そのときにディテールリスト。 ナビゲーションの最初のページは、セレクトランドマーク。 これはやらないといけないですね。 セレクトランドマークですが、このときにどうするんでしょうね。 わからない。とりあえず、セレクトランドマークIDを表示させて、様子を見るという謎のことをしてみますが、あれだとどうだろう。 最初起動したときに、起動するとき。 セレクトランドマークID。 カンバーの形を渡せないから、あれだ。 ピンピンとアップデートして、様子を見て。 押したときには、あれもダメだ。 1ってなってるだけですね。どうか。 これはこれでどうしたものかってですね。 ここで例えば、 ランドマークディテールを表示するという手はあると思うんですけど、 これで、ifretを、まあいったい、ifretもそうなんですが、 ランドマークイコール、セレクトランドマークIDが、 じゃなくて、セレクトランドマークIDで、 フラットマップで、モデルデータですね。 モデルデータのランドマークのエレメントIDですね。 これで、バインディングを取ってあげて、このときには、 ランドマークディテールを表示すると出なければ、 セレクトランドマークという風にしてあげると、 これで実行したときに、ちゃんと最初から出るはず。 出ましたね。これぐらいですかね。 で、2回目、もうクリックで大丈夫ですよね。 これオプションクリックとかする、コマンドクリックとか。 外せますよね。この後は、外れちゃうか。 これが、ああ、なるほどねって感じですね。 ヌルから選んだときが、外れちゃうんだ。 そうすると、接続できた対応ですけど、 これはこれで意味がないですね。 ニルだったときに、ニルからリストを出したときに、 選択が外れる。選択じゃない。 評価が、選択が外れるようになる。 これはちょっと困った感じがしますね。 とりあえず、余計なコードはもう消しておきますか。 何も解決しなかったやつ。 これで、いいんですけど、最大の難関ですね。 リストで、セレクティックランドマークID、 それがどれだったか、何かのリスト型に対して、 リスト型のイニシャライザーはどんなものか。 これを見てみると、リスト、UID、 リストのセレクションですよね。 これが今使っているやつで、 それで、イニシャライザーとか、 その型の説明を見たいんですけど、 どこだ? 出てこないですかね。 リストの解説か、この辺は。 あった、イニシャライザー。 ローコンテンツ、セレクション、 ローコンテンツ、ID、ローコンテンツ。 キーパス、アイデンティファイアへのキーパスか。 これを使って、ああ、そうね、IDね。 IDとセレクションもあるね。 でも、IDはポイントで使っているから、 これはポケットしていいんですかね。 チルトレ。 テルトレンというのは、リスト。 テルトレンは、ライタブルキーパス。 エレメント、データ、ローコンテンツで、 バインディングデータパートナーグループ。 エラリカルリスト、ローバインディング、 アンダリングセレクション、アイデンティフィアブルデータ。 データは任意のもので、 それでデータのエレメント。 キーパスとデータのオプショナル。 データのエレメント、バインディングデータで、 データのエレメントで、データのオプショナルが返ってくる。 テルトレンはキーパスのヌルバリューが与えられたもの。 まあまあ、わからなかった。 イニシャライザーで、テルトレンセレクションとか、 バインディングデータ、エディトアクション、エディトはあまりいらないかな、今回は。 そうすると、デーゼ、テルトレン。 テルトレンって何をするんだろう。 ライトブルキーパスでデータのエレメント、データ。 データは何かっていうと、データは ミュータブルコレクション、 データがミュータブルコレクションで、だった気がする。 データがランダムアクセスコレクションで、 ローコンテンッとかビルディのデータのエレメントが アイデンティフィバリ、 テルトレンっていうのはコレクションですね、 ランドマックスコレクション。 その中のエレメント、それのデータ化 がキーパス、バインディングデータ、 テルトレンが・・ ガンディングで、セレクションバリュー。 セレクションバリューというのは、 セレクションバリューというのが、どこだ? セレクションバリュー。 バインディングのセレクションバリュー。 で、セレクションバリューはどこにある? セレクションバリューが発射すると、 セレクションバリュー。 これ、忘れてる? カタパラメーターですかね、これね。 セレクションバリュー。 きっとそうだと思うんですけど。 とりあえず、違うですよ。 ということで、NILが対象に設定いただけたのですね。 セレクティブランドマークIDがNILだった時に、どうするかどうもできないという感じですか。 NILから対象の選択へ行くとき。 NIL。セレクティブランドマークIDがNILだったからなんだろうって感じですけどね。 Focus to Value on Appear. セレクティブランドマークID。 なんか手に負えなくなってきましたね。 オプショナルを許さないことも出てきない気がするし、 やってみますけど、例えば、NILじゃなくて、例えばATをイントータにして、 まあこれよくないですけどね、1001裏を代入してあげたとすると、 この時には、イルトはオールですかね。 オプショナルは欲しいですもんね。 なるほど。リファクトリング以前の問題でバグが取れないですね。 そうか。リスト。一旦、そうね、どうするかな。 で、セレクションですよね。 4.1をもう一回見てみようかな。 リストの中で4.1使ってますけど、 リストの中でもうそのまま使えないのかな。 リストで、エルサーとランドマーク数ですよね。 それでIDですよね。 これから、オールですか。 これでビルドオールですか。 ビルドとか取らないか。リスト。リストのイニシャライザー。 一旦戻して、リストのイニシャライザー。 で、セレクションの元なんですけど、セレクションとID。 セレクションとViewBuilderですね。 で、それで、セレクションとViewBuilderで、 セレクション。もうちょっと上かな。 面倒な感じがありますが、えっと、 ドキュメントみたいなのがいいですね。 リストの中のイニシャライザー。 で、これでセレクション。あ、これこれ。 ID、セレクション、ロープコンテンツ。 これを使いたい気がする。 で、うん。OKか、メディアしますね。 えっとね、そうしてですね、これで、リスト。 えっと、リストで最初がデータですよね。 で、最初がデータ。フィルターとランドマーク数ですよね。 で、それでIDがID。で、セレクション。で、ビルドがオールですよね。 で、その中で、ビルドに来るのは、バインディングのデータエレメント。 バインディングデータエレメントがランドマークインですね。 これで、for1が別にいらないってことですよね。つまりね。 うん。で、ビルドをかけると、こうして。 実行したとき、これがどうなるかですね。どうなんないかなるか。 インレク。あ、ダメか。一緒ですね。最初の1回は結局一緒か。 短くなったからこれでいいやって感じですけど、最初がやっぱり更新が、うん。 あ、いかんかな。リストビュー。あ、いや違うな。ないですね。 エキスト。このセレクションとランドマークがね、消えるっていうそういったタイミングでも、 まあ、逆に言うとリストが表示されるタイミング。 あ、でも出てますね。とか。いや、大丈夫だ。うん。うん、なるほど。 選択肢がニルだったときに、あとは何もならないよっていう、そういった感じですね。 で、それでリストとfor1か。これからリストとfor1戻しますよ。 で、そうしたときに例えば、エンプティブバリは消えちゃうか。 もう一回。いや、エンプティブバリは何もしないことが多いから。 だからクリアとかにしますか。 これでタグとしてニルを設定するとどうなりますかね。 例えばやってみたい。こうすると無害な、あ、これダメだな。 えーと、ディネリック。ディネリックね。なので、IDですよね。 だから、まずIntOptional。これで行こう。 で、このときに選ぶ。あーダメか。あーダメですね。どうか。 そうすると、じゃあここに例えばテキストとかあって、 for1か。ナビゲーションリングとしてエンプティービューでラベルとしてテキストでやって、これにタグとしてニルあとIntという風に割り当てると、 これはどうなんだろう。1個セルがニル用のができるととらえていいのかどうか。 あ、テスト出ましたね。それで選択すると、今なんか一回落ちた気がするんですよね。 なんとも見えなかったですけど、一回クリアも何もないや。コマンドで選択解除して、あーダメか。 こっちは選べるんですけどね。あ、で、セレクトに影響しないわ。ID。あ、これ影響しないのね。IntOptionalとか。 それはダメなんだ。なかなか難しいですね。タグってね。エンプティービューだからダメなのかな。 こんなことになるかな。そうじゃないですよね。まあいいか。うん。うん、そうですね。 一回ニルになっちゃうとダメですね。うん。うん、なるほど。 はい、じゃあそうすると、マリサフルで残しといて、コンテンジとランドマークの変更とかとかといって解決ができないという感じですね。 これで材料が書けるためには、えっと、何をするといいんだ。 例えば、フィルター。フィルターをちょっと変えてみますか。 ここ。フィルターイコールフィルターみたいなふうに無理やりフィルターをリセットするということをしてみたときに、 セレクティックランドマークが変化して、それで、なんていうのかな。あ、ダメですね。これもダメか。 タイミングをずらしてあげるみたいな、そういった感じだとどうなるのかな。 これでクリック。あ、ダメですね。で、選んであげたときに、これフィルター解除とか変更するとこうなって、選んだときに解除されるはずよね。 これでフィルターを選んだときに、また1回キャンセルされますが、選んだ状態で、 エバリットオンリーフィルターにして、これだと選んでいる状態になるんだ。 リバースとか、エバリット抜きますかね。 エバリットじゃないよと。今、フィルターがリセットされなかったですね。 これもちょっと問題がありそう。 とりあえずこれでエバリットオンリーにすると、やされて選ぶと、これは選べないな。 この選んだ状態でエバリットオンリーを解除すると、これは大丈夫か。 こうしてエバリットオンリーにしてもう1回にすると、2番目が選ばれている状態。 セレクティックトゥランドマークIDは記憶されているということでよさそうですね。 それでフィルターをかけると、フィルターがかかって選択の状態。 また下のロックを選んだ状態でフィルターをかけてあげる。 これが選んだ状態になるという、そういった感じですか。 これが内部のニルの状態。 それが変化したことによって、色々変わって、色々変わったことによって、一旦描画上の表現がリセットされる。 それはおかしいですよね。そこがおかしい。 そうしたときには、選択をして、最初にフィルターをかけた状態でやってみますか。 ここで2選択にすればいいですね。 フィルターでマウンテンズとしてこれを選ぶ。 最初はダメですね、やっぱり。 ということで、もう1個。 お気に入りじゃない状態にして、お気に入りじゃないものを選んで、お気に入りのみにすると選択が解除されますが、 このときに選ぶと、これは大丈夫ですね。 ニルじゃなければ大丈夫ということまでが、ぱっきりと見えてきた。 ただし、ニルだといけないよということで、ニルを拠地に置かせる。 そうしてあげて、出ている。 そうしてあげたときにも、結局あるいは選択を解除しちゃうと問題になるから、 そこは何とかしないといけない。 結局のところニルのときに何とかしないといけない。 そういった感じですね。 なるほど。これはここまでですかね、今日はね。 リスト周りを何とかいじれるようにならないと解決できないっていう、 こういった感じで良いんですかね。 アップデートしなければ大丈夫だったんでしたっけ。 セレクティブランドマークか。 もう一つ考えられるのが、セレクティブランドマークは、今ステートでやってますけど、 これステート取ることは、書き換えるからダメなのかな。 ビルド、バインディングしてましたっけ。 ここか。 セレクティブランドマークID。 ここでレッド、レッドソード。 セレクティブランドマークIDをニルにしたんですけど、 これがセレクティブランドマークID。 このイニシャライザーができたっていう、そういったことですか。 そうですね。 これはちょっと面倒ですけど、イニシャライザーを。 あ、そっか。これプライベートとかダウン抜けんだ、今は。 押し上げれば、ビルドがどうなる。これでビルドバインディングしてそうですよね。 確か、セレクティブランドマークIDって。 そうですよね、バインディングしちゃってますよねって感じなので、 それをバインディングにするためには、バインディングインとか、それに対してドットイニットとか。 イニットのゲットセットか。 ゲットどこかに書かないといけないから、これちょっとダメですね。 ゲットじゃなければ、もしやと思ったんですけどね。 IPはバカに影響しないですもんね。 なるほど。ではダメですね。 これはダメですね。 はい、じゃあ今日はバグがとれずに終わったという感じですが、 なんとかする方法として、やっぱり取れませんとは思ってダメですね。 またじっくり次回考えていく感じにしましょう。 はい、ではこれで終わりにしますね。お疲れ様でした。
