Transcription & Summarize : とりあえず読書会 SwiftUI Tutorials #4

はい、ではとりあえず、Swift UI Tutorialsを読み進めていきましょう。 要は、セクション1とか、ラプター1のセクション2くらいから読んでいきますが、 前回くらいからですね、せっかくならSwift Lock対応もしようとか、リファクタリングもしようとかね、 そんなことも言いつつやってみている感じで、そんなノリでね、今回も進めていきたいなと思ってるんですが、 最初はちょっとUI周りをね、いじっていくっていう感じになるっぽいんで、そこまでどうなるかね、わからないですけど、 まあまあ、こんな感じで淡々とユーザーインターフェイスをね、作っていきつつ、 まあなんかせっかくだから、コートの話とかも、まあじつつですね、やっていきたいなと思いますが、 Swift UI Tutorialsのこの、まずは2つの1章?1章のBinding Returnのアプリケーションですね、ここですね。 この中の、えーと、これ何なんだこれ、セクション1、これ難しいね、それと同じですけど、 チャプター1が3つ構成になっていて、この3つにお名前がついていないのがすごく難しい。 タイトルはね、ついてますけどね、この2つ目の中のセクション2からなんですよ、今日は。 うん。 えーと、ここですね、TrowView、なんか今日ですね、量を表すビューを作っていこうという、そういったセクションになりますかね。 えーと、今拡大したっけ、どっちだ、セクション1にきちゃった。 セクション2、ここですね、作りたいのは右側のようなやつですね。 画像があって、テキストがあって、あとはスペーサーがある感じですかね。 で、これでこういった、セブをリストアップするために使っていこうと、そういった感じで、 まず部品を作るんでしょうね、きっとね。 えーと、最初に、このチュートリアルでは、秒、ディスプレイ、詳細、ランドマークの、どれどれのランドマークの詳細を表示するロー、 詳細までいくのかな、とりあえずそれを作っていくことになると。 で、えーと、このローは、インフォメーション、プロパティ、ランドマークの表示するためのプロパティを持っていて、 それで、右のランドマークを表示できると。 で、その後で、複数の秒をディスプレイで表示できるよ、という話になると。 まあ、一般的なのがあれですね。 で、ここでクリエイターニュー、まあ、その今載ってきた、えーと、ランドマークローというね、 ツイートファイル、これをビューズグループに作りましょうと。 で、そこに対して、ランドマーク、ランドマーク、カードプロパティでランドマークを作って、 で、それで、そのランドマークが追加されたら、えーと、追加されたらって言うカードでしょ? ランドマークプロパティを追加したときか。 で、プレビューがストップするだろうと。 なぜなら、ランドマークローの方は、ランドマークインスタンスを、 また、イニシャライズ? えーと、ランドマークインスタンスがイニシャライザーで必要になるからだと言ったことみたいなね。 まずここまでやってみますかね。 ランドマークローを作るところからね。 これで、ビューズに対して、ランドマークビューをね、ランドマークローを作るから、 ここでコマンドNで、Zwiftファイル? Zwiftファイル、ここでZwiftというアイコンがありますね。 こっちにしてみますか。 ついでにZwiftファイルを使っちゃいますけど、 ここで、ランドマークローの中にね、アクセスすると。 で、ここで出来上がったランドマークローがあって、 で、この中で、えーと、保存型プロパティで、ランドマーク。 これをランドマーク型で定義する。 で、このときに、まあプレビューはまだ動いてないですけど、 まあとにかく、ビルドエラーになるというところを確認しておけば十分ですかね。 まずはここまでOKですね。 ね、それで。 次としては、プレビューを直すために、 プレビューのインスタンスね、これを作っていくことになるらしく。 そのためには、えーと、プレビューマクロの中で、ランドマークパラメーターを、ランドマークローのイニシャライザー。 最初の要素、えーと、ランドマークスアリの最初の要素ね、使っていくよと。 で、そうすると、コンパイルが成功するようになるんで、 まだね、細かいこと作ってないので、ハローワールドっていうのが出るようになるよと。 うん、良さそうですね。 一応このコードを確認すると、こんな感じですね。 ランドマークローのランドマークに対して、 ランドマークスの0っていう風に渡すと。 まずこれをやっていきますが、この時にですね、渡すのがランドマークスに、 ランドマークに対して、ランドマークのローを渡すわけですけど、この時、今はどうなってるんだっけ? まずはランドマーク、ランドマークのローが、そうですね、これだと、ちょっとね、タイプした都合で簡単に取れないですが、 そうだね、そうするとここでプレビューのためにちゃんと作ってあげるしかない感じですかね。 はい、そして絶望で、これがグローバルにないんですよね、ランドマークのデータがね。 なのでモデルデータがバンドルに対してモデルデータメソッドを使って、このデータを呼んでいくっていうスタイルを取ったので、 これを使わないといけないですね。 えーと、あら、ここで、ここでというか、レッドランドマーク、ランドマークスにしましたね、最初ね。 これで、まあでも使い心地はいいわけですよ。 えーと、使い心地の自分のデータが分かるんですけど、バンドルメインでちょっとプレビューしておきますかね。 バンドルメインで、ここでモデルデータ、で、リソースで、えーと何だっけ。 リソースとしては、ランドマークデータですね。 なのでここで、ランドマークデータ、で、それでJSONですよね。 で、あとして、ランドマークス、で、これでインスタンス化ができて、 で、それに対してそのうちの最初のもの、さっきあの、えーと、YDでアクセスしてましたけど、 今回ちょっとファーストにしときましょうか。 これでもいいですよね。で、ランドマークデータJSONには1個1個データが入ってるのは、もう目で見て分かるのと、 今回あのリソースにファイルを入れてるのね、分かるのと、 あとここでね、まあ、ファーストでアクセスしても何の問題もないでしょう。 で、これでプレビューを動かすと、まだこのランドマークのデータは使ってないんでね、アローワールドが出るだけになりますけど、 とにかくプレビューができるというところまでは、うまく動くようになったという話になるはず、チュートリアル的には。 まあ何してもね、これでモデルデータをJSONから呼び出すときに、 このモデルデータがね、どこのバンドルに入ってるかっていうのがね、あるわけなので、 このバンドルに対してね、モデルデータを読み込むメソッドを搭載した方が、 グローバル変数でなんか色々やるよりは、いいんじゃないかなと個人的には思うので、 今こういうコードになってて、こんな感じでアローワールドが出るようになりましたね。 ここまでOKですね。ちょっとずいぶんコードの雰囲気が変わりましたけど、まあまあ良いでしょう。 シンプルですってね、こんな価値観だけで見ればね、このチュートリアルのコードの方がスッキリするのは確かですけど、 まあそういう問題でもなかったりするんでね、スッキリさっていうのは意味的に取ったっていうね、 そういったところがあるんで、まあまあ自分のことでもいいんじゃないかなと思ってはいますが、 大変だったら作ってくださいね、コメントとかでね。 で、FIXして、Layout、RawのLayoutを作っていると。 で、そのためにまずはHStackでテキストを作って、で、それで、テキストをModifierで、 えーと、違う違う、テキストじゃない、コードを修正して、 で、それでランドマークプロパティの名前を表示するようにしようと。 ここまでやりますか、せっかくならね、名前が出そうなんでね。 で、そうも何もないから出るか、ここで、あー出るよね、まあやってみよう。 で、テキストだから、チュートリアルで習った方法として、 ここでオプションクリック、または右クリック、違った、間違えた、 コントロールクリックとか、または右クリックで、 で、フレームベッドの、あーあったあった、エンベッド。 あ、これ全然なってるけど、こっちですね。 えーと、HStackでしたよね、間違ったら直せばいいや、HStackに入れて、 で、このテキストの中身をランドマークのね、えーと、ランドマークのネームにすると。 うん、これでいいですね。 そうするとプレビューが変わってくれる、動かない、このパワーも特に変わってた。 ね、パートルロック、適応されるようになりましたね。 うん、ちゃんちゃんですね。 じゃあ次として、えーと、Raw、Rawを完成させていくらしい。 えーと、ランドマークのイメージをテキストビューの前に入れて、 スペーサーを最後に入れると。 で、イメージを入れるときには、リサイダブルにして、ただ再度大変にする形にして、 えーと、フレームはパパもパパさんも50にすると。 まあ、そういうクリティックみたいにね。 なので、それを考慮すると、最初にイメージがあって、 で、それで、イメージとして、ランドマークのイメージですよね。 あ、そうだ。ただし、ここでですね、イメージが独自の型になってるんですよね。 この中から普通のイメージを取らないといけないですけど、 これをやらないといけない。 で、後ろにスペーサーと、 重要なのをちょっと見せておきましょう。 スペーサーとイメージで、リサイダブルにして、 で、フレームですね。 これで、あれフレームじゃなかったかな。 えーと、あってますね。 フレーム、ウィズ、コチューのアイコン。 コチューね。これですね。 で、これでイメージが問題ですね。 これが問題になってるのは、えーと、ランドマーク型のイメージ型ね。 これは、あの、スウィートUI標準のイメージ型では、 独自のイメージ型を作ったところで、名前があるんですけど、 この名前をね、それ以上使ってないわけですよね。 なので、ここからイメージをどう、あの、スウィートUIのイメージとね、 変換させていくかというところが悩ましいところですけど、 あー、やり方の一つとして、やっぱりこの前やった変換イニシャライザーですかね。 えーと、インポートを、で、スウィートUI。 これを、すぐに違う、スウィートUI。 これを入れるようにして、で、それでエクステンション、えーと、イメージ。 これUIキットじゃない、スウィートUIのイメージですよね。 まあ、ありにくければ、まあスウィートUIのイメージって書いてもいいですけど、 まあ今回そうしてみますかね。 で、この中で、えーと、イニシャライザー。 変換イニシャライザーは変換先に対してイニシャライザーを搭載して、 で、今回みたいな、あとはデザインと同じように画像を表現するみたいな、 バリュートリザービングタイプコンバージョンと言われる、 変換イニシャライザーを作るときにはラベル名を省略するというのが、 APIデザインガイドラインのおすすめのやり方。 で、ここにイメージとして、ここで取るイメージは、えーと、何だっけ、ランドマーク。 ランドマークのイメージね。うん。 こうしたときにね、上のソイフトUIのイメージと、 他のランドマークのイメージが分かりやすいように、32行目。 ソイフトUIって、わざわざ、あの、名前空間ね、書きましたけど、 ここ書かなくても大丈夫ですね。 ってことによって、そうやって、イニット。 そして、イニシャライズは、ここにネーム渡せばいいのかな。 ネームというかイメージのね、イメージのネーム。 ま、こんな風に渡してあげれば、これでソイフトUIのイメージへと、 肌変換ができるようになったと。 ま、そんな感じで使っていけば、いいですかね、とりあえずね。 で、これでもできるのか。思ったよりなんか、スマートでよかったな。 おー、なるほど、確かに。 変換イニシャライズのおかげで、イメージが、ランドマークイメージをね、 このまま受け取って、イメージビューになってくれと、ちゃんと出てるじゃない。 ね、いい感じだね。 当たり前なんですけど、うっかりして、なかなか素晴らしいコードになった気がする。 うん。これで、チュートリアルのここまでいいですね。 で、えーと、ま、ちょっとね、雰囲気が違ってますけどね。 で、それで、次。 あっ、セクション3に行きましたね。 あれで、ローが完成か。 じゃあ次に、ローのプレビューをバスターマイズする。 プレビューをまずバスターマイズするんだ。 ま、この子、これ面白いアプローチかもしれない。 えーと、自動的に認識する、AnyPreview。 えーと、定義したやつ、プレビューマークロで、 ソファイルに書いたやつ、認識してくれる。 で、キャンバス。 そのキャンバスが、えーと、プレビュー。 えーと、ワンプレビュー。 あ、いっぱいね、一つしか表示できないけど、でも、マルチプールプレビュー。 複数のプレビューを、えーと、定義して選ぶことができるよと。 で、代わりの方法として、えーと、ループビューをまとめて、 シングルプレビューで、複数のバージョンのビューを表示させる。 うーん、確かに。 プレビューを活用するとね、剥がされますからね、コードを開発するのがね。 なので、それをやっていくらしい。 まずは、次にセカンドの、もう一つのプレビューを作って、 で、それで、2番目のエレメントを表示する。 そのために、えーと、プレビュー。 あ、プレビューを追加することで、えーと、 異なるデータのプレビューを、ま、見ることが可能になるよと。 あれが、バックの下についているこれですね。 プレビューで、ランドマークローでもう1個。 1番目とか、こういう形でバックとなると、 インデックスアクセスの方が、なんか似合う気がしますね。 さっきあの、ハート使っちゃいましたけどね。 ま、どういうマークロをやろうとするんで、プレビューマクロか。 で、このランドマークスは両方で使えますね。 そうすると、これはプレビューマクロの外にするのが、いいのかな。 で、プレビューマクロの外にしたときに、これはね、 あの、プログラミングで、なんか、どこからね、使うものでもないんで、 プライベートで保護した方が賢いですよね、まずね。 で、あとは、えーと、ランドマークスって名前だとね、 語弊を招きそうなんで、ランドマークスをプレビューとかね、 こんな風な名前にすれば、語弊がない感じになりますよね。 で、あとこれはどうなのかな。 えーと、このランドマークスコードプレビューって、 プレビューでしか使わないのを考えると、 ま、リリースビルドに普通入れないですよね。 アッププレビューは勝手に入らないのかな。 えーと、エックス&マクロ、プレビューマクロを展開すると、 アベイラブルとストラクトで、 えーと、ストラクトが普通に定義されますね。 まあ、でもマクロの動きがね、変わる可能性もリリースのときにあるかもしれないんでね。 まあ、分かんないけど、あ、でもどうかな。 他で変えられますかね、ちょっと見ておきたいですね。 気になってたんですよね、プレビュー。 だってリリースのときどうなのかな、みたいなのが。 えーと、そうするとスキームが、もうエックスコードの設定じゃなくて、 エディットスキームで、多分このビルドのときのコンフィギュレーション。 ビルドコンフィギュレーションを、あれこれいいんだっけ。 プロファイルとビルドだから、あ、いいのか。 うん、プレビュー専門みたいなのなさそうだしね。 ああ、そうか。そうすると、あ、いいんだ、いいんだ。 いや、大丈夫でした。 えーと、つまりビルドのときにビルドがあって、 で、それでコンフィギュレーション。 コンフィギュレーションはどこで指定するんでしたっけね。 run、runはデバッグだけど、ビルド、あ、これでいいのか。 これのインフォメーションかな。 これでビルドコンフィギュレーションをリリースにしたときに、 これはね、どうなるかをちょっと見ておきたい。 このプレビューマークは、一回画面外さないとダメかな。 こういう感じで外して、それで一回ビルドしておきますかね。 で、えーと、not build with onなんだって。 ちょっと面白いこと書いてありますね。 えーと、プレビューは最適化するとダメらしい。 ってことはこれの、あ、これもちょっと事情が分かってくるんじゃない。 そのこともないか。 あ、makeプレビュー。ちょっと分からないね。 このコードがね、どうなっているのかすごく気になるけど、 まあ分からなかった。 とりあえずね、その辺心配だったときには、 これを全体的にね、デバッグで囲ってあげる。 ただこうですね、if、yap、db、yap、ifですね。 yap、if、db、で、これ丸ごとだけ違うかな。 yap、end、ifと。 こんな風にね、囲ってあげれば、これでリリースビルドには影響をね、 またこう汚さないよという状況ができるので、 まあ安心感ありますね。 で、こうした上で、ランドマックス4プレビューの1個目をね、 それで後で打ちますか。 2つをね、プレビューマークを作ってあげて、 これで、0番目と1番目ですね。 こういう風にしてあげると、プレビューが、 あ、ダメか。 あ、そうだね。 アーストは違うので。 もうね、こうしてプレビューを見ると、 切り替えられるようになるというね、 そういったお話ですね。 これはね、これで1個目がタートルロックになってて、 もう1個目、こっちを選ぶと、次の、 デルバーサーモンプリーク、となったらね、 などでクリオって感じで、OKですね。 はい、で、次に、コントロール、えーと、キャンパス。 キャンパスの、えーと、コントロール。 キャンパスの中のコントロール、で、今度プレビュー。 あー、さっき押したやつですね。 で、えーと、デフォルトではキャンパスラベルは、えーと、プレビュー、ラインナンバーが表示されていると。 で、プレビューマークは、名前を一緒に取ることができるようになってて、 ラベル付きを自分でできるよと。 で、それぞれのプレビューに対して名前をね、えーと、 どれらのね、説明、えーと、名前の説明する感じで書くこともできると。 まあ、名前をここで書くことも必要あんのかな、みたいな気はするけど、まあまあ練習としてね、やってみました。 今のところここね、用番号で、プレビューがね、示されているところを、 あのプレビューの後に、アトールロックってやるとね、ここがアトールロックっていうタブ名になるし、 もう一個の方は、なんだっけ、デルバーサーモンクリーク。 サンプルではサーモンになってたのか、サーモンにしました。 まあ、そんな感じで、とにかく分かりやすいやつ。 ね、こんな感じで設定すると。 まあでも、今回こういう名前じゃない気がしますよね。 中のデータをそんなに詳しく知っている必要も なんかない気もして、そうすると、個人的に思うところとしては、 earth、earth road、second rowかな。 まあ、こんな風な名前でもいいと思うんですけどね。 まあ、今回こうしておきましょうか、とりあえず。 で、こんな風にラベルもつけるようにできたと。 で、そしたら、ナビゲート、えーと、2つのプレビューを、 新しいラベルでナビゲートが、えーと、ナビゲートして、 入り替えられると。入り替えてみましょうと。 まあ、そこまでやりましたね。 で、えーと、次に、えーと、異なるバージョンの ビューをサイドバイサイドで見たいとき、 このときは、グループを使って、まとめる、 シングル、1つのコレクションビューにまとめてあげると。 私たち、他があるらしいので、やってみましょう。 まずは、セファンドビューを取り除いて、 代わりに、2つのバージョンのローを取りましょう。 取り除かないで、追加しましょうって言うのでね。 それで、グループは、えーと、コンテンツ、ビューコンテンツを グループ化するコンテナーみたいにいって、 Xコードは、これらのグループのタイルとビューを、 えーと、キャンバスのトップのプレビューにバックして表示すると。 なので、書きたいコードはこれですね。 プレビューでグループで、ランドマークローの0と1。 これ、やってみましょう。 まあ、相当ワックる気がしますけどね。 で、そのときに、まあね、これ別に最初と次と、 3つずつ見てても悪いことない気がするんで、 もう1個追加して、グループにしましょうか。 えーと、グループはなんか右クリックでインベッドあるかな? インベッド、グループあるかな? グループ、あー、あったあった。 まあ、自分で書いても早いですけどね。 これぐらいだとね。 まあ、でもクソ、グループで、この行を複数する仕様とかって なんかあった気がするんですけど、忘れちゃった。 まあ、いいか。 えーと、コピペしましょう。 で、0と1ですね。で、こんな風にしてあげると、 グループのプレビューもできるようになって、 さっきのね、ファーストもそうだし、 ファーストは1個だけね、表示されるし、 インベッドも1個、次のだけ表示されるし、 グループなら2つ、こういう風に表示できるよ。 ね、いい感じですね。うん、ここまでできましたね。 じゃあ、次行きましょう。 で、コード、書いたコード、ウェビューに書いたコードは、 オンリシェンジ、ネットエフスコードがキャンバスで表示する内容なのかな。 まあ、そりゃそうだろうなという気がするけど、 これでセクション3終わりですね。 じゃあ、次セクション4。 えーと、リスト、ランドマークのリストを作っていきましょう。 意味はプレビューじゃなくて、実際のアプリのコードですかね。 えーと、ドリットUIのリストタイプを使って、 プラットフォーム固有のリストを表示できる。 このプラットフォーム固有っていきなり出てきましたけど、 ドリットUIはね、iOSとかMacOSとかApple Watchとか、 ピジョンも使えるのかな。 まあ、そういった感じで、いろんなアプリとプラットフォームでね、 使っていけるんで、 まあ、それぞれのね、デバイスにあった表示がね、リスト、 リストコンポーネントでね、できるよって話だと思われる、おそらく。 で、えーと、これが、このエレメントね、リストのエレメントは、 スタティック、えーと、エレメントブログリストキャンディースタティック。 スタティックで入れる、えーと、どういうことだ。 スタッフのチャイルドビューのように、起きるみたいな感じなのかな。 で、えーと、クリエイトする、えーと、 まあ、そうやって動くこともできれば、 ダイナミックに設定することもできるって感じね。 で、えーと、これらをミックスすることもできると。 次はどんなのを習っていくんだろう。 まあ、とりあえず、ランドマークリストというのを、 ViewGroupに追加して、 で、それで、えーと、ディフォルトテキストを、 それを、ランドマークフローのインスタンスに、 のリストに変えると、その後の2つ。 まずは、スタティックに行くっぽいですね。 こんな感じで、作っていこうと。 で、えーと、これは、えーと、フザプレビュー。 プレビューはiOSで、見せてくれるらしいけど、 まあ、それは状況によりますよね。 まあ、とにかくこれを作っていってみましょう。 こうなった時に、えーと、リストランドマーク。 ああ、なんか、リファクトリングしたのが、 若干、悪くでますね。 まだ、ランドマークがないんですよね。 これ、どうしようかな。 まあ、まあ、まずやってみますか。 えーと、ランドマークリストを作るにあたって、 Viewsグループの中に入る、 ランドマークリストですね。 これで作って、ランドマークリストのこのテキストの代わりに、 えーと、グループでしたっけ? 違う、リストですね。 リストで、リストだけ、グループだけ、リストですね。 リストで、ランドマークローの、 で、ランドマークとして、ここで、ランドマークを 渡さなきゃいけないのに、 ランドマークがないというね、そういった状況になっていて、 どうするのがすごいんですかね。 今まで、引き続き渡してきてるんですけど、 まあ、それでいいのかな。 例えば、アッドバインディング。 で、バー。 で、ランドマーク数。 で、それに対して、ランドマーク数ですね。 まあ、こんな風に持たせておけば、もう使えるじゃないですか。 ランドマーク数の、大文字になった。 えーと、ランドマーク数の、0。 お、あと1ですね。 で、まあ、とりあえず形としてはできるから、これでいいでしょう。 で、これだとね、やっぱりプレビューがエラーになるね。 この時も、やっぱり、えーと、ランドマーク数イコール、 ハンドル、メイン。 で、えーと、モデルデータを、 えーと、ランドマークデータ、 で、JSON、 で、えーと、ランド、ランドマーク数セルフと、ここですね。 で、これで、ランドマークリストに対して、ランドマーク数、 ランドマーク数として、.const、ランドマーク数ね、そうですね。 で、こうすると、プレビューも動くし、 おー、さっそく出ましたね。 いい感じに出たし、動くし、ちゃんとね、データが表示されるし、みたいな感じで。 まずはいいでしょう。 ちょっとね、値を渡していきすぎるところが気になってるんですけど、 まあ、いいや。 とにかく、えーと、ちょっとやりそうなことができたので、次行きましょう。 セクション5のステップ上げですね。 まあ、いいか。 で、ここで、ダイナミックにしてみましょうと。 リストのエレメントを個別に指定するんじゃなくて、 代わりに、直接コレクションから作っていきましょうと。 で、リストを作ることができるエレメント。 コレクションのエレメントを、コレクションのデータのコレクションに渡して、 それで、クロージャープロバイズという、 それぞれのエレメント用のビューを提供するクロージャーで発達できるらしい。 で、リストはそれぞれの要素を変換する。 それから、サプライズクロージャー。 クロージャーを使って表示していく。 なので、リストでコレクション渡してますね。 それに対して、各業のIDはIDで識別をして、 という意味のはずなんですけど、 それでランドマークそれぞれに対して、ここで評価をしていくと。 で、予想はつきますが、読んでいきますか。 で、それで、導入した2つのランドマークを、これを削除して、代わりにリストを書いてあげて、 それで、リストのイニシャライザーに書いてあげて、 それで、アイデンティファイアデータと一緒にリストを使っていくものと。 で、データをアイデンティフィアブルにすると、 1 of two way, you can make your data in one of two ways. パスワードがロングで、キーパスを指定するのと同じですね。 ユニークなアイデンティファイアを使うのとね。 ちゃんと役立てないですけど、多分、そういう雰囲気で 合ってるはずなので、大丈夫でしょう。 で、アイデンティフィアブルに準拠させたら、 面白いんじゃないかなって気がするけど、 あとで出てくるのかな、これ。 とりあえず、このクロレクションとIDを指定する方法をやってみました。 次のステップとして、独自にリストを設定するので、 ランドマークローをクロージャーで返してあげるということをすると、 これによって、それぞれのローが、 ちゃんとランドマークのアレイを元に打っていけるよと。 そうしたら、ここまでで十分な便もするけど、 次にリストコードをアイデンティフィアブルでやりますね。 それは後でやるとして、まだここまでやってみましょう。 リストに対して、そのイニシャライザーでランドマーク数、 これを渡して、その後でIDとして、 そのランドマーク数が持つID、これを行の区別で使うよと。 そうした上で、ここでランドマーク、ランドマークイン、 クロージャーですね、これはね。 ランドマークインでランドマークを1個作りますが、 この時にランドマーク打ったやつね。 だって、これ全部出てますね、コレクションでね。 例えばですね、すごいよね、なんかこういう風にできていくのでね。 エリソーノのiPhoneシミュレーター自体もちゃんと動くしね、 っていう感じで、 そういったUIの強さを感じる機能するところですね。 ここまで書いてきて、どうしようかな。 どっちでもいいというか、この今のコードの方が 完全に見やすいとは思うんですけど、 ここね、リストのイニシャライザーがクロージャーを取ってるんで、 クロージャーに直接ランドマークのローの イニシャライザーを渡してやってみても、 面白いのかなと思ってやってみようかなと思ったんですが、 ビュービルダーが、ビュービルダーで ローコンテンツを取ろうとしているから、 今のが違いですね。 関数を直接用語とするとビュービルダーのね、 こういった関数が、 今日はこれですよ。 奇数エレメントを取って、ローコンテンツを返す、 関数を返さないといけない。 奇数エレメントを取るってところが微妙に厄介で、イメージしてた、 ランドマークローをイニシャライザー渡そうかなと思ってたのが、 そこが厄介なんで、やめときましょう。 これが綺麗ですからね。 これをそんなに弄る必要もないので、 これでリストできましたね。いいですね。 次、アイデンティフィアブルにやるみたいね。 次として、ランドマークツイストファイルに行って、 アイデンティフィアブルプロトコルにランドマークを準拠させる。 ランドマークデータは既にIDプロパティを持っていて、 アイデンティフィアブルがそれを要求している状況なんで、 プロトコルを適合するだけで対応できるよと。 手につきますね。 そうした後に、リストに戻って、IDパラメータの指定を明記しなくても、 どのいろいろな詞を使って行を区別するかというのが、 ちゃんと提出なくても与えられるようになるよというお話ですね。 そこまでやりますか。 今、例えばこれをIDを消してしまうと、アイデンティフィアブルじゃないので、 ランドマークがIDがわからないという形になりましたね。 ランドマークがアイデンティフィアブルに準拠していないという対応になってますけど、 なので、ランドマークの型に対してアイデンティフィアブルを適合してあげて、 アイデンティフィアブルね。 このアイデンティフィアブルの定義を見るとわかりますけど、 IDは任意のパッシャブルな型であれば何でもよくて、 それを計算型プロパティとして読み取りできれば、 アイデンティフィアブルになりますよという仕様なので、 今回作ってみたパッシャブルなIDが読み取り可能ですけど、 そういった状況になっているので、 ロボロを適合するだけでランドマーク型がアイデンティフィアブルになった。 これによって、さっきのランドマークのリストもエラーが出なくなって、 プレビューもちゃんと出るようになったと。 これでいいですね。 そんなところですかね。 ちょっと予感を思い出したんですけど、 このアイデンティフィアブルって、 行がそのデータの行であると判定するための識別値なので、 IDが一緒の行は同じ行だと判断する。 その中に入ったら、例えば、パートルロックの行だったら、 パートルロックの行と同じという意味合いなので、 イコータブルと一緒に使うコツをコードで見たりする気がするんですけど、 だからこのアイデンティフィアブル自体は一応判定していますけど、 あくまでもアイデンティティの一致性ですね。 アイデンティティって言葉が曖昧な感じしますけど、 同じものを指しているという意味ですね。 これに対して、イコータブルというのは、 イコータブルというのはそのインスタンスが同じ値か、 同じものかじゃなくて同じ値かですね。 そういったのを表現するのがイコータブルのはずだと思うんですよ。 同致性。 イコータブルとアイデンティフィアブルは似てそうで、 似ていないわけで、 これをイコータブル、必要としてはあるところもあるんで、 言えることはあるんですけど、 この2つを搭載したときに、 アイデンティフィアブルはIDだけで比較しますよね。 なので、他の名前とかパークとかがずれていても、 IDが一致していると同じものと見なされる、 みたいなものがあって、それはそれでいいんですよ。 そういうものなのでね。 イコータブルの場合は基本的に全部の値が一致する。 こういったのをイコータブルと表現することになるわけですが、 そういったのを混同したときに、 アイデンティフィアブルとして、そういった言い方を特定したいようなときに、 イコータブルだと全部の値が一致判定されないといけないと、 パフォーマンスが悪いじゃないですか。 なので、ここで独自に発表して、 イコータブルは何を求めているかというと、 統合じゃない、統合。イコールイコールのこの関数なんですよ。 両方自分の値を取って真偽値を返すっていうね、これを求めてるんで、 これを何も実装しないと全てがイコータブルであれば、 自動的に全てが一致したらどうかっていう実装がされるんですけど、 それだとより重たいので、スタティックファンクで、 レフトハンドサイドがランドマークで、 ライトハンドサイドがランドマークで、 で、ブーグルドファイルで、これね、イコールイコールのエンドが実装できて、 ここで重たさを気にしてしまうために、 レフトハンドサイドのIDとライトハンドサイドのIDが一致すればOKみたいなね、 こういうコードを書いちゃうみたいなのを見るんですよ。 でもこれするとね、同値じゃないじゃないですか。 名前が違ってもIDが一致すればOK。 もちろんそれでね、同値と見なせるっていう場面も 往々にしてあるとは思うんですけど、 そうでなくなってしまったとき、例えば、 ランドマークズに同じ値入ってるかなとか心配になったとして、 例えば、ランドマークズのファーストイコールイコール、 えーと、ファーストイコールイコール、ランドマークズ、ラスト。 ね、こんな風に、ファースト。 このようにね、書いたとしたときに、これIDでしか引っ張ってしなくなっちゃって、 これでもしね、なんかディスクリプションがずれてたらとか、 そういったのを心配しているコードだったとしたら、値無しになっちゃうんで、 このときはね、まぁこんなことしなくていいわけですよ、要は。 これで、IDで比較したいんだったら、こう書けばいいだけの話なんでね、 なのでね、こういった特定の特徴というのはしない方が良い。 あの、思いがけない動作にね、かなっちゃうんでね、 火をつけて、イコータブルとアイデンティフィアブルのね、 違いというものは認識したほうがいい。 あとは、もう1個、イコータブルと今、ハッシャブルいますよね。 ハッシャブルとイコータブルって結構大事な関係性になって、 ハッシャブルはイコータブルも求めてるんで、 あとはイコータブルにすでになってましたが、 カタナテも。 なので、あっという間に書いたか。 で、ハッシャブルってあるんですけど、 ハッシャブル大事なところは、発出値を取って、発出値が違ったら絶対に値として等しくないよ。 発出値が一緒だったときには、同じかもしれないし、違うかもしれないよっていうね、 そういったお話になるわけですよ。 で、それで発出値が一致したときには、イコータブルを使って本当に合ってるのかっていう検証が始まるわけなんですけど、 このときに、ハッシャブルは既定の実装、自動実装される形を取ると、 全てのプロパティから発出値を取って、それを合成することによって、 全体的に1位の発出値を作るっていうことをする。 そういった感じで、だからIDが一緒であったとしても、 値とかのどれの場合、他の値が一致しなかったら発出値が変わってくるっていうのが普通なわけですよね。 で、それで、ありに発出値が一致したときにですね、 この組み合わせ、スウィフトはイント型で発出値を生成しますけど、 このプロパティ全部をイント型の数値だけで表現することができないので、絶対にぶつかる。 絶対は言い過ぎなんですけど、なるべくぶつからないように発出値っていうのを選ばれるんで、 そういう風にね、端っこい人が作ってるんで、ぶつかるかどうかは別なんですけど、 ありにぶつかったときに、要はどれかが違うのに発出値がぶつかったとなったときに、 値が等しいか調べることになりますよね。 で、そのときに、たまたまIDが一緒で他のところが違ったとして、発出値が一緒だったみたいなときに、 どうか比較するとIDが一致してるから、どうしいじゃないですか。 で、逆のパターン。IDが違って、他どうでもいいや、とにかく発出値が一致したときに、 そのときにこれらが等しいかを調べたときには等しくないってなりますよね。 それで、どうなのかな。とにかくね、ルールがあるんですよ。 発出値の値とイコータブルの比較は同じことをしないといけないんじゃないかな。 効率が悪くなったり、計算がおかしくなったり、合ってないはずなのに、合ってるとか、一致するとかになっちゃったりするんで、 合わせないといけないんでしょ。 だからやるとすると、この20秒目の演算子を拡張しようと思っちゃったときには、 ハッシュインツーっていうのを使って発出値計算するんですけど、 ここで発出値に対してコンバインIDですかね、こんな風にして、 発出値もIDだけ限定みたいな風にやっていけないと、 その発出がちゃんといかせなくなってくるっていう危険性とかもあったりするんで、 あんまりね、統合の独自演算っていうのはやめることないんですけど、 こういった場面で、IDとかが脆くしたいがために、 そのために書くみたいなのは絶対避けたほうがおすすめですかね。 自分の意外を超えててももしかすると、もっといい効果があるのかもしれないですけど、 少なくとも自分の中ではこんな風に感じてるところ。 なので、アイデンティフィアブルはアイデンティフィアブルで、 ちゃんとそのオブジェクトの同一性ね。 これでIDって判断する。 もちろんね、全部が一致してたら、IDって言った状態を見たいのときにはね、 これで計算ガードプロパティにして、 Name、IDだから、これでイントー。 イントー解説用は何にもないんで、 いろいろと工夫の違いがありますけど、 全部を考慮したIDを作って返すみたいなね、 そういったことをすればいいだけなんでね。 なので、IDはIDとしてシンプルに作ってあげるのが賢い。 賢いというか楽ですね。 見通しのいい言葉だけだと思うので、おすすめですね。 とりあえずそんな感じで、今回は、 シンプルなアイデンティフィアブルを使って、 リストを簡単に書けるようにして、 ジェットリアル的にめでたしめでたしと。 そういったとこもできましたね。 次、ジェットリアルのセクション6。 ナビゲーション。ナビゲーションをセットアップする。 リストのディテールの中でのナビゲーションをしていく。 本格的になってきましたね。 リストは、ロータリオレンダーするけれども、 個別のものをタップしても、 ディテールページにはまだ突破はないと。 ナビゲーションの能力を追加してですかね。 リストに追加して、そのためには、 ナビゲーションスクリプトビューというものを使う。 初めて聞いた気がするんだけど。 一応2回目なんですよ、このジェットリアルやってるの。 でも初めて聞いた気がする。 当たり前なのかな。 まあいいや。 とにかくこれを使って、 これをイベントして、 で、それからアートとか思い出した。 これを使ったアイパッドとかで、 確かにレイアウトがいい感じに変わるんじゃないかな。 で、それでこれを使って、 ネストする。 それぞれのロー。 ナビゲーションリンクで、 それぞれのローをネストして、 で、セットアップする。 行き先をセットアップしていくよ、 という流れになるらしい。 で、そのために準備。 ディテールビュー。 コンテント。 ジェットリアル。 以前のジェットリアルの、 ジェットリアルで使ったコンテント。 これを使う。 ディテールビューを準備する。 それで、メインコンテントビューを、 ディストビューを用意するように変えていくと。 うん。 大丈夫かな。 まあいいか。 やってみましょう。 とにかくランドマークディテールストリートをまず作って、 で、それで。 で、ステップとして、コンテント。 コンテントビューのボディを丸とコピーしてくるらしい。 あ、そういえばそうですね。 まだディテール表示しているケースがアプリのほうを作ってないですね。 なので丸とコピーしてきて、 で、コンテントビューをランドマークリストで表示するように作ると。 うん。 で、次のステップでは、ナビゲーションを作る。 まずここまでですね。 やってみましょう。 そのためには、なんとなくランドマークディテールですね。 まずはビューのところでいいと思うんですけど、知りが無かったですけど。 これでランドマークディテール、ディテールってどっちでも当てている。 コンテントビューを当てて、コンテントビューの 中身を丸っと持ってきて、これくれるか。 ここまで持ってきたほうが足りないと言われると思うんですけど、 持ってきて、ランドマークディテールの中に、ぺたりと、 わかっないであげると。うん、そうですね。 うん、ここをまた作らないといけないのが、やっぱり 自分でボードを整えましたけど、やっぱり横手ですね。 まあ、いいか。redrandomarks="1$". そんな大変じゃないんで、これモデルデータのランドマークデータ、 JSONでそれをrandomarks="f". こんなの呪文みたいに書けるんでOKでしょう。 それでランドマークスとしてランドマークスを、バインディングだから コンスタントで渡してあげて、これでOKですね。 プレビューができて、ちょっと出るの待ちますか。ダメだったね。 ビルドがまだできていないからですね。 これはコンテントビューのほう。こっちね。 それで、ボディに対してランドマークリスト。 ここも同様にランドマークスが必要になるので、addbindingがランドマークス、そしてランドマークスですね。 これはね、特に作ってるやつね。ランドマーク。 あとこれは、バインディング。これバインディングがランドマーク。バインディングでバインディング。 あれそうだっけ。ランドマークリストか。 これすごい違法なとこだと思うんですけど。 これで、このプレビューもきっとプレビューも出ましたね。ちゃんとね。 で、ディテールのほうもプレビュー出るでしょ。ちゃんとディテールのほうも一体と出ますね。 まあまあ、後でそのうちに乗せていけばいいと思うんで。 まずはこれでできた。ここまでできたら、次はナビゲーションか。 次のステップとして、ナビゲーションをリストとディテールの間にね、遊んでいくよと。 ダイナミックにジェネレートしたリストをランドマークスのアーチがそれをナビゲーションスプリットビューに入れてあげる。 ランドマークリストの中でリストをナビゲーションスプリットビューのほうで入れてあげて、ディテールとしてリストにして、セレクトはランドマークというね、ポイント指示を書いてあげるみたいね。 ナビゲーションスプリットビューは、アンドインプットを求めて、それをプレイスフォルダー、ビュー、アピュアアフター、あとでセレクションしたやつのナビゲーションスプリットビューになって、iPhoneだとナビゲーションスプリットビューはプレイスフォルダーを必要としないが、iPadの場合はディテールペインで選ぶ前に表示されると。 後で見るらしいね、その動きについてはね。とにかく、今はナビゲーションスプリットビューの詳細とディテールビューのことですね。 これをリストに対して作っていきますと、ややかしんでそこまでやっていっちゃいますが、 エンベッドあるかな、エンベッドで、エンベッドインク、さすがに何かのエンベッド点々に乗っかる、コンテナ、ここで使っているんだ、なるほど。 これがナビゲーション、なんだっけ、ナビゲーションスプリットビューか、なるほど、こういうふうに書けて、それでこのディテールを押して、後でテキストとして、セレクトはランドマークでしたね。 こんな風に書いてあげて、見ると同じか、メッセージなんでね、どっちでも大丈夫ですけど、これでできた。 これによってプレビューはそんなことに変わらないですかね。 とりあえずここまでで一応ビルドを置いておきますかね。 ビルド戻ると思うんですけどね、ちゃんとね、大丈夫ですね。 ナビゲーションのスプリットビューも出てきたので、その先をやっていきましょう。 で、ナビゲーションタイトル、これをモディファイアーで指定するらしい。 リストに対してナビゲーションタイトルとしてランドマークスを持たせる。ここもやっておきましょうね。 この辺はUIゲットのときから同じですね。ナビゲーションを作ったときには、その中身に対してタイトルを設定することで、その中身が表示されたときに、適切なタイトルがナビゲーションを選べるよっていうね、そういった感じなので、ナビゲーションタイトルとしてランドマークスをすると出てくるのかな。 ここがこの辺、出てきますね。ランドマークス、いい感じに出ましたね。 OKですね。ここまで良くて、次、ステップロックとして、リストのクロージャーの中で、ローをナビゲーションリンク、これでね、くくったやつですね、ランドマークディテールビューを行き先として、ランドマークローをラベルとして指定するよと。 ラベルって言う割には、言ってるのがすごく違和感を覚えるんですけど、というもんですね。ラベルのところには表示したいやつ、ナビゲーションのね、それをラベルを押されると、ディテールの方へね、送り上げる、そういった感じですね。 ここまで作りますとね、まずはね、そうすると、リストの中で、ここだ、ここの中で、ナビゲーションリンク、で、その中で、まず、ランドマークディテールですね。ランドマークディテールでイニシャライザーは、ランドマークス、これ、動画のやつもおかしいですね。自分が勝手に作って間違ってるね、これね。ランドマークス、ここまで直したほうがいいな。 ランドマークでアウトステートかな、アウトステートでバー、ランドマークでランドマークがとって、それを表示すれば十分ですよね、ランドマークね。まだテキストをダイレクトに打ち込んでるんで使ってないけど、そうですよね。そうすると、ディテールのビューもランドマークになってコンテンツを、コンスタントも必要なくて、パーソナルでいいかな、そうですね。 これで、ナビゲーションリンクが売られて、ランドマークとして受け取ったランドマークを渡して、これでOKですよね。それで、ナビゲーションリンクに対してラベルを押してして、これでね、さっきからこれちょっと出てきたの、パターンに対して並カッコが入って、そのあとラベルが書かれて、並カッコが書かれて、一つのAPI呼び出しになってますけど、慣れてない人にとっては謎のコープになると思うんですけど、要は、ここだけ見たときですね、リストのほうを見たときでもいいんですけど、よく一般にこういうラベルみたいな、こういうのがないね、書き方を見ることがあると思うんですけど、これはトレーニングクロージャー 見た目の問題ですね、パターンの外に出せるという、こういった構文の書き方があって、さらにこの引数リストが0になるとき、トレーニングクロージャーの影響で引数リストが0になるときには、引数リストを省略することができる、という風なルールがまずあって、 あと、イニシャライザーの場合は.initが省略できるというルールで、ここまで書いてられているわけですけど、さっきのラベルは何かというと、後ろにクロージャーが2つあるとき、 コピーしたはず。コピーされてない。まあいいか、書けばいい。これは何かというと、トレーニングクロージャーが2つあるみたいなのをイメージしたらいいですかね。そうすると2つともそこに出せるんですけど、そのうちの最初の1個目以外はラベルがいるのかな、といったルールになると。 ここで書いてあげて定義を見ると、実際イニシャライザーになっていて、1個目がクロージャーですよね。ディスティネーションというラベルが貼られていますが、最初の1個目の省略のときにはラベルがいらないという言語のルールになっていて、 2個目のラベルのほうだけは表に現れてくるという言語仕様になっている。それはそういうルールなのでしょうがなくて、ここに別に出ているみたいなことは書けない。 なので、自分でこうやってクロージャーを複数取るというインターフェースを作ろうと思ったときには、ラベルで説明しないと意味が取れないようなものを後ろのほうに持っていくという工夫が必要になってきますね。 最初の1個目はラベルが表に現れないからという理由ですね。これでランドマーク、ローに対してランドマークとしてランドマーク。いいですね。これで出来上がった。 クリックすると一応アドコードされている内容ですけど、ディテールまで表示されるようになり、戻るのもちゃんとナビゲーションで出来るよと。いいですね。 ここから完成を向けていくんですかね。エプナーとしてナビゲーションが出来るようになったプレビューで、なのでやってみようって言っちゃいましたね。じゃあOKですね。 セクション7は、これでパスデータインとチャイルドビューということで、ちゃんとデータをチャイルドビューに反映させていくよという話になってきますし、この画像がやっぱ真ん中にいますよね。自分も真ん中にいないじゃないですか。 これ間違ってるよね。おそらくね。真ん中にいないとすると、ランドマーク、ディテールビュー。そうそうこれでディテールビューじゃないや。ディテールビューだ。ディテールビューを見たいのがジャインタ。これを辿ればいいんですね。 プレビューを他のコードを一時に見ながらプレビューを見たいみたいなときには、ピントベースを置くと居残るっていういい機能があるんで、これ使おうと思ったんですけど、今回いらなかった。 アラインがリーディングでサークルイメージがあるからこれがいけないんじゃないのかな。アラインがリーディング。 このエキスト、サークルロックはなんて、真ん中にいるんだ。Vスタック。Vスタック作ってて、間違ってるね。多分もう一回見ますけど、文字の方をリーディングに揃えたくて、多分付き間違えましたね。 なのでこのVスタックアラインリーディングここにつけるのではなくて、それで、こっちですね。これにつけると、これでしょ。いや絶対これですね。間違ってた。うん。これでOK。なんかこう作った気もしますしね。なんで変わっちゃったんだろう。まあいいや。変わったことはどうでもいいんでね。直ったのでね。はい。これでOK。 じゃあまあこんなところですかね。今日はね。次回はちゃんとタイルド級に対していろいろ反映させていくよっていうこのセクション7から見ていく感じにしましょう。 今日はこれで終わりにしますね。お疲れ様でした。
