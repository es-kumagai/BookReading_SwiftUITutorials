Transcription & Summarize : とりあえず読書会 SwiftUI Tutorials #19

はい、それでは Swift UI チュートリアル特集からですね、入っていきましょう。 えっと、だいぶね、進んできて、面白くなってきたんですけど、面白さと一緒にね、行動を適当にいじりながらやっているっていうのがまたより面白いのかなというような理由が個人的にはしていて、やっぱりなんか映すだけだとね、なんとなく面白くないなーというのを感じていたところなので、このやり方はまあ、まったく知らない分野だとね、なかなか難しいところがありますけど、まあ、ちょっとしかし明るい分野については、いろいろいじりながらやっていくっていうのはいいかもしれないですね。 まあ、そんな感じで、また引き続きね、リファクタリングとか、そういうトラック対応とか、意外とそういうトラック対応が今のところ順調ですね。なんか全然引っかかんないのは面白いですね。まあ、そんな感じで、この辺もね、一応見どころのものではあるはずなので、そこも含めて、続き読んでいきましょう。 今日は、ワーキングウィズUIコントロールのいよいよエディット、プロファイルのエディット画面を作るところですね、これね。あと、アンエディットモード、これ英語の話になっちゃうんですけど、ここでファンシーアを使うか、何を使うか、何も使わないか、ザを使うかとかね、いろいろあると思うんですけど、ここでアンエディットモードって書くのか、まあ、当たり前なんでしょうけど、自分の中ではこういうとこが難しいですね。英語。その通常ね、調べたりするんですけどね、なんかそれっぽいことは理解するんですけど、結構わかんないみたいな。いや、難しいですね、この辺ね。まあ、いいや、今回はそういう話題ではないので、次へ行 ようとされている状況で、エディットモードを、エディットボタンを用意して作っていくよ。あれ、エディットボタンを作るのかだっけ?作った気がするな。個別のコントロールを編集可能にするよっていうお話ですね。 その中でボタンを打ったエンバイルメントデータを置いた記憶がありますね。プレビューをちょっと見ておきますか。ここにエディットボタンを置きましたね、この前ね。そうそう、ここまでエディットボタンというのがあらかじめ用意されていて、これを使ってボタンを配置した。 で、モデルデータをアップデートして、プロファイルが無くなるまで、表示されなくなるまでかな。それまでの間、維持するプロファイル。これを持っておくっていう、そういったことにした感じですね。 で、このリコイド周りで、前回結構どこに置くべきかって考えながら、後は決まらなかったですけど、大体この辺だろうみたいな、こんなとこまでいった感じですね。次に、ユーザープロファイルデータをエンバイルメントから読み込む。 プロファイルホスト、エンバイルメントからコントロール、データにファーストした、渡したデータを使って表示するよと。で、更新を無効にするために、後中の編集中のですね、コンフォーム確認するまでの間、更新されないように、コピーを持っておくよ。ここも読みましたね、普通にね。 コンディショナルビュー、ここも追加したと言えば、エディトモードのプレビューでしたね。邪魔ですね、今ね。とにかくインアクティブだった時にはエディトモードを表示だけにして、それ以外の時にはテキストの、これから編集画面を作っていく、ここまで用意したってところですね。 で、この時にスイッチ分を使った方がいいよっていう話を自分がしたっていうところですね。というのもね、インアクティブ以外だった時っていう状況が、まるっとエディター画面になっているけれど、この前見せたみたいにちょっと見せておきますかね。 この前見せたみたいに、それだけだと状況想定が頭の中で仕切れていないという、そういった問題が出てきて、プロファイルホストだったの、ここにあると思うんですけど、プレビューが大きな。 スイッチ分にすることによって、どういう状況が想定されてくるのかというのが明瞭になるわけですよね。 インアクティブだった場合にはエディトモードじゃないということなので概要表でのビューを出す。 で、アクティブとトランスエントだった時には1D編集と実際の編集モードだった時には編集モードでしょうと。 で、ニルは変えてこないと思うんですけど、ニルだった時には想定外ですよね。 そのテキストで落とす。で、デフォルト、要は今後OSのバージョンアップ等で、このエディトモードの方法が変わった時、それを想定してどうするかっていうね。 この時OSのバージョンアップでどうにもならなくなっちゃうっていうのを防ぐためにも、ここではフェータルエラーにしなきゃよっていうお話をしましたね。 編集できなくなっているけど、これはどうするかは要検討という感じですね。 まあまあ、うん。それはアプリの企業によりますかね。 独自に寄せていくか。編集は最低限できるようにしておかないと困るんだったらエディトモードにしておいた方がいいかもしれない。 で、編集を迂闊にさせたくない場合にはこうやって表示確定させて、その場をまずしのいで次のバージョンアップまでちょっと待っててねみたいな感じで進ませる。 で、ここでフェータルエラーを使っておくとこの画面を出した瞬間にアプリが落ちるっていうのが、まあアプリを更新するまでずっとそうなってるんで、そこはヤバいでしょっていうね、そんな感じで選びましたね。 で、あとそこはこのAssassinFaderをこのViewBuilderの中で使えるように、もう無理矢理なのかな、まあコード上は別に無理矢理でもなんでもないんですけど、 それを対応するためのエクステンションを前回に作ったわけですけど、EmptyViewとなってもよかったかもしれないなとちょっと思ったんで、それを直してみます。 例えばここで、まあサムビューってわけでもいいかないか。 エクステンションを追加して、ボイドがあった場合にはEmptyViewを生成してあげるよって言ったことにしましたけど、ここでニルって言うてもありそうですよね。 ニルにしても無視されるんじゃないかってなんとは知らないんですけど、そんなコードを見たことがある。 これで別にビルド通るでしょ、このボイドを返す関数をViewBuilderの中で使ってるんですけど、これでビルドが通って、EmptyViewとニルって違うのかなっていうのがわかんないんですけどね。 ニルだった場合、どうしてるんだろうね、ツイートUIは。 とりあえずEmptyViewを返しておいても何も問題はなさそうだったっていうのはわかるんですけどね、もしかするとニルの方が最適なのかもしれない。 まあその辺はどっちなんでしょうね、EmptyViewかな、なんか大袈裟な気がする。 ニルにしてね、ニルの元立ちの型というものを何にしようって悩むより、ニルじゃなくエプティビューをこのまま返しておくっていう方が何かいいのかな、なおかな。 まあそもそもこの方が素直じゃないっていうね、そんなところがありますからね。 まあこれはきっと大丈夫でしょう、このままちょっと放っておいて、続き読んでいきますね。 ここまでできたんだ、だから次からですね、今日はね、セクション3、プロファイルエディターを定義するところからですね。 ユーザープロファイルエディターを、ライブラリーを異なるコントロール、異なるコントロールのメインのものに対して、 ここの長い文が長くなると短くなる。 個別のディテール、プロファイルの個別のディテールを変更するための異なるコントロール、異なる、わからない、訳してもらおう。 主に、主にか、ラッキーのね、プロファイル内の本項の詳細を変更する様々なコントロールで構成されている。 そうだね、これコンシスト構成されているか、コンシスト構成、成り立っている、そうなんだ。 こんな感じか、いろんなエディットをコントロールでね、成り立っていて、 それらのいくつかは、タッチみたいなやつは、ユーザーエディタープールではないとですね。 なので、 その演習エディターには表示しないよ。 これはまあまあ、いい選択でもいけますけど、まあ選択としていいですかね。 For consistency、コンシステンシー、一般語力を身に付ければ、もうちょっと、 リラックスするのかな、一般性か、要するに使われることはですね、プログラムのね、コンシステンシーね。 で、プロファイルのつまりを一貫するために、 プロファイルのディテールを、same order in the editor、IDがないとね、同じ順番で表示してあげるよ。 まあこれは大事ですよね、何かとね。 ドキドキありますよね、なんかあの、ふるさと納税の、あの、アトプルというサイトのね、 ふるさと納税の、納税金額を出すサイトとか、出す、なんかツールがありますけど、 まあなんかね、あの、確定申告のこの用紙のここに入れてくださいってなってるんだけど、 その場所と、確定申告に入ってある色、これは青色、これは赤色、これは水色みたいになってるんですけど、 その色と違うんですよね、わざわざね。 番号、1番目から入れてくれ、2番目から入れてくれ、3番目から入れてくれの色が、 赤と青と水色だと思うんですけど、それがなんか、そのマスと違うの。 そういう一貫性の無さってすごいもったいないですよね。 なので、一貫性はね、意外と大事になってくると思うので、 こうやってね、順番は同じにしましょうみたいな、メタ更新は大切ですよね。 で、とりあえずステップ1、新しいPUプロファイルメディアというものを作って、 バインディング、ドラフトコピー、ユーザープロファイルのね、バインディングを持つよ、という形で定義して、 で、最初のコントロールはテキストフィールド、で、これは、ストリング、バインディング、ストリングをバインディングする、 ユーザーのディスプレイネームですね、ユーザーの選んだディスプレイネーム、で、ラベルとバインディング、ストリング、クリエイティング、テキストフィールド、 えーと、これはなんだ、定評する、ラベルとバインディング、ストリング、テキストフィールドを作った時の、えーと、ラベル、バインディング、言いたいこと分かる気がするけど、 まあ、自分の訳が間違ってるかもしれないから、ちょっと見ておきますね。ラベルと文字のバインディングを指定する、そうですね、そうですね、はい。 じゃあ、これをコピペしちゃって、後でゆっくり行こうと思いますかね。 プロファイルエディターね、画面が小さくてコピーしきれないのか、プロファイルエディター、この辺までコピーすれば十分かな。 バインディング、まずこれ作りますか。プロファイルエディターをグルに当たっては、えーと、ビューの中のコントロールですかね、コントロールじゃないか、プロファイルエディター、プロファイルスがあるね、ここにしますか。 プロファイルスまとめてないのか、プロファイルサマリーと、まあいいか、後で考えましょう。 まずは、TwitterのUIビューをプロファイルエディターね、これで作ってあげて、この中身に対して、今コピーしたやつね、両側チェックを貼ってあげて、レビューを作ってしまいと。 で、ディフォルト、そこでディフォルトが書かれたからですね、エラーになってるんだね。えーと、どこに置いたっけ、エンバイロメントだった気がするな。 エンバイロメントだったと思うんだっけ、ハイバイロメントじゃない、モデルデータ、モデルデータのディフォルトプロファイルね、ここに持ってきてあるんで、それに書き換えたと、それぐらいですかね。 あとは、ファインディングでプロファイルファインディングしていって、ユーザーネームはプロファイルユーザーネームで表示とかはOKですね。ここは大丈夫でしょう。 次にコンディショナルコンテンツをプロファイルホストのとこ更新して、プロファイルエディターを使って、そこにプロファイルのファインディングを渡してあげると、 ここですねプロファイルエディターに対してプロファイルのドラフトプロファイルを渡してあげる。 これによって、エディットボタンを押して表示できるようになった。 プロファイルエディターに対してプロファイルエディター型をプロファイルとしてドラフトのファインディングでドラフトプロファイルという風に渡してあげると、これでエディットが動くようになったとなりましたね。 頭も動きますね。いいですね。はい、こんな感じ。 次、トップル、レスポンディング、ユーザープレファレンス、ノーティフィケーション。 ランドマーク関連のイベントを受け取ったときのユーザープレファレンス。 ユーザー通知の写真に関するユーザーの好みに応じてトップルを追加する。 レスポンディング、ユーザーのプレファレンス。 プレファレンスってそういう意味か。 ノーティフィケーションを受け取ってそれに応じてトップルを追加する。 プロファイルエディターのツールを追加する。 トップルはコントローラー下に書いてあったコントロールでオンやオフを表現するもので、ブリオンを設定するときには向いているよというお話がされている。 さっそくこの画面をトップルを追加するからピン止めしておいて、プロファイルエディターのほうをちょっと見ていきますかね。 さっきのテキストフィールドの下でしたっけ?Hスタックの下か。 Hスタックの下にこのトップルを置いてあげるとこれで編集モードが動いて、動いていれば動かすとこれでトップルを切り替えられるよという状態になった。 早速作っていくのはコンポーネントの良さでいいですね。 ピッカーコントロールを配置する。 そしてこのラベルをHスタックに配置して、それでトランドマークフォトがセレクトアブルシーズンに、また自分の好ましいものを選ぶ感じなんですが、 シーズナルフォトというピッカーを置いて、シーズナルフォトのセレクションで、4-1でシーズンのオールケーシーズンを取って、 シーズンでテキストローバリューでタグがシーズン、4-1でピッカー、どうやってみますか。 テキストローバリューでシーズンを選択できるということか、選択でシーズンを使っていて、選択し選べるようにする。 この辺確かシーズンが結構手を加えたと思うんで、なおに行くかな、やってみましょう。 トップルに対して、続いてピッカーを置いて、いろいろ出てきましたね、エラーがね。 まずこの辺を直していきましょう。 プロファイルのシーズンという、また、スプリング、サマー、オータム、ウィンター、これを4-1で定義していて、 オールケーシーズンですね。 この前というか、このチュートリアルでは、ここにね、ケース移動レベルアップ、このプロトコルに準拠していたというのが大事なところで、 これをまだ要らないんじゃないかなと思って切っておいたんですけど、 今回使う感じみたいに、ピッカーからリストアップするときに、ケース移動レベルで上から順番に値が取れるよう、 ということが重要。 オールケーシーズができるようになったはずなのに、まだ要らないようになってますね。 これはハッシュアブルかな。 オールケーシーズのエネルギックパラメーター、4-1でケーシーズ、 多分ハッシュアブルだと思うんですけど、どこから入れればいいんだろう。 コンバートできない。 ローバリューシーズンのファイル数から、バインディングシーンにできない。 アイデンティフィアというか、大丈夫な気がするけどな。 シーズンのローバリュー、ここをまず直しました。 ローバリューってなんか変だなと思って、 このスプリングに対して、このシューリップ、サマーに対して太陽となってたんですけど、 これらって別にローバリューではないじゃないですか。 なので、今回はローバリューやめて、シンボルというね、プロパティで飛ぶようにしたので、 ここはシンボルですね。シンボルを表示するよっていうね、こんな感じ。 これでも大丈夫ですね。 こんな感じで、エディトを押すと、プレビュー出るかな。 これでリストアップされてて、いい感じですね。 これが最初、冬が選択されているのは、 アクバシーズン、シーズンで、バインディングシーンをしているからか、 そうですね、きっとね。 ここまでうまくいきましたね。 最後にデートピッパーを適用しますよと。 エディトのスリクターの次に、ランドマークのビジネーション、 変色可能なボールを表現するデートピッパーを用意しますよということで、 これもオッケーで大丈夫でしょう。 インベントがなんか変な気がするけど、 ここじゃないね、ここだね、あれで、なんかずれてるね。 ここに、全部ずれてるのか。 これで、いいですね。 押してあげて、デートレンジ、これなのかおかしいって。 デートレンジが見つからない。 見つからない。デートレンジが見つからない。 デートレンジが、ここに今作ったのか。 ちょっとコピーしてから見てみましょうね。 デートレンジって何だろう。 上の方に適してあったから、同じようなとこに置くとして、 デートレンジはクローズレンジで、これで対象値が、 これなのかレントデートのイヤーに対して、 マイナス1、1年前。ゴールデートの1年前から、次はイヤーの1年後まで。 これをMIMAXで関与指定する。 だって、これでゴールデートとして、 これなの? これで、2025、2024、20、あ、戻される。 27、28、あ、戻される。どういうことか。 1年前後という形で、ゴールデートをできるよ、 ということにするな。これは、プロファイルエディターの都合なんですかね。 それか、全体のもっと広い世界観での制限。 それはないか。選択のときですからね。 それと、ここにあってもいいのかな。 プロファイルエディターのデートレンジ。名前がよくないですよね。 プロファイルエディターに対して、デートレンジって言われても、何の話か分からないじゃないですか。 ゴールデートのレンジですよね、これね。 ということで、ゴールデートレンジに変えないといけないんじゃない? というふうに、ゴールデートレンジ。 これも際どきもしなくもないけど、プロファイルエディターでゴールデートレンジ。 アペラブルとかのほうがいい気がするけどね。 ゴールデート、えーと。まあ、でも分かるか。エッティング、うん。そうね。 ゴールデートが何のことを言っているのか、 ちょっと分かりにくい気がするんですよね。 例えば、1年後にアプリを開いて、その中で1年より前、 引き続きが設定されていたときに、編集モードでは、それをいじらない限り、 名前が変えられないってことになりますよね、きっとね。 うん、それでいいのかな。 アプリの存在意義を理解していないからか、分かんないけど。 まあ、そこまでエッティングから心配しなくてね。 そういうことにして、あと気になるところとしては何ですかね、これはね。 ゴールデートレンジがプロファイルエディターの外で 使われることがなさそうな気がするんで、プライベートにするとか。 あとは、クローズドレンジ。これはクローズドでいいのかな。 クローズドを求めているのかな。 えーと、ここですよね。ピッカーのセレクションの中で、 クローズドレンジを求めているってことは、これはいいですね。 あと気になるところとしては、考えられるところとしては、 考えられるところだと思ったんですけど、 プロファイルエディターがそのもののプロパティとして持つんじゃなくて、 ピッカーで計算するわけにいかないのか、そういう意外だと。 本当に渡さないといけないんですよね、ゴールデートレンジはね。 計算できるのかな。 パレントデート。いきなりできるよね。できるできる。 デートピッカーを取る前に、計算しちゃえばいいんじゃないかなと思ったけど、 あまりいいスコープがないですね。 このナッパーとか、この上とかだとなんかね、 微妙とか、さっきのほうがいいんですかねとか言いつつ、 プライベートエクステンションでプロファイルエディターに対して、 パーで定義してあげる。あれでいいでしょう。こっちのほうがいいでしょう。 あと気になるところとしては、別に問題ないかな。 カレンダーのカレントっていうのを取ってるけど、 毎回取っていいのかな。参照で見てるだけで大した問題じゃないと思うんですけどね。 レッド、カレンダー、イコール、 カレンダー、カレンダーね。こうしてあげて、 ここで2つはカレンダーでいいですよね。 これでいいですかね。 あとは、カレンダーデートのバイオアピングレイヤーで、 プロファイルゴールデート、どの辺も問題ないか。 もっといい方法ないかな、みたいなことを考えたともなるけど、 大したことじゃないから、まあいいですかね。 これによって、引き続きのピッカーをできるようになったよ、 ということで、OKで、あとは、 これで終わり。どう見たいね。 忘れ物は、エキストゴールデート。 コピペするだけだとわかんなくなりますよね、こういったのね。 自分があまり気にしないんだけどな。 ゴールデートなんて入れたっけ? あ、入ってるね。大丈夫だね。 このゴールデートで入っているのが、 あれか、ラベルなのか、ピッパーか、ここかな。 ここか、ピッパーで、 この辺ラベルなのかね、全部ね。 そういう作りになってるのか。 コピペするとね、こういった細かいとこが、 伺えなくみんなになるのかな、どうなんですかね。 自分はこういったのが気が回らないような気がして、 やっぱり、薬用っていうんですか、 コードを打っていくっていう方が、 学習にはなるんじゃないかなと思うけど、 時代錯誤なのかもしれない。 次、エクション4。 エディット・プロパゲーションをディレイ。 プロパゲーションってなんだっけ。 プロパゲーションは、動植、転達、転達化、遅らせる。 あれか、コミットみたいなことをしたいのかな。 ツーメイクイッドをプレイするために、 エディット・コピー・エフェクト。 ユーザーがエディットモードを抜けるまでの間、 暗印させないようにするために、 ドラフト・コピー。 エディッティングの間は、ドット。 エディットモードを確認完了させたときのみ、 暗印させるよっていうコードを打っていくらしい。 まず、キャンセルボタンを プロファイル・ホストに追加してあげる。 エディットボタンが提供する暗ボタンと違って、 キャンセルボタンは提供しない。 リアル・プロファイル・データを 暗印させないっていうね。 そういったやつですね。 それをするために、ラップド・バリューの アクティブのところで、 プロファイル・ホストの中のHスタックで、 プロファイル・ホストで、 この中のHスタックの前に入れてあげる。 ここで、モデル・データのプロファイルが エラーになってますね。 これはオプショナルにしたから、 ドラフト・プロファイルが、 デフォルト・プロファイルは、 モデル・データのプロファイル。 モデル・データのプロファイルって、 オプショナルのことだって、 編集してないときっていうのがあるわけですけど、 ドラフト・プロファイルが、 プロファイル・サマリーのときに、 これは、デフォルト・プロファイルを渡していて、 モデル・データのプロファイルをドラフトに入れる。 ドラフトに入れる。 ドラフトに入れるのか、 ドラフトになんで入れるんだ、これ。 ドラフトに入れて、 まだ編集前の状態ですよね。 ドラフト・プロファイルは、ここで、 バインディングしますよね、プロファイルエディターに。 どうすると、あとここか。 プロファイル・サマリー、あ、これは違うわ。 そうすると、編集途中のものを一回編集・キャンセルして、 もう一回編集すると、復活するっていう仕様ですか。 なんか、動きが微妙な気がする。 とにかく、じゃあ、ドラフト・プロファイルがなかったら、 モデル・データのデフォルトですかね。 デフォルト・プロファイル、とりあえずね。 この辺は、素材が悪いですね。 とにかく、こうやって、ボタン・キャンセルを実装したので、 逆と、こんなとこにキャンセルが出て、本当かな。 キャンセルを押すと、ドラフトにそれが入った状態で戻ってきて、 どこのスノーを変えてみますか。 ドラフト、これを、例えば、サマーにして、キャンセルを押して、 今、最後、スノーになった気がする。 スノーになったね。 カウンセルのときには、ドラフト・プロファイルはモデル・データの デフォルト・プロファイルか。 モデル・データはまだ、ニルだから。 ニルだから、ドラフト・プロファイルが デフォルト・プロファイルになるのか。 ドラフト・プロファイルを元に戻すって言ってるのか。 つまりね、あー、なるほど。 うんうん、どうか。 まあ、いいや。なんか、遊べそうなとこに。 とりあえず、いいか。 こんな感じで、まずちょっと作っていきましょう。 これで、ドッパン・キャンセル版ができました。 自分のドッパン・キャンセル版の動きが違うんだけれど、 実現するところは同じなんですけど、データのフロー的なところ。 まあまあ、自分の考え方だけなので、間違ってないと思うんですけど、 このデフォリアルもね、とりあえず作っていこう。 で、アプライ・データ・アピュア・パフォーム。 これを適用して、データ・アピュア・アプライ・データ・プライ・オン。 何だこれ、オン・アピュアかな? アンド、で、オン・ディスアピュア。 あ、そう、なんか開業されてるような気がするけど。 オン・アピュアと、オン・ディスアピュアを使ってかな。 で、これで、オピュレート。オピュレートって何でしたっけ? オピュレート、値削する、満たす。 エディターが適切なかな?まあ、修正したかな? プロファイル・データを、エディター、再エディター。 そうね、編集したデータを持つエディターですね。 あ、忘れてしまった。 これがね、自分のエゴリックの無さですかね。 満たした、満たす、ちょっと意味わかんないや。 で、あと、アップデート、パシステント・プロファイル。 ユーザーがタップ、ダウンボタンを押したときに、 保室するプロファイルをこのプロファイルに更新する感じなんですかね。 全然わからなかった。 アップした際に新しいプロファイルを表示して、 継続プロファイルを更新します。 継続プロファイルとはどれか。 更新する。 オピュレートって今回表現するようなイメージですかね。 で、エピソードに乗せれば、古い値が現れる。 次のエディトモードがアクティブになったときにね。 そっかそっか。 最初、自分が復活してはないって言ったけど、 それを防ぐためのコードだったって感じね。 まさしくそういう感じだったけどね。 で、これを実装していく。 どこが実装されたんだ。 プロファイルホストのオンアピアとオンディスアピアね。 プロファイルエディターが表示されるときと、 非表示になるとき。 この辺りに色々やるよということになっていって、 プロファイルエディターがここかな。 オンアピアだったら、ドラフトプロファイルはモデルデータの プロファイルかディフォルト。 この辺の決着がまだついていなすぎですよね。 それで、ディスアピアの時にはモデルデータのプロファイルに、 ドラフトプロファイルを設定していく。 ドラフトプロファイルか。 ドラフトプロファイルを、何かディスアピアの時に 反映するという手段を取るみたいね。 これはどうなんだろうね。 つまり、ドラフトプロファイルを常に、 しっかり管理しておかなければならない。 まあまあ当たり前なんですけど。 これをした上で、完全に常に書き戻すのか。 モデルデータがもうプロファイルエディターに バインディングされていないか。 ドラフトプロファイルか。 ドラフトプロファイルでこれをかまして、 反映を適切にやっていこうという。 そういった発想が大事なところとして。 プロファイルエディター。 プロファイルエディターはバインドしか持っていないのか。 そうすると、なおさらこういった仕組みで 反映させていくっていうことにするんですかね。 あとは、反映先をまたバインディングするというのも あれかなと思うんですけど。 それはやりすぎかな。今回の場合は、ドラフトプロファイル。 ドラフトプロファイルって言ったら、 編集中のプロファイルだろうなということは、 差しがつく感じですかね。 ということで、OKとして。 ここまでで、意外と結構やってから 行動を取り回しますか。 これで一応編集が終わったらしいので、 セットしていきましょう。 どうやってアップデートという。 エディット編集状態が変更されたときに、 どうやってビューをアップデートするか。 例えば、ユーザーがボタンを編集、 プロファイルの編集後に押したときとか、 みたいな感じ。 そのときには、エディットエディッティングを。 エディットモードを用意して、 その上でテキストフィールドがあって、 Disabled、Disabled、Inactive、 テキストフィールド。 これでDisabledにはしてるけど、 これはアップデートではなくて、 ステートがチェンジしたときに、 ビューを更新するからですよね。 これじゃないのかな。 ということは、 エディットネームがあって、 オンエディッティングチェンジだった場合には、 オンエディッティングチェンジだったときには、 表示状態を切り替える。 オンエディッティングチェンジというのが あるんだとしたら、3番目ですね。 そんな話をまだ聞いてないんですけど、 自分の用語が違うのかな。 これは、編集状態が変更された場合、 どのように更新しますか。 ですよね。だから、いいのか。 これが編集された場合に、 ビューを更新するか。 あと、これでいいのか。 これでDisabledは、Inactiveかどうか。 っていうので、切り替えていく。 ですよね。こっちでいいだろうね。 下はないんじゃないかな。 わかんない。聞いてない。 まあでも、大丈夫だった。 はい、じゃあ次。 アクセシビリティラベル? アクセシビリティラベルモディファイヤーを使って、 どんなときに追加するか。 常にアクセシビリティラベルは全部じゃないね。 アクセシビリティラベルを、 ミーニングオブユーザーインターフェースエレメントを、 多くのユーザーに見えるようにする意味合いで使うのかな。 オンリーユーザーモディファイヤーは、 タブモディファイヤーを持たないときに使う。 そのことね。 じゃないかの辺りですね。 ボイスオーバーのために使いますからね。 次の質問。 どうなる? イガイか。モーダルとノンモーダル、 まあ、ノンモーダルって書いてありますけど。 よく聞くことは、モーダルに対してモードレスで、  단言で描くことが使いますけど。 ノンモーダルのことでしょうね。 モーダルとノンモーダルの表示はどういうふうに 使い分けるかってことですね。 ビューをモーダルに表示したときには、 装置ビューは、エディットモード。 Destination。 その先のビューのエディットモードを持って行くことはないですね。 次のノンモーダルビュー。 モーダルビューを表示したときには モーダルビューのディスティネーションというのは、 モーダルビューに表示されているモードですか、今回ね。 ダイアログに表示されているコンテンツのことですかね。 ディスティネーションでね。 ビューはカバーする。 ソースビューをカバーして、 カレントナビゲーションスタップをリプレイスする。 ここが苦手なの。 カレントナビゲーションスタップ。 ナビゲーションスタップはいじらないんじゃないかなと 予想するんですけど、ちゃんとナビゲーションスタップが分かっていない。 ナビゲーションをプッシュしていくやつだと思うんで、 それだとしたら、上書きしてないですね。 上書きというか、更新しないですね。 次は、ビューをモーダルに表示したときは、 ディスティネーションビューはソースビューをカバーして、 カレントナビゲーションスタップをリプレイスする。 自分の理解がおかしいですね、これね。 えーと、どれか分かんないな。 ノビゲーション。 うーん。 そうね。 どうしようかな。 どうしようかなというか、もう一回考えるか。 えーと、どうなる? ディファレンス。 ディファレンスとモーダル、 これは違いの話じゃないのかな? そんなことないと思うんだけど、 違いはなんですか?ですよね。 それで、モーダルにの場合はソースビュー、エディットモード、 ディスティネーションビューのエディットモードをセットする。 エディットモードは関係ないはずなんで、 これは関係ない。 違う。テクノロジー2つですよね。 それで、えーと、イモーダルビューを表示すると、 目的のビューが元のビューと言ってますね。 元のビューを追い、 現在のナビゲーションスタップを置き換えます。 もしかして、これかな。 モードレス表示っていうのは、 普通の種のことなのかな? で、ビューをモーダルで表示すると、 元のビューを追い隠して、現在のナビゲーションスタップを置き換える。 ナビゲーションスタップを分からないとダメですね。 ナビゲーションスタップ、リフト、ユーアニシア。 ナビゲーションスタップってのがありますよね。 で、それでナビゲーションスタップに対して、 表示をしていくという形があるわけですけど、 ナビゲーションスタップによって、 そうですね、パスの中身が表示されていく。 モーダルの場合は普通に、 現在出てる画面の上を覆って、 モードレスって何を言ってるのかなっていう気がするけど、 iOSの場合はどういうことなのかな? 普通のMacOSとかの場合、Windowsとかの場合だと、 モードレスダイアログとモードレスダイアログ、 その辺りだとね。 モードレスダイアログは別に表示中に表示モードをいじれる。 モードレスダイアログは表示モードをいじれないという認識だったんですけど、 それとは違うっぽい。 アプリケーションリンク、これがモードレスなのかな? 分かんないね。 そら、こっち、あれ?選べなし。 えーと、遊ぶのか。あ、外れた。 えーと、プレゼント対策を読むのか。 えーと、プレゼントビューをもう大事にする人は、 ディスティネーションビューをナビゲーションスタックに追加する。 追加する意味かと思ってたけど、 置き換えるっていうのは、 独立させるっていう意味なのかな? こっち?こっちなのか。 デモータリーで、レッグアウト、ヨープノーマルフロー。 ノーマルフローを、まあ、合いますね、確かにね。 いいのかな?まあ、いいや。 なんか、わからなかった、イメージが。 とりあえずこれで理解とかチェックできたよということなんで、 まずコードをいじっておいて、 また次回はね、このインターフェイシングウィズUIキット、 これを見ていく感じにするにして、 はい、コードをちょっと見ていきました。 ドラフトプロファイルのこの今までの、 特に最近入ったコードを見て思うところとしては、 ドラフトプロファイルが存在しないことは想定してないですね、これね。 絶対に渡すっていうスタイルを取っている気がするんですが、 そうするとドラフトプロファイルをここで指定していくのが、 すごい謎に感じてくる。 書き換えてみましょう。 ドラフトプロファイルは、ステートか、 いや、ステートで構わないですけど、 ドラフトプロファイルがステートで、 追って、変わると画面表示が回る。 うん、まあ、いいのか。 デフォルトプロファイルが設定されていたけど、 えと、デフォルト、ここですね。 EDIT MODE がアクティブだったら、TANCEL のときには、 モデルデータのプロファイルを入れるか、 デフォルトプロファイルを入れるか、 ああ、そういうことか。あ!ここはいいんだ。 そのドラフトプロファイルは 別にないという状況は、今回想定していなかったですね。 いいよんね、これでね。うん、なるほど。 それで、モデルデータアグラフトプロファイルが TANCEL のときには、 モデルデータのプロファイルをリセットする仕様があったので、 リセットですね。うん、なるほど で、EDIT MODE が終わったときには、 これが EDIT MODE がアクティブ、 これが PROFILE EDIT で、ON DISAPPEAR。 EDIT MODE に入るときには、このプロファイルのモデル、 ドラフトプロファイルが、あれ、ドラフトプロファイルを ここで渡してるんだったら、上で初期化いらないですよね。 うん、いらないですよね。 えーと、どういうことだ。 これで、プロファイルホストで最初に取っちゃうのか。 最初にプロファイルホストを取って、で、 あれ、表示してるステータスは、 表示してるステータスは、 проファイルさまに sos モデルデータですよね。 モデルデータのプロファイルを表示している中、 ドラフトプロファイルを使っていない。 うん。 で、ドラフトプロファイルを使ったとして、 えーと、 あったとして。 あったとして、 APPEAR のときにドラフトプロファイルを、 現在状態に更新している。 現在状態に更新しているから、デフォルトを取っている。 そして、ディサピアのときには、 モデルデータのプロファイルを書き戻す。 もう一回、APPEAR のときに、 モデルデータのプロファイルを使って、 ドラフトを書く。 まあ、この辺はキャンセルとかの関係でね、 いろいろやってるんだと思うんですけど、 戻したときに、 よっしゃ、ドラフトデフォルトプロファイルでしょ。 で、それで、 ドラフトプロファイルでしょ。 うん。 ドラフトプロファイルは、 編集にしか渡してない上に、 最初の初期化が意味がないのかな。 ですよね。 で、それで、 使うところは、サマリーでは使わないから、 完全にプロファイルデータに閉じてるんだ。 ここが持てばいいんじゃないかな、ドラフトって。 なんだろうか。 バインディングなんかしてないで。 で、それで、エンパイルメントに直接影響を与えたら、 どうなんだろうね。 良くないのかな。 無理として。 バインディングとして、 うん、そうね。 良くないんだとしたら、 バインディングでプロファイル渡すとして、 で、プロファイル渡して編集させるでしょ。 で、その時に、 プロファイルを渡して、ここにプライベートバーとして、 ドラフト、プロファイルで渡せて、プロファイル渡せるでしょ。 で、イニシャライザーの中で、 プロファイル、これを、 binding、eat、プロファイル、そして渡すでしょ。 で、セルフのプロファイルにはプロファイルを指定する。 これ出てくるんだっけ。 ダラバイルかな。新しいじゃないか。 bindingに対して代入するには、bindingバーでプロファイルで、 プロファイル、プロファイル、あっこっちか。 ダラ、ダラってわけにもいかないか。 えっ、どこに入れるんだ、アンダースパーかな。 えっと、アンダースパーか。 これで、セルフの、セルフ、セルフ、 セルフいらないってことか、つまりね。 そうすると、こうしてドラフト、プロファイルね。 ドラフト、プロファイルに今受け取ったプロファイルの、 wrapped-value、これを設定してあげて、 この中でドラフトをマネージしちゃえばいいんじゃないのかな。 どうなんだろう、やってみますね。 これで、リストフィールドで表示するのはドラフトでしょ。 ドラフトプロファイルのユーザーネーム。 で、これはbindingじゃないから、bindしないといけないのか。 あら、これか。あと、bindableかな。 にしてあげると、ダメなだけ。 bindableダメなのか。bindableは、wrapped-value。 bindableのwrapped-value、wrapped-valueが、 ああ、必要になってくるのかな。 そうすると、どこなのか。いや、えっと、bindable、 そしてドラフトプロファイルイコールドラフトプロファイル。 bindableバーかな。 で、こうやって、ドラフトプロファイルを用意して、 bindしていってあげて、 で、ここでダメか。これは、エラーになってるね。 あと、バックレポート。なんか、ちょっと待てよってんだっけ。 えっと、レポートは、let's startとか言ってる場合じゃない。 交わしてあげて、セルフ書いても無駄だよね。 あ、まだ、あれか。さて、使ってるから、 あのプロファイルじゃなくて、ドラフトプロファイルで。 で、いつになるかと言うと、ドラフトプロファイルでしょ。 えっと、あれ?セレクション、ドラフトプロファイル。 ドラフトプロファイル、これでいいね。 なんか、色が厚くないのがいいのか。ローカルだからね。 これは、色付いてるのは、アスケットの、 えーっと、そうだっけ。もういいか。 まずは、いいや。で、ここは、ドラフトプロファイルのゴールデートで。 で、こんな感じか。で、プロファイル。 これもドラフトプロファイル。 ドラフトプロファイルのゴールデート。うん、そうね。 ドラフトプロファイルのゴールデートにして、で、それで、 えーっと、ボタンを押した時は、 ボタンを押した時が、デピックアップがあって、エディットモード。 エディットモードがオンオフに切り替わるのって、 これだけだと分かんないのかな。 えーっと、エディットモードで、エディターで、 エディターで色々やっていくけど、 エディターのエディット状態って、 何も返事してないの、ここね。 だから、ここじゃ無理なのか。 環境変数を持たせればね、 大丈夫だとは思うんですけど。 うん、そういうことか。 そうすると、エディットモードで、 ちょっと前の画面行きますか。 エディットモードで、これでオンアピア、 オンピア、ディサピアですよね。 これでモデルデータを代入してますけど、 モデルデータの更新ってどこでやってるんだっけ。 エディットモードで、ふいふいふいふい、 エディットモードがアクティブだった時のキャンセルボタンですよね。 で、あとは、オンアピアでモデルデータのプロファイルが、 ドラフトプロファイルでドラフトワーリングしていて、 編集モードだった時には、編集を開けているって、 あれ、なんかバカになってきた。 もう一回こっち、だいぶ聞かれましたけど、 これでバインディングしてましたよね、プロファイルに対してね。 全体的にね。 ピッカーとかを用意して、編集だけを提供しているという状態だから、 反映するためには、ドラフトプロファイルの内容が、 あとはどうなっているかを、 ディサピアがドラフトを入れるでしょ。 で、エディットモード。エディットモードがあって、 エディットモードが、どこでつかれてるんだこれ。 エディットモードが一箇所ここだけ。 ここがキャンセル。 横だけじゃなくて、ここも使ってますよね。 エディットモードね。 それで、インアクティブだったら、 プロファイルがエディットだったら、 ディサピアと、そうじゃない時と、 エディットモードがない時と、 どこで更新してるんだろうこれ。 簡単なコードのはずなんで、 こんなに悩まされないと思うんですけど、 トラップとかでアクティブでキャンセルで、 エディットモードですね。 これが色々編集状態を切り替えると、 変わっていくよっていうお話でしたよね。 ダウンを押した時には、 それがエディットモードがアクティブになって、 表示されるものがありますよね。 なんだかわからなくなってる。 とりあえず、じゃあ、プロファイルホストじゃなくて、 プロファイルエディター。 色々いじりはしたけれど、 いっぱい戻しましょうね、これ全部ね。 ここじゃないな。 戻すところは、プロファイルエディター。 ここでいいのか。あ、そっか。 いいね。大丈夫ですね。 これをダウン戻していって、 イニシャライズは消して、 このドラフトプロファイルは消して、 ここですね。ここまで来た状態で、 ちょっと入れてみましょう、この状況で。 エディットを押して、で、 例えば、スノーを太陽に変えて、 ダウンを押す。太陽に変わった。 変わるのか。あれ?どこか。 ドラフト。あ、これはいいのかな。 ドラフト。ディスアピア。 あ、そういうことか。 キャンセルボタンを押した時には、 えーと、こっちに来ないな。 キャンセルボタンを押した時には、 どこだ?キャンセルボタン。ここだ。 エディットモードでキャンセルを 押した時には、 ドラフトプロファイルを現在のままにね、 置き換えるということをやってから、 ここで、置き換わったドラフトプロファイルを 引き出すんだ、ということかな。 なので、例えば、プリントを ディスアピアってやってあげて、 いいかな。ディスアピアってやってあげて、 で、あとは、これをキャンセルボタンを押した時に、 あの時にプリントを、えーと、 引き換えにして、 フィールドキャンセルっていう風にしてあげると、 これで、エディットモードに入って、 パンを押すと、 えーと、あ、それか。ディスアピアですよね。 で、エディットモードで、 毎回しておきますかね。 キャンセルを押すと、キャンセルが 走ってディスアピアか、ということか。 なので、方針が何かつって、 要は反映する直前で、 いっぱいリセットするんですね。 なるほどね。 うーんと、ここで、キャンセルがどうではないか、 っていうのを判定できるのか、 エディットモードか。 ね、これをかけてね。 エディットモードを、一つの方法としては、 えーと、どこだ。 あの、多分、このエディットモードというか、 エディットモードじゃないや。 あの、プロファイルエディターの方にね、 持っていくっていうのが一つ、 あるんじゃないかなって思うんですけど。 例えば、 エディットモードがインアクティブダウンだから、 エディットモードというエンバイロメントを持っていく。 どうするといいんだろうね、これね。 プロファイルエディターに、エンバイロメントを 持っていったとして、それで、ここだ、この辺かな。 これは、なんだ、リストか。 オンチェンジで、エディットモード。 これで、アクション。 そして、これダメなのかな。 ダメなのか。オンチェンジは。 オンチェンジのイコートブルーじゃない。 オンチェンジのラプトカルかな。 こういう感じにするか、ビッグリマークでもいいんじゃないかな、ここは。 オールドバリュー、ニューバリューのところでプリント。 こっちは、広い絵にして、これでオールドバリューとニューバリュー。 こうしてあげると、エディットモードに入って、 これでダウンを押したときに、何も出ないのか。そうなのか。 黄色いのが出るかなと思ったけど、出ないのか。 エンジンされないのか。キャンセルはキャンセルも一緒か。 ここではダメなのか。エンバイロメントね。 これで、エディットモード。 これは変わらないのか。いや、変わらないのか。 どうすると、バインディングとして、 ドラフトを渡すしかなくなってきますね。 もしかして、このオンチェンジを、別の方ね。 ここの、VSTAPアプリかな。 VSTAPの終わりあたりに貼って、これが発動するんですかね。 これで、エディットボタンを。 インアクティブからアクティブになって、 ダウンを押すと、アクティブからインアクティブ。 エディットを押してキャンセルも一緒ですね。 アクティブからインアクティブ。 それで分かった。そうか。 キャンセルが検出できないんだ。これだとね。なるほど。 ダウンボタンを自分で作ればまた違うわけですけど、 ダウンボタンは完全にお任せしてるから、 キャンセルしたかどうかっていうのが分からないから、 やっぱり書き戻すのが賢いのかな、そんな気がするね。 自分の中の価値観を変えた方がいいのかもしれない。 とにかく動きの感じは分かったんで、 ダウンキャンセルとかのデバッグコードは抜きにして、書き戻しね。 そうすると、考えられることとしては、 ドラフトプロファイルはデフォルトプロファイルを入れてるけど、 ここがまず、オンアピオンの時にセットするわけでしょ。 オンアピオンの時にセットして、 出してないといけないから、やっぱりこの辺に持たないといけないのか。 そうすると、プロファイル、デフォルト。 デフォルトで初期化してもいいんですけど、これはどうなのかな。 イニシャライズした時には決めようがなくて、 モデルデータからドラフトプロファイルを取ってくるよっていう形を取りますよね。 ドラフトプロファイルをバインディングして、 いろいろ使ってもらいますよっていう中で、 ドラフトプロファイルの初期値は何にするべきか。 デフォルトプロファイル。 デフォルトプロファイルでアマリを呼ぶときにこうやってあげて、 アマリは今、プロファイルを買って、 デフォルトプロファイル、プロファイルをね。 オンアピア、とにかくオンアピアでドラフトプロファイルを 最新のものに更新して、プロファイルエディターをそのまま呼び出すわけですよね。 オンディスアピアのときにプロファイルを ドラフトプロファイルに書き換える。 いいのかな。 妥協点探してるような気がするんだけど、そんなことないかな。 オンアピアでドラフトプロファイルを書き換えて、 そのドラフトプロファイルと、 プロファイルエディターのプロファイルが バインディングされてるわけだから、それが現実対象になってですよね。 これだけ見ると良さそうな気がするんですけど。 プロファイルエディターを呼んでバインディングしてやって、 オンディスアピアしかないのかな。 ディスアピアのときに変更する。 または、エディットモードがインアクティブになったときに、 アクティブ、インアクティブ。 あまり変わんないですね、どっちもね。 そうすると、どうします? これ。 ピックアップに出ておきたいんですけど、個人的には。 初期化の時点。 このタイミングでは初期化できません。 そういう状況。 それだけれど、実際に使うとき。 そのときには、バインディングできないのか。 そのときには、強制アンラップするとどうなの? ダメか。 強制アンラップしたのバインディングとは限りないかもしれないしね。 相性悪いね。どうか。 ダメだ。これはダメですね。 もちろんプロファイルエディターの方でバインディングを 強制アンラップオプションにしておけば、どうせはするんですけど。 ここが強制アンラップで、さらにバインディングできないのか。 ここが強制アンラップであるというのは、やりすぎ感を感じるので、 ここはこれでしょうがないでしょう。 ボタンのキャンセルが把握できないとなると、しょうがないですね。 キャンセル状態、このエディットモードもバインドしてあげるとか。 そういったことをするとまた違うのかな。 そうすると、ここがディフォルトを入れとくのか。 ディフォルトを入れておくか、バインドして。 バインドしたものを書き換えていってあげて。 ここが最新の状態になっていないというのが最初の問題ですよね。 それが終わって、キャンセルするのがジョイナリーになる。 キャンセルした場合には、既存の状態で再度書き戻し、 ドラフトプロファイルをね。 そうじゃなければ、更新されたドラフトプロファイルを代入していく。 そうすると、現在の最新状態がドラフトプロファイルに反映している状態ができそうですね。 できそうでいいのかな。 オンアピアで、イニシャライザーで。 モデルデータを渡すわけにはいかないから、これでいいのかな。 いいのかな。もうちょっといい方法があるんじゃないかな。 プロファイルでしょ、プロファイルで。 オプショナルでもいいのか。 オプショナルでドラフトプロファイルが渡されたがいいのか。 強制アンラップでバインディングができなかったのかな。 もう一回撮ってみますね。これで強制アンラップができるでしょ。 その上でエラーになった場所があって、ここで強制アンラップできませんでした。 強制アンラップは、これもダメか。 そうか、これバインディングできないんだっけ。 ダメか。 プロファイルでオプショナルだからかな。 プロファイルがディフォルトでいいのか。 いや、いいのかとは限りないですけど、 面白い意味ではないですかね。 動きは分かったんで、この辺のモデルデータが値を持っていない可能性を考慮したときの、 まだ設定していない状態が分かるようにオプショナルに改良したわけですけど、 この辺がちょっと煩わしいですね。 チャンネルがあったときに、 モデルデータのプロファイルがディフォルトを反映させるという風にしてますけど、 ドラフトプロファイルがオプショナルというわけにはいかないですからね。 なので、ドラフトプロファイルはこれで強という形を取って、 またいろんなところで同じようにプロファイル侍を表示するときにもそうですよね。 ドラフトプロファイルが代入するときも、 プロファイルに値がなければ、ドラフトでディフォルト。 ディフォルトプロファイルを一箇所にまとめるのが正解なんですかね。 例えば、アクティブ、エフェクティブかな。 とにかくプロファイルとして用意して、 プロファイル型でこの値は何かというと、 モデルデータのプロファイル、もしくは、 モデルデータのディフォルトプロファイル。 こんな風にして、これを使っていく効果になるのかな。 こういうコードの書き方だったら自分はそうすると思うんですけど、 エフェクティブって意味わかんないね。 名前が悪い気がする。とりあえず変えていきますね。 プロファイルとして、エフェクティブ、こういう風にすると、 奇跡が絶対に得られてくるって名前が悪いから、プロファイル。 プロファイル、アクティブ、アクティブも変かな。 有効な、有効なよね。 メイク、メイクじゃないね。 何にしようか。アクティブ、プティブ。 アクティブでもいいのかな。 アクティブプロファイルをドラフトに設定して、 カレントかな。カレントの方がまだいいかもしれないですね。 アクティブの方が変ですね。 編集中のものかもしれないですね。 カレントなら、現在のプレゼント。 プレゼントでもいいのかな。 これでもいいかもしれない気がする。 現在のプロファイル。 ドラフトを現在のに差し替えた上で、 アニメーションでインアクティブに戻すよ。 キャンセルボタンを用意したと。 インアクティブの時には、 現在のプロファイルを表示する。 エディトの時には、ドラフトプロファイルに 現在のプロファイルを設定する。 ディサピアの時には、モデルデータの プロファイルにドラフトプロファイルを入れる。 ドラフトは分かりにくくないかな。 これは好みかな。 これは、リファクターリネームで、 エディティングとかでいいんじゃないかなと思ったんですけど。 エディティングプロファイル。 これで、編集中のプロファイルを書き出す。 現在のプロファイルを編集中の所にコピーする。 編集の時には、編集のプロファイルを渡す。 表示する時には、現在のプロファイルを表示する。 あとは、ここら辺もプロファイルを 表示する。 おさまりよくなった気がする。 キャンセルボタンを押した時には、 編集中のプロファイルを現在のプロファイルに戻す。 こんな感じですかね。 いわゆるキットの時は、編集したデータを 対応するか否かというのを、 ダイアログのOKキャンセルで判断できたけど、 このOKが判断できないという状況に今ある中で、 やる方法としては、ステートにちゃんと持たせる。 その時のエディティングプロファイルが、 デフォルトプロファイルとこだけがすごく引っかかってるという感じですね。 この値はいかないわけですよ。 これは何とか、最初の初期化をずらしたいんですけど、 ずらしたところでね、オプショナルがダメだったというか、 オプショナルでもいいんですけど、 その後、いろいろと厄介になってきて、 バインディングを使えばいいんでしょうけどね。 完全に初期化する必要のない段階で、 無駄なデータを入れないで済むという状況にまずする。 その上で選べるのが1カ所じゃないですか。 ここでバインディングを作ってあげればいいわけですよね。 バインディングのイニシャライザーとして、 ゲットの中では、 エディティングプロファイル。 エディティングプロファイル。 これの共産ラップしたいやつ。 これに対しては、エディティングプロファイルに対して、 タラゼロを入れてあげるというバインディングを用意してあげれば、 これでいいんじゃないかな。 コンパイルが通った状態で、エディットをして、 ラッシュするのかここで、 オンアピアーの前に、 ここで渡しちゃうのか、 ディフォルトばってエディティングプロファイルを書き換えるということをするのか。 そうすると、 完全にバインドを向こうに持っていって、 なんとかしないといけないのか。 これでも良いかと思ったんですけど、 先に渡しちゃいますもんね。 ダメですね。 エディティングプロファイルを返すというのをクロージャーにしてあげる。 いや、そんなことは絶対やるべきではない気がするんですが、 これでもフィルドは、 これでエディットをするとか、 これもダメか、 ここでディフォルトしちゃうからダメだね。 そうすると、これはもうどうするかというと、 エディターの方で、 要請アンラップのオプショナルを受け取るか、 普通のオプショナルを受け取るかして、 その中でバインディングをここでアンラップしてとかできないから、 ここら辺をバインディング、いろいろやっていくとかなると、 たくさんあるんでね。 それはやりたくないですしね。 そこまでを毎回頑張る。 コンパイルだけだからいいですけど、 そうではないとすると、 ちゃんとセオリーを知っておいた方がいい気がするので、 そうすると、ここはやっぱりダミーの値を入れておいて、 それで実際の値に、 そういうようなタイミングでエキストに書き換えて、 ここはエラーになっているのは、 どうすればいいのかな? えーと、この中のファイルが、 ここですね。 こうしてあげて、こういうことか。 なるほど。 これでいいかという感じにして、 エディットモードのラップドバリューがアクティブ化して仕上げる。 ここがすごくもどもどしいなという気がするけど、 これはしょうがないのかな。 エディットモードは何があったかというと、 バインディングのエディットモードですね。 ラップドバリューでファインドを取ってあげているのかなんで、 オプショナルですね、さらにね。 ここを楽しようとすると、ちょっと複雑になりますね。 バインディングのエディットモードのオプショナルに対して、 ISACTIVEみたいなプロパティカを搭載してあげる。 そういった点はあるんですけど、 そうすると、ラップドバリュー、これは? エディットモード、アニメーション、ラップドバリュー。 ファインディングバリューは? あーなるほど。 でもね、あんまり良いことはないですね。 エディットモードをラップドバリューと書くのが 煩わしいなという気が勝手にしたんですけど、 結局ここも取らないといけないし、 あれ、妥当なんですかね。きっとね。 あとは、計算型プロパティを用意してあげるという点も あると思うんですけど、それをね、頑張ってやるのもね、 エディットモード、このエンバイロメントがある以上ね、 エディットモードで、エディットモード、何とか。 名前を付けるのもね、難しいんでね。 難しいと思うんだけど、ここで付ければいいのかな。 例えば、PowerEditModeとして、 エディットモードね、ってやるでしょ。 で、これで、そして、SELFのエディットモードのラップドバリュー、 オプショナルか、エディットモードか、でもこれは絶対やるから、ビックリマークとかにして、 で、セッターを用意して、SELFのエディットモードの ビックリマーク、ラップドバリュー、イコール、ニューバリューですね。 こんな風に、計算型プロパティを用意してあげると、このインターフェースで、 出るわけですよね。そしてあげると、これが、エディットモードか、 リズアクティブか、調べられて、で、エディットモードの、 あと、かかるファインドか、これは、どうか。 結局、いろいろ余計なことが始まりますね。 ここでSELFってやんないといけなくて、そうした時にね、ここ、ラップドバリューに入れるわけですもんね。 なんか、結構、おいしいことなかったですね。 この辺のラップドバリューは、消せていいかなと思ったんですけど、 一応、やっておきますかね。やんない方がいい気がするけど。 うん。まぁ、こんなんでね、シンプルに書いていけるよ、 っていうのはあるんですが、これで、ここだけね、SELF、やんないといけないよ、 っていうのは、あ、そうか。これで、エディットモードでアニメーションか。 だから、アニメーションも含んじゃえば、エフィンターで、 こんなにリッチな機能にすると、逆に困りますよね。きっとね。 アニメーションで、ラップドバリューに入れ替えてやれば、 アニメーション付きのエディットモードが、出来上がってるじゃないですか。 で、そうした上で、エディットモードに対して、 直接、インアプリをね、入れちゃう、っていうことができますよね。 うん。まぁまぁ、そうすると、と同じ、ちょっとね、 用意することで、これ、中に入れとくけど、中じゃなくていいのか。 あ、中にしないと、あれだ。えっと、この、エディットモードを、 キャドウィングできないからね、中に入れた感じですね。 まぁ、でも、とにかく、これ、後のコードをね、エディットモードで、 シンプルにね、書けるようにしたいな、っていう時には、ありかもしれないけど、 これをまた渡して、バインディングしたいよ、 っていうような時には、ちょっと困ってくるから、 やっぱり、あんまり、やるべき、コードの、 楽な仕方ではないかもしれないですね、これはね。 うん。今回は、このまま残しておこうと思いますけど、 まぁ、アリ的に、なんと、ラップドバリューに対して、操作を、かけていった方が、 最終的には、なんだかんだで、楽なコードになる気が、 なくしましたね。 今回遊んでみてね。うん。 うまくできてるとは、限らない、感じ。 あまり良くない、例になってるかもしれない。 ただし、このフェータルエラーは、あたしも何もないな。 これが、えーと、ここでは状況を言わなくなりましたけど、 結局のところ、ここですよね。 えーと、だから、どこになんだ? フェータルエラーを入れる場所が、 ちょっと無くなったって感じですか。 まぁ、この辺にね、入れていってもいいですけど、 アクセスした時にしか、効果を発揮しないので、 まぁ、それはそれで、あまり意味ないかな、っていう気がする。 そうすると、アサーションとかをね、入れていくっていう形に、 まぁ、なってくるのかな、って感じですけども、 ここら辺で、エディットモードが使えないってことは、 あり得ない気がするんで、 まぁ、そこまで頑張らなくていいでしょう。 という気がする。 頑張るなら、ここでね、カード、ネット、エディットモード、エルス、 フェータルエラーね、これね。 そして、あげて、これで、バインドが取れてるから、 バインドのね、アクセスしないといけないですね。 入らないけど、これ、入れたのか。 入ったんだけど、ここがダメか。ここが何になってんだ? えーと、エディットモードか、カード、レッド、セルフかな? セルフ、エディットモードね。 こういう風にしてね、カードを入れていくってことは、 一応できますね。ここにも入れときますか。 カード、レッド、エディットモード、イコール、 セルフのエディットモード、エルスのフェータルエラーね。 で、こうしてあげて、エディットモードの アニメーションのラプトタイム。 こうやってあげればね、使ったタイミングで、 エディットモードが有効じゃなければ、 フェータルエラーでちゃんと、 エディットモードが使えませんって出てくるので、 まぁ、マシ。うん。でも大丈夫だと思うんですけどね、 最初のでね。 ここでね、ごちゃごちゃできたんでね。 うん。 まぁ、そもそも、このコードが良くない気がするんで、 まぁ、実際これを、あの、大焼けの場で書く時には、 まぁ、いさきよくエディットモードを消す。 この、ね、絵団型プロパティをいさきよく、 やっぱやめたって消した方が、有効でしたね。うん。 じゃあ、そんな感じで、とりあえず、 ここまでの変更でおかしいことがないことだけを、 一応、プレビューで確認して、 大丈夫なら、ここまでですね。 えーと、プレビュー、もうできたね。 はい。で、エディットをして、例えば、 もう、オータム。ウィンターをオータムにして、 例えば、ノーティフィケーションをオフにする。 デダウンを押すと、ノーティフィケーションがオフになって、 ディジョナルフォードが、オータムに変わったと。 で、もう一回、エディットをして、これを、 アマーに変えるけど、キャンセルを押すと、 オータムのままと、OKですね。はい。 で、まぁ、こんな感じで、やっぱ、あの、 やるべきではないというコードもね、できましたけど、 まぁ、とりあえず、残しといて、OKという感じにしていきましょう。 はい。じゃあ、今日はね、これぐらいにして、 次回はこの、UIエディットとのね、あの、 連携、そういったところに入っていく感じになりそうです。 はい。では、これで終わりにしますね。 お疲れ様でした。
