Transcription & Summarize : とりあえず読書会 SwiftUI Tutorials #33

はい、ではとりあえず特集から始めていきましょう。 リストビューはチュートリアルの内部の方ですね。 macOS対応をしているところですが、 とりあえずは画面がちょっと大きいから、画面が変わって、 その中でメニューとかそういったところをいじれるようになっている感じで、 なんかね、面白い。 プラットフォームごとの微妙な違いと触れていながらね、 コードが結構共通してね、使えない。 なかなかリストビューは面白いところありますけど、 まあ難しいところでもありますね。 とりあえずチュートリアルに沿って引き続きやっていきたいなと思うんですが、 今日はここからですね、セクション4だったかな。 このF3、一応セクション4の後の方から軽く見ておきますかね。 えーと、リストビューを更新していって、 macOSに似合う形にしていこうというね、そういったお話ですね。 iOSとOSができている段階で、macOS用のを作っていく。 で、チュートリアルやりながらね、いろいろリファクトリングとかしていくと、 ずいぶんこの方に出てくるコードとは違うので、 そこがまあ個人的には面白いところですけど、 まあそうなんでね、いろいろなんか、そのせいで苦労しながらやっていたりもしますけど、 まあそういうところは勉強に乗っていいなとやっていると思う。 なぞるだけだとどうしてもね、なんか、あのーなんだろう、気が抜けるというか、 一回だけで終わっちゃうみたいなね、そんなところがなんかあるっぽい。 一応2回目なんですけど、これやってんの。 1回目すっかり忘れてるもんね。 まあとりあえずそんな感じで、ステップ1は何をしたかっていうと、 mac用のランドマックリストの愛称を追加したのかな。 とにかくツールバーをつけて、で、それで、えーと、なんだ、フィルターか。 えーと、スライダー、水平スライダー? うーん、あ、これはお気に入りとかの、セレクトですよね。 そう、エガリストオンリー、これをメニューでね、追加してあげて、 それで選べるようにしたいよっていうところで、 これによってリストの中に、今まではiOS用で作ってたのは、 リストの中に、えーと、ソフトウェアをね、用意していたので、 それがメニューに移動したことによって、他のフィルターつけれるよねっていうところで、 次、今日のお話ですね。 フィルターカテゴリーという列挙型、えーと、フィルターの状態を表現する。 そういったものをディスクライブって表現でいいのかな。 えーと、技術かな、どっちかっていうと技術か。 で、えーと、それを作っていって、マッチのペースストリング、カテゴリーの列挙型、 ランドマーク行動体のカテゴリーの列挙型とケースのストリング、合わせていくのかな。 で、えーと、こうしてどれらを比較して、全てのケース、 あと、全てのケースを含めて、フィルタリングを、あ、オールね。 もう6名の、早速、いじりたいとこが出てきましたね。 うーん、まあ、まずはこれをコピーして、後でリファクトタイムしていきましょうかね。 まあ、なんでいじりたくなったかっていうとね、シンプルなもので、 レイクスとリバースとマウンテンズっていうね、こういったカテゴリーがある中で、 これ、列挙型っていうのは、あの、ハイト的に選ぶ、まあそこで捉えればいいんですけど、 それで、ハイト的なんですけど、これがあの、何て言うんですか、直話型? これらが、あの、対等に並んでいたほうが何かと使いやすい、綺麗に使える気がするんですよ、列挙型っていうのは。 この中で、レイクスまたはリバースまたはマウンテンズまたはオール、 まあまあ、選択肢としてみればそれでいいんですけど、レイクスとリバース、ハイトとオールと、 うん、ちょっとハイト的じゃない気がするなっていうのと、将来やはりに、レイクスとリバースみたいな、 この2つを選択できるようなカテゴリーフィルターを作ろうとなった時に、オールが非常に邪魔をしてくるっていうね、 そういったところがあるので、ちょっとここは、いじりたいなと思うけど、まずはこのままいきましょう。 えーと、フィルターカテゴリーをランドマークリストに入れている、そうか、まあただフィルターカテゴリーで、 あと、ランドマークリストの中に所属しているという考え方でみれば悪くはないですね、簡単に言っといてなんですが、 というのも、ランドマークリストというものから見たフィルターカテゴリーというものは、この選択肢っていうね、 名前空間で結構絞っていってるんで、この時にはね、まあまあ、これぐらい、なんか特殊な列挙型でも悪くないのかなっていう気がしてきたので、 まあまあ、とりあえずこれを使ってみようかな、ただし、えーと、リバースとレイクスとかをね、他には転用しにくくなってくるんでね、 まあそれは転用してないならこれでいいんですけど、転用しようとすると、あと、ランドマークリストを転用すぎちゃってね、使いにくいよということになるはず、 おそらく、どうでは、とりあえずコードの方にきて、ランドマークリスト、これはすべてのOS共通か、今Mac OSを使ってますよね、他のOSで使うんでしょうかね、これね、 というのがとても気になっていると、あとは、個人的にパターンを載せる時には、拡張を個人的にはMacまでも使いたいなと思うので、えーと、こうやってランドマークリスト拡張する形でね、ちょっと載せていきますかね、 Mac OS用なんじゃないかなという気はするんですが、まあとりあえずはこのままいきましょうか、 もう一つ言うと、多分ランドマークリストの中でフィルターが出ると思うんで、これ外で使わないと思うんですよね、なので、プライベートエクステーションで十分でしょうと想像する、 言わたら直していきますね、データテゴリーというのはローバリューとしてストリングを取っていて、ローバリューいるのかな、これっていうのも気になる、 ASID選ぶ、まあこれはいいでしょう、あとはアイデンティフィアブルで、まあきっとIDで何かやっていきたいんでしょうね、ここはいいですね、はい、じゃあこんな感じで、えーと、まずは取っていきますか、 ということで、これで、よかった、じゃあ次行きましょう、これいじりかえがあるやつ面白いですよね、で、 스�テップ4、フィルターステート変数を追加して、 ディフォルティング都オールケース、すべてのケースをディフォルトする、ストリング、フィルターステート、リストビューで、 フィルターステート、ストリングは、フィルターステートをリストビュー内で保存する、 外でかな、えーと、あー、複数のリストビューウィンドウを開ける、 それぞれが異なるフィルターで、あー、なるほどね、えーと、異なる見た目でね、なるほどね、 そういった形で、とりあえずフィルターとして、 フィルターコテゴリオールをランドマークリストに追加していくと、 えー、これだけかな、えーと、このようですね、なので、 まずはランドマークリストにステートを追加する、 えーと、ショーペーパリットオンリーの上に追加してましたっけ、 まあどっちでもいいですけど、まあフィルターね、とにかくね、 これでフィルターが追加できたら、えーと、なんか下まで戻ってしまいましたというか、 上までか、戻ってしまったというか、この辺ですかね、 えーと、追加したのがあったから、フィルターランドマークスメソッドでしたっけ、 これを更新して、新しいフィルターセッティング、 カテゴリーでね、フィルターを追加していく、お、なかなかややこしい地域になりましたね、 ショーペーパリットオンリー、またはランドマークリストフェイバリット、 あと、だから二つですね、フィルターが、えーと、適したフィルター、フィルターに応じたものになっているかですね、 フィルターがオール、またはフィルターのローバリューとカテゴリーのローバリューが一致しているか、 ちょっと興味深いカード出てきましたけど、まあ後で回しましょう、 この&によって、えーと、お気に入り状態が適切な、あの、この、合致するもの、 かつ、フィルター条件もね、合致するものみたいな、この、二つに分かれてますね、これね、 ここだけかな、まず書くのは、そうですね、じゃあここまでやっちゃいますかね、フィルター、 えーと、なので、フィルターランドマークスのこのフィルターで、 フェーバリットオンリーだったら、イズフェーバリット、いいですね、 これが、フェーバリットオンリーがフォルスだったときには、これなんか失敗してる? えーと、フェーバリットオンリーがフルじゃなかったとき、フォルスだったときは、 何も表示されなくなっていると思ったけど、ちがうか、これ間違ってますね、コードがね、 スイッチボタンでまず分類しちゃってるんで、フェーバリットオンリー、これによって、もうここいらないですね、 絶対フルですね、これね、そんなにいらないわけですけど、条件が変わったんでここが機械の異変ですね、 なので、フェーバリットのコンディション、どうするんだろ、これはちょっとおかしい、ここにレッドをフェーバリットコンディションとして、 フェーバリットオンリーでSwitchしようかなっていう感じですかね、 フェーバリットオンリーだったら、それがフルだったら、条件はね、ランドマークを渡さないといけないのか、 だからこれはファンクションか。 フェーバリットコンディション、これがランドマークですね、 こうしてあげて、これがルールを返すよっていうふうにした上で、 この条件としては、だから先にこう書いてあるんだ、 フルだったらバーと、フォルスだったらバーですけど、 フルの場合はランドマークの、フェーバリット、 フォルスだった場合には、全て表示するってことになるはずなので、 いいですね、同様に、 ケース、レッド、フィルター、それ以外のフィルターだった場合にはこのまま フィルターがランドマーク、カテゴリーを フィルターのローバリューじゃない、カテゴリーか、 カテゴリー、カテゴリー、フィルターじゃない、ランドマーク、カテゴリー、 ローバリーですね、フィルターのローバリー、これが一致するかどうか、 こんな風にすればね、これはスマートな印象、ちょっとスイッティングのインデントが、 個人的にもうちょっといいインデントないのかな、 みたいなと思ったのでなんとも言えないですけど、 一応はスマートですね、フィルターがオールだったらする、それ以外だったらフィルターの ローバリューを比較する、ここでこのコードを見ると問題が2つ見えてくるわけですけど、 オールとこの他のフィルターがこう フィルター個別だったら問題なくね、フィルターで ちゃんと比較できるはずなので、この辺りがちょっと改善の予定がありそうっていうね、 こんな感じですね、とりあえずこういう風にして比較できるようにしたら、 これはパフォーマンス気にするとちょっとバカしい、 パフォーマンス悪くなりますけど、ランドマークを使用するときにこのフィルターをね、 使ってあげる、なのでフィルターとして、 合わせちゃってもいいですね、まず書きますか、 イズフィルターコンディション、フィルターじゃない、イズエイバリットコンディション サティスファイドウィズランドマークでしょ、これでかつもう一個ね、 ここで、イズフィルターコンディションサティスファイドウィズランドマーク、 なんかウィズじゃない気がしてきたな、英語がなんか違う気がするのと、あとこれパイディングが 書かれてるのだから、これがラップドゥバリューね、ラップドゥバリューをここで渡すか、 まあいいか、こんな感じにしてあげると、この両方のフィルターを満たすっていう表現になってくれるので、 まあまあ良さそうな感じですかね、ランドマークのラップドゥバリュー、ランドマークの、 これはランドマークを取るんじゃなくて、もう使い捨てたと、イズフィーバリット、 イズフィーバリット、まあランドマークでいいか、ランドマークウィズランドマーク、まあいいか、これにしてみましょう、とりあえず。 で、ここでファンクションも一個作っちゃって、イズフィルターコンディションサティスファイドウィズコンディション、 ここまとめなくていいですかね、まとめなくていいや、なんかあんまりうつくしか見えない、そもそもこのフィルターが、 なのでこの件を考えるんだったら、ランドマーク自体に要件を持たすか、 まあでもこれですかね、イズフィーバリットとかはランドマークリストが持ってるんでね、どうしてもそのランドマークにやらせるというよりは、ランドマークリストがちゃんとやらないといけない気がするんで、 それとかでいいかもしれないですね、なんかまだもうちょっと、なんとなく改善する予定を感じるんですけどね、ランドマークでしょ、だからここでフィルター、 まあだから作ってみますか、やっぱり、イズサティスファイドウィズコンディション、イズフィルターとか、ちょっとフィルターっていう名前も良くないですね、これ作ってて思いましたけど、 カテゴリーフィルターですねこれ、カテゴリーフィルターですねこれね、なのでもうちょっと書いてからにしますかね、だからイズサティスファイドウィズランドマークってランドマークっていう風にしてプール型を返すようにして、 この中でさっきの条件ですね、残れたこの2つなのでこれを持っていって、こうしてあげるとちょっとなんか、イズ、まあ名前はどうやって考えますかね、ランドマークだからここかな、 ランドマークで条件がこの2つを満たした場合とした上で、フィルターに対してはフィルターでランドマーク、フィルターの丸括弧でイズサティスファイドウィズ、 またこれで映像が上がるかな。 ラップドバリューじゃないか、ラップドバリューではなくて、 ランドマークが得られているからランドマークのラップドバリューじゃないか、 ルフルフじゃないかな、ここはバインドを渡さない場合ってどうするんですかね、 これは、ちゃんと渡さないといけないんだっけ、 イズでやってみますかね、これでフィルターイズサティスファイドウィズで、 ここでラップドバリューってわけにいかないです、 ラップドバリューはフィルターがないと言われる、 フィルターのラップドバリューのラップドバリューだけでいいのか、 これを省略したいなと思ったんですけど、ここでキーパスをできないか、 できることとすると、フィルターでランドマークをバインディングに回すか、 これくらいだったらいいですかね、無理やりのが、 いろいろやるよりはこれがいいな気がする。 バインディングを返してあげると、こういう風にすればね、 フィルターが完成したよという状況になってくれる。 良さそうですかね、ここのフィルターのオール、 これはしょうがないか、これでいいですね。 では、こうしたらフィルターができたので、続いてステップ6。 ピッパーを追加するメニューにフィルターカテゴリーをセットする。 その前に名前書いておきますか、フィルターって書いてあるわけですけど、 フィルターとフェイバリットオンリー、この2つでフィルタリングをかけるというのは非常にわかりにくい。 このフィルターが曖昧すぎるんですよね。 なのでこの名前、これを、これを、なんだっけ、忘れちゃった。 フィルター、フェイバリットじゃなくて、カテゴリーだ、 カテゴリーフィルターという風にしてあげて、 このフィルターコンディションも名前書いてあげて、カテゴリーフィルターですね。 そうしてあげた上で、ロータルで見たときにフィルターですよね。 こうしないとちょっと名前が良くない気がする。 なので、こうしてあげて、フィルター、こうですね。 これでフィルター、こんな感じでできて、フィルターとランドマークがね、 ざっくりと全体的にフィルターされたランドマークね、こんな風にできたので、 はい、じゃあ次行きましょう。 ピッパーを追加する。 アブバーアイテムのメニューの中にカテゴリーのピッパーを追加する。 ちょっとコピペして考えますかね。 なので、そうしたら、話はちょっと簡単になってきた。 簡単というか、見えてきた。 このIOSとMacOSの条件ですけど、これをカテゴリーフィルターもそういうことになりますよね。 つまりね、これでジャンプ、この感じ。 まず一つ、これでカテゴリーフィルター余計なものを、 こっちOSに持ち込まないようにしたと。 で、あとはフィルターがそうすると、 フィルターもちょっと考慮しないといけなくなっちゃうのか。 まあまあ、考慮しないといけないと言っても、 ここがちょっと面倒ですね。 これをMacOS専用にして、 で、そのあとで、 フィルターとか、 まあまあ、いろいろと持たせ方はありそうですけど、 一つの方法としては、 ここエンドイフディ、一旦閉めた後、 これを閉めた後、 フェイバリット・コンディション・サティスファイド、 フェイバリット・コンディション・サティスファイド、 フェイバリットにだね。 だからコマンドの方、こっちを条件文で。 で、これでいいですね。 これだと条件がリターンしてないといけなくなっちゃいますね。 2行なんでね。 で、これで、アンド、アンドで、 これはOKですかね。 ああ、ダメか。これはダメか。 ああ、そっか。 アンドもこの中に入れないとダメですね。 えっと、これで、大丈夫かな。 これでリターン。 ああ、そっか。リターンが、あ、違うね。 iOS、MacOSでカテゴリーフィルターだから、 これでアンドを付けたときに、 じゃあ、フィルターダメなのか、これだと。 えっと、これで、ビルドをかけようと思いますが、 アンド、アンドがこれだと聞かないのか。 ああ、なるほど。 あ、なるほど。グレフィックス? あんまりオペレーターではない。 あれじゃない。Uナリではない。そう認識してるのか。 そうすると、JAR2IF。 この辺のOS間の互換性が若干面倒ですね。 面倒って言っても知れって言われるんですけど。 そしたら、ちょっと効率化よりも、コードの効率化よりも、 マルチプラットフォームの効率化の方に寄せていってみますかね。 そうすると、えっと、フィルター、えっと、えっと、 何だろう。IsAllSatisfied? AllSatisfied? IsAll、うん、うん、と。 まあいいか。いつでいいのかな。分かんないけど。 とりあえずこれで、うーん、なんかあまり良くない気がするな。 えっと、フィルターを1個作って、それでもう1個作って、 整えてあげて、なので、レッドペーパーですね。 えっと、AllSatisfiedって、ウィズだから、えっと、こうで、 AllSatisfiedイコール、えっと、 AllSatisfiedイコールアイ列で、ここに、えっと、ランドマートを取って、 ツールを返すといったものを、とりあえずカラーで作ってあげて、 それで、えっと、あまり切れてないですかね。 まあまあ、でもいいか。 これで、えっと、AllSatisfiedにアペンドで、 IsFavoriteCategorySatisfiedWizを入れてあげる。 で、iOSとMacOSの中では定義した後に、 AllSatisfiedに出資する形。 あれ、出資したのが何だっけ。 えっと、AllSatisfiedに対してアペンドが、急に忘れた。 アペンドに対して、IsCategoryFilterConditionSatisfiedWiz。 で、こうやって、あの、OSごとに、えっと、 OSごとにというか、フィルターの条件を付けてあげて、 うん、もうね、これでいいですね。 こうしてあげた上で、えっと、全てにマッチするかっていうのをね、 調べてあげるのが、ここですね。 リターンの中で、えっと、All、あ、これ名前悪いな。 AllSatisfiedで、Predicateでしょ。 Predicateだから、AllSatisfiedのPredicateだから、 $0、あ、AllSatisfiedの$0か。 $0だから、えっと、どうすればいいんだ。 $0に対してランドマークをね、 渡せばいいんだと思うんですけど。 うん。そうね。 AllSatisfiedが並び混ぜてるとダメですね。 ダメってことはないけど。 えっと、コンディション、フィルターはConditions。 こんなままの方がいいですかね。 これで、全てのね、コンディションを満たす。 そういったものを探して満たしていくと。 うん。これで良さそうですかね。 こうしてあげて、フィルターと、あとはこの、なんだ、 えっと、ピッカーができたという感じになるので、 で、あとはピッカースタイルのインライン。 これが、えっと、なんか、 表示する場所が間違ってますね。 ランバーのメニューの中。 えっと、そうね、メニューの中ですね。 で、これをここまでアップして、 えっと、それで、オブルの下。 ここにね、ピッカーを用意してあげて、 これでピッカーができた。 これでフィルターできるんですかね。 えっと、ランドマークリストの、 えっと、これか、メニューのピッカー。 えっとね、ここだけだからこれで良さそうですね。 で、そうしてあげて、 えっと、ナビゲーションタイトル。 それを、えっと、フィルターのステートにマッチするように変えてあげる。 えっと、これは、iOSでやったらしい。 えっと、タイトル。ランドマークリストのバータイトル。 当然ここにタイトルが。 えっと、タイトルで、エルザボールの場合はランドマークス。 で、えっと、エルザローバリュー。 で、フェーバリッド、ランドマークス。 あとは、フェーバリッド、フィルター、メーター。 なるほど、こんな風な形でタイトルをすると。 これだけじゃなくて、きっとタイトルを定義したらわかりますよね。 ナビゲーションタイトルね。 ナビゲーションタイトルボディのナビゲーションリストがリストに対して使っていく。 なので、これを、えっと、この上の方を上にしますか。 この辺のね、名前。でもこの名前よくないと思うんですよ。 ナビゲーションタイトルってね、わかんないんで、何のタイトルって感じになってくるんで。 まあ、リスト、ランドマークリストのタイトルってわかるのかな。 まあ、わかるかもしれないですけど。 とりあえずこれが、フィルター、違う、えっと何だっけ。 カッテイコーリーフィルターで、こうやってあげて。 それで、リスト、このリストの中のタイトルでしたね。 なので、どの辺にしますかね。ナビゲーションタイトルだった。 他、ランドマークじゃなくてタイトル。 こんな感じで、これで。 ステップ8で、こういうターゲットで、 このメニューがちゃんと動くことを見てみましょう。 ステップ9を持ち込んでおきますかね。 ランドマークターゲット、ビルドタイトル、要はiOSの方ですね。 それで、ちゃんと動くことを確認しようと。 なるほど、こんな感じでステップ、セクション4が終わった感じですね。 なので、動かしてみましょう。 とりあえず実行をかけて、それでちゃんとフィルターが動くかどうか。 この辺りは、とりあえずビルドが動く、実行できて、 それでアプリがこれで動いてるのかな。 このメニューの方ですね。 リバーで、今のところはiOSで便利って言ってましたね。 タイトルはどこに出てるんだろう。出てないのかな。 レイクスってやると、レイクのものだけになってますね。 レイク、なんたらレイクとかレイクなんたら。 レバー3もレイクもレイクって書いてありますね。 ほかにリバース。これはカードロックというのと、なんたらリバース。 この辺は川なのでしょう。 山っぽですね。 It's favorite onlyも一緒に使える。 なかなかすごいですよね。 これもうこんなに機能ができてしまっているというのは なかなかすごいなという感じがする。 これ何もなかったときちゃんと動くのかな。 これは良くないですね。 良くないけどこれはどういうことだろう。 ALLにして、どっちをクリック。 これ消えてないね。これはバインドがおかしくなってますね。 クリックしたときもバインドがダメになっているから 直さないといけない状況になっている様子。 とりあえずそんなところですが、微妙ですが、 iOSの方、どっちも確認しておきましょう。 でもどこだろう。今のバインド。バインド何かと悩まされて、 今フィルター関係いじったからですかね。 またビルドエラーになりましたね。 ビルドエラーになったところは、 ダイラーが出てないですが、 そういうときはこの1番8個のフィルターも確認すると、 ここに出てきてますよね。 ここだ。カテゴリーフィルターがオープンにない。 カテゴリーフィルターはそうだ。 カテゴリーフィルターを、 これはiOSまたはMacOSですね。 カテゴリーフィルターは移りが違う。 そんなこともないはず。 ランドマクリストスウィフトのカテゴリーフィルター。 これが見つからないと言ってますね。 この見つからなさはカテゴリーフィルター。 何だこれ。何か壊れてますね。 スイッチショー。何だこれ。 これ何かコピーしちゃった感じですね。 コピーしちゃった感じですね。 エイバリットオンリー。 エイバリットコンディション。 上のはフィルタータイトル。タイトルストリングが。 これさっき作ったタイトル。コピーしてきたタイトルですね。 ナビゲーションのコピー。 何か消さしちゃった感じですかね。 そうだと思うんですが、それでもエラーですね。 ビルドiOSのエラーでカテゴリーフィルターが やっぱりないと言われますね。 ここですか。バーのタイトル。ランドマクリストで。 あ、そっか。これは持ってOSのほうで言われてるな。 だからこれをタイトルも同様にiOSとMacOS。 これでいいですね。これでビルドが通る。 タイトルをここで指定している。 ナビゲーションタイトルとかでしたっけ。 ナビゲーションタイトルが。 ナビゲーションタイトル。リストが持ってましたね。 ナビゲーションタイトル。これもOSで切り替えないといけないから。 MacOSとiOSですね。 その辺を切り替えたいから、とりあえずSharpFOSが これはコピーしておきましたね。 これでナビゲーションタイトルでこれがランドマクスですね。 押してあげてエンドイフと。これでビルドが通る。 ビルドが通ったら 実行して 実行結果がどうなるかと。 あと星が、星がエガリットの操作がうまく動かないってところもちょっと気になるんで。 あと今日はそこを直しますからね。とりあえずね。 これでシミュレーターが今動いてますね。 動いているところ。 動くまでの間とか何回かお気に入りを。 お気に入り聞いてはいるんですけどね。 ここの反映がされていないというそういう状況になってますね。 こっちを押せないですもんね。こっちも関係ない。 とりあえずOSのシミュレーターをちょっと見ていって、 動いたら操作したいけどちょっと時間かかりそうね。 PCがMacBook Airを使ってるんですけど、 どんなんですかね。 これMacBook Proとかの方が快適になるのでしょうけど、 結構熱くなるんですよ。MacBook Air。 これだけのことをしている程度で。配信はペットのPCでやってて、 画像はAirPlayで送っているっていう感じなんですけど、 これで結構重くなる。重くなると熱くなる。 メモリが16位以内ですね。これでメニューでしたよね。リストですかね。 こっちですね。リストの中でリストからレイクスを選んであげるとレイクス。 この順位が出てきて、エヴァリットオンリーにするとエヴァリットレイクス。 なるほどね。分かりやすくて面白いですね。 これをアップすると詳細が出てきて、こっちを押すと、やっぱり消えなくなってますね。 これでリストからはなくなっていると。 なのでiOSでもMacOSでも同じ問題が起こっているということが、 とりあえず分かった。この状況で調べていきますかね。 エンバイロメントは要らないですけど、モデルデータでプレビューだけはできるようにして。 あとはビルドができたら、iOSで実験してあげて。 これだけでリンクが直るとは思わないんですけど、一応リストに変えて。 リストに変えて、例えばこの2番目の青いスターを外す。 あ、外れた。あれだけで直った。 エンバイロメントを渡すか否かだけで直るのかどうなのか。 すごい気まずいね。どういうことなんだろう。 MacOS持ってやってみますけど、エンバイロメントを渡すのだけで放信がされる。 エンバイロメントを渡すと何が起こるんでしょうね。不思議ですね。 これでMacOSにして、MacOSモニティをかけてあげて。 それで、MacOSの動きで、このアイセントのリリースの。 消えた。モデルデータのエンバイロメントを渡すと、引き継ぐと変更が他のバインディングと 売ってくるのか、ライフサイクルが変わっちゃうんですかね。 もしかすると、モデルデータがコピーされていることによって バインディングが古くなるとかそういったことがあるんですかね。 だとすると、このバインディングを持ち回すっていう、 今回自分がやっているこのやり方は危なっかしいかもしれないですね。 とりあえずは、モデルデータを持ち回して、B2でもらったランドマークを モデルデータから、Find Firstじゃないか、First Indexか、あれで検索して見つかったらどうする、 見つからなかったらどうするみたいなことをやった方がいいんですかね。 そんなときは、何とかモデルデータとか、 エンバイロメントオブジェクトに頼らないで、普通にプラスインスタンスをどこかに、 メインオプター保護で置いておくとか、それだけでいい気がしますね、なんとなく。 そうすると変更が起こらないのか、なんかややこしいけど、 とにかくここでエンバイロメントを普通に置いたパターン、 これで、アッドエンバイロメント、モデルデータ、モデルデータセルフとして、 パワーモデルデータと書いた時点で、これだけで何も書いていないにも関わらず、 バインディングがおかしくなるということになるらしい。 あれ、そんなことなかった、できるようになってる、謎だ。 何、変えましたっけね、変えたので、プレビューでエンバイロメントを渡したかどうかだと思うんですけど、 こんなところへ移動するはずがないと思うんですよね。 これで実行して、あと何か変えましたっけね、変えたような気がするんですけどね。 これで、とにかくこうしてみて、あ、大丈夫ですね。 なんか幻?幻を見ていたような感じかもしれない。 なんのかっちゃった感じですけど、これでとりあえずできた感じですかね。 これで実行をもう一回書いてみて、OSでちゃんと動くかを見て、 これでこの入り入り、エンドしますね。 で、あとこれも入り入り、エンド、あ、フィルターやってないですね。 フィルターで例えばリバースにして、で、例えばタートルロックの入り入り、大丈夫ですね。 これはこっちに入れたり、大丈夫ですね。なんでだろう、まあいいか。 フェーバリットオンリーってやっぱ変わんないと思うんですけどね、タートルロック。 これはクック作이즈め、なるほど、だからフェーバリットオンリーはとりあえずやめて、でお気に入りのように一個作って、 それでフェーバリットオンリーにして、その後のタートルロックを、あ、なるほど、 フェーバリットオンリーにしたときにダメになるっていうことがわかった。 なんでだろう、とりあえず問題は解いてきましたね。 だからなんか取っても、その価値はフェーバリットオンリーでオールのとき、このときは、 よし、フェーバリットオンリーがだめっていうことだ。 フェーバリットオンリーがだめ、こういうことだろ。 フェーバリットオンリーがだめって言っているときに、 いずフェーバリットオンリーを フェーバリットボタンにしてますよね、とりあえずですね それでフェーバリットボタンが、wiz-set で、フェーバリットボタンは何をしているかわかると、 ボタンをトグルするという形をとっていると、 それでトグルするだけで、トグルの状態はwiz-set で変参が渡ってきて、 で、変参がwiz-setが渡ってくると、 proves this is loop? ワインディングが、どうなんだろう。 ループになっているとしたら、ちょっとやっぱりな気がするんですけど、 いずフェーバリットで、フェーバリットがチェンジした段階ですよね。 いずフェーバリット、いずフェーバリットのチェンジはここじゃないか。 フェーバリットボタンで、ここはいいからランドマークディテールの1個前、ランドマークリスト。 これで、いずフェーバリットオンリー、不調フェーバリットオンリーが、このステップが変わるはず。 この不調フェーバリットオンリーは、どこだ。 トスや小フェーバリットオンリーはdetail、 で、detailでランドマークで、 あ、フェーバリットボダンはいいます。 ランドマーク、いずフェーバリットが、 ランドマークは、bindです。 bindingされているランドマークディテールは フィルタード・ランドマークスで返されてきて、 フィルタード・ランドマークスは、 ここですよね。 いずフェーバリットだったらば、この状況。 そうじゃないじゃない、それ以外のコンディションはこの条件で、 基本的に、フィルターの条件が、 モデルデータがエンバイロメントで渡されていて、 で、あれだけが、モデルデータ、エンバイロメント。 エンバイロメントは問題なさそうですね。 なので、エンバイロメントで渡されてきていて、 で、ランドマーク、フィルタード・ランドマークスがあって、 で、それで、いずフェーバリットだけか。 ここが難しいですね。なんでだろう。 アニメーションで、これはアニメーションも関係ないか。 で、ツルバーで、ショーリングプロファイル、これも関係ない。 傷フェーバリット、ショーフェーバリットオンリーを ここでも使ってますかね? ショーフェーバリットオンリープログラム、 僕らちゃんと聞いてたはずなので、それは良いですね。 なるほど、なるほどというか。 ショーフェーバリットオンリー、これをもう1回、マップにすると。 ショーフェーバリットオンリーがプロパティで、 画図タイトルがそれに影響して、 で、フィルターの条件がイズフェーバリットオンリーに影響するけれど、 それはそれとして、 あとは、ショーフェーバリットオンリートグルーメニューですね、 依存していてぇ。 あれだけなのに、ショーフェーバリットオンリーを有効にすると、 選択エフが外せなくなってしまいます。 選択エフが外せなくなるということは、例えば、ショーフェーバリットオンリーの directingによるとですね。 なので、ショーフェーバリットオンリーをどこでどう渡しているか? そういったところになってくるんですよね。 なので、それを見るには、ランドマーク、あとは、ランドマークディテールが、 いずフェーバリットオンリー、というか、いずフェーバリット、これは、いずフェーバリットで条件が変わるのか。 星のアイコンがね、それが影響を受けない。 いずフェーバリットが、条件、あ、違う、変更の条件、状況変化を受けない。 ということは、いずフェーバリットだったときに、 アイ描画が分からないと捉えれば良いんですかね。 どうなんだろうね。 この、えっと、フェーバリットボタンをちょっと見てみますか。 フェーバリットボタン、えっと、iOSとOS、iOSとOSか、 えっと、iOSとOSとMacOSが違う。 間違ってても、別に、あの、このスパーでおかしくなってるわけじゃない感じですけどね。 えっと、MacOS用とフェーバリットボタンとiOS、あ、一緒だ、全部だ。 だから、これファイル名が、紛らわしかっただけですね。 うん、で、これで、 フェーバリ、フェーバリットボタン、これがいずセットで、バインディングで持っていって、 段があって、これが再描画されたときとかって、ここで取れるんですかね。 オン、なんだろ、オン、ピア、オントラ、分かんないな。 オンアピアーですかね。ピアでいいのかな。 ま、ちょっとやってみますか。 オンアピアで、ピント、で、ボタンか。 ま、なんでもいいか。 これで、フィードローとやってみて、で、それで実行をかけつつ、 エミュレーター今はMacOSです。で、MacOSが、 これで、ボタンが最初は、描画されていない。 で、これで、例えば、ダートレロを押したときボタンが表示されましたよね。 おそらくね、あれされてないか。あ、されてますね。 はい、その中で、これを一回押してあげる。 こうすると、えっと、あ、一回しか描画されたことにならないですね。 プラボタンのいずセット、これは、ま、分かんないな。 押されたことは確かで、いずセットが反転したかどうかを知るためには、 いずセットはバインディングなので、エイバリットボタンを使っているところ。 これを、えっと。 エイバリットボタンを使っているところ。 ここですね。いずセットとランドマークの、いずフェイバリット。 あ、このバインディングがおかしいだろうということは、なんとなく想像がつきますけど、 ただそれがね、なんで、あの、iOSの、iOS関係ないや、 フェイバリットオンリーのフラグが立っているときだけなのかっていうのがね、気になりますね。 なので、これを知るには、エイバリットボタンのこの、 いずフェイバリットが変化したかどうか、これをチェックしてみたら、なんか分かるんですかね。 これをチェックするには、例えば、ディストップここがいいのかな。 オンチェンジ、で、フェイバリットで、アクション、そうかな。 これで、いずフェイバリット、インって感じで、これをオンチェンジ、これじゃダメか。 イコータブル、バインディング、 イコータブルこれ。これどう。オンチェンジ。ディプリケートか。 オンチェンジ、えーと、オンチェンジのフラッグバリューにしてみますか。 フラッグバリュー、これで、ディプリケートですかね。 あっちがこのまあとだね。S14でディプリケートで、オンチェンジ、0のパラメーター、 0、オールドバリューとニューバリューでしたっけ。違うかな。 えーと、オールド、どうしよう、オンチェンジを仕掛けたくしてみますか。 とりあえずオンチェンジ変わって、これがディプリケートで、それ以外だとオンチェンジはオンチェンジ、えーと、 この辺は、ここがオブデパフォームアクション、これもディプリケートですね。 これか、バリューとイニシャル、イニシャルバリュー、イニシャルバリューとは、えーと、またオールドバリューとニューバリュー、これを受け取るっていう感じみたいね。 だから、これを使って、オールドバリュー、オールドバリューとニューバリュー。 これを指定してあげて、これでプリント、 うんと、It's favorite、これがオールドバリューから、 オールドバリューですね。こんな風にしてあげて、変化したかどうかをちょっと見ていって、これによってね、どうなるかですよね。 なんで、favoriteのフィルターをかけた時がダメなのか。 それ以外の、要は、カテゴリーフィルターと同じ処理をしてるはずなんですけどね。 なのにダメっていうのが、とても気になる。 ちょっとXコードと一緒に見たい気がするから、Xコードをちょっと画面小さくして、これで操作していくとね、ログが飛んでくるという感じになると思うんですけど、 これで例えば、これを選んで、あとは、どうしようかな、フィルターが分かりやすいように、これ、エバリコンが上になっておきますかね。 これはあまり関係ないか。 これで、この時に押しを取ってあげると、trueからfalseになった。 で、falseからtrueになった。 こんな感じですよね。で、あとは、favorites only、これをね、フラグ入れてあげた時には、こうですよね。 メインマリーレイク。これで、今、falseからtrueになりましたね。 えーと、まあ、trueになったというか、まあ処理されたって感じ。 で、これで押すと、変化したことになってないですね。 もう一回押しても変わんない。でも、リストの方が動いてる。 だから、他のバインドが、なんかおかしいですね。 みつfavoritesのフラグをね、つけた時にね、favorites onlyを外すと、動くようにちゃんとなるというね。 こんな感じ。で、それだけじゃなくてね、 マウンテンズみたいなね、フラグを立てた時も、ちゃんと動く。 なのに、favorites onlyだけ動かない。 うん。そういう細かい状況になっていると。 で、リストとディテールだけですからね。 で、リストとディテールで、コードをもう一回見ますか。 えーと、オンテンチが発動しないことがありますよっていう状況ですよね、まずね。 で、それでオンテンチがここにあって、で、それでランドマークディテールですよね、これね。 で、モデルデータがエンバイルメントで与えられていて、 で、ランドマークがここに存在していて、 これモデルデータどこで使っているんだ、これ。 ここも何にも使っていないですね。 で、これもちょっと切っておきますか。 モデルデータもエンバイルメントが要らないと。 で、これでまた乗ったりして、まあそれはさすがにないかな。 これで動かしてみて、で、まずOSの画面に乗って、 まずはなんと何もフィルターかけていなければ動く。 で、カテゴリーによるフィルター。 これでもほしい、ちゃんとオンオフしますよね。 で、Favorites Onlyを押した時に、やばい危ないですね、これがね。 で、オンテンチも多分発動していないはずで、 フィルターが言えることは2個、ただ2個はあんまり関係ないですよね。 ブールの条件式が変わるだけなので、これによって影響するとはちょっと考えにくいので、 こう思うと、Favorites Only、これがオンになった時だと思うんですが、 で、もうテモになるのかな。 テモにはならないか。IsFavorite Onlyだった時に、 そうだ、干渉するもの、カテゴリーをいじれない。 カテゴリーはディテールではいじられないけど、 IsFavoriteはカテゴリー、違う、 IsFavoriteはディテールではいじられるっていう要件の差がありましたね。 なので、IsFavoriteのランドマークで、 バインドしたランドマークを取ってってるから、 もしかして、この可能性がありますね。 そうすると、IsFavoriteの変化を検出させるには、 どうしたらいいんだ。 ここでIsFavoriteをディテールにも渡す。 ただと分散するの嫌ですね。 バインディングと分散が嫌だなぁというところがあって、 まぁちょっといっぱいやってみますか、バインディング。 まず、バインディングは、IsFavoriteでやってあげて、 IsFavoriteをランドマークのIsFavoriteじゃなくて、 バインドしたIsFavoriteをセットしてあげるにして、 それで、このディテールのところで、 IsFavoriteをランドマークのIsFavoriteという風にしてあげて、 それで動かしてみましょう。 これで、ビルドエラーはこっちか。 ここは、コンストでとりあえずね。 IsFavoriteをコンスタント、 いや、コンスタントとかじゃなくていいですね。 モデルデータ、ランドマーク数の0のIsFavorite。 これでいいですね。 これで動かしてみて、IsFavoriteが切り替わるようだったら、 バインディングのミスマッチが起こっちゃったよということが、まぁわかる。 まず普通に動く。 で、これで、FavoriteOnlyにしたときに、このFavoriteOnlyが動かないですね。 動かないというか、映像は変わらないですねという状況か。 これではなかったようですね。 そうすると、バインディングがこれではダメだとすると、 オンチェンジ。オンチェンジさえもダメなのかな、これが。 例えば、一回ログを消して、このフィルタ状況で一回押すってやったときには、 ログ出てないですね。 なので、ランドマークのIsFavoriteが動いたという、 そういった認識ができない状況になっている。 バインディングがおかしい。 でも情報が変わっているから、バインディングがちゃんと更新されていないという状況になっているのかなという、 そんな感じがして、FavoriteOnlyをオンにしたことによって、 オフにするとリストから消えちゃうというところが、 問題なのかもしれないですね。 そうした上で、IsFavoriteを個別に渡す必要は必ずしもないのかなという気がするけれど、 ローがなくなったときに、バインディングが失われるか。 失われて、どうしたらいいんでしょうね、これね。 とりあえず、ランドマークディテールのバインディングを消してあげて、 バインディングのIsFavoriteは元に戻しておきますかね。 ランドマーク、バインドがちゃんとしていれば、 IsFavoriteでリストの方が変わるんですけど、 こっちの自分自身の方が変わらないという状況などがしたいという、 そういった状況なので、オンオフしたときに、 ボーカルに扱いを持っておく。 それもおかしい気がするから、 これでとりあえず、ここのIsFavoriteを何とかしていかないといけないということになって、 それで対応するには、ランドマークリストのここですね、バインディング。 このランドマークディテール、これのランドマークのバインディング、 これがローにしたときに、リストから消えてしまう。 リストから消えてしまうと、ああ、そっか、何かがあった気がする。 つまりこれをクリックしたときに、このバインディングでこのビューが表示されているんですけど、 これをオフにしたときに、リストから消えてたどりもとがなくなって、 これが浮いちゃってますよね。 このせいかな、もしかして。この可能性が何かありますね。 なのでここが、バインドが何故か効いてるけど、 元が効いてるけど、こっちのディテールビューが持っている方のバインディング、 これが無効になっちゃうという感じの気がしますね。 そうすると、フェイバリットオンリーのときにクリックしたとき、 このときに何とかしておかないといけないんですかね。 何とかしておくってどういうことだろう。ランドマークリストのローですね。 つまりこのローがなくなっちゃってますね、確かに。 ランドマークローとリンクが取ったときのこのローが。 だからそうすると、フェイバリットオンリーでも表示中のものに限っては、 言えないようにするということをすればいいのかな。 何か難しそうですよね。フェイバリットオンリー中で言えないようにする。 フィルターを動かす必要がありそうですかね。 例えば、セレクティッドランドマークみたいな。 こんな状況にすればいいんですかね。 だから、OSでアットマークで、デートでプライベートバーで、 セレクティッドロー、セレクティッドローじゃないな。 ローじゃなくて、ランドマークか。 セレクティッドランドマーク。 なので、セレクティッドランドマークイコールイコールというか、 これがランドマーク型のオプショナルにして、まだ選択されていない状態。 これを作った上で、セレクティッドランドマーク。 これは条件として、iOSでいいか。 セレクティッドランドマークはもういいか。 これで、例えば、フィルタードランドマークス。 ここの中で、OS用のフィルター1個。 例えば、さっき作ったやつかね。 function is selectiveCondition.ThisFileIsWithRandomMark として、これでランドマークという形でプールを返す。 これでプールを何を返すかというと、ランドマークのIDと、 先にオプショナルを出しちゃおうかな。 セレクティッドランドマークのIDとランドマークのIDが一致してたら、 選択してるやつですよね。 このフィルターを、フィルターコンディションと、 これにアテンドしてあげる。 アペンドしてあげるけど、アペンドを忘れるのが嫌ですね。 ここパターンを変えたい気がするけど、また後にしよう。 とりあえず動くことが重要ということで、 ifSelectedCondition.SatisfiedWith を条件として、さらに追加してあげると。 これで、選択中の表示中のロー。 これは、もし多いぐらいでいても消えないから、 バインドがおかしくなることは、多分ないはず。 これで、できたのかな。セレクトの状態か。 セレクトしたことを検出するには、どうするんだ。 セレクティックは、リストを選択して、 ティティールが出るときですか。 そうすると、リストの中の、4位置でナビゲーションリンク。 これは、Viewですよね。 4位置で選択したときか。 リストを選択したときに、これを取るには、どうするんだ。 タグみたいなの。フォーカスとかなんかありますよね。 でも、やるかがわからない。 調べてみないとわからない。 SwiftUIリストですね。 選択したL。こんな感じで選べると。 リストのセレクションパラメーター。 リストで、セレクション、$セレクション。 $セレクションはストリングのセット。 選択されたアイテムを格納する。アイテム図。 アイテム図が間違えた。なるほど。 あとは、4位置。あ、4位置か。 4位置にもあるかな。4位置がないかな。 セレクション。セレクションは、4位置。 4位置か。調べ直しですね。 これを、4位置。4位置だと、どうなるか。 選択可能なリストの作成方法で。 そのリストの作成で、リストセレクション。 ここまでいいのか。 リストに対して、よくできてますね。 これによくわからないって感じがする。 セレクション。そして、バインディングで、 セレクティックランドマーク。 これだと、またフィルターですかね。 大丈夫かな。バインディング。 セレクティックランドマーク。バインディング。 バインドだったと思うんですけど、大丈夫なのかな。 本当かな。セレクティックランドマークですよね。 セレクティックランドマークがあれば、 ちゃんと動いてればこれでOK。 どうかなこれ。わかんないですが。 これで、セレクトランドマークとか。 セレクティックランドマークの状況が間違えた。 セレクティックランドマークのIDが一致している場合、 選択しているものを&か。 フィルターコンディションは&ですね。 全部&だからこれじゃダメなんだ。 だから、オアにしないといけないってことは、 フィルターコンディションの表現がダメですね。 &かオアかオールサティスファイだけど、 オールサティスファイだけどそうではなく、 やることとしては、フィルターコンディションで、 ランドマークとブールだとオペレーションですね。 なのでこれが、ブールとブールをとって、 ブールを返す関数を返すというアプル型で、 この型を定して、だからフィルターコンディションズで、 レベル名何にしようっていうね。 最初は判定だから、プレディケイトというかな。 プレディケイト、すごい雑な名前になっちゃいますが、 これでオペレーションを押してあげると、 フィルターを追加するときに両方持てるわけですよね。 フィルターコンディションで、頭から&&オアが やらないといけないから、これだと&&オアで、 難しいな、&&オア。 オアだと、オアが最初で&&だと、 オアがトゥルーだとオッケーですね。 だから優先順位も考えないといけないな。 どうしようかな。とりあえずやってみましょう。 すごい雑なコードになっちゃいますが、 これは&条件ということで、と思ったけど実はできなかった。 フィルターコンディション。 フィルターコンディションがこのパターンですよね。 プレディケイトでランドマークを取ってブールを返すものと、 オペレーションでブールを2つ取ってブールを返すもの。 これのアプリの配列であるとした中で、 オペレーション&率。 これはランドマークを取ってブールを返す関数ですよね。 それと&&が間違い。あれでもダメか。これダメか。 &&これが関数ですよって書かないとダメってことないよね。 ないですね。そうすると何が間違ってるんだろう。 ランドマークブールを返すのとセンダブルで、 オートクロージャーになっちゃうのか。 オートクロージャー演算子を追加で渡したいから、 こうやってブールを返す関数。これでいいのかな。これでアップエンド。 これもダメか。スローズか保持か。スローズとしてあげると、できましたね。 これ&&演算で追加した。 これはフィルターコンディションアップエンドでランドマークが、 これは何だっけ。アイデアチェック。これがマッタワーですね。 必ずの条件なのでマッタワーにして、それでもう1個。 演算子の優先順位がちゃんとできていないので、それを応用しないといけない。 とにかくオールサティスファイじゃなくて、ここがREDUCEになりますね。 REDUCEでTRUEから始まって、最初がパーシャルリザルト。 あとがコンディション、フィルターコンディション、フィルターコンディション、コンディションでいいか。 パーシャルリザルトじゃなくて、コンディションのオペレーションとしてパーシャルリザルトと、 あとはコンディションのプレディケートでランドマークを渡したやつですね。 ランドマーク、プレディケート、コンディション、フィルターコンディションのプレディケート。 コンディション、パーシャルリザルト。パーシャルリザルトはIN、OUT。 パーシャルリザルトは普通のプール型ですね。 プールとコンディションのプレディケート。これに対してランドマークはフィルターコンディションをREDUCEで、 これはまりかけなんですよね。 フィルターコンディションをREDUCEでTRUEから始まり、パーシャルリザルト、コンディション、INですね。 コンディションのオペレーションとしてパーシャルリザルトとコンディションプレディケート、ランドマーク。 プールが変わるはずなんだけど、変ですね。 コンディション、プレディケート、Defined Graphic Property、ランドマーク。 コンディション、コンディション、プレディケート。 プレディケートとオペレーションのメンバーはプレディケートと言いがちがいますね。 プレディケート、これは大丈夫と。 これは大丈夫な中で、これに渡すとダメなのが、ここオートブロジャーを取っているからな。 オートブロジャーを渡すのではなくて、非常にわかりにくいことになっていました。 これでOKかな。 オイドを取ってブールを返す。 ビルドをかけてみると、これはビルドが通らなかった。 ここは通らなかったけど、ここはビルドが通らなかった。 丸かっこがない。丸かっこがない。 ここがダブルかっこがないですね。 それと、スローイングファンクション。 スローイングファンクションだから、何とかしないといけないけどって感じで、 ここがドライビックリマークが非常に良くないことですね。 ドライ、中。ドライ、こっちがここの中。 プレディケートだからドライビックリマーク。 コンディションが、これコマ台はですね、スローする。 オペレーションがスローする。 オペレーションがしますね、確かにね。 ドライビックリマーク。 なるほど。 こうしてあげると、条件が変わる。 まだ優先順位ができていなかった。 大優先事項として、これが入るわけで、パーシャルリザルトというか、 IsFilterSatisfiedもそうなんですが、この時にセレクティブコンディション。 これが、IsFavoriteよりも優先的に上がらないといけないので、 このIsFilterコンディションのFavoriteコンディションは、 これらより後に入れるという形にして、これで優先順位は一応、 柔軟性が全然ないですけどね、とりあえずコード上は表現できて、 そうすると選択されていたものを第一優先として、Favoriteオンリーにすると、お気に入りだけ。 で、セントマリベックを外すと、星が消えないか。 リストから消えただね。 リストから消えたということは、あーなるほど、確かに。 条件が、何々Oは何々&だから、コアが演算されて、A&B、OはCか。 だから、安楽評価で見たときに、A&BまたはCってやると、 両方が満たさないとダメだから、丸カッコが入りますね。 丸カッコが入るとなると、このフィルターの仕組みは ちょっと良くない気がしてきましたかね。 こんな難しいコードにしなくてよかったなという、そういった状況ですかね。 そうすると、ざくざくと戻していって、リリュースをやめて、 もう一回ゴールサティスファイに戻してあげて、 リストここは良い、セレクションは良い。 この条件のところで、フィルターコンディションを作る前に、 フィルターコンディションを判定する前に、 その前にセレクティブ化動画を見る。 これでセレクティブ化したら終わりということですね。 なので、フィルターのここだ、フィルターのここだ、ここで、 is.condition.selected, is.selected.condition, というか、is.selected.randomarkにしますかね。 is.selected.randomark、というかここも条件で書いてありますか。 ランドマークセレクティブ、ランドマークのIDが、 ランドマークのIDと一致しているか、 または、これね、条件。 これぐらいなら良いのかな。 もうちょっとやっぱり分かりにくいですかね。 $0、$0がここか。 だから、is.selected.is.selectedでランドマーク、 is.randomark.selectedがランドマークセレクティブ。 これで、ある格好で、奇数を取る形にして、 is.randomark.selectedという関数、これを、 後はね、これでもなく、これでもなく、 is.selected、これですね。 これで、 関数を外に売らないといけないのか。 ああ、そっか、なるほどね。 これを取ってあげて、is.selected.randomark、 これは外に出しますか、とりあえず。 これで、is.selected.condition.satisfiedを押して、 is.selected.randomarkをこの辺に用意して、 それで、is.selected.is.randomark.selectedで安定をして、 さらに、このselected.randomarkは外に出しなきゃいけない。 こんな感じですかね。 これでビルドが通るので、動作確認をして、 またこそ大丈夫な気がするんですが、あれ、これなんか実行してないですね。 実行をかけて、これは macOSで、 それで、これでセレクトしている状態で、 valid onlyにすると、ここ消えますか。 消えて選んで、この状況で後ろを押す。 消えちゃった。ダメだ。失敗した。入れちゃうか。 入れたってことは、selectedなんだ。 この値のselected.randomarkが、 なんと反映されていないような気がするので、 この辺りをやりたいんですが、リストで、 これが、iltered.randomarkがbinding.randomarksですよね。 binding.randomarksで、 ああ、そっか、ランドマークが選択されたようになるのか。 ああ、そっか、うーん、そっか。 そうすると、リストのセレクションがあるから、 ここでちょっと1個見ておきますかね。 .onchangeof selected.randomarkで、 このときにプリントで選択されたランドマークの名前。 だから、ここでランドマークいいですか。 ランドマーク、こんな感じかな。 こうするかどうか。 ダメですね。ここがbindingランドマークの、 どうなるか。 selectedのランドマーク。 value-functionalタイプランドマークは、 アンラップしないといけない。 ああ、そっか。 ??が必要。または、びっくりマークが必要。 onchangeof。onchangeofで、 ええと、そっか。onchangeofでオプショナル。 selectedランドマーク自体は、 ランドマークのオプショナル型で、 ランドマーク型はタッチアブル化。 じゃあ、比較可能ではありますね。 そうすると、onchangeがニルじゃダメなのかな。 どうやって考えられるのか。 onchangeの定義読みますか。 onchangeofでイコーダブル。 で、イニシャルでアクションがイコーダブル2つか。 これがランドマーク、オールドランドマークと、 ランドマーク。これいいのかな。 でもダメかな。イコーダブル。 オプショナルが中身がイコーダブルだったら、 イコーダブルですね。 確か。 なので、これでビルドが通るということでいいんですかね。 どうなんだろう。 あ、ダメか。 ビルドが失敗で、ドラが出る。 オプショナルですもんね、やっぱりね。 で、えっと、はてなはてな。 そして、強制アンラップ。 selectedランドマークを強制アンラップか。 ちょっと怖いけど、 まず実験なのでやってみましょう。 これでビルドが通って、 最初の1回がonchangeが発動しなければ、 良いのですが、 ああ、ダメだ。 壊れちゃった。 onchangeがそうなっちゃうのか。 そうすると、nilを考慮した場合、 onchangeが使えないとすると、 swiftUI。 swiftUIでonchangeで、 オプショナル。 検索効果にちゃんと出てきますね。 オプショナルステートバインディングで、 onchangeでは、 オプショナルが導入できるって書いてありますけど、 これAIによる回答だから大丈夫かな。 onchangeを、 onchangeは、 オプショナル。 オプショナルとイニシャルがいるのかな。 onchangeの、 一緒。 えっと、これを見てみますかね。 onchangeが、 えっと、onchangeインデックスで、 オプショナルインデックス。 あ、これ知ったばかりなの。 無いか。 えっと、だから、 これでonchangeをちょっと手に取ってみますか。 えっと、 出てこなくなった。 じゃあ、 交換候補。 .onchange。 で、 onchangeの、 交換。 えっと、 Vか。 この辺が、 オブVでイニシャルブールで、 これでアクションでスケッピング。 これは、何だろう。 どっちが変更するやつですかね。 変更というか、古いと新しいのをね、 検出するやつ。 オプショナルがちょっと出てこないですね。 オプショナルは、 onchange、オブ。 これで、 onchangeは、バリュー。 あれ、これがディプリケートのやつですよね。 それで、オブイニシャル、 onchangeのどっちだ。 まだ手でもわからないから言ってみますが、 これでオブバリューでVで、 Vは特に何も、 えっと、規定されていない。 Vはイコーダブルか。 Vはイコーダブルで、 バインディングが、イコーダブルじゃない、 っていう感じ。 違いますかね。 バインディングですね。 これをやるとすると、 エレクティックランドマークのラブドバリューだ。 これで大丈夫なんじゃないかな。 エレクティックランドマークは普通のランドマークのオプショナルでしたね。 これでランドマークが開かれているから、 イコーダブルですよね。 イコーダブルのプライベートバーのステートですよね。 ラブドバリューではないことは、 確かなようで。 これは、バインディングに無理やりすると、 何にも変わらない、変わらない感じがありますかね。 ビルドをかけて、ビルドフェイル。 ビルドフェイルの中で、モデルデータが見つからない。 モデルデータ、これは、ユニットを押した感じ。 モデルデータ、いますよね。 これは関係ないエラーですね。 ビルドをもう一回かけて、ミシンコンピュメント。 これはダメですね。 押してあげて、ビルドをかけて。 これだと、バインドしたのをラップするというね。 そういったことをやってますけど、これだとどうでしょうね。 ビルドが終わらないかな。 終わらないですね。 ラップドバリュー、ランドマーク。 これは、これもダメかな。 ランドマークのバインドで、名前が誰でもいないしね。 ここは、普通のセレクティブランドマークで、 これもオプショナルだから、ダメですよ。 という、そういったお話になっていて。 ここを何とかするには、 セレクティブランドマークの、例えばIDにしてみましょうか。 ID。これだとオプショナルのストリング。 じゃない、イントガタ。 これ、ハッシュですけど、ハッシュというか、 イコーダブルで間違いないはずなんですけど、 これもダメか。ID。または0とか0。 これは通りますよね、きっとね。 念が通らないか、今度はね。 ビルド中で、結局通らなかったか。 フェイトエラー。これは関係ないですね。 ビルドのエラーがどうなっているか。 ここじゃないのかな。 エルデータ。今、ビルド中ですね。 ビルド中で、ビルドフェイル。 コンパイラーのエラー。ここか。 この辺はランドマークをとりあえず表示するにして、 これでランドマークのIDがビルド成功しましたね、これでね。 なので、IDが変われば何か反応が得られるでしょう、 という、そういった状況になったと。 あれで選択すると、エルバーサーモンクリーフですが、 何も勝てない。 例えば、飛べるかな。1回ちゃんと落としてみました。 実行をかけて。 0で動いたら、何かを選択する。 そうすると、Executableにログでないですね。 なので、オンテンチが反応しなかったということが分かった。 だから、リスト、この辺のリストの検出。 これが間違っている可能性があって、それで、この間違いを知るためには、 リストの中のセレクションのセレクトランドマークと、 あと、フィルタードランドマークですね。 フィルタードランドマークは、どんな形かというと、フィルタードランドマーク。 これが、バインディングのランドマークですね。 バインディングのランドマークですね。 リストのバインディング、その辺が分かってないのかも。 リスト、4、1、セレクション、リスト、1はこの辺で見ていって、 選択可能なリストの生成として。 それで、リスト、セレクション、セレクトバリューで、 タグ入れてますね。タグ12、20、30。タグを入れないとダメか。 この可能性が十分にあり得る。 あり得すぎそうな、そんな感じがする。 リストで、4、1で、これは違うね。この後かな。 リストで、4、1で、ここも違うね。またですね。ここも4、1で、セレクション。 ただ、セレクションバリューを用意して、 バーソン型のデータ保持で回しているので、バーソン型にする。 この4、1で回すデータの型と、 選択したデータ保持する変数の型が一致していないと、正しく動作しない。 この前提の上で、リストで4、1で、ここはまだかな。 セレクトバリューを使っただけか。で、オプションがあるんですね。 それで、セレクションを指定してから、 セレクトバリュー、これを指定する。 そうするだけで、選択可能になると書いてある。 なので、4、1で回したやつのIDが、Elf。 このIDも何か聞いてきそうな、そんな気がしますね。 とりあえずその辺を理解できたら、 バインディングランドマークスですけど、 これ、バインディングかな?そうすると、 セレクティックランドマークが、バインディングのランドマーク。 こんな風にして、それで、バインディングランドマーク 定義したから、バインディングランドマーク。 バインディングランドマーク型定義してますね。 じゃあ、それを使いましょう。 バインディングランドマーク型にして、 それでこれで、できたかな? そうすると、ここのエラーで、セレクティックランドマークの バインディングだからラプトバリューですね。 ラプトバリューのID、 これで実行してみましょう。 形が一致してるとしたら問題なので、 変更がされてリストにちゃんと残るということになると思ったけど、 ラプトバリューが、だからセレクティックランドマークを 使ってる他の部分、 セレクティックランドマークは、 セレクティックランドマーク、 ここのセレクションの他に、本当では、セレクティックランドマーク。 これの、ここが、セレクティックランドマークの、 ここですね、ラプトバリュー、これのID。 これで、ビルドが通るので、 スタートに実行してみて、 これでちゃんと動くのかな? またビルドフェイルか。 ビルドフェイルで、ビルド、エラーの箇所はモデルデータ。 これは古いですね。 これはローパルで、iOS用で、ここなんですけどね、ビルドが、 ここ?ここじゃないですね。 どうですか?OS用のビルドだから、 こっちだ、OS用のビルドで、 ここだ、タイプチェック、タイプチェック、 コンパイラーのタイプチェックが、 この辺が、オンチェンジ、この辺ですかね。 ラプトバリュー、セレクティックランドマーク、 ラプトバリュー、バインディングだから、 ラプトバリューで、いいと思うんですけど、 そのバリューの当ての中、ここもね、 これでビルドかければ、これでOKですかね。 やることは、ディスクにちゃんと選択されているものが 残るかどうかですよね。大事だとかね。 それで、またビルド失敗だ。 えーと、ビルド失敗は、MacOSで、 MacOSのビルドの失敗は、 ここが、これの、タイプチェックがやっぱり、 この辺がダメで、これでランドマークのラプトバリュー、 この辺のラプトバリューのオンチェンジが問題だと思うんで、 とりあえずこれ抜きでビルドしてみますか。 型があってればと思ったけど、まだダメだ。 ここが、セレクティックランドマーク、あ、これがダメだな。 これの、ラプトバリュー、これでいいのかな。 セレクティックランドマークのラプトバリュー、あ、これはダメか。 オプションで、マテナを除外、マテナを除外、 これは関係ないですよね。 これでオプショナルのままじゃないや。 これは普通にダメですね。 ディフォルトバリュー、それも違いますよね。 すると、セレクションが難しいですね。 これで、4イチで、セレクションが難しいな。 4イチで、例えばID、そしてID、という風にした時に、 セレクティックランドマークというものを、 プリングで持てるのかな。どうなんだろう。 えーと、そうはいかないのかな。 プリング、とりあえずストリングでビルドをかけて、 ビルドをかけると、これはこれでミラーですね。 ラプトバリューがIDになるんで、 それはそのまま比較して、それでもダメか。 あ、そっか、バインディングとかやってないから、 セレクティックランドマークが素直なIDになっているとして、 それで、セレクティックランドマークが、 ストリングですよね。 ストリングがコンバートできない。 ストリングからイント、あ、そっか、イントか。 だからイントのオプショナルですね。 イントのオプショナルで、これでビルドをかけて、 ビルドが通って、ディフォルトをかけて、 ID取れるのかな。 選択で、これをエバリットオンリーにした時に、 お、残りましたね。 選択を変えると、これで星が消えますね。 ちゃんと消えた上に残ってますね。 これでできた。うん、あ、いいですね。 やっぱりこのローが消えちゃったから、 このバインディングがもう失われたって、 スターがね、反映されなくなっちゃったっていう、 まあそういった状況ができてしまった ということが分かったので、 これはなかなか、ゆっくりですね。 どうするんだろう。 フィルターを、まあこれでいいんですけど、 これで良いけど、星をなくした上で他のを選んだ時にね、 もうすぐに消えちゃう。 これが気になるんですけど、 ここまで気にする場合は、もうちょっと、 配列でセレクティックを選択するのか、 あとは、表示すべきIDというのかな。 これを、スナップショットをとっておく。 フィルターをいじるまでの間、 スナップショットをとっておく。 そういったことで、なんか、 回避できそうな感じがしますかね。 フィルターで、マップショット。 だから、フィルターと、えーと、アイテム。 フィルターと、えーと、ランドマックスか。 フィルターとランドマックスを、計算型じゃなくて、 このフィルターをいじった、その後ですかね。 フィルターをいじった時に、ボタンを押してあげる。 そういったことをすると、フィルターをいじらない限りは、 リストが変わらないという事がね、できるようになるから。 それでもいいですね。フィルターをいじった時。 フィルターをいじった時に、忘れないようにしないといけない。 それが重大ですが、フィルタードリスト。 フィルタードリストの変更は、 リズセットしかないかな。 依存した場合に、それを更新するためには、 えーと、やることとしては、 フィルターが変更されたかどうか。 だから、フィルターをクリックしたかどうかですかね。 このメニューをね。 フィルターをクリックして、変更された時。 変更された時に、値が変わる。 値が変わる。なので、この値を監視して、 ラベルリストを更新してあげるか。 フィルターを構造化して、フィルター画像を作って、 それをハッシュアブルにして、 そのハッシュアブルが変わった時に、リストをリセットする。 それでいいですね。 そうしてみますか。 これをまた次回にしてみますかね。 とりあえず、なんとかフィルターが反映できるようになったところで、 次はリファクタリングですね。 これをやっていく会議。 そんな感じで次回お会いしましょう。 ではこれで終わりにしますね。 お疲れ様でした。
