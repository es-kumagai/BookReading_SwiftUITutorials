■ ダイジェスト

技術書（Apple 公式 `SwiftUI Tutorials`）を読み進めながら学ぶ回です。Chapter 4 `Interfacing with UIKit` を題材に、`SwiftUI` と `UIKit` の連携、とくに `UIPageViewController` を `SwiftUI` でラップしてページング UI を作る流れを追いました。具体的には、`UIViewControllerRepresentable` に準拠した `PageViewController` を作成し、`makeUIViewController(context:)` で `UIPageViewController(transitionStyle: .scroll, navigationOrientation: .horizontal)` を生成、`updateUIViewController(_:context:)` で `setViewControllers(_:direction:animated:completion:)` を用いて初期ページをセットする実装を確認しました。`SwiftUI` の `View` を UIKit 側に載せるために `UIHostingController(rootView:)` を使用する点や、更新のたびに都度生成するのではなくコーディネーターでコントローラ配列を保持する方針も扱っています。併せて、`Coordinator` を定義し、`makeCoordinator()` の実装、`UIPageViewControllerDataSource`（必要に応じて `UIPageViewControllerDelegate`）への適合、`dataSource` を `context.coordinator` に設定する手順を学びました。`pageViewController(_:viewControllerBefore:)` と `pageViewController(_:viewControllerAfter:)` のインデックス計算は、`startIndex`／`endIndex`、`index(before:)`／`index(after:)` を用いて端で循環させるロジックに整理しています。また、`setViewControllers` は初期表示に 1 要素だけを渡す必要があること、複数要素を渡すのは期待どおりに動作しない点を確認し、原因を踏まえて修正しました。表示側では、汎用の `PageView`（ジェネリック）を作成し、ページとして `FeatureCard` の配列を渡してプレビューできるようにしました。モデル面では、`ModelData` に `features` 計算プロパティを追加して `landmarks` を `isFeatured` で `filter` する構成を取り、画像アセットを用意したうえで、`FeatureCard` と `TextOverlay` を作成し、`Image` に `overlay`、グラデーション、テキスト（`name`／`park`）を重ね、`aspectRatio` を合わせる手順を進めています。その他、ライフサイクル上の前提として `@MainActor` の適用や、デリゲート／データソース適合のしやすさから `Coordinator` を `final class` ＋ `NSObject` 継承にする判断にも触れました。全体を通して、実装を写経するだけでなく、`SwiftUI` と `UIKit` の橋渡しで必要な責務の分担やインデックス処理の落とし穴を確認しつつ、手を動かして理解を深めています。