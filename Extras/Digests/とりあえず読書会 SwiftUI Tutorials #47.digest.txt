■ ダイジェスト

SwiftUI Tutorials のサンプルアプリのビュー周りを読み進めながらリファクタリングしました。`ModelData`、`@Environment`、`@Binding`（`showingProfile`）の扱いを確認し、カテゴリ別の絞り込みは `landmarksByCategory` を計算型プロパティとして切り出す方針を検討しました。`NavigationSplitView` と `List` では、計算型プロパティを毎回評価しないよう一度ローカルに取り出して使い回す構成にし、再計算やインデックス不整合のリスクを抑えることを意識しています。また、公開プロパティの変化とインデックスアクセスのズレによるランタイムエラーを避けるため、Swift の値型特性を活かしてローカル確保する判断についても確認しました（`String` と `Substring` の参照元一貫性の話題も含む）。 `featuredLandmarks`（`Binding`）から `FeatureCard` を並べる箇所は、`wrappedValue` を明示的に取り出してから `init` する書き方と、`map` で直接 `FeatureCard(landmark:)` を適用する書き方を比較し、可読性と中間配列回避の観点から `.lazy` を試すなど、`.map` 連結のパフォーマンスと表現のバランスを検討しました。カテゴリ表示ではプレビューで `Lakes`、`Mountains`、`Rivers` の挙動を確認し、ゼロ件カテゴリは除外するフィルタを入れる必要性を再確認。`landmarksByCategory` が `landmarks` 由来であるため存在しないカテゴリは基本的に現れない一方で、検証強化のためのフィルタやアサーションを加える判断を整理しました。イニシャライザ周りでは、`Category` 指定の前提条件チェックや、`Binding＜[Landmark]＞` からの初期化で空コレクションを許さない方針について、`fatalError` ではなく `preconditionFailure` や `assert` を使い、デバッグでは厳しく落としてリリースでは過度にクラッシュさせない構成を検討しました。UI の分割では、`ScrollView` での一覧表示を `LandmarkList` のような小さなビューに切り出す案も試し、読みやすさと再利用性の向上を目指しています。