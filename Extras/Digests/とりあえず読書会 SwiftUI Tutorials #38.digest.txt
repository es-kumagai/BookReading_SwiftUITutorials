■ ダイジェスト

SwiftUI チュートリアルを読み進めながら、チュートリアル実装の仕上げとして、`List` の `selection` と `NavigationLink` 周りで「初回のタップが無視される」挙動を中心に原因調査とリファクタリングを試しました。具体的には、`selectedLandmarkID` が `nil` 初期状態のときに最初の選択だけ詳細が開かれない現象を再現し、`onChange` で `oldValue`／`newValue` の遷移ログを確認、詳細側に `onAppear` を付けて実際に表示されたタイミングを `print` で観測しました。`ViewBuilder` 内で `print` を使えるようにしたデバッグ用拡張を活用しつつ、`filteredLandmarks` を更新する処理（`updateLandmarkList`／`updateFilteredLandmarks`）が走るタイミングと選択状態の関係を検証。`animation(.default, value: filteredLandmarks)` の無効化、`onAppear` と `task` の実行順の比較、`List` と `ForEach` の構成差、`selection` と `.tag` の併用、`@State` の `selectedLandmarkID` を `Landmark` バインディングに変える案、`List` の `selection`／`id` を受けるイニシャライザの利用、`Favorites Only` などのフィルタ切り替え時の選択維持可否、といった代替案を一通り検証しました。`if let` で `selectedLandmarkID` からモデル検索して詳細表示する分岐は動作を改善しましたが、`nil` から最初の選択へ遷移するケースで選択が外れる挙動は残っています。最終的な完全解決には至っていないため、次回以降も `List` の選択管理とデータ更新のタイミングを踏まえた設計を継続検討します。