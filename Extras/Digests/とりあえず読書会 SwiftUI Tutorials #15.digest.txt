■ ダイジェスト

技術書を読み進める様子を記録した回です。SwiftUI Tutorials の 「Animating Views ＆ Transitions」 の 「Composing Complex Interfaces」 を題材に、読みながら実装とリファクタリングを行いました。具体的には、`CategoryHome` の `body` で `ForEach` により `CategoryRow` を生成し、`ModelData` のカテゴリ別辞書を活用する設計を検討。辞書アクセスの可読性向上のために `typealias LandmarksByCategory` を導入し、`extension` で `var categories` を提供して `keys` を直接露出しない方針に整理しました。並び替えはソース側では固定せず、必要箇所で `sortedByName` を適用する方針に変更しています。フィーチャー表示では、`Landmark` に `isFeatured` を追加し JSON と `CodingKeys` を更新、`ModelData` に `featuredLandmarks` を用意。`CategoryHome` 先頭で `if let featuredLandmarks.first` を安全に取り出して画像を表示し、`listRowInsets(EdgeInsets())` によって左右インセットを 0 にしました。ナビゲーションは、`CategoryRow` 内で各ランドマークを `NavigationLink` で `LandmarkDetail` へ遷移、ラベルは `CategoryItem` を利用。外観は `renderingMode(.original)` と `foregroundStyle(.primary)` に調整しました。状態管理では、`@EnvironmentObject` な `ModelData` を前提に、`FavoriteButton` へ `Binding(get:set:)` で `isFavorite` の計算バインディングを供給。配列内の値型更新を確実に反映させるため、`ModelData` に `setFavorite(_:to:)`（およびインデックス解決を通じたバインディング取得）を用意し、フェイバリット切り替えが一覧やフィルタ表示に反映されることを確認。プレビューでは `.environmentObject(ModelData())` を付与して動作を検証しました。アプリ構成は、`ContentView` に `enum Tab { case featured, list }` と `@State private var selection` を置き、`TabView` に `CategoryHome` と `LandmarkList` を配置、`Label("Featured", systemImage: "star")`／`Label("List", systemImage: "list.bullet")` と `tag`（`Hashable`）でタブ切り替え可能にしました。命名は、カテゴリ別データを `landmarksByCategory` に整理し、ビュー名 `CategoryForm` は保留としました。なお、「後でカルーセル化する可能性」や 「UI Essentials／Handling User Input への参照」 は言及のみです。