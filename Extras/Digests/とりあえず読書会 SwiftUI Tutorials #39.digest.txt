■ ダイジェスト

この動画は、技術書（チュートリアル）を読み進めながら実装とデバッグを行った記録です。SwiftUI チュートリアルの続きとして、macOS アプリのサイドバー選択周りを中心に検証しました。具体的には、macOS の `NavigationSplitView` ＋ `List` で `selection` を `Optional`（ `nil` 初期値）にした際、初回のクリックが一瞬選択された後に `nil` に戻ってしまう不具合を、最小構成で再現・切り分けしています。`@State` の `Int?` を `List` の `selection` にバインドし、`ForEach`／`NavigationLink` の有無、`NavigationStack` ＋ `navigationDestination(for:)`、`.navigationSplitViewStyle(.balanced)` の適用などを試し、挙動の変化を確認しました。最終的には、サイドバーでは `NavigationLink` を使わずにラベルのみ表示し、ディテール側で `selection` の ID を基に表示を切り替える回避策で安定動作を得ています（例：`if let item = items.first(where: { $0.id == id }) { ... }`）。学習用プロジェクトにも適用し、`selectedLandmarkID` から対象を取得する `func landmark(by id: Int) -＞ Binding＜Landmark＞` を用意、`selectedLandmarkID.flatMap { landmark(by: $0) }` を使った `var selectedLandmark: Binding＜Landmark＞?` を介してディテールを切り替える形に整理しました。あわせてクロスプラットフォーム検証を行い、`FocusedValue` は `#if os(macOS) || os(iOS)` で限定。モデル面では、`Category` の表示を `description` に統一し、`Text` の拡張で `Category` から初期化できるようにし、`Category` を `Comparable` 準拠として `sorted()` で並べ替えるように見直しました。お気に入りフィルタ時の再構築でバインディングが切れやすい挙動も、今回の見直しで意図どおりに近づいていることを確認しています。全体として、チュートリアルを読み進めながら原因を切り分け、いくつかの方針を比較検討し、回避策を導入して挙動を安定させるところまで進めました。次回は引き続きリファクタリングを進めます。