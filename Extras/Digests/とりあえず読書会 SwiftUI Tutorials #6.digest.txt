■ ダイジェスト

この動画は、技術書・公式チュートリアルを読み進める様子を記録したものです。今回は SwiftUI チュートリアル 第 1 章「Handling User Input」を題材に、ユーザー入力に反応するビューを作りながら学習しました。扱った技術的なトピックは次のとおりです。- お気に入り機能の下準備: `Landmark` に `Bool` 型プロパティ `isFavorite` を追加し、`CodingKeys` を明示している場合は `isFavorite` を忘れずに追加。`Decodable` エラーの原因と対処を確認しました。- 行ビューの拡張: `LandmarkRow` に `if landmark.isFavorite { Image(systemName: "star.fill") }` を追加して星を表示。`foregroundStyle(.yellow)` で色付け、文字列リテラルの分散を避けるため小さな `StarImage` ビューへ切り出す方針にも触れました。- フィルタリングの導入: `LandmarkList` に `@State` なフラグ `showFavoritesOnly` を用意し、計算型プロパティ `filteredLandmarks` を定義。`filter` と条件 `!showFavoritesOnly || landmark.isFavorite` で「すべて／お気に入りのみ」を切り替える実装を検討しました。- List 構造の整理: `List` に静的ビュー（`Toggle`）と動的ビュー（`ForEach`）を組み合わせて配置。`Toggle` は `isOn:` に `$showFavoritesOnly` を渡してバインディングし、`ForEach(filteredLandmarks)` の各行に `NavigationLink` を付与しました。`Identifiable` なデータを `ForEach` に渡す基本も確認しました。- アニメーションの付与: リスト更新に `animation(.default, value: filteredLandmarks)` を適用し、フィルター切り替え時の変化をアニメーションさせました。- 観測とデータ共有: `@Observable` を用いる前提で `final class ModelData` を作成し、`Bundle.main` から JSON を読み込んでランドマーク配列を保持（必要に応じて `private(set) var`）。ビュー間の共有には `@EnvironmentObject`／`.environmentObject` を使用し、`LandmarkList`、`LandmarkDetail`、`ContentView` のプレビューやアプリ本体での注入方法を確認しました。アプリ側では `@StateObject private var modelData = ModelData()` とし、`ContentView` に `.environmentObject(modelData)` を付与して単一インスタンスを全体に渡す流れです。学習の目的は、実装テクニックの「解説」ではなく、チュートリアルを読み進めながら手を動かして理解を深めることにあります。次回は各ランドマークにお気に入りボタンを付ける実装に進みます。